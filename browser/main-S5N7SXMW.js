import{$ as Ol,$a as Ps,A as Ei,Aa as kl,B as Bp,Ba as Av,C as ia,Ca as Xc,D as $n,Da as Yc,E as Hp,Ea as qc,F as cs,Fa as qp,G as yv,Ga as xt,H as Wp,Ha as un,I as Kn,Ia as Zi,J as dn,Ja as Rv,K as Up,Ka as Dv,L as wv,La as Nl,M as xv,Ma as xr,N as Sv,Na as pn,O as Xn,Oa as us,P as Rs,Pa as ra,Q as Yn,Qa as Jt,R as bi,Ra as ei,S as Zt,Sa as Fs,T as $c,Ta as Fv,U as it,Ua as Zp,V as mi,Va as Sr,W as Ev,Wa as na,X as pt,Xa as Gl,Y as zp,Ya as oa,Z as Ve,Za as aa,_ as tt,_a as Ur,a as Xe,aa as or,ab as Ms,b as It,ba as Yi,bb as Zc,ca as vi,cb as Qc,d as S_,da as ri,db as Qp,e as fv,ea as qn,eb as la,f as zn,fa as bv,fb as Jp,g as gv,ga as sa,gb as Qn,h as Uc,ha as Hr,hb as Pv,i as kp,ia as Ds,ib as Vl,j as Np,ja as jp,jb as ha,k as Ot,ka as $p,kb as Mv,l as hs,la as zs,lb as Iv,m as cn,ma as ds,mb as yt,n as Xi,na as Kp,nb as fn,o as ot,oa as Qt,ob as Jc,p as Il,pa as Le,pb as ed,q as Gp,qa as _v,qb as ef,r as mv,ra as Kc,rb as Ov,s as wt,sa as Tv,sb as Lv,t as Vp,ta as Wr,tb as td,u as Us,ua as Zn,ub as id,v as vv,va as Xp,w as jn,wa as Ll,x as zc,xa as qi,y as Cv,ya as st,z as jc,za as Yp}from"./chunk-BGZIOBNH.js";var t0=S_((eS,ku)=>{(function(t,e){typeof ku=="object"&&ku.exports?(e.default=e,ku.exports=t&&t.document?e(t):e):typeof define=="function"&&define.amd?define("highcharts/highcharts",function(){return e(t)}):(t.Highcharts&&t.Highcharts.error(16,!0),t.Highcharts=e(t))})(typeof window<"u"?window:eS,function(t){"use strict";var e={};function i(s,r,n,o){s.hasOwnProperty(r)||(s[r]=o.apply(null,n),typeof CustomEvent=="function"&&t.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:r,module:s[r]}})))}return i(e,"Core/Globals.js",[],function(){var s,r;return(r=s||(s={})).SVG_NS="http://www.w3.org/2000/svg",r.product="Highcharts",r.version="11.4.3",r.win=t!==void 0?t:{},r.doc=r.win.document,r.svg=r.doc&&r.doc.createElementNS&&!!r.doc.createElementNS(r.SVG_NS,"svg").createSVGRect,r.userAgent=r.win.navigator&&r.win.navigator.userAgent||"",r.isChrome=r.userAgent.indexOf("Chrome")!==-1,r.isFirefox=r.userAgent.indexOf("Firefox")!==-1,r.isMS=/(edge|msie|trident)/i.test(r.userAgent)&&!r.win.opera,r.isSafari=!r.isChrome&&r.userAgent.indexOf("Safari")!==-1,r.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(r.userAgent),r.isWebKit=r.userAgent.indexOf("AppleWebKit")!==-1,r.deg2rad=2*Math.PI/360,r.hasBidiBug=r.isFirefox&&4>parseInt(r.userAgent.split("Firefox/")[1],10),r.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],r.noop=function(){},r.supportsPassiveEvents=function(){let n=!1;if(!r.isMS){let o=Object.defineProperty({},"passive",{get:function(){n=!0}});r.win.addEventListener&&r.win.removeEventListener&&(r.win.addEventListener("testPassive",r.noop,o),r.win.removeEventListener("testPassive",r.noop,o))}return n}(),r.charts=[],r.composed=[],r.dateFormats={},r.seriesTypes={},r.symbolSizes={},r.chartCount=0,s}),i(e,"Core/Utilities.js",[e["Core/Globals.js"]],function(s){let r,{charts:n,doc:o,win:a}=s;function l(v,C,D,E){let L=C?"Highcharts error":"Highcharts warning";v===32&&(v=`${L}: Deprecated member`);let G=f(v),Y=G?`${L} #${v}: www.highcharts.com/errors/${v}/`:v.toString();if(E!==void 0){let J="";G&&(Y+="?"),O(E,function(de,b){J+=`
 - ${b}: ${de}`,G&&(Y+=encodeURI(b)+"="+encodeURI(de))}),Y+=J}P(s,"displayError",{chart:D,code:v,message:Y,params:E},function(){if(C)throw Error(Y);a.console&&l.messages.indexOf(Y)===-1&&console.warn(Y)}),l.messages.push(Y)}function h(v,C){return parseInt(v,C||10)}function c(v){return typeof v=="string"}function d(v){let C=Object.prototype.toString.call(v);return C==="[object Array]"||C==="[object Array Iterator]"}function p(v,C){return!!v&&typeof v=="object"&&(!C||!d(v))}function u(v){return p(v)&&typeof v.nodeType=="number"}function m(v){let C=v&&v.constructor;return!!(p(v,!0)&&!u(v)&&C&&C.name&&C.name!=="Object")}function f(v){return typeof v=="number"&&!isNaN(v)&&v<1/0&&v>-1/0}function g(v){return v!=null}function y(v,C,D){let E,L=c(C)&&!g(D),G=(Y,J)=>{g(Y)?v.setAttribute(J,Y):L?(E=v.getAttribute(J))||J!=="class"||(E=v.getAttribute(J+"Name")):v.removeAttribute(J)};return c(C)?G(D,C):O(C,G),E}function x(v){return d(v)?v:[v]}function T(v,C){let D;for(D in v||(v={}),C)v[D]=C[D];return v}function A(){let v=arguments,C=v.length;for(let D=0;D<C;D++){let E=v[D];if(E!=null)return E}}function S(v,C){T(v.style,C)}function M(v){return Math.pow(10,Math.floor(Math.log(v)/Math.LN10))}function B(v,C){return v>1e14?v:parseFloat(v.toPrecision(C||14))}(l||(l={})).messages=[],Math.easeInOutSine=function(v){return-.5*(Math.cos(Math.PI*v)-1)};let j=Array.prototype.find?function(v,C){return v.find(C)}:function(v,C){let D,E=v.length;for(D=0;D<E;D++)if(C(v[D],D))return v[D]};function O(v,C,D){for(let E in v)Object.hasOwnProperty.call(v,E)&&C.call(D||v[E],v[E],E,v)}function _(v,C,D){function E(Y,J){let de=v.removeEventListener;de&&de.call(v,Y,J,!1)}function L(Y){let J,de;v.nodeName&&(C?(J={})[C]=!0:J=Y,O(J,function(b,K){if(Y[K])for(de=Y[K].length;de--;)E(K,Y[K][de].fn)}))}let G=typeof v=="function"&&v.prototype||v;if(Object.hasOwnProperty.call(G,"hcEvents")){let Y=G.hcEvents;if(C){let J=Y[C]||[];D?(Y[C]=J.filter(function(de){return D!==de.fn}),E(C,D)):(L(Y),Y[C]=[])}else L(Y),delete G.hcEvents}}function P(v,C,D,E){if(D=D||{},o.createEvent&&(v.dispatchEvent||v.fireEvent&&v!==s)){let L=o.createEvent("Events");L.initEvent(C,!0,!0),D=T(L,D),v.dispatchEvent?v.dispatchEvent(D):v.fireEvent(C,D)}else if(v.hcEvents){D.target||T(D,{preventDefault:function(){D.defaultPrevented=!0},target:v,type:C});let L=[],G=v,Y=!1;for(;G.hcEvents;)Object.hasOwnProperty.call(G,"hcEvents")&&G.hcEvents[C]&&(L.length&&(Y=!0),L.unshift.apply(L,G.hcEvents[C])),G=Object.getPrototypeOf(G);Y&&L.sort((J,de)=>J.order-de.order),L.forEach(J=>{J.fn.call(v,D)===!1&&D.preventDefault()})}E&&!D.defaultPrevented&&E.call(v,D)}O({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(v,C){s[C]=function(D){return l(32,!1,void 0,{[`Highcharts.${C}`]:`use Array.${v}`}),Array.prototype[v].apply(D,[].slice.call(arguments,1))}});let R=function(){let v=Math.random().toString(36).substring(2,9)+"-",C=0;return function(){return"highcharts-"+(r?"":v)+C++}}();return a.jQuery&&(a.jQuery.fn.highcharts=function(){let v=[].slice.call(arguments);if(this[0])return v[0]?(new s[c(v[0])?v.shift():"Chart"](this[0],v[0],v[1]),this):n[y(this[0],"data-highcharts-chart")]}),{addEvent:function(v,C,D,E={}){let L=typeof v=="function"&&v.prototype||v;Object.hasOwnProperty.call(L,"hcEvents")||(L.hcEvents={});let G=L.hcEvents;s.Point&&v instanceof s.Point&&v.series&&v.series.chart&&(v.series.chart.runTrackerClick=!0);let Y=v.addEventListener;Y&&Y.call(v,C,D,!!s.supportsPassiveEvents&&{passive:E.passive===void 0?C.indexOf("touch")!==-1:E.passive,capture:!1}),G[C]||(G[C]=[]);let J={fn:D,order:typeof E.order=="number"?E.order:1/0};return G[C].push(J),G[C].sort((de,b)=>de.order-b.order),function(){_(v,C,D)}},arrayMax:function(v){let C=v.length,D=v[0];for(;C--;)v[C]>D&&(D=v[C]);return D},arrayMin:function(v){let C=v.length,D=v[0];for(;C--;)v[C]<D&&(D=v[C]);return D},attr:y,clamp:function(v,C,D){return v>C?v<D?v:D:C},clearTimeout:function(v){g(v)&&clearTimeout(v)},correctFloat:B,createElement:function(v,C,D,E,L){let G=o.createElement(v);return C&&T(G,C),L&&S(G,{padding:"0",border:"none",margin:"0"}),D&&S(G,D),E&&E.appendChild(G),G},crisp:(v,C=0,D)=>{let E=C%2/2,L=D?-1:1;return(Math.round(v*L-E)+E)*L},css:S,defined:g,destroyObjectProperties:function(v,C,D){O(v,function(E,L){E!==C&&E?.destroy&&E.destroy(),(E?.destroy||!D)&&delete v[L]})},diffObjects:function(v,C,D,E){let L={};return function G(Y,J,de,b){let K=D?J:Y;O(Y,function(z,W){if(!b&&E&&E.indexOf(W)>-1&&J[W]){z=x(z),de[W]=[];for(let re=0;re<Math.max(z.length,J[W].length);re++)J[W][re]&&(z[re]===void 0?de[W][re]=J[W][re]:(de[W][re]={},G(z[re],J[W][re],de[W][re],b+1)))}else p(z,!0)&&!z.nodeType?(de[W]=d(z)?[]:{},G(z,J[W]||{},de[W],b+1),Object.keys(de[W]).length!==0||W==="colorAxis"&&b===0||delete de[W]):(Y[W]!==J[W]||W in Y&&!(W in J))&&W!=="__proto__"&&W!=="constructor"&&(de[W]=K[W])})}(v,C,L,0),L},discardElement:function(v){v&&v.parentElement&&v.parentElement.removeChild(v)},erase:function(v,C){let D=v.length;for(;D--;)if(v[D]===C){v.splice(D,1);break}},error:l,extend:T,extendClass:function(v,C){let D=function(){};return D.prototype=new v,T(D.prototype,C),D},find:j,fireEvent:P,getClosestDistance:function(v,C){let D,E,L,G,Y=!C;return v.forEach(J=>{if(J.length>1)for(G=E=J.length-1;G>0;G--)(L=J[G]-J[G-1])<0&&!Y?(C?.(),C=void 0):L&&(D===void 0||L<D)&&(D=L)}),D},getMagnitude:M,getNestedProperty:function(v,C){let D=v.split(".");for(;D.length&&g(C);){let E=D.shift();if(E===void 0||E==="__proto__")return;if(E==="this"){let G;return p(C)&&(G=C["@this"]),G??C}let L=C[E];if(!g(L)||typeof L=="function"||typeof L.nodeType=="number"||L===a)return;C=L}return C},getStyle:function v(C,D,E){let L;if(D==="width"){let Y=Math.min(C.offsetWidth,C.scrollWidth),J=C.getBoundingClientRect&&C.getBoundingClientRect().width;return J<Y&&J>=Y-1&&(Y=Math.floor(J)),Math.max(0,Y-(v(C,"padding-left",!0)||0)-(v(C,"padding-right",!0)||0))}if(D==="height")return Math.max(0,Math.min(C.offsetHeight,C.scrollHeight)-(v(C,"padding-top",!0)||0)-(v(C,"padding-bottom",!0)||0));let G=a.getComputedStyle(C,void 0);return G&&(L=G.getPropertyValue(D),A(E,D!=="opacity")&&(L=h(L))),L},inArray:function(v,C,D){return l(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),C.indexOf(v,D)},insertItem:function(v,C){let D,E=v.options.index,L=C.length;for(D=v.options.isInternal?L:0;D<L+1;D++)if(!C[D]||f(E)&&E<A(C[D].options.index,C[D]._i)||C[D].options.isInternal){C.splice(D,0,v);break}return D},isArray:d,isClass:m,isDOMElement:u,isFunction:function(v){return typeof v=="function"},isNumber:f,isObject:p,isString:c,keys:function(v){return l(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(v)},merge:function(){let v,C=arguments,D={},E=function(G,Y){return typeof G!="object"&&(G={}),O(Y,function(J,de){de!=="__proto__"&&de!=="constructor"&&(!p(J,!0)||m(J)||u(J)?G[de]=Y[de]:G[de]=E(G[de]||{},J))}),G};C[0]===!0&&(D=C[1],C=Array.prototype.slice.call(C,2));let L=C.length;for(v=0;v<L;v++)D=E(D,C[v]);return D},normalizeTickInterval:function(v,C,D,E,L){let G,Y=v;D=A(D,M(v));let J=v/D;for(!C&&(C=L?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],E===!1&&(D===1?C=C.filter(function(de){return de%1==0}):D<=.1&&(C=[1/D]))),G=0;G<C.length&&(Y=C[G],(!L||!(Y*D>=v))&&(L||!(J<=(C[G]+(C[G+1]||C[G]))/2)));G++);return B(Y*D,-Math.round(Math.log(.001)/Math.LN10))},objectEach:O,offset:function(v){let C=o.documentElement,D=v.parentElement||v.parentNode?v.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:D.top+(a.pageYOffset||C.scrollTop)-(C.clientTop||0),left:D.left+(a.pageXOffset||C.scrollLeft)-(C.clientLeft||0),width:D.width,height:D.height}},pad:function(v,C,D){return Array((C||2)+1-String(v).replace("-","").length).join(D||"0")+v},pick:A,pInt:h,pushUnique:function(v,C){return 0>v.indexOf(C)&&!!v.push(C)},relativeLength:function(v,C,D){return/%$/.test(v)?C*parseFloat(v)/100+(D||0):parseFloat(v)},removeEvent:_,replaceNested:function(v,...C){let D,E;do for(E of(D=v,C))v=v.replace(E[0],E[1]);while(v!==D);return v},splat:x,stableSort:function(v,C){let D,E,L=v.length;for(E=0;E<L;E++)v[E].safeI=E;for(v.sort(function(G,Y){return(D=C(G,Y))===0?G.safeI-Y.safeI:D}),E=0;E<L;E++)delete v[E].safeI},syncTimeout:function(v,C,D){return C>0?setTimeout(v,C,D):(v.call(0,D),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:R,useSerialIds:function(v){return r=A(v,r)},wrap:function(v,C,D){let E=v[C];v[C]=function(){let L=arguments,G=this;return D.apply(this,[function(){return E.apply(G,arguments.length?arguments:L)}].concat([].slice.call(arguments)))}}}}),i(e,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),i(e,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),i(e,"Core/Time.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r){let{win:n}=s,{defined:o,error:a,extend:l,isNumber:h,isObject:c,merge:d,objectEach:p,pad:u,pick:m,splat:f,timeUnits:g}=r,y=s.isSafari&&n.Intl&&n.Intl.DateTimeFormat.prototype.formatRange,x=s.isSafari&&n.Intl&&!n.Intl.DateTimeFormat.prototype.formatRange;class T{constructor(S){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=n.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(S)}get(S,M){if(this.variableTimezone||this.timezoneOffset){let B=M.getTime(),j=B-this.getTimezoneOffset(M);M.setTime(j);let O=M["getUTC"+S]();return M.setTime(B),O}return this.useUTC?M["getUTC"+S]():M["get"+S]()}set(S,M,B){if(this.variableTimezone||this.timezoneOffset){if(S==="Milliseconds"||S==="Seconds"||S==="Minutes"&&this.getTimezoneOffset(M)%36e5==0)return M["setUTC"+S](B);let j=this.getTimezoneOffset(M),O=M.getTime()-j;M.setTime(O),M["setUTC"+S](B);let _=this.getTimezoneOffset(M);return O=M.getTime()+_,M.setTime(O)}return this.useUTC||y&&S==="FullYear"?M["setUTC"+S](B):M["set"+S](B)}update(S={}){let M=m(S.useUTC,!0);this.options=S=d(!0,this.options,S),this.Date=S.Date||n.Date||Date,this.useUTC=M,this.timezoneOffset=M&&S.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=M&&!!(S.getTimezoneOffset||S.timezone)}makeTime(S,M,B,j,O,_){let P,R,v;return this.useUTC?(P=this.Date.UTC.apply(0,arguments),R=this.getTimezoneOffset(P),P+=R,R!==(v=this.getTimezoneOffset(P))?P+=v-R:R-36e5!==this.getTimezoneOffset(P-36e5)||x||(P-=36e5)):P=new this.Date(S,M,m(B,1),m(j,0),m(O,0),m(_,0)).getTime(),P}timezoneOffsetFunction(){let S=this,M=this.options,B=M.getTimezoneOffset;return this.useUTC?M.timezone?j=>{try{let O=`shortOffset,${M.timezone||""}`,[_,P,R,v,C=0]=(T.formatCache[O]=T.formatCache[O]||Intl.DateTimeFormat("en",{timeZone:M.timezone,timeZoneName:"shortOffset"})).format(j).split(/(GMT|:)/).map(Number),D=-(36e5*(R+C/60));if(h(D))return D}catch{a(34)}return 0}:this.useUTC&&B?j=>6e4*B(j.valueOf()):()=>6e4*(S.timezoneOffset||0):j=>6e4*new Date(j.toString()).getTimezoneOffset()}dateFormat(S,M,B){if(!o(M)||isNaN(M))return s.defaultOptions.lang&&s.defaultOptions.lang.invalidDate||"";S=m(S,"%Y-%m-%d %H:%M:%S");let j=this,O=new this.Date(M),_=this.get("Hours",O),P=this.get("Day",O),R=this.get("Date",O),v=this.get("Month",O),C=this.get("FullYear",O),D=s.defaultOptions.lang,E=D&&D.weekdays,L=D&&D.shortWeekdays;return p(l({a:L?L[P]:E[P].substr(0,3),A:E[P],d:u(R),e:u(R,2," "),w:P,b:D.shortMonths[v],B:D.months[v],m:u(v+1),o:v+1,y:C.toString().substr(2,2),Y:C,H:u(_),k:_,I:u(_%12||12),l:_%12||12,M:u(this.get("Minutes",O)),p:_<12?"AM":"PM",P:_<12?"am":"pm",S:u(this.get("Seconds",O)),L:u(Math.floor(M%1e3),3)},s.dateFormats),function(G,Y){for(;S.indexOf("%"+Y)!==-1;)S=S.replace("%"+Y,typeof G=="function"?G.call(j,M):G)}),B?S.substr(0,1).toUpperCase()+S.substr(1):S}resolveDTLFormat(S){return c(S,!0)?S:{main:(S=f(S))[0],from:S[1],to:S[2]}}getTimeTicks(S,M,B,j){let O,_,P,R,v=this,C=v.Date,D=[],E={},L=new C(M),G=S.unitRange,Y=S.count||1;if(j=m(j,1),o(M)){v.set("Milliseconds",L,G>=g.second?0:Y*Math.floor(v.get("Milliseconds",L)/Y)),G>=g.second&&v.set("Seconds",L,G>=g.minute?0:Y*Math.floor(v.get("Seconds",L)/Y)),G>=g.minute&&v.set("Minutes",L,G>=g.hour?0:Y*Math.floor(v.get("Minutes",L)/Y)),G>=g.hour&&v.set("Hours",L,G>=g.day?0:Y*Math.floor(v.get("Hours",L)/Y)),G>=g.day&&v.set("Date",L,G>=g.month?1:Math.max(1,Y*Math.floor(v.get("Date",L)/Y))),G>=g.month&&(v.set("Month",L,G>=g.year?0:Y*Math.floor(v.get("Month",L)/Y)),_=v.get("FullYear",L)),G>=g.year&&(_-=_%Y,v.set("FullYear",L,_)),G===g.week&&(R=v.get("Day",L),v.set("Date",L,v.get("Date",L)-R+j+(R<j?-7:0))),_=v.get("FullYear",L);let J=v.get("Month",L),de=v.get("Date",L),b=v.get("Hours",L);M=L.getTime(),(v.variableTimezone||!v.useUTC)&&o(B)&&(P=B-M>4*g.month||v.getTimezoneOffset(M)!==v.getTimezoneOffset(B));let K=L.getTime();for(O=1;K<B;)D.push(K),G===g.year?K=v.makeTime(_+O*Y,0):G===g.month?K=v.makeTime(_,J+O*Y):P&&(G===g.day||G===g.week)?K=v.makeTime(_,J,de+O*Y*(G===g.day?1:7)):P&&G===g.hour&&Y>1?K=v.makeTime(_,J,de,b+O*Y):K+=G*Y,O++;D.push(K),G<=g.hour&&D.length<1e4&&D.forEach(function(z){z%18e5==0&&v.dateFormat("%H%M%S%L",z)==="000000000"&&(E[z]="day")})}return D.info=l(S,{higherRanks:E,totalRange:G*Y}),D}getDateFormat(S,M,B,j){let O=this.dateFormat("%m-%d %H:%M:%S.%L",M),_="01-01 00:00:00.000",P={millisecond:15,second:12,minute:9,hour:6,day:3},R="millisecond",v=R;for(R in g){if(S===g.week&&+this.dateFormat("%w",M)===B&&O.substr(6)===_.substr(6)){R="week";break}if(g[R]>S){R=v;break}if(P[R]&&O.substr(P[R])!==_.substr(P[R]))break;R!=="week"&&(v=R)}return this.resolveDTLFormat(j[R]).main}}return T.formatCache={},T}),i(e,"Core/Defaults.js",[e["Core/Chart/ChartDefaults.js"],e["Core/Globals.js"],e["Core/Color/Palettes.js"],e["Core/Time.js"],e["Core/Utilities.js"]],function(s,r,n,o,a){let{isTouchDevice:l}=r,{fireEvent:h,merge:c}=a,d={colors:n.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:s,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:u=>Math.sqrt(1-Math.pow(u-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:l?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};d.chart.styledMode=!1;let p=new o(d.time);return{defaultOptions:d,defaultTime:p,getOptions:function(){return d},setOptions:function(u){return h(r,"setOptions",{options:u}),c(!0,d,u),(u.time||u.global)&&(r.time?r.time.update(c(d.global,d.time,u.global,u.time)):r.time=p),d}}}),i(e,"Core/Color/Color.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r){let{isNumber:n,merge:o,pInt:a}=r;class l{static parse(c){return c?new l(c):l.None}constructor(c){let d,p,u,m;this.rgba=[NaN,NaN,NaN,NaN],this.input=c;let f=s.Color;if(f&&f!==l)return new f(c);if(typeof c=="object"&&c.stops!==void 0)this.stops=c.stops.map(g=>new l(g[1]));else if(typeof c=="string"){if(this.input=c=l.names[c.toLowerCase()]||c,c.charAt(0)==="#"){let g=c.length,y=parseInt(c.substr(1),16);g===7?p=[(16711680&y)>>16,(65280&y)>>8,255&y,1]:g===4&&(p=[(3840&y)>>4|(3840&y)>>8,(240&y)>>4|240&y,(15&y)<<4|15&y,1])}if(!p)for(u=l.parsers.length;u--&&!p;)(d=(m=l.parsers[u]).regex.exec(c))&&(p=m.parse(d))}p&&(this.rgba=p)}get(c){let d=this.input,p=this.rgba;if(typeof d=="object"&&this.stops!==void 0){let u=o(d);return u.stops=[].slice.call(u.stops),this.stops.forEach((m,f)=>{u.stops[f]=[u.stops[f][0],m.get(c)]}),u}return p&&n(p[0])?c!=="rgb"&&(c||p[3]!==1)?c==="a"?`${p[3]}`:"rgba("+p.join(",")+")":"rgb("+p[0]+","+p[1]+","+p[2]+")":d}brighten(c){let d=this.rgba;if(this.stops)this.stops.forEach(function(p){p.brighten(c)});else if(n(c)&&c!==0)for(let p=0;p<3;p++)d[p]+=a(255*c),d[p]<0&&(d[p]=0),d[p]>255&&(d[p]=255);return this}setOpacity(c){return this.rgba[3]=c,this}tweenTo(c,d){let p=this.rgba,u=c.rgba;if(!n(p[0])||!n(u[0]))return c.input||"none";let m=u[3]!==1||p[3]!==1;return(m?"rgba(":"rgb(")+Math.round(u[0]+(p[0]-u[0])*(1-d))+","+Math.round(u[1]+(p[1]-u[1])*(1-d))+","+Math.round(u[2]+(p[2]-u[2])*(1-d))+(m?","+(u[3]+(p[3]-u[3])*(1-d)):"")+")"}}return l.names={white:"#ffffff",black:"#000000"},l.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(h){return[a(h[1]),a(h[2]),a(h[3]),parseFloat(h[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(h){return[a(h[1]),a(h[2]),a(h[3]),1]}}],l.None=new l(""),l}),i(e,"Core/Animation/Fx.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r,n){let{parse:o}=s,{win:a}=r,{isNumber:l,objectEach:h}=n;class c{constructor(p,u,m){this.pos=NaN,this.options=u,this.elem=p,this.prop=m}dSetter(){let p=this.paths,u=p&&p[0],m=p&&p[1],f=this.now||0,g=[];if(f!==1&&u&&m)if(u.length===m.length&&f<1)for(let y=0;y<m.length;y++){let x=u[y],T=m[y],A=[];for(let S=0;S<T.length;S++){let M=x[S],B=T[S];l(M)&&l(B)&&!(T[0]==="A"&&(S===4||S===5))?A[S]=M+f*(B-M):A[S]=B}g.push(A)}else g=m;else g=this.toD||[];this.elem.attr("d",g,void 0,!0)}update(){let p=this.elem,u=this.prop,m=this.now,f=this.options.step;this[u+"Setter"]?this[u+"Setter"]():p.attr?p.element&&p.attr(u,m,null,!0):p.style[u]=m+this.unit,f&&f.call(p,m,this)}run(p,u,m){let f=this,g=f.options,y=function(A){return!y.stopped&&f.step(A)},x=a.requestAnimationFrame||function(A){setTimeout(A,13)},T=function(){for(let A=0;A<c.timers.length;A++)c.timers[A]()||c.timers.splice(A--,1);c.timers.length&&x(T)};p!==u||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=p,this.end=u,this.unit=m,this.now=this.start,this.pos=0,y.elem=this.elem,y.prop=this.prop,y()&&c.timers.push(y)===1&&x(T)):(delete g.curAnim[this.prop],g.complete&&Object.keys(g.curAnim).length===0&&g.complete.call(this.elem))}step(p){let u,m,f=+new Date,g=this.options,y=this.elem,x=g.complete,T=g.duration,A=g.curAnim;return y.attr&&!y.element?u=!1:p||f>=T+this.startTime?(this.now=this.end,this.pos=1,this.update(),A[this.prop]=!0,m=!0,h(A,function(S){S!==!0&&(m=!1)}),m&&x&&x.call(y),u=!1):(this.pos=g.easing((f-this.startTime)/T),this.now=this.start+(this.end-this.start)*this.pos,this.update(),u=!0),u}initPath(p,u,m){let f=p.startX,g=p.endX,y=m.slice(),x=p.isArea,T=x?2:1,A,S,M,B,j=u&&u.slice();if(!j)return[y,y];function O(P,R){for(;P.length<S;){let v=P[0],C=R[S-P.length];if(C&&v[0]==="M"&&(C[0]==="C"?P[0]=["C",v[1],v[2],v[1],v[2],v[1],v[2]]:P[0]=["L",v[1],v[2]]),P.unshift(v),x){let D=P.pop();P.push(P[P.length-1],D)}}}function _(P){for(;P.length<S;){let R=P[Math.floor(P.length/T)-1].slice();if(R[0]==="C"&&(R[1]=R[5],R[2]=R[6]),x){let v=P[Math.floor(P.length/T)].slice();P.splice(P.length/2,0,R,v)}else P.push(R)}}if(f&&g&&g.length){for(M=0;M<f.length;M++){if(f[M]===g[0]){A=M;break}if(f[0]===g[g.length-f.length+M]){A=M,B=!0;break}if(f[f.length-1]===g[g.length-f.length+M]){A=f.length-M;break}}A===void 0&&(j=[])}return j.length&&l(A)&&(S=y.length+A*T,B?(O(j,y),_(y)):(O(y,j),_(j))),[j,y]}fillSetter(){c.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,o(this.start).tweenTo(o(this.end),this.pos),void 0,!0)}}return c.timers=[],c}),i(e,"Core/Animation/AnimationUtilities.js",[e["Core/Animation/Fx.js"],e["Core/Utilities.js"]],function(s,r){let{defined:n,getStyle:o,isArray:a,isNumber:l,isObject:h,merge:c,objectEach:d,pick:p}=r;function u(f){return h(f)?c({duration:500,defer:0},f):{duration:f?500:0,defer:0}}function m(f,g){let y=s.timers.length;for(;y--;)s.timers[y].elem!==f||g&&g!==s.timers[y].prop||(s.timers[y].stopped=!0)}return{animate:function(f,g,y){let x,T="",A,S,M;h(y)||(M=arguments,y={duration:M[2],easing:M[3],complete:M[4]}),l(y.duration)||(y.duration=400),y.easing=typeof y.easing=="function"?y.easing:Math[y.easing]||Math.easeInOutSine,y.curAnim=c(g),d(g,function(B,j){m(f,j),S=new s(f,y,j),A=void 0,j==="d"&&a(g.d)?(S.paths=S.initPath(f,f.pathArray,g.d),S.toD=g.d,x=0,A=1):f.attr?x=f.attr(j):(x=parseFloat(o(f,j))||0,j!=="opacity"&&(T="px")),A||(A=B),typeof A=="string"&&A.match("px")&&(A=A.replace(/px/g,"")),S.run(x,A,T)})},animObject:u,getDeferredAnimation:function(f,g,y){let x=u(g),T=y?[y]:f.series,A=0,S=0;return T.forEach(M=>{let B=u(M.options.animation);A=h(g)&&n(g.defer)?x.defer:Math.max(A,B.duration+B.defer),S=Math.min(x.duration,B.duration)}),f.renderer.forExport&&(A=0),{defer:Math.max(0,A-S),duration:Math.min(A,S)}},setAnimation:function(f,g){g.renderer.globalAnimation=p(f,g.options.chart.animation,!0)},stop:m}}),i(e,"Core/Renderer/HTML/AST.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r){let{SVG_NS:n,win:o}=s,{attr:a,createElement:l,css:h,error:c,isFunction:d,isString:p,objectEach:u,splat:m}=r,{trustedTypes:f}=o,g=f&&d(f.createPolicy)&&f.createPolicy("highcharts",{createHTML:A=>A}),y=g?g.createHTML(""):"",x=function(){try{return!!new DOMParser().parseFromString(y,"text/html")}catch{return!1}}();class T{static filterUserAttributes(S){return u(S,(M,B)=>{let j=!0;T.allowedAttributes.indexOf(B)===-1&&(j=!1),["background","dynsrc","href","lowsrc","src"].indexOf(B)!==-1&&(j=p(M)&&T.allowedReferences.some(O=>M.indexOf(O)===0)),j||(c(33,!1,void 0,{"Invalid attribute in config":`${B}`}),delete S[B]),p(M)&&S[B]&&(S[B]=M.replace(/</g,"&lt;"))}),S}static parseStyle(S){return S.split(";").reduce((M,B)=>{let j=B.split(":").map(_=>_.trim()),O=j.shift();return O&&j.length&&(M[O.replace(/-([a-z])/g,_=>_[1].toUpperCase())]=j.join(":")),M},{})}static setElementHTML(S,M){S.innerHTML=T.emptyHTML,M&&new T(M).addToDOM(S)}constructor(S){this.nodes=typeof S=="string"?this.parseMarkup(S):S}addToDOM(S){return function M(B,j){let O;return m(B).forEach(function(_){let P,R=_.tagName,v=_.textContent?s.doc.createTextNode(_.textContent):void 0,C=T.bypassHTMLFiltering;if(R)if(R==="#text")P=v;else if(T.allowedTags.indexOf(R)!==-1||C){let D=R==="svg"?n:j.namespaceURI||n,E=s.doc.createElementNS(D,R),L=_.attributes||{};u(_,function(G,Y){Y!=="tagName"&&Y!=="attributes"&&Y!=="children"&&Y!=="style"&&Y!=="textContent"&&(L[Y]=G)}),a(E,C?L:T.filterUserAttributes(L)),_.style&&h(E,_.style),v&&E.appendChild(v),M(_.children||[],E),P=E}else c(33,!1,void 0,{"Invalid tagName in config":R});P&&j.appendChild(P),O=P}),O}(this.nodes,S)}parseMarkup(S){let M,B=[];if(S=S.trim().replace(/ style=(["'])/g," data-style=$1"),x)M=new DOMParser().parseFromString(g?g.createHTML(S):S,"text/html");else{let O=l("div");O.innerHTML=S,M={body:O}}let j=(O,_)=>{let P=O.nodeName.toLowerCase(),R={tagName:P};P==="#text"&&(R.textContent=O.textContent||"");let v=O.attributes;if(v){let C={};[].forEach.call(v,D=>{D.name==="data-style"?R.style=T.parseStyle(D.value):C[D.name]=D.value}),R.attributes=C}if(O.childNodes.length){let C=[];[].forEach.call(O.childNodes,D=>{j(D,C)}),C.length&&(R.children=C)}_.push(R)};return[].forEach.call(M.body.childNodes,O=>j(O,B)),B}}return T.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","markerHeight","markerWidth","offset","opacity","orient","padding","paddingLeft","paddingRight","patternUnits","r","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],T.allowedReferences=["https://","http://","mailto:","/","../","./","#"],T.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feDropShadow","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],T.emptyHTML=y,T.bypassHTMLFiltering=!1,T}),i(e,"Core/Templating.js",[e["Core/Defaults.js"],e["Core/Utilities.js"]],function(s,r){let{defaultOptions:n,defaultTime:o}=s,{extend:a,getNestedProperty:l,isArray:h,isNumber:c,isObject:d,pick:p,pInt:u}=r,m={add:(y,x)=>y+x,divide:(y,x)=>x!==0?y/x:"",eq:(y,x)=>y==x,each:function(y){let x=arguments[arguments.length-1];return!!h(y)&&y.map((T,A)=>f(x.body,a(d(T)?T:{"@this":T},{"@index":A,"@first":A===0,"@last":A===y.length-1}))).join("")},ge:(y,x)=>y>=x,gt:(y,x)=>y>x,if:y=>!!y,le:(y,x)=>y<=x,lt:(y,x)=>y<x,multiply:(y,x)=>y*x,ne:(y,x)=>y!=x,subtract:(y,x)=>y-x,unless:y=>!y};function f(y="",x,T){let A=/\{([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= #\(\)]+)\}/g,S=/\(([a-zA-Z0-9\:\.\,;\-\/<>%_@"'= ]+)\)/g,M=[],B=/f$/,j=/\.([0-9])/,O=n.lang,_=T&&T.time||o,P=T&&T.numberFormatter||g,R=(L="")=>{let G;return L==="true"||L!=="false"&&((G=Number(L)).toString()===L?G:l(L,x))},v,C,D=0,E;for(;(v=A.exec(y))!==null;){let L=S.exec(v[1]);L&&(v=L,E=!0),C&&C.isBlock||(C={ctx:x,expression:v[1],find:v[0],isBlock:v[1].charAt(0)==="#",start:v.index,startInner:v.index+v[0].length,length:v[0].length});let G=v[1].split(" ")[0].replace("#","");m[G]&&(C.isBlock&&G===C.fn&&D++,C.fn||(C.fn=G));let Y=v[1]==="else";if(C.isBlock&&C.fn&&(v[1]===`/${C.fn}`||Y))if(D)!Y&&D--;else{let J=C.startInner,de=y.substr(J,v.index-J);C.body===void 0?(C.body=de,C.startInner=v.index+v[0].length):C.elseBody=de,C.find+=de+v[0],Y||(M.push(C),C=void 0)}else C.isBlock||M.push(C);if(L&&!C?.isBlock)break}return M.forEach(L=>{let G,Y,{body:J,elseBody:de,expression:b,fn:K}=L;if(K){let z=[L],W=b.split(" ");for(Y=m[K].length;Y--;)z.unshift(R(W[Y+1]));G=m[K].apply(x,z),L.isBlock&&typeof G=="boolean"&&(G=f(G?J:de,x,T))}else{let z=b.split(":");if(G=R(z.shift()||""),z.length&&typeof G=="number"){let W=z.join(":");if(B.test(W)){let re=parseInt((W.match(j)||["","-1"])[1],10);G!==null&&(G=P(G,re,O.decimalPoint,W.indexOf(",")>-1?O.thousandsSep:""))}else G=_.dateFormat(W,G)}}y=y.replace(L.find,p(G,""))}),E?f(y,x,T):y}function g(y,x,T,A){let S,M;y=+y||0,x=+x;let B=n.lang,j=(y.toString().split(".")[1]||"").split("e")[0].length,O=y.toString().split("e"),_=x;x===-1?x=Math.min(j,20):c(x)?x&&O[1]&&O[1]<0&&((M=x+ +O[1])>=0?(O[0]=(+O[0]).toExponential(M).split("e")[0],x=M):(O[0]=O[0].split(".")[0]||0,y=x<20?(O[0]*Math.pow(10,O[1])).toFixed(x):0,O[1]=0)):x=2;let P=(Math.abs(O[1]?O[0]:y)+Math.pow(10,-Math.max(x,j)-1)).toFixed(x),R=String(u(P)),v=R.length>3?R.length%3:0;return T=p(T,B.decimalPoint),A=p(A,B.thousandsSep),S=(y<0?"-":"")+(v?R.substr(0,v)+A:""),0>+O[1]&&!_?S="0":S+=R.substr(v).replace(/(\d{3})(?=\d)/g,"$1"+A),x?S+=T+P.slice(-x):+S==0&&(S="0"),O[1]&&+S!=0&&(S+="e"+O[1]),S}return{dateFormat:function(y,x,T){return o.dateFormat(y,x,T)},format:f,helpers:m,numberFormat:g}}),i(e,"Core/Renderer/RendererRegistry.js",[e["Core/Globals.js"]],function(s){var r,n;let o;return(n=r||(r={})).rendererTypes={},n.getRendererType=function(a=o){return n.rendererTypes[a]||n.rendererTypes[o]},n.registerRendererType=function(a,l,h){n.rendererTypes[a]=l,(!o||h)&&(o=a,s.Renderer=l)},r}),i(e,"Core/Renderer/RendererUtilities.js",[e["Core/Utilities.js"]],function(s){var r;let{clamp:n,pick:o,pushUnique:a,stableSort:l}=s;return(r||(r={})).distribute=function h(c,d,p){let u=c,m=u.reducedLen||d,f=(R,v)=>R.target-v.target,g=[],y=c.length,x=[],T=g.push,A,S,M,B=!0,j,O,_=0,P;for(A=y;A--;)_+=c[A].size;if(_>m){for(l(c,(R,v)=>(v.rank||0)-(R.rank||0)),M=(P=c[0].rank===c[c.length-1].rank)?y/2:-1,S=P?M:y-1;M&&_>m;)j=c[A=Math.floor(S)],a(x,A)&&(_-=j.size),S+=M,P&&S>=c.length&&(M/=2,S=M);x.sort((R,v)=>v-R).forEach(R=>T.apply(g,c.splice(R,1)))}for(l(c,f),c=c.map(R=>({size:R.size,targets:[R.target],align:o(R.align,.5)}));B;){for(A=c.length;A--;)j=c[A],O=(Math.min.apply(0,j.targets)+Math.max.apply(0,j.targets))/2,j.pos=n(O-j.size*j.align,0,d-j.size);for(A=c.length,B=!1;A--;)A>0&&c[A-1].pos+c[A-1].size>c[A].pos&&(c[A-1].size+=c[A].size,c[A-1].targets=c[A-1].targets.concat(c[A].targets),c[A-1].align=.5,c[A-1].pos+c[A-1].size>d&&(c[A-1].pos=d-c[A-1].size),c.splice(A,1),B=!0)}return T.apply(u,g),A=0,c.some(R=>{let v=0;return(R.targets||[]).some(()=>(u[A].pos=R.pos+v,p!==void 0&&Math.abs(u[A].pos-u[A].target)>p?(u.slice(0,A+1).forEach(C=>delete C.pos),u.reducedLen=(u.reducedLen||d)-.1*d,u.reducedLen>.1*d&&h(u,d,p),!0):(v+=u[A].size,A++,!1)))}),l(u,f),u},r}),i(e,"Core/Renderer/SVG/SVGElement.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r,n,o){let{animate:a,animObject:l,stop:h}=s,{deg2rad:c,doc:d,svg:p,SVG_NS:u,win:m}=n,{addEvent:f,attr:g,createElement:y,crisp:x,css:T,defined:A,erase:S,extend:M,fireEvent:B,isArray:j,isFunction:O,isObject:_,isString:P,merge:R,objectEach:v,pick:C,pInt:D,pushUnique:E,replaceNested:L,syncTimeout:G,uniqueKey:Y}=o;class J{_defaultGetter(b){let K=C(this[b+"Value"],this[b],this.element?this.element.getAttribute(b):null,0);return/^[\-0-9\.]+$/.test(K)&&(K=parseFloat(K)),K}_defaultSetter(b,K,z){z.setAttribute(K,b)}add(b){let K,z=this.renderer,W=this.element;return b&&(this.parentGroup=b),this.textStr!==void 0&&this.element.nodeName==="text"&&z.buildText(this),this.added=!0,(!b||b.handleZ||this.zIndex)&&(K=this.zIndexSetter()),K||(b?b.element:z.box).appendChild(W),this.onAdd&&this.onAdd(),this}addClass(b,K){let z=K?"":this.attr("class")||"";return(b=(b||"").split(/ /g).reduce(function(W,re){return z.indexOf(re)===-1&&W.push(re),W},z?[z]:[]).join(" "))!==z&&this.attr("class",b),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(b,K,z,W=!0){let re,I,k,N,q={},F=this.renderer,H=F.alignedObjects,U=!!b;b?(this.alignOptions=b,this.alignByTranslate=K,this.alignTo=z):(b=this.alignOptions||{},K=this.alignByTranslate,z=this.alignTo);let X=!z||P(z)?z||"renderer":void 0;X&&(U&&E(H,this),z=void 0);let Z=C(z,F[X],F),ee=b.align,ne=b.verticalAlign;return re=(Z.x||0)+(b.x||0),I=(Z.y||0)+(b.y||0),ee==="right"?k=1:ee==="center"&&(k=2),k&&(re+=((Z.width||0)-(b.width||0))/k),q[K?"translateX":"x"]=Math.round(re),ne==="bottom"?N=1:ne==="middle"&&(N=2),N&&(I+=((Z.height||0)-(b.height||0))/N),q[K?"translateY":"y"]=Math.round(I),W&&(this[this.placed?"animate":"attr"](q),this.placed=!0),this.alignAttr=q,this}alignSetter(b){let K={left:"start",center:"middle",right:"end"};K[b]&&(this.alignValue=b,this.element.setAttribute("text-anchor",K[b]))}animate(b,K,z){let W=l(C(K,this.renderer.globalAnimation,!0)),re=W.defer;return d.hidden&&(W.duration=0),W.duration!==0?(z&&(W.complete=z),G(()=>{this.element&&a(this,b,W)},re)):(this.attr(b,void 0,z||W.complete),v(b,function(I,k){W.step&&W.step.call(this,I,{prop:k,pos:1,elem:this})},this)),this}applyTextOutline(b){let K=this.element;b.indexOf("contrast")!==-1&&(b=b.replace(/contrast/g,this.renderer.getContrast(K.style.fill)));let z=b.split(" "),W=z[z.length-1],re=z[0];if(re&&re!=="none"&&n.svg){this.fakeTS=!0,re=re.replace(/(^[\d\.]+)(.*?)$/g,function(F,H,U){return 2*Number(H)+U}),this.removeTextOutline();let I=d.createElementNS(u,"tspan");g(I,{class:"highcharts-text-outline",fill:W,stroke:W,"stroke-width":re,"stroke-linejoin":"round"});let k=K.querySelector("textPath")||K;[].forEach.call(k.childNodes,F=>{let H=F.cloneNode(!0);H.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(U=>H.removeAttribute(U)),I.appendChild(H)});let N=0;[].forEach.call(k.querySelectorAll("text tspan"),F=>{N+=Number(F.getAttribute("dy"))});let q=d.createElementNS(u,"tspan");q.textContent="\u200B",g(q,{x:Number(K.getAttribute("x")),dy:-N}),I.appendChild(q),k.insertBefore(I,k.firstChild)}}attr(b,K,z,W){let{element:re}=this,I=J.symbolCustomAttribs,k,N,q=this,F;return typeof b=="string"&&K!==void 0&&(k=b,(b={})[k]=K),typeof b=="string"?q=(this[b+"Getter"]||this._defaultGetter).call(this,b,re):(v(b,function(H,U){F=!1,W||h(this,U),this.symbolName&&I.indexOf(U)!==-1&&(N||(this.symbolAttr(b),N=!0),F=!0),this.rotation&&(U==="x"||U==="y")&&(this.doTransform=!0),F||(this[U+"Setter"]||this._defaultSetter).call(this,H,U,re)},this),this.afterSetters()),z&&z.call(this),q}clip(b){if(b&&!b.clipPath){let K=Y()+"-",z=this.renderer.createElement("clipPath").attr({id:K}).add(this.renderer.defs);M(b,{clipPath:z,id:K,count:0}),b.add(z)}return this.attr("clip-path",b?`url(${this.renderer.url}#${b.id})`:"none")}crisp(b,K){K=Math.round(K||b.strokeWidth||0);let z=b.x||this.x||0,W=b.y||this.y||0,re=(b.width||this.width||0)+z,I=(b.height||this.height||0)+W,k=x(z,K),N=x(W,K);return M(b,{x:k,y:N,width:x(re,K)-k,height:x(I,K)-N}),A(b.strokeWidth)&&(b.strokeWidth=K),b}complexColor(b,K,z){let W=this.renderer,re,I,k,N,q,F,H,U,X,Z,ee=[],ne;B(this.renderer,"complexColor",{args:arguments},function(){if(b.radialGradient?I="radialGradient":b.linearGradient&&(I="linearGradient"),I){if(k=b[I],q=W.gradients,F=b.stops,X=z.radialReference,j(k)&&(b[I]=k={x1:k[0],y1:k[1],x2:k[2],y2:k[3],gradientUnits:"userSpaceOnUse"}),I==="radialGradient"&&X&&!A(k.gradientUnits)&&(N=k,k=R(k,W.getRadialAttr(X,N),{gradientUnits:"userSpaceOnUse"})),v(k,function(le,ge){ge!=="id"&&ee.push(ge,le)}),v(F,function(le){ee.push(le)}),q[ee=ee.join(",")])Z=q[ee].attr("id");else{k.id=Z=Y();let le=q[ee]=W.createElement(I).attr(k).add(W.defs);le.radAttr=N,le.stops=[],F.forEach(function(ge){ge[1].indexOf("rgba")===0?(H=(re=r.parse(ge[1])).get("rgb"),U=re.get("a")):(H=ge[1],U=1);let xe=W.createElement("stop").attr({offset:ge[0],"stop-color":H,"stop-opacity":U}).add(le);le.stops.push(xe)})}ne="url("+W.url+"#"+Z+")",z.setAttribute(K,ne),z.gradient=ee,b.toString=function(){return ne}}})}css(b){let K=this.styles,z={},W=this.element,re,I=!K;if(K&&v(b,function(k,N){K&&K[N]!==k&&(z[N]=k,I=!0)}),I){K&&(b=M(K,z)),b.width===null||b.width==="auto"?delete this.textWidth:W.nodeName.toLowerCase()==="text"&&b.width&&(re=this.textWidth=D(b.width)),M(this.styles,b),re&&!p&&this.renderer.forExport&&delete b.width;let k=R(b);W.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(N=>k&&delete k[N]),k.color&&(k.fill=k.color)),T(W,k)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),b.textOutline&&this.applyTextOutline(b.textOutline)),this}dashstyleSetter(b){let K,z=this["stroke-width"];if(z==="inherit"&&(z=1),b=b&&b.toLowerCase()){let W=b.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(K=W.length;K--;)W[K]=""+D(W[K])*C(z,NaN);b=W.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",b)}}destroy(){let b=this,K=b.element||{},z=b.renderer,W=K.ownerSVGElement,re=K.nodeName==="SPAN"&&b.parentGroup||void 0,I,k;if(K.onclick=K.onmouseout=K.onmouseover=K.onmousemove=K.point=null,h(b),b.clipPath&&W){let N=b.clipPath;[].forEach.call(W.querySelectorAll("[clip-path],[CLIP-PATH]"),function(q){q.getAttribute("clip-path").indexOf(N.element.id)>-1&&q.removeAttribute("clip-path")}),b.clipPath=N.destroy()}if(b.connector=b.connector?.destroy(),b.stops){for(k=0;k<b.stops.length;k++)b.stops[k].destroy();b.stops.length=0,b.stops=void 0}for(b.safeRemoveChild(K);re&&re.div&&re.div.childNodes.length===0;)I=re.parentGroup,b.safeRemoveChild(re.div),delete re.div,re=I;b.alignOptions&&S(z.alignedObjects,b),v(b,function(N,q){b[q]&&b[q].parentGroup===b&&b[q].destroy&&b[q].destroy(),delete b[q]})}dSetter(b,K,z){j(b)&&(typeof b[0]=="string"&&(b=this.renderer.pathToSegments(b)),this.pathArray=b,b=b.reduce((W,re,I)=>re&&re.join?(I?W+" ":"")+re.join(" "):(re||"").toString(),"")),/(NaN| {2}|^$)/.test(b)&&(b="M 0 0"),this[K]!==b&&(z.setAttribute(K,b),this[K]=b)}fillSetter(b,K,z){typeof b=="string"?z.setAttribute(K,b):b&&this.complexColor(b,K,z)}hrefSetter(b,K,z){z.setAttributeNS("http://www.w3.org/1999/xlink",K,b)}getBBox(b,K){let z,W,re,I,{alignValue:k,element:N,renderer:q,styles:F,textStr:H}=this,{cache:U,cacheKeys:X}=q,Z=N.namespaceURI===this.SVG_NS,ee=C(K,this.rotation,0),ne=q.styledMode?N&&J.prototype.getStyle.call(N,"font-size"):F.fontSize;if(A(H)&&((I=H.toString()).indexOf("<")===-1&&(I=I.replace(/[0-9]/g,"0")),I+=["",q.rootFontSize,ne,ee,this.textWidth,k,F.textOverflow,F.fontWeight].join(",")),I&&!b&&(z=U[I]),!z){if(Z||q.forExport){try{re=this.fakeTS&&function(le){let ge=N.querySelector(".highcharts-text-outline");ge&&T(ge,{display:le})},O(re)&&re("none"),z=N.getBBox?M({},N.getBBox()):{width:N.offsetWidth,height:N.offsetHeight,x:0,y:0},O(re)&&re("")}catch{}(!z||z.width<0)&&(z={x:0,y:0,width:0,height:0})}else z=this.htmlGetBBox();W=z.height,Z&&(z.height=W={"11px,17":14,"13px,20":16}[`${ne||""},${Math.round(W)}`]||W),ee&&(z=this.getRotatedBox(z,ee))}if(I&&(H===""||z.height>0)){for(;X.length>250;)delete U[X.shift()];U[I]||X.push(I),U[I]=z}return z}getRotatedBox(b,K){let{x:z,y:W,width:re,height:I}=b,{alignValue:k,translateY:N,rotationOriginX:q=0,rotationOriginY:F=0}=this,H={right:1,center:.5}[k||0]||0,U=Number(this.element.getAttribute("y")||0)-(N?0:W),X=K*c,Z=(K-90)*c,ee=Math.cos(X),ne=Math.sin(X),le=re*ee,ge=re*ne,xe=Math.cos(Z),Se=Math.sin(Z),[[se,ie],[oe,ce]]=[q,F].map(ut=>[ut-ut*ee,ut*ne]),ve=z+H*(re-le)+se+ce+U*xe,me=ve+le,ye=me-I*xe,we=ye-le,Ee=W+U-H*ge-ie+oe+U*Se,Pe=Ee+ge,Oe=Pe-I*Se,Re=Oe-ge,We=Math.min(ve,me,ye,we),Ze=Math.min(Ee,Pe,Oe,Re),ze=Math.max(ve,me,ye,we)-We,Ge=Math.max(Ee,Pe,Oe,Re)-Ze;return{x:We,y:Ze,width:ze,height:Ge}}getStyle(b){return m.getComputedStyle(this.element||this,"").getPropertyValue(b)}hasClass(b){return(""+this.attr("class")).split(" ").indexOf(b)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(b,K){this.onEvents={},this.opacity=1,this.SVG_NS=u,this.element=K==="span"||K==="body"?y(K):d.createElementNS(this.SVG_NS,K),this.renderer=b,this.styles={},B(this,"afterInit")}on(b,K){let{onEvents:z}=this;return z[b]&&z[b](),z[b]=f(this.element,b,K),this}opacitySetter(b,K,z){let W=Number(Number(b).toFixed(3));this.opacity=W,z.setAttribute(K,W)}reAlign(){this.alignOptions?.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(b){return this.attr("class",(""+this.attr("class")).replace(P(b)?RegExp(`(^| )${b}( |$)`):b," ").replace(/ +/g," ").trim())}removeTextOutline(){let b=this.element.querySelector("tspan.highcharts-text-outline");b&&this.safeRemoveChild(b)}safeRemoveChild(b){let K=b.parentNode;K&&K.removeChild(b)}setRadialReference(b){let K=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=b,K&&K.radAttr&&K.animate(this.renderer.getRadialAttr(b,K.radAttr)),this}setTextPath(b,K){K=R(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},K);let z=this.renderer.url,W=this.text||this,re=W.textPath,{attributes:I,enabled:k}=K;if(b=b||re&&re.path,re&&re.undo(),b&&k){let N=f(W,"afterModifyTree",q=>{if(b&&k){let F=b.attr("id");F||b.attr("id",F=Y());let H={x:0,y:0};A(I.dx)&&(H.dx=I.dx,delete I.dx),A(I.dy)&&(H.dy=I.dy,delete I.dy),W.attr(H),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let U=q.nodes.slice(0);q.nodes.length=0,q.nodes[0]={tagName:"textPath",attributes:M(I,{"text-anchor":I.textAnchor,href:`${z}#${F}`}),children:U}}});W.textPath={path:b,undo:N}}else W.attr({dx:0,dy:0}),delete W.textPath;return this.added&&(W.textCache="",this.renderer.buildText(W)),this}shadow(b){let{renderer:K}=this,z=R(this.parentGroup?.rotation===90?{offsetX:-1,offsetY:-1}:{},_(b)?b:{}),W=K.shadowDefinition(z);return this.attr({filter:b?`url(${K.url}#${W})`:"none"})}show(b=!0){return this.attr({visibility:b?"inherit":"visible"})}"stroke-widthSetter"(b,K,z){this[K]=b,z.setAttribute(K,b)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let b=this.getStyle("stroke-width"),K=0,z;return/px$/.test(b)?K=D(b):b!==""&&(g(z=d.createElementNS(u,"rect"),{width:b,"stroke-width":0}),this.element.parentNode.appendChild(z),K=z.getBBox().width,z.parentNode.removeChild(z)),K}symbolAttr(b){let K=this;J.symbolCustomAttribs.forEach(function(z){K[z]=C(b[z],K[z])}),K.attr({d:K.renderer.symbols[K.symbolName](K.x,K.y,K.width,K.height,K)})}textSetter(b){b!==this.textStr&&(delete this.textPxLength,this.textStr=b,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(b){let K=this.element,z=K.getElementsByTagName("title")[0]||d.createElementNS(this.SVG_NS,"title");K.insertBefore?K.insertBefore(z,K.firstChild):K.appendChild(z),z.textContent=L(C(b,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let b=this.element;return b.parentNode.appendChild(b),this}translate(b,K){return this.attr({translateX:b,translateY:K})}updateTransform(b="transform"){let{element:K,matrix:z,rotation:W=0,rotationOriginX:re,rotationOriginY:I,scaleX:k,scaleY:N,translateX:q=0,translateY:F=0}=this,H=["translate("+q+","+F+")"];A(z)&&H.push("matrix("+z.join(",")+")"),W&&(H.push("rotate("+W+" "+C(re,K.getAttribute("x"),0)+" "+C(I,K.getAttribute("y")||0)+")"),this.text?.element.tagName==="SPAN"&&this.text.attr({rotation:W,rotationOriginX:(re||0)-this.padding,rotationOriginY:(I||0)-this.padding})),(A(k)||A(N))&&H.push("scale("+C(k,1)+" "+C(N,1)+")"),H.length&&!(this.text||this).textPath&&K.setAttribute(b,H.join(" "))}visibilitySetter(b,K,z){b==="inherit"?z.removeAttribute(K):this[K]!==b&&z.setAttribute(K,b),this[K]=b}xGetter(b){return this.element.nodeName==="circle"&&(b==="x"?b="cx":b==="y"&&(b="cy")),this._defaultGetter(b)}zIndexSetter(b,K){let z=this.renderer,W=this.parentGroup,re=(W||z).element||z.box,I=this.element,k=re===z.box,N,q,F,H=!1,U,X=this.added,Z;if(A(b)?(I.setAttribute("data-z-index",b),b=+b,this[K]===b&&(X=!1)):A(this[K])&&I.removeAttribute("data-z-index"),this[K]=b,X){for((b=this.zIndex)&&W&&(W.handleZ=!0),Z=(N=re.childNodes).length-1;Z>=0&&!H;Z--)U=!A(F=(q=N[Z]).getAttribute("data-z-index")),q!==I&&(b<0&&U&&!k&&!Z?(re.insertBefore(I,N[Z]),H=!0):(D(F)<=b||U&&(!A(b)||b>=0))&&(re.insertBefore(I,N[Z+1]),H=!0));H||(re.insertBefore(I,N[k?3:0]),H=!0)}return H}}return J.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],J.prototype.strokeSetter=J.prototype.fillSetter,J.prototype.yGetter=J.prototype.xGetter,J.prototype.matrixSetter=J.prototype.rotationOriginXSetter=J.prototype.rotationOriginYSetter=J.prototype.rotationSetter=J.prototype.scaleXSetter=J.prototype.scaleYSetter=J.prototype.translateXSetter=J.prototype.translateYSetter=J.prototype.verticalAlignSetter=function(de,b){this[b]=de,this.doTransform=!0},J}),i(e,"Core/Renderer/SVG/SVGLabel.js",[e["Core/Renderer/SVG/SVGElement.js"],e["Core/Utilities.js"]],function(s,r){let{defined:n,extend:o,isNumber:a,merge:l,pick:h,removeEvent:c}=r;class d extends s{constructor(u,m,f,g,y,x,T,A,S,M){let B;super(u,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.textStr=m,this.x=f,this.y=g,this.anchorX=x,this.anchorY=T,this.baseline=S,this.className=M,this.addClass(M==="button"?"highcharts-no-tooltip":"highcharts-label"),M&&this.addClass("highcharts-"+M),this.text=u.text(void 0,0,0,A).attr({zIndex:1}),typeof y=="string"&&((B=/^url\((.*?)\)$/.test(y))||this.renderer.symbols[y])&&(this.symbolKey=y),this.bBox=d.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=u.styledMode||B,this.deferredAttr={},this.alignFactor=0}alignSetter(u){let m={left:0,center:.5,right:1}[u];m!==this.alignFactor&&(this.alignFactor=m,this.bBox&&a(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(u,m){this.anchorX=u,this.boxAttr(m,Math.round(u)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(u,m){this.anchorY=u,this.boxAttr(m,u-this.ySetting)}boxAttr(u,m){this.box?this.box.attr(u,m):this.deferredAttr[u]=m}css(u){if(u){let m={};u=l(u),d.textProps.forEach(f=>{u[f]!==void 0&&(m[f]=u[f],delete u[f])}),this.text.css(m),"fontSize"in m||"fontWeight"in m?this.updateTextPadding():("width"in m||"textOverflow"in m)&&this.updateBoxSize()}return s.prototype.css.call(this,u)}destroy(){c(this.element,"mouseenter"),c(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),s.prototype.destroy.call(this)}fillSetter(u,m){u&&(this.needsBox=!0),this.fill=u,this.boxAttr(m,u)}getBBox(u,m){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:f,height:g=0,translateX:y=0,translateY:x=0,width:T=0}=this,A=h(this.paddingLeft,f),S=m??(this.rotation||0),M={width:T,height:g,x:y+this.bBox.x-A,y:x+this.bBox.y-f+this.baselineOffset};return S&&(M=this.getRotatedBox(M,S)),M}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(u){this.heightSetting=u}onAdd(){this.text.add(this),this.attr({text:h(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&n(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(u,m){a(u)?u!==this[m]&&(this[m]=u,this.updateTextPadding()):this[m]=void 0}rSetter(u,m){this.boxAttr(m,u)}strokeSetter(u,m){this.stroke=u,this.boxAttr(m,u)}"stroke-widthSetter"(u,m){u&&(this.needsBox=!0),this["stroke-width"]=u,this.boxAttr(m,u)}"text-alignSetter"(u){this.textAlign=u}textSetter(u){u!==void 0&&this.text.attr({text:u}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let u,m=this.text,f={},g=this.padding,y=this.bBox=(!a(this.widthSetting)||!a(this.heightSetting)||this.textAlign)&&n(m.textStr)?m.getBBox(void 0,0):d.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||y.height||0)+2*g;let x=this.renderer.fontMetrics(m);if(this.baselineOffset=g+Math.min((this.text.firstLineMetrics||x).b,y.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-x.h)/2),this.needsBox&&!m.textPath){if(!this.box){let T=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();T.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),T.add(this)}u=this.getCrispAdjust(),f.x=u,f.y=(this.baseline?-this.baselineOffset:0)+u,f.width=Math.round(this.width),f.height=Math.round(this.height),this.box.attr(o(f,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let u=this.text;if(!u.textPath){this.updateBoxSize();let m=this.baseline?0:this.baselineOffset,f=h(this.paddingLeft,this.padding);n(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(f+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(f!==u.x||m!==u.y)&&(u.attr("x",f),u.hasBoxWidthChanged&&(this.bBox=u.getBBox(!0)),m!==void 0&&u.attr("y",m)),u.x=f,u.y=m}}widthSetter(u){this.widthSetting=a(u)?u:void 0}getPaddedWidth(){let u=this.padding,m=h(this.paddingLeft,u),f=h(this.paddingRight,u);return(this.widthSetting||this.bBox.width||0)+m+f}xSetter(u){this.x=u,this.alignFactor&&(u-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(u),this.attr("translateX",this.xSetting)}ySetter(u){this.ySetting=this.y=Math.round(u),this.attr("translateY",this.ySetting)}}return d.emptyBBox={width:0,height:0,x:0,y:0},d.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],d}),i(e,"Core/Renderer/SVG/Symbols.js",[e["Core/Utilities.js"]],function(s){let{defined:r,isNumber:n,pick:o}=s;function a(c,d,p,u,m){let f=[];if(m){let g=m.start||0,y=o(m.r,p),x=o(m.r,u||p),T=2e-4/Math.max(y,1),A=Math.abs((m.end||0)-g-2*Math.PI)<T,S=(m.end||0)-T,M=m.innerR,B=o(m.open,A),j=Math.cos(g),O=Math.sin(g),_=Math.cos(S),P=Math.sin(S),R=o(m.longArc,S-g-Math.PI<T?0:1),v=["A",y,x,0,R,o(m.clockwise,1),c+y*_,d+x*P];v.params={start:g,end:S,cx:c,cy:d},f.push(["M",c+y*j,d+x*O],v),r(M)&&((v=["A",M,M,0,R,r(m.clockwise)?1-m.clockwise:0,c+M*j,d+M*O]).params={start:S,end:g,cx:c,cy:d},f.push(B?["M",c+M*_,d+M*P]:["L",c+M*_,d+M*P],v)),B||f.push(["Z"])}return f}function l(c,d,p,u,m){return m&&m.r?h(c,d,p,u,m):[["M",c,d],["L",c+p,d],["L",c+p,d+u],["L",c,d+u],["Z"]]}function h(c,d,p,u,m){let f=m?.r||0;return[["M",c+f,d],["L",c+p-f,d],["A",f,f,0,0,1,c+p,d+f],["L",c+p,d+u-f],["A",f,f,0,0,1,c+p-f,d+u],["L",c+f,d+u],["A",f,f,0,0,1,c,d+u-f],["L",c,d+f],["A",f,f,0,0,1,c+f,d],["Z"]]}return{arc:a,callout:function(c,d,p,u,m){let f=Math.min(m&&m.r||0,p,u),g=f+6,y=m&&m.anchorX,x=m&&m.anchorY||0,T=h(c,d,p,u,{r:f});if(!n(y)||y<p&&y>0&&x<u&&x>0)return T;if(c+y>p-g)if(x>d+g&&x<d+u-g)T.splice(3,1,["L",c+p,x-6],["L",c+p+6,x],["L",c+p,x+6],["L",c+p,d+u-f]);else if(y<p){let A=x<d+g,S=A?d:d+u;T.splice(A?2:5,0,["L",y,x],["L",c+p-f,S])}else T.splice(3,1,["L",c+p,u/2],["L",y,x],["L",c+p,u/2],["L",c+p,d+u-f]);else if(c+y<g)if(x>d+g&&x<d+u-g)T.splice(7,1,["L",c,x+6],["L",c-6,x],["L",c,x-6],["L",c,d+f]);else if(y>0){let A=x<d+g,S=A?d:d+u;T.splice(A?1:6,0,["L",y,x],["L",c+f,S])}else T.splice(7,1,["L",c,u/2],["L",y,x],["L",c,u/2],["L",c,d+f]);else x>u&&y<p-g?T.splice(5,1,["L",y+6,d+u],["L",y,d+u+6],["L",y-6,d+u],["L",c+f,d+u]):x<0&&y>g&&T.splice(1,1,["L",y-6,d],["L",y,d-6],["L",y+6,d],["L",p-f,d]);return T},circle:function(c,d,p,u){return a(c+p/2,d+u/2,p/2,u/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(c,d,p,u){return[["M",c+p/2,d],["L",c+p,d+u/2],["L",c+p/2,d+u],["L",c,d+u/2],["Z"]]},rect:l,roundedRect:h,square:l,triangle:function(c,d,p,u){return[["M",c+p/2,d],["L",c+p,d+u],["L",c,d+u],["Z"]]},"triangle-down":function(c,d,p,u){return[["M",c,d],["L",c+p,d],["L",c+p/2,d+u],["Z"]]}}}),i(e,"Core/Renderer/SVG/TextBuilder.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r,n){let{doc:o,SVG_NS:a,win:l}=r,{attr:h,extend:c,fireEvent:d,isString:p,objectEach:u,pick:m}=n;return class{constructor(f){let g=f.styles;this.renderer=f.renderer,this.svgElement=f,this.width=f.textWidth,this.textLineHeight=g&&g.lineHeight,this.textOutline=g&&g.textOutline,this.ellipsis=!!(g&&g.textOverflow==="ellipsis"),this.noWrap=!!(g&&g.whiteSpace==="nowrap")}buildSVG(){let f=this.svgElement,g=f.element,y=f.renderer,x=m(f.textStr,"").toString(),T=x.indexOf("<")!==-1,A=g.childNodes,S=!f.added&&y.box,M=[x,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,f.getStyle("font-size"),this.width].join(",");if(M!==f.textCache){f.textCache=M,delete f.actualWidth;for(let B=A.length;B--;)g.removeChild(A[B]);if(T||this.ellipsis||this.width||f.textPath||x.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(x))){if(x!==""){S&&S.appendChild(g);let B=new s(x);this.modifyTree(B.nodes),B.addToDOM(g),this.modifyDOM(),this.ellipsis&&(g.textContent||"").indexOf("\u2026")!==-1&&f.attr("title",this.unescapeEntities(f.textStr||"",["&lt;","&gt;"])),S&&S.removeChild(g)}}else g.appendChild(o.createTextNode(this.unescapeEntities(x)));p(this.textOutline)&&f.applyTextOutline&&f.applyTextOutline(this.textOutline)}}modifyDOM(){let f,g=this.svgElement,y=h(g.element,"x");for(g.firstLineMetrics=void 0;(f=g.element.firstChild)&&/^[\s\u200B]*$/.test(f.textContent||" ");)g.element.removeChild(f);[].forEach.call(g.element.querySelectorAll("tspan.highcharts-br"),(S,M)=>{S.nextSibling&&S.previousSibling&&(M===0&&S.previousSibling.nodeType===1&&(g.firstLineMetrics=g.renderer.fontMetrics(S.previousSibling)),h(S,{dy:this.getLineHeight(S.nextSibling),x:y}))});let x=this.width||0;if(!x)return;let T=(S,M)=>{let B=S.textContent||"",j=B.replace(/([^\^])-/g,"$1- ").split(" "),O=!this.noWrap&&(j.length>1||g.element.childNodes.length>1),_=this.getLineHeight(M),P=0,R=g.actualWidth;if(this.ellipsis)B&&this.truncate(S,B,void 0,0,Math.max(0,x-.8*_),(v,C)=>v.substring(0,C)+"\u2026");else if(O){let v=[],C=[];for(;M.firstChild&&M.firstChild!==S;)C.push(M.firstChild),M.removeChild(M.firstChild);for(;j.length;)j.length&&!this.noWrap&&P>0&&(v.push(S.textContent||""),S.textContent=j.join(" ").replace(/- /g,"-")),this.truncate(S,void 0,j,P===0&&R||0,x,(D,E)=>j.slice(0,E).join(" ").replace(/- /g,"-")),R=g.actualWidth,P++;C.forEach(D=>{M.insertBefore(D,S)}),v.forEach(D=>{M.insertBefore(o.createTextNode(D),S);let E=o.createElementNS(a,"tspan");E.textContent="\u200B",h(E,{dy:_,x:y}),M.insertBefore(E,S)})}},A=S=>{[].slice.call(S.childNodes).forEach(M=>{M.nodeType===l.Node.TEXT_NODE?T(M,S):(M.className.baseVal.indexOf("highcharts-br")!==-1&&(g.actualWidth=0),A(M))})};A(g.element)}getLineHeight(f){let g=f.nodeType===l.Node.TEXT_NODE?f.parentElement:f;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(g||this.svgElement.element).h}modifyTree(f){let g=(y,x)=>{let{attributes:T={},children:A,style:S={},tagName:M}=y,B=this.renderer.styledMode;if(M==="b"||M==="strong"?B?T.class="highcharts-strong":S.fontWeight="bold":(M==="i"||M==="em")&&(B?T.class="highcharts-emphasized":S.fontStyle="italic"),S&&S.color&&(S.fill=S.color),M==="br"){T.class="highcharts-br",y.textContent="\u200B";let j=f[x+1];j&&j.textContent&&(j.textContent=j.textContent.replace(/^ +/gm,""))}else M==="a"&&A&&A.some(j=>j.tagName==="#text")&&(y.children=[{children:A,tagName:"tspan"}]);M!=="#text"&&M!=="a"&&(y.tagName="tspan"),c(y,{attributes:T,style:S}),A&&A.filter(j=>j.tagName!=="#text").forEach(g)};f.forEach(g),d(this.svgElement,"afterModifyTree",{nodes:f})}truncate(f,g,y,x,T,A){let S,M,B=this.svgElement,{rotation:j}=B,O=[],_=y?1:0,P=(g||y||"").length,R=P,v=function(C,D){let E=D||C,L=f.parentNode;if(L&&O[E]===void 0&&L.getSubStringLength)try{O[E]=x+L.getSubStringLength(0,y?E+1:E)}catch{}return O[E]};if(B.rotation=0,x+(M=v(f.textContent.length))>T){for(;_<=P;)R=Math.ceil((_+P)/2),y&&(S=A(y,R)),M=v(R,S&&S.length-1),_===P?_=P+1:M>T?P=R-1:_=R;P===0?f.textContent="":g&&P===g.length-1||(f.textContent=S||A(g||y,R))}y&&y.splice(0,R),B.actualWidth=M,B.rotation=j}unescapeEntities(f,g){return u(this.renderer.escapes,function(y,x){g&&g.indexOf(y)!==-1||(f=f.toString().replace(RegExp(y,"g"),x))}),f}}}),i(e,"Core/Renderer/SVG/SVGRenderer.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Defaults.js"],e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Renderer/SVG/SVGLabel.js"],e["Core/Renderer/SVG/Symbols.js"],e["Core/Renderer/SVG/TextBuilder.js"],e["Core/Utilities.js"]],function(s,r,n,o,a,l,h,c,d,p){let u,{defaultOptions:m}=r,{charts:f,deg2rad:g,doc:y,isFirefox:x,isMS:T,isWebKit:A,noop:S,SVG_NS:M,symbolSizes:B,win:j}=o,{addEvent:O,attr:_,createElement:P,crisp:R,css:v,defined:C,destroyObjectProperties:D,extend:E,isArray:L,isNumber:G,isObject:Y,isString:J,merge:de,pick:b,pInt:K,replaceNested:z,uniqueKey:W}=p;class re{constructor(k,N,q,F,H,U,X){let Z,ee,ne=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),le=ne.element;X||ne.css(this.getStyle(F||{})),k.appendChild(le),_(k,"dir","ltr"),k.innerHTML.indexOf("xmlns")===-1&&_(le,"xmlns",this.SVG_NS),this.box=le,this.boxWrapper=ne,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(y.createTextNode("Created with Highcharts 11.4.3")),this.defs=this.createElement("defs").add(),this.allowHTML=U,this.forExport=H,this.styledMode=X,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=ne.getStyle("font-size"),this.setSize(N,q,!1),x&&k.getBoundingClientRect&&((Z=function(){v(k,{left:0,top:0}),ee=k.getBoundingClientRect(),v(k,{left:Math.ceil(ee.left)-ee.left+"px",top:Math.ceil(ee.top)-ee.top+"px"})})(),this.unSubPixelFix=O(j,"resize",Z))}definition(k){return new s([k]).addToDOM(this.defs.element)}getReferenceURL(){if((x||A)&&y.getElementsByTagName("base").length){if(!C(u)){let k=W(),N=new s([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:k},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${k})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(y.body);v(N,{position:"fixed",top:0,left:0,zIndex:9e5});let q=y.elementFromPoint(6,6);u=(q&&q.id)==="hitme",y.body.removeChild(N)}if(u)return z(j.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(k){return this.style=E({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},k),this.style}setStyle(k){this.boxWrapper.css(this.getStyle(k))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let k=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),D(this.gradients||{}),this.gradients=null,this.defs=k.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(k){return new this.Element(this,k)}getRadialAttr(k,N){return{cx:k[0]-k[2]/2+(N.cx||0)*k[2],cy:k[1]-k[2]/2+(N.cy||0)*k[2],r:(N.r||0)*k[2]}}shadowDefinition(k){let N=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(k).map(F=>`${F}-${k[F]}`)].join("-").toLowerCase().replace(/[^a-z0-9\-]/g,""),q=de({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},k);return this.defs.element.querySelector(`#${N}`)||this.definition({tagName:"filter",attributes:{id:N,filterUnits:q.filterUnits},children:[{tagName:"feDropShadow",attributes:{dx:q.offsetX,dy:q.offsetY,"flood-color":q.color,"flood-opacity":Math.min(5*q.opacity,1),stdDeviation:q.width/2}}]}),N}buildText(k){new d(k).buildSVG()}getContrast(k){let N=n.parse(k).rgba.map(F=>{let H=F/255;return H<=.03928?H/12.92:Math.pow((H+.055)/1.055,2.4)}),q=.2126*N[0]+.7152*N[1]+.0722*N[2];return 1.05/(q+.05)>(q+.05)/.05?"#FFFFFF":"#000000"}button(k,N,q,F,H={},U,X,Z,ee,ne){let le=this.label(k,N,q,ee,void 0,void 0,ne,void 0,"button"),ge=this.styledMode,xe=arguments,Se=0;H=de(m.global.buttonTheme,H),ge&&(delete H.fill,delete H.stroke,delete H["stroke-width"]);let se=H.states||{},ie=H.style||{};delete H.states,delete H.style;let oe=[s.filterUserAttributes(H)],ce=[ie];return ge||["hover","select","disabled"].forEach((ve,me)=>{oe.push(de(oe[0],s.filterUserAttributes(xe[me+5]||se[ve]||{}))),ce.push(oe[me+1].style),delete oe[me+1].style}),O(le.element,T?"mouseover":"mouseenter",function(){Se!==3&&le.setState(1)}),O(le.element,T?"mouseout":"mouseleave",function(){Se!==3&&le.setState(Se)}),le.setState=(ve=0)=>{if(ve!==1&&(le.state=Se=ve),le.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][ve]),!ge){le.attr(oe[ve]);let me=ce[ve];Y(me)&&le.css(me)}},le.attr(oe[0]),!ge&&(le.css(E({cursor:"default"},ie)),ne&&le.text.css({pointerEvents:"none"})),le.on("touchstart",ve=>ve.stopPropagation()).on("click",function(ve){Se!==3&&F.call(le,ve)})}crispLine(k,N){let[q,F]=k;return C(q[1])&&q[1]===F[1]&&(q[1]=F[1]=R(q[1],N)),C(q[2])&&q[2]===F[2]&&(q[2]=F[2]=R(q[2],N)),k}path(k){let N=this.styledMode?{}:{fill:"none"};return L(k)?N.d=k:Y(k)&&E(N,k),this.createElement("path").attr(N)}circle(k,N,q){let F=Y(k)?k:k===void 0?{}:{x:k,y:N,r:q},H=this.createElement("circle");return H.xSetter=H.ySetter=function(U,X,Z){Z.setAttribute("c"+X,U)},H.attr(F)}arc(k,N,q,F,H,U){let X;Y(k)?(N=(X=k).y,q=X.r,F=X.innerR,H=X.start,U=X.end,k=X.x):X={innerR:F,start:H,end:U};let Z=this.symbol("arc",k,N,q,q,X);return Z.r=q,Z}rect(k,N,q,F,H,U){let X=Y(k)?k:k===void 0?{}:{x:k,y:N,r:H,width:Math.max(q||0,0),height:Math.max(F||0,0)},Z=this.createElement("rect");return this.styledMode||(U!==void 0&&(X["stroke-width"]=U,E(X,Z.crisp(X))),X.fill="none"),Z.rSetter=function(ee,ne,le){Z.r=ee,_(le,{rx:ee,ry:ee})},Z.rGetter=function(){return Z.r||0},Z.attr(X)}roundedRect(k){return this.symbol("roundedRect").attr(k)}setSize(k,N,q){this.width=k,this.height=N,this.boxWrapper.animate({width:k,height:N},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:b(q,!0)?void 0:0}),this.alignElements()}g(k){let N=this.createElement("g");return k?N.attr({class:"highcharts-"+k}):N}image(k,N,q,F,H,U){let X={preserveAspectRatio:"none"};G(N)&&(X.x=N),G(q)&&(X.y=q),G(F)&&(X.width=F),G(H)&&(X.height=H);let Z=this.createElement("image").attr(X),ee=function(ne){Z.attr({href:k}),U.call(Z,ne)};if(U){Z.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let ne=new j.Image;O(ne,"load",ee),ne.src=k,ne.complete&&ee({})}else Z.attr({href:k});return Z}symbol(k,N,q,F,H,U){let X,Z,ee,ne,le=this,ge=/^url\((.*?)\)$/,xe=ge.test(k),Se=!xe&&(this.symbols[k]?k:"circle"),se=Se&&this.symbols[Se];if(se)typeof N=="number"&&(Z=se.call(this.symbols,N||0,q||0,F||0,H||0,U)),X=this.path(Z),le.styledMode||X.attr("fill","none"),E(X,{symbolName:Se||void 0,x:N,y:q,width:F,height:H}),U&&E(X,U);else if(xe){ee=k.match(ge)[1];let ie=X=this.image(ee);ie.imgwidth=b(U&&U.width,B[ee]&&B[ee].width),ie.imgheight=b(U&&U.height,B[ee]&&B[ee].height),ne=oe=>oe.attr({width:oe.width,height:oe.height}),["width","height"].forEach(oe=>{ie[`${oe}Setter`]=function(ce,ve){this[ve]=ce;let{alignByTranslate:me,element:ye,width:we,height:Ee,imgwidth:Pe,imgheight:Oe}=this,Re=ve==="width"?Pe:Oe,We=1;U&&U.backgroundSize==="within"&&we&&Ee&&Pe&&Oe?(We=Math.min(we/Pe,Ee/Oe),_(ye,{width:Math.round(Pe*We),height:Math.round(Oe*We)})):ye&&Re&&ye.setAttribute(ve,Re),!me&&Pe&&Oe&&this.translate(((we||0)-Pe*We)/2,((Ee||0)-Oe*We)/2)}}),C(N)&&ie.attr({x:N,y:q}),ie.isImg=!0,C(ie.imgwidth)&&C(ie.imgheight)?ne(ie):(ie.attr({width:0,height:0}),P("img",{onload:function(){let oe=f[le.chartIndex];this.width===0&&(v(this,{position:"absolute",top:"-999em"}),y.body.appendChild(this)),B[ee]={width:this.width,height:this.height},ie.imgwidth=this.width,ie.imgheight=this.height,ie.element&&ne(ie),this.parentNode&&this.parentNode.removeChild(this),le.imgCount--,le.imgCount||!oe||oe.hasLoaded||oe.onload()},src:ee}),this.imgCount++)}return X}clipRect(k,N,q,F){return this.rect(k,N,q,F,0)}text(k,N,q,F){let H={};if(F&&(this.allowHTML||!this.forExport))return this.html(k,N,q);H.x=Math.round(N||0),q&&(H.y=Math.round(q)),C(k)&&(H.text=k);let U=this.createElement("text").attr(H);return F&&(!this.forExport||this.allowHTML)||(U.xSetter=function(X,Z,ee){let ne=ee.getElementsByTagName("tspan"),le=ee.getAttribute(Z);for(let ge=0,xe;ge<ne.length;ge++)(xe=ne[ge]).getAttribute(Z)===le&&xe.setAttribute(Z,X);ee.setAttribute(Z,X)}),U}fontMetrics(k){let N=K(l.prototype.getStyle.call(k,"font-size")||0),q=N<24?N+3:Math.round(1.2*N),F=Math.round(.8*q);return{h:q,b:F,f:N}}rotCorr(k,N,q){let F=k;return N&&q&&(F=Math.max(F*Math.cos(N*g),4)),{x:-k/3*Math.sin(N*g),y:F}}pathToSegments(k){let N=[],q=[],F={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let H=0;H<k.length;H++)J(q[0])&&G(k[H])&&q.length===F[q[0].toUpperCase()]&&k.splice(H,0,q[0].replace("M","L").replace("m","l")),typeof k[H]=="string"&&(q.length&&N.push(q.slice(0)),q.length=0),q.push(k[H]);return N.push(q.slice(0)),N}label(k,N,q,F,H,U,X,Z,ee){return new h(this,k,N,q,F,H,U,X,Z,ee)}alignElements(){this.alignedObjects.forEach(k=>k.align())}}return E(re.prototype,{Element:l,SVG_NS:M,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:c,draw:S}),a.registerRendererType("svg",re,!0),re}),i(e,"Core/Renderer/HTML/HTMLElement.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Globals.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Utilities.js"]],function(s,r,n,o){let{composed:a}=r,{attr:l,css:h,createElement:c,defined:d,extend:p,pInt:u,pushUnique:m}=o;function f(T,A,S){let M=this.div?.style||S.style;n.prototype[`${A}Setter`].call(this,T,A,S),M&&(M[A]=T)}let g=(T,A)=>{if(!T.div){let S=l(T.element,"class"),M=T.css,B=c("div",S?{className:S}:void 0,It(Xe({position:"absolute",left:`${T.translateX||0}px`,top:`${T.translateY||0}px`},T.styles),{display:T.display,opacity:T.opacity,visibility:T.visibility}),T.parentGroup?.div||A);T.classSetter=(j,O,_)=>{_.setAttribute("class",j),B.className=j},T.translateXSetter=T.translateYSetter=(j,O)=>{T[O]=j,B.style[O==="translateX"?"left":"top"]=`${j}px`,T.doTransform=!0},T.opacitySetter=T.visibilitySetter=f,T.css=j=>(M.call(T,j),j.cursor&&(B.style.cursor=j.cursor),j.pointerEvents&&(B.style.pointerEvents=j.pointerEvents),T),T.on=function(){return n.prototype.on.apply({element:B,onEvents:T.onEvents},arguments),T},T.div=B}return T.div};class y extends n{static compose(A){m(a,this.compose)&&(A.prototype.html=function(S,M,B){return new y(this,"span").attr({text:S,x:Math.round(M),y:Math.round(B)})})}constructor(A,S){super(A,S),this.css(Xe({position:"absolute"},A.styledMode?{}:{fontFamily:A.style.fontFamily,fontSize:A.style.fontSize})),this.element.style.whiteSpace="nowrap"}getSpanCorrection(A,S,M){this.xCorr=-A*M,this.yCorr=-S}css(A){let S,{element:M}=this,B=M.tagName==="SPAN"&&A&&"width"in A,j=B&&A.width;return B&&(delete A.width,this.textWidth=u(j)||void 0,S=!0),A?.textOverflow==="ellipsis"&&(A.whiteSpace="nowrap",A.overflow="hidden"),p(this.styles,A),h(M,A),S&&this.updateTransform(),this}htmlGetBBox(){let{element:A}=this;return{x:A.offsetLeft,y:A.offsetTop,width:A.offsetWidth,height:A.offsetHeight}}updateTransform(){if(!this.added){this.alignOnAdd=!0;return}let{element:A,renderer:S,rotation:M,rotationOriginX:B,rotationOriginY:j,styles:O,textAlign:_="left",textWidth:P,translateX:R=0,translateY:v=0,x:C=0,y:D=0}=this,E=O.whiteSpace;if(h(A,{marginLeft:`${R}px`,marginTop:`${v}px`}),A.tagName==="SPAN"){let L=[M,_,A.innerHTML,P,this.textAlign].join(","),G=-(this.parentGroup?.padding*1)||0,Y,J=!1;if(P!==this.oldTextWidth){let W=this.textPxLength?this.textPxLength:(h(A,{width:"",whiteSpace:E||"nowrap"}),A.offsetWidth),re=P||0;(re>this.oldTextWidth||W>re)&&(/[ \-]/.test(A.textContent||A.innerText)||A.style.textOverflow==="ellipsis")&&(h(A,{width:W>re||M?P+"px":"auto",display:"block",whiteSpace:E||"normal"}),this.oldTextWidth=P,J=!0)}this.hasBoxWidthChanged=J,L!==this.cTT&&(Y=S.fontMetrics(A).b,d(M)&&(M!==(this.oldRotation||0)||_!==this.oldAlign)&&this.setSpanRotation(M,G,G),this.getSpanCorrection(!d(M)&&this.textPxLength||A.offsetWidth,Y,{left:0,center:.5,right:1}[_]));let{xCorr:de=0,yCorr:b=0}=this,K=(B??C)-de-C-G,z=(j??D)-b-D-G;h(A,{left:`${C+de}px`,top:`${D+b}px`,transformOrigin:`${K}px ${z}px`}),this.cTT=L,this.oldRotation=M,this.oldAlign=_}}setSpanRotation(A,S,M){h(this.element,{transform:`rotate(${A}deg)`,transformOrigin:`${S}% ${M}px`})}add(A){let S,M=this.renderer.box.parentNode,B=[];if(this.parentGroup=A,A&&!(S=A.div)){let j=A;for(;j;)B.push(j),j=j.parentGroup;for(let O of B.reverse())S=g(O,M)}return(S||M).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(A){A!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,s.setElementHTML(this.element,A??""),this.textStr=A,this.doTransform=!0)}alignSetter(A){this.alignValue=this.textAlign=A,this.doTransform=!0}xSetter(A,S){this[S]=A,this.doTransform=!0}}let x=y.prototype;return x.visibilitySetter=x.opacitySetter=f,x.ySetter=x.rotationSetter=x.rotationOriginXSetter=x.rotationOriginYSetter=x.xSetter,y}),i(e,"Core/Axis/AxisDefaults.js",[],function(){var s,r;return(r=s||(s={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},r.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:n}=this.axis.chart;return n(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},s}),i(e,"Core/Foundation.js",[e["Core/Utilities.js"]],function(s){var r;let{addEvent:n,isFunction:o,objectEach:a,removeEvent:l}=s;return(r||(r={})).registerEventOptions=function(h,c){h.eventOptions=h.eventOptions||{},a(c.events,function(d,p){h.eventOptions[p]!==d&&(h.eventOptions[p]&&(l(h,p,h.eventOptions[p]),delete h.eventOptions[p]),o(d)&&(h.eventOptions[p]=d,n(h,p,d,{order:0})))})},r}),i(e,"Core/Axis/Tick.js",[e["Core/Templating.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r,n){let{deg2rad:o}=r,{clamp:a,correctFloat:l,defined:h,destroyObjectProperties:c,extend:d,fireEvent:p,isNumber:u,merge:m,objectEach:f,pick:g}=n;return class{constructor(y,x,T,A,S){this.isNew=!0,this.isNewLabel=!0,this.axis=y,this.pos=x,this.type=T||"",this.parameters=S||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,p(this,"init"),T||A||this.addLabel()}addLabel(){let y=this,x=y.axis,T=x.options,A=x.chart,S=x.categories,M=x.logarithmic,B=x.names,j=y.pos,O=g(y.options&&y.options.labels,T.labels),_=x.tickPositions,P=j===_[0],R=j===_[_.length-1],v=(!O.step||O.step===1)&&x.tickInterval===1,C=_.info,D=y.label,E,L,G,Y=this.parameters.category||(S?g(S[j],B[j],j):j);M&&u(Y)&&(Y=l(M.lin2log(Y))),x.dateTime&&(C?E=(L=A.time.resolveDTLFormat(T.dateTimeLabelFormats[!T.grid&&C.higherRanks[j]||C.unitName])).main:u(Y)&&(E=x.dateTime.getXDateFormat(Y,T.dateTimeLabelFormats||{}))),y.isFirst=P,y.isLast=R;let J={axis:x,chart:A,dateTimeLabelFormat:E,isFirst:P,isLast:R,pos:j,tick:y,tickPositionInfo:C,value:Y};p(this,"labelFormat",J);let de=z=>O.formatter?O.formatter.call(z,z):O.format?(z.text=x.defaultLabelFormatter.call(z),s.format(O.format,z,A)):x.defaultLabelFormatter.call(z),b=de.call(J,J),K=L&&L.list;K?y.shortenLabel=function(){for(G=0;G<K.length;G++)if(d(J,{dateTimeLabelFormat:K[G]}),D.attr({text:de.call(J,J)}),D.getBBox().width<x.getSlotWidth(y)-2*(O.padding||0))return;D.attr({text:""})}:y.shortenLabel=void 0,v&&x._addedPlotLB&&y.moveLabel(b,O),h(D)||y.movedLabel?D&&D.textStr!==b&&!v&&(!D.textWidth||O.style.width||D.styles.width||D.css({width:null}),D.attr({text:b}),D.textPxLength=D.getBBox().width):(y.label=D=y.createLabel(b,O),y.rotation=0)}createLabel(y,x,T){let A=this.axis,S=A.chart,M=h(y)&&x.enabled?S.renderer.text(y,T?.x,T?.y,x.useHTML).add(A.labelGroup):void 0;return M&&(S.styledMode||M.css(m(x.style)),M.textPxLength=M.getBBox().width),M}destroy(){c(this,this.axis)}getPosition(y,x,T,A){let S=this.axis,M=S.chart,B=A&&M.oldChartHeight||M.chartHeight,j={x:y?l(S.translate(x+T,void 0,void 0,A)+S.transB):S.left+S.offset+(S.opposite?(A&&M.oldChartWidth||M.chartWidth)-S.right-S.left:0),y:y?B-S.bottom+S.offset-(S.opposite?S.height:0):l(B-S.translate(x+T,void 0,void 0,A)-S.transB)};return j.y=a(j.y,-1e5,1e5),p(this,"afterGetPosition",{pos:j}),j}getLabelPosition(y,x,T,A,S,M,B,j){let O,_,P=this.axis,R=P.transA,v=P.isLinked&&P.linkedParent?P.linkedParent.reversed:P.reversed,C=P.staggerLines,D=P.tickRotCorr||{x:0,y:0},E=A||P.reserveSpaceDefault?0:-P.labelOffset*(P.labelAlign==="center"?.5:1),L=S.distance,G={};return O=P.side===0?T.rotation?-L:-T.getBBox().height:P.side===2?D.y+L:Math.cos(T.rotation*o)*(D.y-T.getBBox(!1,0).height/2),h(S.y)&&(O=P.side===0&&P.horiz?S.y+O:S.y),y=y+g(S.x,[0,1,0,-1][P.side]*L)+E+D.x-(M&&A?M*R*(v?-1:1):0),x=x+O-(M&&!A?M*R*(v?1:-1):0),C&&(_=B/(j||1)%C,P.opposite&&(_=C-_-1),x+=P.labelOffset/C*_),G.x=y,G.y=Math.round(x),p(this,"afterGetLabelPosition",{pos:G,tickmarkOffset:M,index:B}),G}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(y,x,T,A,S=!1,M){return M.crispLine([["M",y,x],["L",y+(S?0:-T),x+(S?T:0)]],A)}handleOverflow(y){let x=this.axis,T=x.options.labels,A=y.x,S=x.chart.chartWidth,M=x.chart.spacing,B=g(x.labelLeft,Math.min(x.pos,M[3])),j=g(x.labelRight,Math.max(x.isRadial?0:x.pos+x.len,S-M[1])),O=this.label,_=this.rotation,P={left:0,center:.5,right:1}[x.labelAlign||O.attr("align")],R=O.getBBox().width,v=x.getSlotWidth(this),C={},D=v,E=1,L,G,Y;_||T.overflow!=="justify"?_<0&&A-P*R<B?Y=Math.round(A/Math.cos(_*o)-B):_>0&&A+P*R>j&&(Y=Math.round((S-A)/Math.cos(_*o))):(L=A-P*R,G=A+(1-P)*R,L<B?D=y.x+D*(1-P)-B:G>j&&(D=j-y.x+D*P,E=-1),(D=Math.min(v,D))<v&&x.labelAlign==="center"&&(y.x+=E*(v-D-P*(v-Math.min(R,D)))),(R>D||x.autoRotation&&(O.styles||{}).width)&&(Y=D)),Y&&(this.shortenLabel?this.shortenLabel():(C.width=Math.floor(Y)+"px",(T.style||{}).textOverflow||(C.textOverflow="ellipsis"),O.css(C)))}moveLabel(y,x){let T=this,A=T.label,S=T.axis,M=!1,B;A&&A.textStr===y?(T.movedLabel=A,M=!0,delete T.label):f(S.ticks,function(j){M||j.isNew||j===T||!j.label||j.label.textStr!==y||(T.movedLabel=j.label,M=!0,j.labelPos=T.movedLabel.xy,delete j.label)}),!M&&(T.labelPos||A)&&(B=T.labelPos||A.xy,T.movedLabel=T.createLabel(y,x,B),T.movedLabel&&T.movedLabel.attr({opacity:0}))}render(y,x,T){let A=this.axis,S=A.horiz,M=this.pos,B=g(this.tickmarkOffset,A.tickmarkOffset),j=this.getPosition(S,M,B,x),O=j.x,_=j.y,P=A.pos,R=P+A.len,v=S?O:_;!A.chart.polar&&this.isNew&&(l(v)<P||v>R)&&(T=0);let C=g(T,this.label&&this.label.newOpacity,1);T=g(T,1),this.isActive=!0,this.renderGridLine(x,T),this.renderMark(j,T),this.renderLabel(j,x,C,y),this.isNew=!1,p(this,"afterRender")}renderGridLine(y,x){let T=this.axis,A=T.options,S={},M=this.pos,B=this.type,j=g(this.tickmarkOffset,T.tickmarkOffset),O=T.chart.renderer,_=this.gridLine,P,R=A.gridLineWidth,v=A.gridLineColor,C=A.gridLineDashStyle;this.type==="minor"&&(R=A.minorGridLineWidth,v=A.minorGridLineColor,C=A.minorGridLineDashStyle),_||(T.chart.styledMode||(S.stroke=v,S["stroke-width"]=R||0,S.dashstyle=C),B||(S.zIndex=1),y&&(x=0),this.gridLine=_=O.path().attr(S).addClass("highcharts-"+(B?B+"-":"")+"grid-line").add(T.gridGroup)),_&&(P=T.getPlotLinePath({value:M+j,lineWidth:_.strokeWidth(),force:"pass",old:y,acrossPanes:!1}))&&_[y||this.isNew?"attr":"animate"]({d:P,opacity:x})}renderMark(y,x){let T=this.axis,A=T.options,S=T.chart.renderer,M=this.type,B=T.tickSize(M?M+"Tick":"tick"),j=y.x,O=y.y,_=g(A[M!=="minor"?"tickWidth":"minorTickWidth"],!M&&T.isXAxis?1:0),P=A[M!=="minor"?"tickColor":"minorTickColor"],R=this.mark,v=!R;B&&(T.opposite&&(B[0]=-B[0]),R||(this.mark=R=S.path().addClass("highcharts-"+(M?M+"-":"")+"tick").add(T.axisGroup),T.chart.styledMode||R.attr({stroke:P,"stroke-width":_})),R[v?"attr":"animate"]({d:this.getMarkPath(j,O,B[0],R.strokeWidth(),T.horiz,S),opacity:x}))}renderLabel(y,x,T,A){let S=this.axis,M=S.horiz,B=S.options,j=this.label,O=B.labels,_=O.step,P=g(this.tickmarkOffset,S.tickmarkOffset),R=y.x,v=y.y,C=!0;j&&u(R)&&(j.xy=y=this.getLabelPosition(R,v,j,M,O,P,A,_),(!this.isFirst||this.isLast||B.showFirstLabel)&&(!this.isLast||this.isFirst||B.showLastLabel)?!M||O.step||O.rotation||x||T===0||this.handleOverflow(y):C=!1,_&&A%_&&(C=!1),C&&u(y.y)?(y.opacity=T,j[this.isNewLabel?"attr":"animate"](y).show(!0),this.isNewLabel=!1):(j.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let y=this.label,x=this.axis;y&&!this.isNew&&(y.animate({opacity:0},void 0,y.destroy),delete this.label),x.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),i(e,"Core/Axis/Axis.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Axis/AxisDefaults.js"],e["Core/Color/Color.js"],e["Core/Defaults.js"],e["Core/Foundation.js"],e["Core/Globals.js"],e["Core/Axis/Tick.js"],e["Core/Utilities.js"]],function(s,r,n,o,a,l,h,c){let{animObject:d}=s,{xAxis:p,yAxis:u}=r,{defaultOptions:m}=o,{registerEventOptions:f}=a,{deg2rad:g}=l,{arrayMax:y,arrayMin:x,clamp:T,correctFloat:A,defined:S,destroyObjectProperties:M,erase:B,error:j,extend:O,fireEvent:_,getClosestDistance:P,insertItem:R,isArray:v,isNumber:C,isString:D,merge:E,normalizeTickInterval:L,objectEach:G,pick:Y,relativeLength:J,removeEvent:de,splat:b,syncTimeout:K}=c,z=(re,I)=>L(I,void 0,void 0,Y(re.options.allowDecimals,I<.5||re.tickAmount!==void 0),!!re.tickAmount);O(m,{xAxis:p,yAxis:E(p,u)});class W{constructor(I,k,N){this.init(I,k,N)}init(I,k,N=this.coll){let q=N==="xAxis",F=this.isZAxis||(I.inverted?!q:q);this.chart=I,this.horiz=F,this.isXAxis=q,this.coll=N,_(this,"init",{userOptions:k}),this.opposite=Y(k.opposite,this.opposite),this.side=Y(k.side,this.side,F?this.opposite?0:2:this.opposite?1:3),this.setOptions(k);let H=this.options,U=H.labels,X=H.type;this.userOptions=k,this.minPixelPadding=0,this.reversed=Y(H.reversed,this.reversed),this.visible=H.visible,this.zoomEnabled=H.zoomEnabled,this.hasNames=X==="category"||H.categories===!0,this.categories=v(H.categories)&&H.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=S(H.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=H.minRange||H.maxZoom,this.range=H.range,this.offset=H.offset||0,this.max=void 0,this.min=void 0;let Z=Y(H.crosshair,b(I.options.tooltip.crosshairs)[q?0:1]);this.crosshair=Z===!0?{}:Z,I.axes.indexOf(this)===-1&&(q?I.axes.splice(I.xAxis.length,0,this):I.axes.push(this),R(this,I[this.coll])),I.orderItems(this.coll),this.series=this.series||[],I.inverted&&!this.isZAxis&&q&&!S(this.reversed)&&(this.reversed=!0),this.labelRotation=C(U.rotation)?U.rotation:void 0,f(this,H),_(this,"afterInit")}setOptions(I){let k=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=E(k,m[this.coll],I),_(this,"afterSetOptions",{userOptions:I})}defaultLabelFormatter(){let I=this.axis,{numberFormatter:k}=this.chart,N=C(this.value)?this.value:NaN,q=I.chart.time,F=I.categories,H=this.dateTimeLabelFormat,U=m.lang,X=U.numericSymbols,Z=U.numericSymbolMagnitude||1e3,ee=I.logarithmic?Math.abs(N):I.tickInterval,ne=X&&X.length,le,ge;if(F)ge=`${this.value}`;else if(H)ge=q.dateFormat(H,N);else if(ne&&X&&ee>=1e3)for(;ne--&&ge===void 0;)ee>=(le=Math.pow(Z,ne+1))&&10*N%le==0&&X[ne]!==null&&N!==0&&(ge=k(N/le,-1)+X[ne]);return ge===void 0&&(ge=Math.abs(N)>=1e4?k(N,-1):k(N,-1,void 0,"")),ge}getSeriesExtremes(){let I,k=this;_(this,"getSeriesExtremes",null,function(){k.hasVisibleSeries=!1,k.dataMin=k.dataMax=k.threshold=void 0,k.softThreshold=!k.isXAxis,k.series.forEach(N=>{if(N.reserveSpace()){let q=N.options,F,H=q.threshold,U,X;if(k.hasVisibleSeries=!0,k.positiveValuesOnly&&0>=(H||0)&&(H=void 0),k.isXAxis)(F=N.xData)&&F.length&&(F=k.logarithmic?F.filter(Z=>Z>0):F,U=(I=N.getXExtremes(F)).min,X=I.max,C(U)||U instanceof Date||(F=F.filter(C),U=(I=N.getXExtremes(F)).min,X=I.max),F.length&&(k.dataMin=Math.min(Y(k.dataMin,U),U),k.dataMax=Math.max(Y(k.dataMax,X),X)));else{let Z=N.applyExtremes();C(Z.dataMin)&&(U=Z.dataMin,k.dataMin=Math.min(Y(k.dataMin,U),U)),C(Z.dataMax)&&(X=Z.dataMax,k.dataMax=Math.max(Y(k.dataMax,X),X)),S(H)&&(k.threshold=H),(!q.softThreshold||k.positiveValuesOnly)&&(k.softThreshold=!1)}}})}),_(this,"afterGetSeriesExtremes")}translate(I,k,N,q,F,H){let U=this.linkedParent||this,X=q&&U.old?U.old.min:U.min;if(!C(X))return NaN;let Z=U.minPixelPadding,ee=(U.isOrdinal||U.brokenAxis?.hasBreaks||U.logarithmic&&F)&&U.lin2val,ne=1,le=0,ge=q&&U.old?U.old.transA:U.transA,xe=0;return ge||(ge=U.transA),N&&(ne*=-1,le=U.len),U.reversed&&(ne*=-1,le-=ne*(U.sector||U.len)),k?(xe=(I=I*ne+le-Z)/ge+X,ee&&(xe=U.lin2val(xe))):(ee&&(I=U.val2lin(I)),xe=ne*(I-X)*ge+le+ne*Z+(C(H)?ge*H:0),U.isRadial||(xe=A(xe))),xe}toPixels(I,k){return this.translate(I,!1,!this.horiz,void 0,!0)+(k?0:this.pos)}toValue(I,k){return this.translate(I-(k?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(I){let k=this,N=k.chart,q=k.left,F=k.top,H=I.old,U=I.value,X=I.lineWidth,Z=H&&N.oldChartHeight||N.chartHeight,ee=H&&N.oldChartWidth||N.chartWidth,ne=k.transB,le=I.translatedValue,ge=I.force,xe,Se,se,ie,oe;function ce(me,ye,we){return ge!=="pass"&&(me<ye||me>we)&&(ge?me=T(me,ye,we):oe=!0),me}let ve={value:U,lineWidth:X,old:H,force:ge,acrossPanes:I.acrossPanes,translatedValue:le};return _(this,"getPlotLinePath",ve,function(me){xe=se=(le=T(le=Y(le,k.translate(U,void 0,void 0,H)),-1e5,1e5))+ne,Se=ie=Z-le-ne,C(le)?k.horiz?(Se=F,ie=Z-k.bottom+(N.scrollablePixelsY||0),xe=se=ce(xe,q,q+k.width)):(xe=q,se=ee-k.right+(N.scrollablePixelsX||0),Se=ie=ce(Se,F,F+k.height)):(oe=!0,ge=!1),me.path=oe&&!ge?void 0:N.renderer.crispLine([["M",xe,Se],["L",se,ie]],X||1)}),ve.path}getLinearTickPositions(I,k,N){let q,F,H,U=A(Math.floor(k/I)*I),X=A(Math.ceil(N/I)*I),Z=[];if(A(U+I)===U&&(H=20),this.single)return[k];for(q=U;q<=X&&(Z.push(q),(q=A(q+I,H))!==F);)F=q;return Z}getMinorTickInterval(){let{minorTicks:I,minorTickInterval:k}=this.options;return I===!0?Y(k,"auto"):I!==!1?k:void 0}getMinorTickPositions(){let I=this.options,k=this.tickPositions,N=this.minorTickInterval,q=this.pointRangePadding||0,F=(this.min||0)-q,H=(this.max||0)+q,U=H-F,X=[],Z;if(U&&U/N<this.len/3){let ee=this.logarithmic;if(ee)this.paddedTicks.forEach(function(ne,le,ge){le&&X.push.apply(X,ee.getLogTickPositions(N,ge[le-1],ge[le],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")X=X.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(N),F,H,I.startOfWeek));else for(Z=F+(k[0]-F)%N;Z<=H&&Z!==X[0];Z+=N)X.push(Z)}return X.length!==0&&this.trimTicks(X),X}adjustForMinRange(){let I=this.options,k=this.logarithmic,{max:N,min:q,minRange:F}=this,H,U,X,Z;this.isXAxis&&F===void 0&&!k&&(F=S(I.min)||S(I.max)||S(I.floor)||S(I.ceiling)?null:Math.min(5*(P(this.series.map(ee=>(ee.xIncrement?ee.xData?.slice(0,2):ee.xData)||[]))||0),this.dataMax-this.dataMin)),C(N)&&C(q)&&C(F)&&N-q<F&&(U=this.dataMax-this.dataMin>=F,H=(F-N+q)/2,X=[q-H,Y(I.min,q-H)],U&&(X[2]=k?k.log2lin(this.dataMin):this.dataMin),Z=[(q=y(X))+F,Y(I.max,q+F)],U&&(Z[2]=k?k.log2lin(this.dataMax):this.dataMax),(N=x(Z))-q<F&&(X[0]=N-F,X[1]=Y(I.min,N-F),q=y(X))),this.minRange=F,this.min=q,this.max=N}getClosest(){let I,k;if(this.categories)k=1;else{let N=[];this.series.forEach(function(q){let F=q.closestPointRange;q.xData?.length===1?N.push(q.xData[0]):!q.noSharedTooltip&&S(F)&&q.reserveSpace()&&(k=S(k)?Math.min(k,F):F)}),N.length&&(N.sort((q,F)=>q-F),I=P([N]))}return I&&k?Math.min(I,k):I||k}nameToX(I){let k=v(this.options.categories),N=k?this.categories:this.names,q=I.options.x,F;return I.series.requireSorting=!1,S(q)||(q=this.options.uniqueNames&&N?k?N.indexOf(I.name):Y(N.keys[I.name],-1):I.series.autoIncrement()),q===-1?!k&&N&&(F=N.length):F=q,F!==void 0?(this.names[F]=I.name,this.names.keys[I.name]=F):I.x&&(F=I.x),F}updateNames(){let I=this,k=this.names;k.length>0&&(Object.keys(k.keys).forEach(function(N){delete k.keys[N]}),k.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(N=>{N.xIncrement=null,(!N.points||N.isDirtyData)&&(I.max=Math.max(I.max,N.xData.length-1),N.processData(),N.generatePoints()),N.data.forEach(function(q,F){let H;q?.options&&q.name!==void 0&&(H=I.nameToX(q))!==void 0&&H!==q.x&&(q.x=H,N.xData[F]=H)})}))}setAxisTranslation(){let I=this,k=I.max-I.min,N=I.linkedParent,q=!!I.categories,F=I.isXAxis,H=I.axisPointRange||0,U,X=0,Z=0,ee,ne=I.transA;(F||q||H)&&(U=I.getClosest(),N?(X=N.minPointOffset,Z=N.pointRangePadding):I.series.forEach(function(le){let ge=q?1:F?Y(le.options.pointRange,U,0):I.axisPointRange||0,xe=le.options.pointPlacement;if(H=Math.max(H,ge),!I.single||q){let Se=le.is("xrange")?!F:F;X=Math.max(X,Se&&D(xe)?0:ge/2),Z=Math.max(Z,Se&&xe==="on"?0:ge)}}),ee=I.ordinal&&I.ordinal.slope&&U?I.ordinal.slope/U:1,I.minPointOffset=X*=ee,I.pointRangePadding=Z*=ee,I.pointRange=Math.min(H,I.single&&q?1:k),F&&U&&(I.closestPointRange=U)),I.translationSlope=I.transA=ne=I.staticScale||I.len/(k+Z||1),I.transB=I.horiz?I.left:I.bottom,I.minPixelPadding=ne*X,_(this,"afterSetAxisTranslation")}minFromRange(){let{max:I,min:k}=this;return C(I)&&C(k)&&I-k||void 0}setTickInterval(I){let{categories:k,chart:N,dataMax:q,dataMin:F,dateTime:H,isXAxis:U,logarithmic:X,options:Z,softThreshold:ee}=this,ne=C(this.threshold)?this.threshold:void 0,le=this.minRange||0,{ceiling:ge,floor:xe,linkedTo:Se,softMax:se,softMin:ie}=Z,oe=C(Se)&&N[this.coll]?.[Se],ce=Z.tickPixelInterval,ve=Z.maxPadding,me=Z.minPadding,ye=0,we,Ee=C(Z.tickInterval)&&Z.tickInterval>=0?Z.tickInterval:void 0,Pe,Oe,Re,We;if(H||k||oe||this.getTickAmount(),Re=Y(this.userMin,Z.min),We=Y(this.userMax,Z.max),oe?(this.linkedParent=oe,we=oe.getExtremes(),this.min=Y(we.min,we.dataMin),this.max=Y(we.max,we.dataMax),Z.type!==oe.options.type&&j(11,!0,N)):(ee&&S(ne)&&C(q)&&C(F)&&(F>=ne?(Pe=ne,me=0):q<=ne&&(Oe=ne,ve=0)),this.min=Y(Re,Pe,F),this.max=Y(We,Oe,q)),C(this.max)&&C(this.min)&&(X&&(this.positiveValuesOnly&&!I&&0>=Math.min(this.min,Y(F,this.min))&&j(10,!0,N),this.min=A(X.log2lin(this.min),16),this.max=A(X.log2lin(this.max),16)),this.range&&C(F)&&(this.userMin=this.min=Re=Math.max(F,this.minFromRange()||0),this.userMax=We=this.max,this.range=void 0)),_(this,"foundExtremes"),this.adjustForMinRange(),C(this.min)&&C(this.max)){if(!C(this.userMin)&&C(ie)&&ie<this.min&&(this.min=Re=ie),!C(this.userMax)&&C(se)&&se>this.max&&(this.max=We=se),k||this.axisPointRange||this.stacking?.usePercentage||oe||!(ye=this.max-this.min)||(!S(Re)&&me&&(this.min-=ye*me),S(We)||!ve||(this.max+=ye*ve)),!C(this.userMin)&&C(xe)&&(this.min=Math.max(this.min,xe)),!C(this.userMax)&&C(ge)&&(this.max=Math.min(this.max,ge)),ee&&C(F)&&C(q)){let ze=ne||0;!S(Re)&&this.min<ze&&F>=ze?this.min=Z.minRange?Math.min(ze,this.max-le):ze:!S(We)&&this.max>ze&&q<=ze&&(this.max=Z.minRange?Math.max(ze,this.min+le):ze)}!N.polar&&this.min>this.max&&(S(Z.min)?this.max=this.min:S(Z.max)&&(this.min=this.max)),ye=this.max-this.min}if(this.min!==this.max&&C(this.min)&&C(this.max)?oe&&!Ee&&ce===oe.options.tickPixelInterval?this.tickInterval=Ee=oe.tickInterval:this.tickInterval=Y(Ee,this.tickAmount?ye/Math.max(this.tickAmount-1,1):void 0,k?1:ye*ce/Math.max(this.len,ce)):this.tickInterval=1,U&&!I){let ze=this.min!==this.old?.min||this.max!==this.old?.max;this.series.forEach(function(Ge){Ge.forceCrop=Ge.forceCropping?.(),Ge.processData(ze)}),_(this,"postProcessData",{hasExtremesChanged:ze})}this.setAxisTranslation(),_(this,"initialAxisTranslation"),this.pointRange&&!Ee&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let Ze=Y(Z.minTickInterval,H&&!this.series.some(ze=>ze.noSharedTooltip)?this.closestPointRange:0);!Ee&&this.tickInterval<Ze&&(this.tickInterval=Ze),H||X||Ee||(this.tickInterval=z(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let I=this.options,k=I.tickPositions,N=I.tickPositioner,q=this.getMinorTickInterval(),F=!this.isPanning,H=F&&I.startOnTick,U=F&&I.endOnTick,X=[],Z;if(this.tickmarkOffset=this.categories&&I.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.minorTickInterval=q==="auto"&&this.tickInterval?this.tickInterval/I.minorTicksPerMajor:q,this.single=this.min===this.max&&S(this.min)&&!this.tickAmount&&(this.min%1==0||I.allowDecimals!==!1),k)X=k.slice();else if(C(this.min)&&C(this.max)){if(!this.ordinal?.positions&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))X=[this.min,this.max],j(19,!1,this.chart);else if(this.dateTime)X=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,I.units),this.min,this.max,I.startOfWeek,this.ordinal?.positions,this.closestPointRange,!0);else if(this.logarithmic)X=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let ee=this.tickInterval,ne=ee;for(;ne<=2*ee&&(X=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&X.length>this.tickAmount);)this.tickInterval=z(this,ne*=1.1)}X.length>this.len&&(X=[X[0],X[X.length-1]])[0]===X[1]&&(X.length=1),N&&(this.tickPositions=X,(Z=N.apply(this,[this.min,this.max]))&&(X=Z))}this.tickPositions=X,this.paddedTicks=X.slice(0),this.trimTicks(X,H,U),!this.isLinked&&C(this.min)&&C(this.max)&&(this.single&&X.length<2&&!this.categories&&!this.series.some(ee=>ee.is("heatmap")&&ee.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),k||Z||this.adjustTickAmount()),_(this,"afterSetTickPositions")}trimTicks(I,k,N){let q=I[0],F=I[I.length-1],H=!this.isOrdinal&&this.minPointOffset||0;if(_(this,"trimTicks"),!this.isLinked){if(k&&q!==-1/0)this.min=q;else for(;this.min-H>I[0];)I.shift();if(N)this.max=F;else for(;this.max+H<I[I.length-1];)I.pop();I.length===0&&S(q)&&!this.options.tickPositions&&I.push((F+q)/2)}}alignToOthers(){let I,k=this,N=k.chart,q=[this],F=k.options,H=N.options.chart,U=this.coll==="yAxis"&&H.alignThresholds,X=[];if(k.thresholdAlignment=void 0,(H.alignTicks!==!1&&F.alignTicks||U)&&F.startOnTick!==!1&&F.endOnTick!==!1&&!k.logarithmic){let Z=ne=>{let{horiz:le,options:ge}=ne;return[le?ge.left:ge.top,ge.width,ge.height,ge.pane].join(",")},ee=Z(this);N[this.coll].forEach(function(ne){let{series:le}=ne;le.length&&le.some(ge=>ge.visible)&&ne!==k&&Z(ne)===ee&&(I=!0,q.push(ne))})}if(I&&U){q.forEach(ee=>{let ne=ee.getThresholdAlignment(k);C(ne)&&X.push(ne)});let Z=X.length>1?X.reduce((ee,ne)=>ee+=ne,0)/X.length:void 0;q.forEach(ee=>{ee.thresholdAlignment=Z})}return I}getThresholdAlignment(I){if((!C(this.dataMin)||this!==I&&this.series.some(k=>k.isDirty||k.isDirtyData))&&this.getSeriesExtremes(),C(this.threshold)){let k=T((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(k=1-k),k}}getTickAmount(){let I=this.options,k=I.tickPixelInterval,N=I.tickAmount;S(I.tickInterval)||N||!(this.len<k)||this.isRadial||this.logarithmic||!I.startOnTick||!I.endOnTick||(N=2),!N&&this.alignToOthers()&&(N=Math.ceil(this.len/k)+1),N<4&&(this.finalTickAmt=N,N=5),this.tickAmount=N}adjustTickAmount(){let I=this,{finalTickAmt:k,max:N,min:q,options:F,tickPositions:H,tickAmount:U,thresholdAlignment:X}=I,Z=H?.length,ee=Y(I.threshold,I.softThreshold?0:null),ne,le,ge=I.tickInterval,xe,Se=()=>H.push(A(H[H.length-1]+ge)),se=()=>H.unshift(A(H[0]-ge));if(C(X)&&(xe=X<.5?Math.ceil(X*(U-1)):Math.floor(X*(U-1)),F.reversed&&(xe=U-1-xe)),I.hasData()&&C(q)&&C(N)){let ie=()=>{I.transA*=(Z-1)/(U-1),I.min=F.startOnTick?H[0]:Math.min(q,H[0]),I.max=F.endOnTick?H[H.length-1]:Math.max(N,H[H.length-1])};if(C(xe)&&C(I.threshold)){for(;H[xe]!==ee||H.length!==U||H[0]>q||H[H.length-1]<N;){for(H.length=0,H.push(I.threshold);H.length<U;)H[xe]===void 0||H[xe]>I.threshold?se():Se();if(ge>8*I.tickInterval)break;ge*=2}ie()}else if(Z<U){for(;H.length<U;)H.length%2||q===ee?Se():se();ie()}if(S(k)){for(le=ne=H.length;le--;)(k===3&&le%2==1||k<=2&&le>0&&le<ne-1)&&H.splice(le,1);I.finalTickAmt=void 0}}}setScale(){let{coll:I,stacking:k}=this,N=!1,q=!1;this.series.forEach(H=>{N=N||H.isDirtyData||H.isDirty,q=q||H.xAxis&&H.xAxis.isDirty||!1}),this.setAxisSize();let F=this.len!==(this.old&&this.old.len);F||N||q||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(k&&I==="yAxis"&&k.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),k&&I==="xAxis"&&k.buildStacks(),this.isDirty||(this.isDirty=F||this.min!==this.old?.min||this.max!==this.old?.max)):k&&k.cleanStacks(),N&&delete this.allExtremes,_(this,"afterSetScale")}setExtremes(I,k,N=!0,q,F){this.series.forEach(H=>{delete H.kdTree}),_(this,"setExtremes",F=O(F,{min:I,max:k}),H=>{this.userMin=H.min,this.userMax=H.max,this.eventArgs=H,N&&this.chart.redraw(q)})}setAxisSize(){let I=this.chart,k=this.options,N=k.offsets||[0,0,0,0],q=this.horiz,F=this.width=Math.round(J(Y(k.width,I.plotWidth-N[3]+N[1]),I.plotWidth)),H=this.height=Math.round(J(Y(k.height,I.plotHeight-N[0]+N[2]),I.plotHeight)),U=this.top=Math.round(J(Y(k.top,I.plotTop+N[0]),I.plotHeight,I.plotTop)),X=this.left=Math.round(J(Y(k.left,I.plotLeft+N[3]),I.plotWidth,I.plotLeft));this.bottom=I.chartHeight-H-U,this.right=I.chartWidth-F-X,this.len=Math.max(q?F:H,0),this.pos=q?X:U}getExtremes(){let I=this.logarithmic;return{min:I?A(I.lin2log(this.min)):this.min,max:I?A(I.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(I){let k=this.logarithmic,N=k?k.lin2log(this.min):this.min,q=k?k.lin2log(this.max):this.max;return I===null||I===-1/0?I=N:I===1/0?I=q:N>I?I=N:q<I&&(I=q),this.translate(I,0,1,0,1)}autoLabelAlign(I){let k=(Y(I,0)-90*this.side+720)%360,N={align:"center"};return _(this,"autoLabelAlign",N,function(q){k>15&&k<165?q.align="right":k>195&&k<345&&(q.align="left")}),N.align}tickSize(I){let k=this.options,N=Y(k[I==="tick"?"tickWidth":"minorTickWidth"],I==="tick"&&this.isXAxis&&!this.categories?1:0),q=k[I==="tick"?"tickLength":"minorTickLength"],F;N&&q&&(k[I+"Position"]==="inside"&&(q=-q),F=[q,N]);let H={tickSize:F};return _(this,"afterTickSize",H),H.tickSize}labelMetrics(){let I=this.chart.renderer,k=this.ticks,N=k[Object.keys(k)[0]]||{};return this.chart.renderer.fontMetrics(N.label||N.movedLabel||I.box)}unsquish(){let I=this.options.labels,k=I.padding||0,N=this.horiz,q=this.tickInterval,F=this.len/(((this.categories?1:0)+this.max-this.min)/q),H=I.rotation,U=A(.8*this.labelMetrics().h),X=Math.max(this.max-this.min,0),Z=function(xe){let Se=(xe+2*k)/(F||1);return(Se=Se>1?Math.ceil(Se):1)*q>X&&xe!==1/0&&F!==1/0&&X&&(Se=Math.ceil(X/q)),A(Se*q)},ee=q,ne,le=Number.MAX_VALUE,ge;if(N){if(!I.staggerLines&&(C(H)?ge=[H]:F<I.autoRotationLimit&&(ge=I.autoRotation)),ge){let xe,Se;for(let se of ge)(se===H||se&&se>=-90&&se<=90)&&(Se=(xe=Z(Math.abs(U/Math.sin(g*se))))+Math.abs(se/360))<le&&(le=Se,ne=se,ee=xe)}}else ee=Z(.75*U);return this.autoRotation=ge,this.labelRotation=Y(ne,C(H)?H:0),I.step?q:ee}getSlotWidth(I){let k=this.chart,N=this.horiz,q=this.options.labels,F=Math.max(this.tickPositions.length-(this.categories?0:1),1),H=k.margin[3];if(I&&C(I.slotWidth))return I.slotWidth;if(N&&q.step<2)return q.rotation?0:(this.staggerLines||1)*this.len/F;if(!N){let U=q.style.width;if(U!==void 0)return parseInt(String(U),10);if(H)return H-k.spacing[3]}return .33*k.chartWidth}renderUnsquish(){let I=this.chart,k=I.renderer,N=this.tickPositions,q=this.ticks,F=this.options.labels,H=F.style,U=this.horiz,X=this.getSlotWidth(),Z=Math.max(1,Math.round(X-(U?2*(F.padding||0):F.distance||0))),ee={},ne=this.labelMetrics(),le=H.textOverflow,ge,xe,Se=0,se,ie;if(D(F.rotation)||(ee.rotation=F.rotation||0),N.forEach(function(oe){let ce=q[oe];ce.movedLabel&&ce.replaceMovedLabel(),ce&&ce.label&&ce.label.textPxLength>Se&&(Se=ce.label.textPxLength)}),this.maxLabelLength=Se,this.autoRotation)Se>Z&&Se>ne.h?ee.rotation=this.labelRotation:this.labelRotation=0;else if(X&&(ge=Z,!le))for(xe="clip",ie=N.length;!U&&ie--;)(se=q[N[ie]].label)&&(se.styles.textOverflow==="ellipsis"?se.css({textOverflow:"clip"}):se.textPxLength>X&&se.css({width:X+"px"}),se.getBBox().height>this.len/N.length-(ne.h-ne.f)&&(se.specificTextOverflow="ellipsis"));ee.rotation&&(ge=Se>.5*I.chartHeight?.33*I.chartHeight:Se,le||(xe="ellipsis")),this.labelAlign=F.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(ee.align=this.labelAlign),N.forEach(function(oe){let ce=q[oe],ve=ce&&ce.label,me=H.width,ye={};ve&&(ve.attr(ee),ce.shortenLabel?ce.shortenLabel():ge&&!me&&H.whiteSpace!=="nowrap"&&(ge<ve.textPxLength||ve.element.tagName==="SPAN")?(ye.width=ge+"px",le||(ye.textOverflow=ve.specificTextOverflow||xe),ve.css(ye)):!ve.styles.width||ye.width||me||ve.css({width:null}),delete ve.specificTextOverflow,ce.rotation=ee.rotation)},this),this.tickRotCorr=k.rotCorr(ne.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(I){return I.hasData()})||this.options.showEmpty&&S(this.min)&&S(this.max)}addTitle(I){let k,N=this.chart.renderer,q=this.horiz,F=this.opposite,H=this.options.title,U=this.chart.styledMode;this.axisTitle||((k=H.textAlign)||(k=(q?{low:"left",middle:"center",high:"right"}:{low:F?"right":"left",middle:"center",high:F?"left":"right"})[H.align]),this.axisTitle=N.text(H.text||"",0,0,H.useHTML).attr({zIndex:7,rotation:H.rotation||0,align:k}).addClass("highcharts-axis-title"),U||this.axisTitle.css(E(H.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),U||H.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[I?"show":"hide"](I)}generateTick(I){let k=this.ticks;k[I]?k[I].addLabel():k[I]=new h(this,I)}createGroups(){let{axisParent:I,chart:k,coll:N,options:q}=this,F=k.renderer,H=(U,X,Z)=>F.g(U).attr({zIndex:Z}).addClass(`highcharts-${N.toLowerCase()}${X} `+(this.isRadial?`highcharts-radial-axis${X} `:"")+(q.className||"")).add(I);this.axisGroup||(this.gridGroup=H("grid","-grid",q.gridZIndex),this.axisGroup=H("axis","",q.zIndex),this.labelGroup=H("axis-labels","-labels",q.labels.zIndex))}getOffset(){let I=this,{chart:k,horiz:N,options:q,side:F,ticks:H,tickPositions:U,coll:X}=I,Z=k.inverted&&!I.isZAxis?[1,0,3,2][F]:F,ee=I.hasData(),ne=q.title,le=q.labels,ge=C(q.crossing),xe=k.axisOffset,Se=k.clipOffset,se=[-1,1,1,-1][F],ie,oe=0,ce,ve=0,me=0,ye,we;if(I.showAxis=ie=ee||q.showEmpty,I.staggerLines=I.horiz&&le.staggerLines||void 0,I.createGroups(),ee||I.isLinked?(U.forEach(function(Ee){I.generateTick(Ee)}),I.renderUnsquish(),I.reserveSpaceDefault=F===0||F===2||{1:"left",3:"right"}[F]===I.labelAlign,Y(le.reserveSpace,!ge&&null,I.labelAlign==="center"||null,I.reserveSpaceDefault)&&U.forEach(function(Ee){me=Math.max(H[Ee].getLabelSize(),me)}),I.staggerLines&&(me*=I.staggerLines),I.labelOffset=me*(I.opposite?-1:1)):G(H,function(Ee,Pe){Ee.destroy(),delete H[Pe]}),ne?.text&&ne.enabled!==!1&&(I.addTitle(ie),ie&&!ge&&ne.reserveSpace!==!1&&(I.titleOffset=oe=I.axisTitle.getBBox()[N?"height":"width"],ve=S(ce=ne.offset)?0:Y(ne.margin,N?5:10))),I.renderLine(),I.offset=se*Y(q.offset,xe[F]?xe[F]+(q.margin||0):0),I.tickRotCorr=I.tickRotCorr||{x:0,y:0},we=F===0?-I.labelMetrics().h:F===2?I.tickRotCorr.y:0,ye=Math.abs(me)+ve,me&&(ye-=we,ye+=se*(N?Y(le.y,I.tickRotCorr.y+se*le.distance):Y(le.x,se*le.distance))),I.axisTitleMargin=Y(ce,ye),I.getMaxLabelDimensions&&(I.maxLabelDimensions=I.getMaxLabelDimensions(H,U)),X!=="colorAxis"&&Se){let Ee=this.tickSize("tick");xe[F]=Math.max(xe[F],(I.axisTitleMargin||0)+oe+se*I.offset,ye,U&&U.length&&Ee?Ee[0]+se*I.offset:0);let Pe=!I.axisLine||q.offset?0:I.axisLine.strokeWidth()/2;Se[Z]=Math.max(Se[Z],Pe)}_(this,"afterGetOffset")}getLinePath(I){let k=this.chart,N=this.opposite,q=this.offset,F=this.horiz,H=this.left+(N?this.width:0)+q,U=k.chartHeight-this.bottom-(N?this.height:0)+q;return N&&(I*=-1),k.renderer.crispLine([["M",F?this.left:H,F?U:this.top],["L",F?k.chartWidth-this.right:H,F?U:k.chartHeight-this.bottom]],I)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(I){let k=this.horiz,N=this.left,q=this.top,F=this.len,H=this.options.title,U=k?N:q,X=this.opposite,Z=this.offset,ee=H.x,ne=H.y,le=this.chart.renderer.fontMetrics(I),ge=I?Math.max(I.getBBox(!1,0).height-le.h-1,0):0,xe={low:U+(k?0:F),middle:U+F/2,high:U+(k?F:0)}[H.align],Se=(k?q+this.height:N)+(k?1:-1)*(X?-1:1)*(this.axisTitleMargin||0)+[-ge,ge,le.f,-ge][this.side],se={x:k?xe+ee:Se+(X?this.width:0)+Z+ee,y:k?Se+ne-(X?this.height:0)+Z:xe+ne};return _(this,"afterGetTitlePosition",{titlePosition:se}),se}renderMinorTick(I,k){let N=this.minorTicks;N[I]||(N[I]=new h(this,I,"minor")),k&&N[I].isNew&&N[I].render(null,!0),N[I].render(null,!1,1)}renderTick(I,k,N){let q=this.isLinked,F=this.ticks;(!q||I>=this.min&&I<=this.max||this.grid&&this.grid.isColumn)&&(F[I]||(F[I]=new h(this,I)),N&&F[I].isNew&&F[I].render(k,!0,-1),F[I].render(k))}render(){let I,k,N=this,q=N.chart,F=N.logarithmic,H=q.renderer,U=N.options,X=N.isLinked,Z=N.tickPositions,ee=N.axisTitle,ne=N.ticks,le=N.minorTicks,ge=N.alternateBands,xe=U.stackLabels,Se=U.alternateGridColor,se=U.crossing,ie=N.tickmarkOffset,oe=N.axisLine,ce=N.showAxis,ve=d(H.globalAnimation);if(N.labelEdge.length=0,N.overlap=!1,[ne,le,ge].forEach(function(me){G(me,function(ye){ye.isActive=!1})}),C(se)){let me=this.isXAxis?q.yAxis[0]:q.xAxis[0],ye=[1,-1,-1,1][this.side];if(me){let we=me.toPixels(se,!0);N.horiz&&(we=me.len-we),N.offset=ye*we}}if(N.hasData()||X){let me=N.chart.hasRendered&&N.old&&C(N.old.min);N.minorTickInterval&&!N.categories&&N.getMinorTickPositions().forEach(function(ye){N.renderMinorTick(ye,me)}),Z.length&&(Z.forEach(function(ye,we){N.renderTick(ye,we,me)}),ie&&(N.min===0||N.single)&&(ne[-1]||(ne[-1]=new h(N,-1,null,!0)),ne[-1].render(-1))),Se&&Z.forEach(function(ye,we){k=Z[we+1]!==void 0?Z[we+1]+ie:N.max-ie,we%2==0&&ye<N.max&&k<=N.max+(q.polar?-ie:ie)&&(ge[ye]||(ge[ye]=new l.PlotLineOrBand(N,{})),I=ye+ie,ge[ye].options={from:F?F.lin2log(I):I,to:F?F.lin2log(k):k,color:Se,className:"highcharts-alternate-grid"},ge[ye].render(),ge[ye].isActive=!0)}),N._addedPlotLB||(N._addedPlotLB=!0,(U.plotLines||[]).concat(U.plotBands||[]).forEach(function(ye){N.addPlotBandOrLine(ye)}))}[ne,le,ge].forEach(function(me){let ye=[],we=ve.duration;G(me,function(Ee,Pe){Ee.isActive||(Ee.render(Pe,!1,0),Ee.isActive=!1,ye.push(Pe))}),K(function(){let Ee=ye.length;for(;Ee--;)me[ye[Ee]]&&!me[ye[Ee]].isActive&&(me[ye[Ee]].destroy(),delete me[ye[Ee]])},me!==ge&&q.hasRendered&&we?we:0)}),oe&&(oe[oe.isPlaced?"animate":"attr"]({d:this.getLinePath(oe.strokeWidth())}),oe.isPlaced=!0,oe[ce?"show":"hide"](ce)),ee&&ce&&(ee[ee.isNew?"attr":"animate"](N.getTitlePosition(ee)),ee.isNew=!1),xe&&xe.enabled&&N.stacking&&N.stacking.renderStackTotals(),N.old={len:N.len,max:N.max,min:N.min,transA:N.transA,userMax:N.userMax,userMin:N.userMin},N.isDirty=!1,_(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(I){I.render()})),this.series.forEach(function(I){I.isDirty=!0})}getKeepProps(){return this.keepProps||W.keepProps}destroy(I){let k=this,N=k.plotLinesAndBands,q=this.eventOptions;if(_(this,"destroy",{keepEvents:I}),I||de(k),[k.ticks,k.minorTicks,k.alternateBands].forEach(function(F){M(F)}),N){let F=N.length;for(;F--;)N[F].destroy()}for(let F in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(H){k[H]&&(k[H]=k[H].destroy())}),k.plotLinesAndBandsGroups)k.plotLinesAndBandsGroups[F]=k.plotLinesAndBandsGroups[F].destroy();G(k,function(F,H){k.getKeepProps().indexOf(H)===-1&&delete k[H]}),this.eventOptions=q}drawCrosshair(I,k){let N=this.crosshair,q=Y(N&&N.snap,!0),F=this.chart,H,U,X,Z=this.cross,ee;if(_(this,"drawCrosshair",{e:I,point:k}),I||(I=this.cross&&this.cross.e),N&&(S(k)||!q)!==!1){if(q?S(k)&&(U=Y(this.coll!=="colorAxis"?k.crosshairPos:null,this.isXAxis?k.plotX:this.len-k.plotY)):U=I&&(this.horiz?I.chartX-this.pos:this.len-I.chartY+this.pos),S(U)&&(ee={value:k&&(this.isXAxis?k.x:Y(k.stackY,k.y)),translatedValue:U},F.polar&&O(ee,{isCrosshair:!0,chartX:I&&I.chartX,chartY:I&&I.chartY,point:k}),H=this.getPlotLinePath(ee)||null),!S(H)){this.hideCrosshair();return}X=this.categories&&!this.isRadial,Z||(this.cross=Z=F.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(X?"category ":"thin ")+(N.className||"")).attr({zIndex:Y(N.zIndex,2)}).add(),!F.styledMode&&(Z.attr({stroke:N.color||(X?n.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":Y(N.width,1)}).css({"pointer-events":"none"}),N.dashStyle&&Z.attr({dashstyle:N.dashStyle}))),Z.show().attr({d:H}),X&&!N.width&&Z.attr({"stroke-width":this.transA}),this.cross.e=I}else this.hideCrosshair();_(this,"afterDrawCrosshair",{e:I,point:k})}hideCrosshair(){this.cross&&this.cross.hide(),_(this,"afterHideCrosshair")}update(I,k){let N=this.chart;I=E(this.userOptions,I),this.destroy(!0),this.init(N,I),N.isDirtyBox=!0,Y(k,!0)&&N.redraw()}remove(I){let k=this.chart,N=this.coll,q=this.series,F=q.length;for(;F--;)q[F]&&q[F].remove(!1);B(k.axes,this),B(k[N]||[],this),k.orderItems(N),this.destroy(),k.isDirtyBox=!0,Y(I,!0)&&k.redraw()}setTitle(I,k){this.update({title:I},k)}setCategories(I,k){this.update({categories:I},k)}}return W.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],W}),i(e,"Core/Axis/DateTimeAxis.js",[e["Core/Utilities.js"]],function(s){var r;let{addEvent:n,getMagnitude:o,normalizeTickInterval:a,timeUnits:l}=s;return function(h){function c(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function d(){if(this.options.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new p(this))}h.compose=function(u){return u.keepProps.includes("dateTime")||(u.keepProps.push("dateTime"),u.prototype.getTimeTicks=c,n(u,"afterSetOptions",d)),u};class p{constructor(m){this.axis=m}normalizeTimeTickInterval(m,f){let g=f||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],y=g[g.length-1],x=l[y[0]],T=y[1],A;for(A=0;A<g.length&&(x=l[(y=g[A])[0]],T=y[1],!g[A+1]||!(m<=(x*T[T.length-1]+l[g[A+1][0]])/2));A++);x===l.year&&m<5*x&&(T=[1,2,5]);let S=a(m/x,T,y[0]==="year"?Math.max(o(m/x),1):1);return{unitRange:x,count:S,unitName:y[0]}}getXDateFormat(m,f){let{axis:g}=this,y=g.chart.time;return g.closestPointRange?y.getDateFormat(g.closestPointRange,m,g.options.startOfWeek,f)||y.resolveDTLFormat(f.year).main:y.resolveDTLFormat(f.day).main}}h.Additions=p}(r||(r={})),r}),i(e,"Core/Axis/LogarithmicAxis.js",[e["Core/Utilities.js"]],function(s){var r;let{addEvent:n,normalizeTickInterval:o,pick:a}=s;return function(l){function h(p){let u=p.userOptions,m=this.logarithmic;u.type!=="logarithmic"?this.logarithmic=void 0:m||(m=this.logarithmic=new d(this))}function c(){let p=this.logarithmic;p&&(this.lin2val=function(u){return p.lin2log(u)},this.val2lin=function(u){return p.log2lin(u)})}l.compose=function(p){return p.keepProps.includes("logarithmic")||(p.keepProps.push("logarithmic"),n(p,"init",h),n(p,"afterInit",c)),p};class d{constructor(u){this.axis=u}getLogTickPositions(u,m,f,g){let y=this.axis,x=y.len,T=y.options,A=[];if(g||(this.minorAutoInterval=void 0),u>=.5)u=Math.round(u),A=y.getLinearTickPositions(u,m,f);else if(u>=.08){let S,M,B,j,O,_,P,R=Math.floor(m);for(S=u>.3?[1,2,4]:u>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],M=R;M<f+1&&!P;M++)for(B=0,j=S.length;B<j&&!P;B++)(O=this.log2lin(this.lin2log(M)*S[B]))>m&&(!g||_<=f)&&_!==void 0&&A.push(_),_>f&&(P=!0),_=O}else{let S=this.lin2log(m),M=this.lin2log(f),B=g?y.getMinorTickInterval():T.tickInterval,j=T.tickPixelInterval/(g?5:1),O=g?x/y.tickPositions.length:x;u=o(u=a(B==="auto"?null:B,this.minorAutoInterval,(M-S)*j/(O||1))),A=y.getLinearTickPositions(u,S,M).map(this.log2lin),g||(this.minorAutoInterval=u/5)}return g||(y.tickInterval=u),A}lin2log(u){return Math.pow(10,u)}log2lin(u){return Math.log(u)/Math.LN10}}l.Additions=d}(r||(r={})),r}),i(e,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[e["Core/Utilities.js"]],function(s){var r;let{erase:n,extend:o,isNumber:a}=s;return function(l){let h;function c(y){return this.addPlotBandOrLine(y,"plotBands")}function d(y,x){let T=this.userOptions,A=new h(this,y);if(this.visible&&(A=A.render()),A){if(this._addedPlotLB||(this._addedPlotLB=!0,(T.plotLines||[]).concat(T.plotBands||[]).forEach(S=>{this.addPlotBandOrLine(S)})),x){let S=T[x]||[];S.push(y),T[x]=S}this.plotLinesAndBands.push(A)}return A}function p(y){return this.addPlotBandOrLine(y,"plotLines")}function u(y,x,T){T=T||this.options;let A=this.getPlotLinePath({value:x,force:!0,acrossPanes:T.acrossPanes}),S=[],M=this.horiz,B=!a(this.min)||!a(this.max)||y<this.min&&x<this.min||y>this.max&&x>this.max,j=this.getPlotLinePath({value:y,force:!0,acrossPanes:T.acrossPanes}),O,_=1,P;if(j&&A)for(B&&(P=j.toString()===A.toString(),_=0),O=0;O<j.length;O+=2){let R=j[O],v=j[O+1],C=A[O],D=A[O+1];(R[0]==="M"||R[0]==="L")&&(v[0]==="M"||v[0]==="L")&&(C[0]==="M"||C[0]==="L")&&(D[0]==="M"||D[0]==="L")&&(M&&C[1]===R[1]?(C[1]+=_,D[1]+=_):M||C[2]!==R[2]||(C[2]+=_,D[2]+=_),S.push(["M",R[1],R[2]],["L",v[1],v[2]],["L",D[1],D[2]],["L",C[1],C[2]],["Z"])),S.isFlat=P}return S}function m(y){this.removePlotBandOrLine(y)}function f(y){let x=this.plotLinesAndBands,T=this.options,A=this.userOptions;if(x){let S=x.length;for(;S--;)x[S].id===y&&x[S].destroy();[T.plotLines||[],A.plotLines||[],T.plotBands||[],A.plotBands||[]].forEach(function(M){for(S=M.length;S--;)(M[S]||{}).id===y&&n(M,M[S])})}}function g(y){this.removePlotBandOrLine(y)}l.compose=function(y,x){let T=x.prototype;return T.addPlotBand||(h=y,o(T,{addPlotBand:c,addPlotLine:p,addPlotBandOrLine:d,getPlotBandPath:u,removePlotBand:m,removePlotLine:g,removePlotBandOrLine:f})),x}}(r||(r={})),r}),i(e,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[e["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],e["Core/Utilities.js"]],function(s,r){let{arrayMax:n,arrayMin:o,defined:a,destroyObjectProperties:l,erase:h,fireEvent:c,merge:d,objectEach:p,pick:u}=r;class m{static compose(g){return s.compose(m,g)}constructor(g,y){this.axis=g,this.options=y,this.id=y.id}render(){c(this,"render");let{axis:g,options:y}=this,{horiz:x,logarithmic:T}=g,{color:A,events:S,zIndex:M=0}=y,B={},j=g.chart.renderer,O=y.to,_=y.from,P=y.value,R=y.borderWidth,v=y.label,{label:C,svgElem:D}=this,E=[],L,G=a(_)&&a(O),Y=a(P),J=!D,de={class:"highcharts-plot-"+(G?"band ":"line ")+(y.className||"")},b=G?"bands":"lines";if(!g.chart.styledMode&&(Y?(de.stroke=A||"#999999",de["stroke-width"]=u(y.width,1),y.dashStyle&&(de.dashstyle=y.dashStyle)):G&&(de.fill=A||"#e6e9ff",R&&(de.stroke=y.borderColor,de["stroke-width"]=R))),B.zIndex=M,b+="-"+M,(L=g.plotLinesAndBandsGroups[b])||(g.plotLinesAndBandsGroups[b]=L=j.g("plot-"+b).attr(B).add()),D||(this.svgElem=D=j.path().attr(de).add(L)),a(P))E=g.getPlotLinePath({value:T?.log2lin(P)??P,lineWidth:D.strokeWidth(),acrossPanes:y.acrossPanes});else{if(!(a(_)&&a(O)))return;E=g.getPlotBandPath(T?.log2lin(_)??_,T?.log2lin(O)??O,y)}return!this.eventsAdded&&S&&(p(S,(K,z)=>{D?.on(z,W=>{S[z].apply(this,[W])})}),this.eventsAdded=!0),(J||!D.d)&&E?.length?D.attr({d:E}):D&&(E?(D.show(),D.animate({d:E})):D.d&&(D.hide(),C&&(this.label=C=C.destroy()))),v&&(a(v.text)||a(v.formatter))&&E?.length&&g.width>0&&g.height>0&&!E.isFlat?(v=d({align:x&&G?"center":void 0,x:x?!G&&4:10,verticalAlign:!x&&G?"middle":void 0,y:x?G?16:10:G?6:-4,rotation:x&&!G?90:0},v),this.renderLabel(v,E,G,M)):C&&C.hide(),this}renderLabel(g,y,x,T){let A=this.axis,S=A.chart.renderer,M=this.label;M||(this.label=M=S.text(this.getLabelText(g),0,0,g.useHTML).attr({align:g.textAlign||g.align,rotation:g.rotation,class:"highcharts-plot-"+(x?"band":"line")+"-label "+(g.className||""),zIndex:T}),A.chart.styledMode||M.css(d({fontSize:"0.8em",textOverflow:"ellipsis"},g.style)),M.add());let B=y.xBounds||[y[0][1],y[1][1],x?y[2][1]:y[0][1]],j=y.yBounds||[y[0][2],y[1][2],x?y[2][2]:y[0][2]],O=o(B),_=o(j);if(M.align(g,!1,{x:O,y:_,width:n(B)-O,height:n(j)-_}),!M.alignValue||M.alignValue==="left"){let P=g.clip?A.width:A.chart.chartWidth;M.css({width:(M.rotation===90?A.height-(M.alignAttr.y-A.top):P-(M.alignAttr.x-A.left))+"px"})}M.show(!0)}getLabelText(g){return a(g.formatter)?g.formatter.call(this):g.text}destroy(){h(this.axis.plotLinesAndBands,this),delete this.axis,l(this)}}return m}),i(e,"Core/Tooltip.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Templating.js"],e["Core/Globals.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Utilities.js"]],function(s,r,n,o,a,l){var h;let{animObject:c}=s,{format:d}=r,{composed:p,doc:u,isSafari:m}=n,{distribute:f}=o,{addEvent:g,clamp:y,css:x,discardElement:T,extend:A,fireEvent:S,isArray:M,isNumber:B,isString:j,merge:O,pick:_,pushUnique:P,splat:R,syncTimeout:v}=l;class C{constructor(E,L,G){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=E,this.init(E,L),this.pointer=G}bodyFormatter(E){return E.map(function(L){let G=L.series.tooltipOptions;return(G[(L.point.formatPrefix||"point")+"Formatter"]||L.point.tooltipFormatter).call(L.point,G[(L.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit(E){this.chart.series.forEach(function(L){let G=L&&L.tt;G&&(!G.isActive||E?L.tt=G.destroy():G.isActive=!1)})}defaultFormatter(E){let L,G=this.points||R(this);return(L=(L=[E.tooltipFooterHeaderFormatter(G[0])]).concat(E.bodyFormatter(G))).push(E.tooltipFooterHeaderFormatter(G[0],!0)),L}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),T(this.container)),l.clearTimeout(this.hideTimer)}getAnchor(E,L){let G,{chart:Y,pointer:J}=this,de=Y.inverted,b=Y.plotTop,K=Y.plotLeft;if((E=R(E))[0].series&&E[0].series.yAxis&&!E[0].series.yAxis.options.reversedStacks&&(E=E.slice().reverse()),this.followPointer&&L)L.chartX===void 0&&(L=J.normalize(L)),G=[L.chartX-K,L.chartY-b];else if(E[0].tooltipPos)G=E[0].tooltipPos;else{let z=0,W=0;E.forEach(function(re){let I=re.pos(!0);I&&(z+=I[0],W+=I[1])}),z/=E.length,W/=E.length,this.shared&&E.length>1&&L&&(de?z=L.chartX:W=L.chartY),G=[z-K,W-b]}return G.map(Math.round)}getClassName(E,L,G){let Y=this.options,J=E.series,de=J.options;return[Y.className,"highcharts-label",G&&"highcharts-tooltip-header",L?"highcharts-tooltip-box":"highcharts-tooltip",!G&&"highcharts-color-"+_(E.colorIndex,J.colorIndex),de&&de.className].filter(j).join(" ")}getLabel(){let E=this,L=this.chart.styledMode,G=this.options,Y=this.split&&this.allowShared,J=this.container,de=this.chart.renderer;if(this.label){let b=!this.label.hasClass("highcharts-label");(!Y&&b||Y&&!b)&&this.destroy()}if(!this.label){if(this.outside){let b=this.chart.options.chart.style,K=a.getRendererType();this.container=J=n.doc.createElement("div"),J.className="highcharts-tooltip-container",x(J,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(b&&b.zIndex||0)+3)}),this.renderer=de=new K(J,0,0,b,void 0,void 0,de.styledMode)}if(Y?this.label=de.g("tooltip"):(this.label=de.label("",0,0,G.shape,void 0,void 0,G.useHTML,void 0,"tooltip").attr({padding:G.padding,r:G.borderRadius}),L||this.label.attr({fill:G.backgroundColor,"stroke-width":G.borderWidth||0}).css(G.style).css({pointerEvents:G.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),E.outside){let b=this.label;[b.xSetter,b.ySetter].forEach((K,z)=>{b[z?"ySetter":"xSetter"]=W=>{K.call(b,E.distance),b[z?"y":"x"]=W,J&&(J.style[z?"top":"left"]=`${W}px`)}})}this.label.attr({zIndex:8}).shadow(G.shadow).add()}return J&&!J.parentElement&&n.doc.body.appendChild(J),this.label}getPlayingField(){let{body:E,documentElement:L}=u,{chart:G,distance:Y,outside:J}=this;return{width:J?Math.max(E.scrollWidth,L.scrollWidth,E.offsetWidth,L.offsetWidth,L.clientWidth)-2*Y:G.chartWidth,height:J?Math.max(E.scrollHeight,L.scrollHeight,E.offsetHeight,L.offsetHeight,L.clientHeight):G.chartHeight}}getPosition(E,L,G){let{distance:Y,chart:J,outside:de,pointer:b}=this,{inverted:K,plotLeft:z,plotTop:W,polar:re}=J,{plotX:I=0,plotY:k=0}=G,N={},q=K&&G.h||0,{height:F,width:H}=this.getPlayingField(),U=b.getChartPosition(),X=ve=>ve*U.scaleX,Z=ve=>ve*U.scaleY,ee=ve=>{let me=ve==="x";return[ve,me?H:F,me?E:L].concat(de?[me?X(E):Z(L),me?U.left-Y+X(I+z):U.top-Y+Z(k+W),0,me?H:F]:[me?E:L,me?I+z:k+W,me?z:W,me?z+J.plotWidth:W+J.plotHeight])},ne=ee("y"),le=ee("x"),ge,xe=!!G.negative;!re&&J.hoverSeries?.yAxis?.reversed&&(xe=!xe);let Se=!this.followPointer&&_(G.ttBelow,!re&&!K===xe),se=function(ve,me,ye,we,Ee,Pe,Oe){let Re=de?ve==="y"?Z(Y):X(Y):Y,We=(ye-we)/2,Ze=we<Ee-Y,ze=Ee+Y+we<me,Ge=Ee-Re-ye+We,ut=Ee+Re-We;if(Se&&ze)N[ve]=ut;else if(!Se&&Ze)N[ve]=Ge;else if(Ze)N[ve]=Math.min(Oe-we,Ge-q<0?Ge:Ge-q);else{if(!ze)return!1;N[ve]=Math.max(Pe,ut+q+ye>me?ut:ut+q)}},ie=function(ve,me,ye,we,Ee){if(Ee<Y||Ee>me-Y)return!1;Ee<ye/2?N[ve]=1:Ee>me-we/2?N[ve]=me-we-2:N[ve]=Ee-ye/2},oe=function(ve){[ne,le]=[le,ne],ge=ve},ce=()=>{se.apply(0,ne)!==!1?ie.apply(0,le)!==!1||ge||(oe(!0),ce()):ge?N.x=N.y=0:(oe(!0),ce())};return(K&&!re||this.len>1)&&oe(),ce(),N}hide(E){let L=this;l.clearTimeout(this.hideTimer),E=_(E,this.options.hideDelay),this.isHidden||(this.hideTimer=v(function(){let G=L.getLabel();L.getLabel().animate({opacity:0},{duration:E&&150,complete:()=>{G.hide(),L.container&&L.container.remove()}}),L.isHidden=!0},E))}init(E,L){this.chart=E,this.options=L,this.crosshairs=[],this.isHidden=!0,this.split=L.split&&!E.inverted&&!E.polar,this.shared=L.shared||this.split,this.outside=_(L.outside,!!(E.scrollablePixelsX||E.scrollablePixelsY))}shouldStickOnContact(E){return!!(!this.followPointer&&this.options.stickOnContact&&(!E||this.pointer.inClass(E.target,"highcharts-tooltip")))}move(E,L,G,Y){let J=this,de=c(!J.isHidden&&J.options.animation),b=J.followPointer||(J.len||0)>1,K={x:E,y:L};b||(K.anchorX=G,K.anchorY=Y),de.step=()=>J.drawTracker(),J.getLabel().animate(K,de)}refresh(E,L){let{chart:G,options:Y,pointer:J,shared:de}=this,b=R(E),K=b[0],z=[],W=Y.format,re=Y.formatter||this.defaultFormatter,I=G.styledMode,k={};if(!Y.enabled||!K.series)return;l.clearTimeout(this.hideTimer),this.allowShared=!(!M(E)&&E.series&&E.series.noSharedTooltip),this.followPointer=!this.split&&K.series.tooltipOptions.followPointer;let N=this.getAnchor(E,L),q=N[0],F=N[1];de&&this.allowShared?(J.applyInactiveState(b),b.forEach(function(X){X.setState("hover"),z.push(X.getLabelConfig())}),(k=K.getLabelConfig()).points=z):k=K.getLabelConfig(),this.len=z.length;let H=j(W)?d(W,k,G):re.call(k,this),U=K.series;if(this.distance=_(U.tooltipOptions.distance,16),H===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(H,b);else{let X=q,Z=F;if(L&&J.isDirectTouch&&(X=L.chartX-G.plotLeft,Z=L.chartY-G.plotTop),G.polar||U.options.clip===!1||b.some(ee=>J.isDirectTouch||ee.series.shouldShowTooltip(X,Z))){let ee=this.getLabel();(!Y.style.width||I)&&ee.css({width:(this.outside?this.getPlayingField():G.spacingBox).width+"px"}),ee.attr({text:H&&H.join?H.join(""):H}),ee.addClass(this.getClassName(K),!0),I||ee.attr({stroke:Y.borderColor||K.color||U.color||"#666666"}),this.updatePosition({plotX:q,plotY:F,negative:K.negative,ttBelow:K.ttBelow,h:N[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}S(this,"refresh")}renderSplit(E,L){let G=this,{chart:Y,chart:{chartWidth:J,chartHeight:de,plotHeight:b,plotLeft:K,plotTop:z,scrollablePixelsY:W=0,scrollablePixelsX:re,styledMode:I},distance:k,options:N,options:{positioner:q},pointer:F}=G,{scrollLeft:H=0,scrollTop:U=0}=Y.scrollablePlotArea?.scrollingContainer||{},X=G.outside&&typeof re!="number"?u.documentElement.getBoundingClientRect():{left:H,right:H+J,top:U,bottom:U+de},Z=G.getLabel(),ee=this.renderer||Y.renderer,ne=!!(Y.xAxis[0]&&Y.xAxis[0].opposite),{left:le,top:ge}=F.getChartPosition(),xe=z+U,Se=0,se=b-W;function ie(we,Ee,Pe,Oe,Re=!0){let We,Ze;return Pe?(We=ne?0:se,Ze=y(we-Oe/2,X.left,X.right-Oe-(G.outside?le:0))):(We=Ee-xe,Ze=y(Ze=Re?we-Oe-k:we+k,Re?Ze:X.left,X.right)),{x:Ze,y:We}}j(E)&&(E=[!1,E]);let oe=E.slice(0,L.length+1).reduce(function(we,Ee,Pe){if(Ee!==!1&&Ee!==""){let Oe=L[Pe-1]||{isHeader:!0,plotX:L[0].plotX,plotY:b,series:{}},Re=Oe.isHeader,We=Re?G:Oe.series,Ze=We.tt=function(Mt,Vt,Mi){let Bt=Mt,{isHeader:hi,series:wr}=Vt;if(!Bt){let rr={padding:N.padding,r:N.borderRadius};I||(rr.fill=N.backgroundColor,rr["stroke-width"]=N.borderWidth??1),Bt=ee.label("",0,0,N[hi?"headerShape":"shape"],void 0,void 0,N.useHTML).addClass(G.getClassName(Vt,!0,hi)).attr(rr).add(Z)}return Bt.isActive=!0,Bt.attr({text:Mi}),I||Bt.css(N.style).attr({stroke:N.borderColor||Vt.color||wr.color||"#333333"}),Bt}(We.tt,Oe,Ee.toString()),ze=Ze.getBBox(),Ge=ze.width+Ze.strokeWidth();Re&&(Se=ze.height,se+=Se,ne&&(xe-=Se));let{anchorX:ut,anchorY:Ct}=function(Mt){let Vt,Mi,{isHeader:Bt,plotX:hi=0,plotY:wr=0,series:rr}=Mt;if(Bt)Vt=Math.max(K+hi,K),Mi=z+b/2;else{let{xAxis:xi,yAxis:Si}=rr;Vt=xi.pos+y(hi,-k,xi.len+k),rr.shouldShowTooltip(0,Si.pos-z+wr,{ignoreX:!0})&&(Mi=Si.pos+wr)}return{anchorX:Vt=y(Vt,X.left-k,X.right+k),anchorY:Mi}}(Oe);if(typeof Ct=="number"){let Mt=ze.height+1,Vt=q?q.call(G,Ge,Mt,Oe):ie(ut,Ct,Re,Ge);we.push({align:q?0:void 0,anchorX:ut,anchorY:Ct,boxWidth:Ge,point:Oe,rank:_(Vt.rank,Re?1:0),size:Mt,target:Vt.y,tt:Ze,x:Vt.x})}else Ze.isActive=!1}return we},[]);!q&&oe.some(we=>{let{outside:Ee}=G,Pe=(Ee?le:0)+we.anchorX;return Pe<X.left&&Pe+we.boxWidth<X.right||Pe<le-X.left+we.boxWidth&&X.right-Pe>Pe})&&(oe=oe.map(we=>{let{x:Ee,y:Pe}=ie(we.anchorX,we.anchorY,we.point.isHeader,we.boxWidth,!1);return A(we,{target:Pe,x:Ee})})),G.cleanSplit(),f(oe,se);let ce={left:le,right:le};oe.forEach(function(we){let{x:Ee,boxWidth:Pe,isHeader:Oe}=we;!Oe&&(G.outside&&le+Ee<ce.left&&(ce.left=le+Ee),!Oe&&G.outside&&ce.left+Pe>ce.right&&(ce.right=le+Ee))}),oe.forEach(function(we){let{x:Ee,anchorX:Pe,anchorY:Oe,pos:Re,point:{isHeader:We}}=we,Ze={visibility:Re===void 0?"hidden":"inherit",x:Ee,y:(Re||0)+xe,anchorX:Pe,anchorY:Oe};if(G.outside&&Ee<Pe){let ze=le-ce.left;ze>0&&(We||(Ze.x=Ee+ze,Ze.anchorX=Pe+ze),We&&(Ze.x=(ce.right-ce.left)/2,Ze.anchorX=Pe+ze))}we.tt.attr(Ze)});let{container:ve,outside:me,renderer:ye}=G;if(me&&ve&&ye){let{width:we,height:Ee,x:Pe,y:Oe}=Z.getBBox();ye.setSize(we+Pe,Ee+Oe,!1),ve.style.left=ce.left+"px",ve.style.top=ge+"px"}m&&Z.attr({opacity:Z.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let E=this.chart,L=this.label,G=this.shared?E.hoverPoints:E.hoverPoint;if(!L||!G)return;let Y={x:0,y:0,width:0,height:0},J=this.getAnchor(G),de=L.getBBox();J[0]+=E.plotLeft-(L.translateX||0),J[1]+=E.plotTop-(L.translateY||0),Y.x=Math.min(0,J[0]),Y.y=Math.min(0,J[1]),Y.width=J[0]<0?Math.max(Math.abs(J[0]),de.width-J[0]):Math.max(Math.abs(J[0]),de.width),Y.height=J[1]<0?Math.max(Math.abs(J[1]),de.height-Math.abs(J[1])):Math.max(Math.abs(J[1]),de.height),this.tracker?this.tracker.attr(Y):(this.tracker=L.renderer.rect(Y).addClass("highcharts-tracker").add(L),E.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(E){return E.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(E,L){let G=E.series,Y=G.tooltipOptions,J=G.xAxis,de=J&&J.dateTime,b={isFooter:L,labelConfig:E},K=Y.xDateFormat,z=Y[L?"footerFormat":"headerFormat"];return S(this,"headerFormatter",b,function(W){de&&!K&&B(E.key)&&(K=de.getXDateFormat(E.key,Y.dateTimeLabelFormats)),de&&K&&(E.point&&E.point.tooltipDateKeys||["key"]).forEach(function(re){z=z.replace("{point."+re+"}","{point."+re+":"+K+"}")}),G.chart.styledMode&&(z=this.styledModeFormat(z)),W.text=d(z,{point:E,series:G},this.chart)}),b.text}update(E){this.destroy(),this.init(this.chart,O(!0,this.options,E))}updatePosition(E){let{chart:L,container:G,distance:Y,options:J,pointer:de,renderer:b}=this,{height:K=0,width:z=0}=this.getLabel(),{left:W,top:re,scaleX:I,scaleY:k}=de.getChartPosition(),N=(J.positioner||this.getPosition).call(this,z,K,E),q=(E.plotX||0)+L.plotLeft,F=(E.plotY||0)+L.plotTop,H;b&&G&&(J.positioner&&(N.x+=W-Y,N.y+=re-Y),H=(J.borderWidth||0)+2*Y+2,b.setSize(z+H,K+H,!1),(I!==1||k!==1)&&(x(G,{transform:`scale(${I}, ${k})`}),q*=I,F*=k),q+=W-N.x,F+=re-N.y),this.move(Math.round(N.x),Math.round(N.y||0),q,F)}}return(h=C||(C={})).compose=function(D){P(p,"Core.Tooltip")&&g(D,"afterInit",function(){let E=this.chart;E.options.tooltip&&(E.tooltip=new h(E,E.options.tooltip,this))})},C}),i(e,"Core/Series/Point.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Animation/AnimationUtilities.js"],e["Core/Defaults.js"],e["Core/Templating.js"],e["Core/Utilities.js"]],function(s,r,n,o,a){let{animObject:l}=r,{defaultOptions:h}=n,{format:c}=o,{addEvent:d,crisp:p,erase:u,extend:m,fireEvent:f,getNestedProperty:g,isArray:y,isFunction:x,isNumber:T,isObject:A,merge:S,pick:M,syncTimeout:B,removeEvent:j,uniqueKey:O}=a;class _{animateBeforeDestroy(){let R=this,v={x:R.startXPos,opacity:0},C=R.getGraphicalProps();C.singular.forEach(function(D){R[D]=R[D].animate(D==="dataLabel"?{x:R[D].startXPos,y:R[D].startYPos,opacity:0}:v)}),C.plural.forEach(function(D){R[D].forEach(function(E){E.element&&E.animate(m({x:R.startXPos},E.startYPos?{x:E.startXPos,y:E.startYPos}:{}))})})}applyOptions(R,v){let C=this.series,D=C.options.pointValKey||C.pointValKey;return m(this,R=_.prototype.optionsToObject.call(this,R)),this.options=this.options?m(this.options,R):R,R.group&&delete this.group,R.dataLabels&&delete this.dataLabels,D&&(this.y=_.prototype.getNestedProperty.call(this,D)),this.selected&&(this.state="select"),"name"in this&&v===void 0&&C.xAxis&&C.xAxis.hasNames&&(this.x=C.xAxis.nameToX(this)),this.x===void 0&&C?v===void 0?this.x=C.autoIncrement():this.x=v:T(R.x)&&C.options.relativeXValue&&(this.x=C.autoIncrement(R.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let R=this,v=R.series,C=v.chart,D=v.options.dataSorting,E=C.hoverPoints,L=l(R.series.chart.renderer.globalAnimation),G=()=>{for(let Y in(R.graphic||R.graphics||R.dataLabel||R.dataLabels)&&(j(R),R.destroyElements()),R)delete R[Y]};R.legendItem&&C.legend.destroyItem(R),E&&(R.setState(),u(E,R),E.length||(C.hoverPoints=null)),R===C.hoverPoint&&R.onMouseOut(),D&&D.enabled?(this.animateBeforeDestroy(),B(G,L.duration)):G(),C.pointCount--}this.destroyed=!0}destroyElements(R){let v=this,C=v.getGraphicalProps(R);C.singular.forEach(function(D){v[D]=v[D].destroy()}),C.plural.forEach(function(D){v[D].forEach(function(E){E&&E.element&&E.destroy()}),delete v[D]})}firePointEvent(R,v,C){let D=this,E=this.series.options;D.manageEvent(R),R==="click"&&E.allowPointSelect&&(C=function(L){!D.destroyed&&D.select&&D.select(null,L.ctrlKey||L.metaKey||L.shiftKey)}),f(D,R,v,C)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(R){let v,C,D=this,E=[],L={singular:[],plural:[]};for((R=R||{graphic:1,dataLabel:1}).graphic&&E.push("graphic","connector"),R.dataLabel&&E.push("dataLabel","dataLabelPath","dataLabelUpper"),C=E.length;C--;)D[v=E[C]]&&L.singular.push(v);return["graphic","dataLabel"].forEach(function(G){let Y=G+"s";R[G]&&D[Y]&&L.plural.push(Y)}),L}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(R){return R?R.indexOf("custom.")===0?g(R,this.options):this[R]:void 0}getZone(){let R=this.series,v=R.zones,C=R.zoneAxis||"y",D,E=0;for(D=v[0];this[C]>=D.value;)D=v[++E];return this.nonZonedColor||(this.nonZonedColor=this.color),D&&D.color&&!this.options.color?this.color=D.color:this.color=this.nonZonedColor,D}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(R,v,C){this.formatPrefix="point",this.visible=!0,this.series=R,this.applyOptions(v,C),this.id??(this.id=O()),this.resolveColor(),R.chart.pointCount++,f(this,"afterInit")}isValid(){return(T(this.x)||this.x instanceof Date)&&T(this.y)}optionsToObject(R){let v=this.series,C=v.options.keys,D=C||v.pointArrayMap||["y"],E=D.length,L={},G,Y=0,J=0;if(T(R)||R===null)L[D[0]]=R;else if(y(R))for(!C&&R.length>E&&((G=typeof R[0])=="string"?L.name=R[0]:G==="number"&&(L.x=R[0]),Y++);J<E;)C&&R[Y]===void 0||(D[J].indexOf(".")>0?_.prototype.setNestedProperty(L,R[Y],D[J]):L[D[J]]=R[Y]),Y++,J++;else typeof R=="object"&&(L=R,R.dataLabels&&(v.hasDataLabels=()=>!0),R.marker&&(v._hasPointMarkers=!0));return L}pos(R,v=this.plotY){if(!this.destroyed){let{plotX:C,series:D}=this,{chart:E,xAxis:L,yAxis:G}=D,Y=0,J=0;if(T(C)&&T(v))return R&&(Y=L?L.pos:E.plotLeft,J=G?G.pos:E.plotTop),E.inverted&&L&&G?[G.len-v+J,L.len-C+Y]:[C+Y,v+J]}}resolveColor(){let R=this.series,v=R.chart.options.chart,C=R.chart.styledMode,D,E,L=v.colorCount,G;delete this.nonZonedColor,R.options.colorByPoint?(C||(D=(E=R.options.colors||R.chart.options.colors)[R.colorCounter],L=E.length),G=R.colorCounter,R.colorCounter++,R.colorCounter===L&&(R.colorCounter=0)):(C||(D=R.color),G=R.colorIndex),this.colorIndex=M(this.options.colorIndex,G),this.color=M(this.options.color,D)}setNestedProperty(R,v,C){return C.split(".").reduce(function(D,E,L,G){let Y=G.length-1===L;return D[E]=Y?v:A(D[E],!0)?D[E]:{},D[E]},R),R}shouldDraw(){return!this.isNull}tooltipFormatter(R){let v=this.series,C=v.tooltipOptions,D=M(C.valueDecimals,""),E=C.valuePrefix||"",L=C.valueSuffix||"";return v.chart.styledMode&&(R=v.chart.tooltip.styledModeFormat(R)),(v.pointArrayMap||["y"]).forEach(function(G){G="{point."+G,(E||L)&&(R=R.replace(RegExp(G+"}","g"),E+G+"}"+L)),R=R.replace(RegExp(G+"}","g"),G+":,."+D+"f}")}),c(R,{point:this,series:this.series},v.chart)}update(R,v,C,D){let E,L=this,G=L.series,Y=L.graphic,J=G.chart,de=G.options;function b(){L.applyOptions(R);let K=Y&&L.hasMockGraphic,z=L.y===null?!K:K;Y&&z&&(L.graphic=Y.destroy(),delete L.hasMockGraphic),A(R,!0)&&(Y&&Y.element&&R&&R.marker&&R.marker.symbol!==void 0&&(L.graphic=Y.destroy()),R?.dataLabels&&L.dataLabel&&(L.dataLabel=L.dataLabel.destroy())),E=L.index,G.updateParallelArrays(L,E),de.data[E]=A(de.data[E],!0)||A(R,!0)?L.options:M(R,de.data[E]),G.isDirty=G.isDirtyData=!0,!G.fixedBox&&G.hasCartesianSeries&&(J.isDirtyBox=!0),de.legendType==="point"&&(J.isDirtyLegend=!0),v&&J.redraw(C)}v=M(v,!0),D===!1?b():L.firePointEvent("update",{options:R},b)}remove(R,v){this.series.removePoint(this.series.data.indexOf(this),R,v)}select(R,v){let C=this,D=C.series,E=D.chart;R=M(R,!C.selected),this.selectedStaging=R,C.firePointEvent(R?"select":"unselect",{accumulate:v},function(){C.selected=C.options.selected=R,D.options.data[D.data.indexOf(C)]=C.options,C.setState(R&&"select"),v||E.getSelectedPoints().forEach(function(L){let G=L.series;L.selected&&L!==C&&(L.selected=L.options.selected=!1,G.options.data[G.data.indexOf(L)]=L.options,L.setState(E.hoverPoints&&G.options.inactiveOtherPoints?"inactive":""),L.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(R){let{inverted:v,pointer:C}=this.series.chart;C&&(R=R?C.normalize(R):C.getChartCoordinatesFromPoint(this,v),C.runPointActions(R,this))}onMouseOut(){let R=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(R.hoverPoints||[]).forEach(function(v){v.setState()}),R.hoverPoints=R.hoverPoint=null}manageEvent(R){let v=S(this.series.options.point,this.options),C=v.events?.[R];x(C)&&(!this.hcEvents?.[R]||this.hcEvents?.[R]?.map(D=>D.fn).indexOf(C)===-1)?(d(this,R,C),this.hasImportedEvents=!0):this.hasImportedEvents&&!C&&this.hcEvents?.[R]&&(j(this,R),delete this.hcEvents[R],Object.keys(this.hcEvents)||(this.hasImportedEvents=!1))}setState(R,v){let C=this.series,D=this.state,E=C.options.states[R||"normal"]||{},L=h.plotOptions[C.type].marker&&C.options.marker,G=L&&L.enabled===!1,Y=L&&L.states&&L.states[R||"normal"]||{},J=Y.enabled===!1,de=this.marker||{},b=C.chart,K=L&&C.markerAttribs,z=C.halo,W,re,I,k=C.stateMarkerGraphic,N;if((R=R||"")===this.state&&!v||this.selected&&R!=="select"||E.enabled===!1||R&&(J||G&&Y.enabled===!1)||R&&de.states&&de.states[R]&&de.states[R].enabled===!1)return;if(this.state=R,K&&(W=C.markerAttribs(this,R)),this.graphic&&!this.hasMockGraphic){if(D&&this.graphic.removeClass("highcharts-point-"+D),R&&this.graphic.addClass("highcharts-point-"+R),!b.styledMode){re=C.pointAttribs(this,R),I=M(b.options.chart.animation,E.animation);let U=re.opacity;C.options.inactiveOtherPoints&&T(U)&&(this.dataLabels||[]).forEach(function(X){X&&!X.hasClass("highcharts-data-label-hidden")&&(X.animate({opacity:U},I),X.connector&&X.connector.animate({opacity:U},I))}),this.graphic.animate(re,I)}W&&this.graphic.animate(W,M(b.options.chart.animation,Y.animation,L.animation)),k&&k.hide()}else R&&Y&&(N=de.symbol||C.symbol,k&&k.currentSymbol!==N&&(k=k.destroy()),W&&(k?k[v?"animate":"attr"]({x:W.x,y:W.y}):N&&(C.stateMarkerGraphic=k=b.renderer.symbol(N,W.x,W.y,W.width,W.height).add(C.markerGroup),k.currentSymbol=N)),!b.styledMode&&k&&this.state!=="inactive"&&k.attr(C.pointAttribs(this,R))),k&&(k[R&&this.isInside?"show":"hide"](),k.element.point=this,k.addClass(this.getClassName(),!0));let q=E.halo,F=this.graphic||k,H=F&&F.visibility||"inherit";q&&q.size&&F&&H!=="hidden"&&!this.isCluster?(z||(C.halo=z=b.renderer.path().add(F.parentGroup)),z.show()[v?"animate":"attr"]({d:this.haloPath(q.size)}),z.attr({class:"highcharts-halo highcharts-color-"+M(this.colorIndex,C.colorIndex)+(this.className?" "+this.className:""),visibility:H,zIndex:-1}),z.point=this,b.styledMode||z.attr(m({fill:this.color||C.color,"fill-opacity":q.opacity},s.filterUserAttributes(q.attributes||{})))):z?.point?.haloPath&&!z.point.destroyed&&z.animate({d:z.point.haloPath(0)},null,z.hide),f(this,"afterSetState",{state:R})}haloPath(R){let v=this.pos();return v?this.series.chart.renderer.symbols.circle(p(v[0],1)-R,v[1]-R,2*R,2*R):[]}}return _}),i(e,"Core/Pointer.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r,n){var o;let{parse:a}=s,{charts:l,composed:h,isTouchDevice:c}=r,{addEvent:d,attr:p,css:u,extend:m,find:f,fireEvent:g,isNumber:y,isObject:x,objectEach:T,offset:A,pick:S,pushUnique:M,splat:B}=n;class j{applyInactiveState(_){let P=[],R;(_||[]).forEach(function(v){R=v.series,P.push(R),R.linkedParent&&P.push(R.linkedParent),R.linkedSeries&&(P=P.concat(R.linkedSeries)),R.navigatorSeries&&P.push(R.navigatorSeries)}),this.chart.series.forEach(function(v){P.indexOf(v)===-1?v.setState("inactive",!0):v.options.inactiveOtherPoints&&v.setAllPointsToState("inactive")})}destroy(){let _=this;this.eventsToUnbind.forEach(P=>P()),this.eventsToUnbind=[],!r.chartCount&&(j.unbindDocumentMouseUp&&(j.unbindDocumentMouseUp=j.unbindDocumentMouseUp()),j.unbindDocumentTouchEnd&&(j.unbindDocumentTouchEnd=j.unbindDocumentTouchEnd())),clearInterval(_.tooltipTimeout),T(_,function(P,R){_[R]=void 0})}getSelectionMarkerAttrs(_,P){let R={args:{chartX:_,chartY:P},attrs:{},shapeType:"rect"};return g(this,"getSelectionMarkerAttrs",R,v=>{let C,{chart:D,zoomHor:E,zoomVert:L}=this,{mouseDownX:G=0,mouseDownY:Y=0}=D,J=v.attrs;J.x=D.plotLeft,J.y=D.plotTop,J.width=E?1:D.plotWidth,J.height=L?1:D.plotHeight,E&&(C=_-G,J.width=Math.max(1,Math.abs(C)),J.x=(C>0?0:C)+G),L&&(C=P-Y,J.height=Math.max(1,Math.abs(C)),J.y=(C>0?0:C)+Y)}),R}drag(_){let{chart:P}=this,{mouseDownX:R=0,mouseDownY:v=0}=P,{panning:C,panKey:D,selectionMarkerFill:E}=P.options.chart,L=P.plotLeft,G=P.plotTop,Y=P.plotWidth,J=P.plotHeight,de=x(C)?C.enabled:C,b=D&&_[`${D}Key`],K=_.chartX,z=_.chartY,W,re=this.selectionMarker;if((!re||!re.touch)&&(K<L?K=L:K>L+Y&&(K=L+Y),z<G?z=G:z>G+J&&(z=G+J),this.hasDragged=Math.sqrt(Math.pow(R-K,2)+Math.pow(v-z,2)),this.hasDragged>10)){W=P.isInsidePlot(R-L,v-G,{visiblePlotOnly:!0});let{shapeType:I,attrs:k}=this.getSelectionMarkerAttrs(K,z);(P.hasCartesianSeries||P.mapView)&&this.hasZoom&&W&&!b&&!re&&(this.selectionMarker=re=P.renderer[I](),re.attr({class:"highcharts-selection-marker",zIndex:7}).add(),P.styledMode||re.attr({fill:E||a("#334eff").setOpacity(.25).get()})),re&&re.attr(k),W&&!re&&de&&P.pan(_,C)}}dragStart(_){let P=this.chart;P.mouseIsDown=_.type,P.cancelClick=!1,P.mouseDownX=_.chartX,P.mouseDownY=_.chartY}getSelectionBox(_){let P={args:{marker:_},result:_.getBBox()};return g(this,"getSelectionBox",P),P.result}drop(_){let P,{chart:R,selectionMarker:v}=this;for(let C of R.axes)C.isPanning&&(C.isPanning=!1,(C.options.startOnTick||C.options.endOnTick||C.series.some(D=>D.boosted))&&(C.forceRedraw=!0,C.setExtremes(C.userMin,C.userMax,!1),P=!0));if(P&&R.redraw(),v&&_){if(this.hasDragged){let C=this.getSelectionBox(v);R.transform({axes:R.axes.filter(D=>D.zoomEnabled&&(D.coll==="xAxis"&&this.zoomX||D.coll==="yAxis"&&this.zoomY)),selection:Xe({originalEvent:_,xAxis:[],yAxis:[]},C),from:C})}y(R.index)&&(this.selectionMarker=v.destroy())}R&&y(R.index)&&(u(R.container,{cursor:R._cursor}),R.cancelClick=this.hasDragged>10,R.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(_,P,R){let v;return _.forEach(function(C){let D=!(C.noSharedTooltip&&P)&&0>C.options.findNearestPointBy.indexOf("y"),E=C.searchPoint(R,D);x(E,!0)&&E.series&&(!x(v,!0)||function(L,G){let Y=L.distX-G.distX,J=L.dist-G.dist,de=G.series.group?.zIndex-L.series.group?.zIndex;return Y!==0&&P?Y:J!==0?J:de!==0?de:L.series.index>G.series.index?-1:1}(v,E)>0)&&(v=E)}),v}getChartCoordinatesFromPoint(_,P){let{xAxis:R,yAxis:v}=_.series,C=_.shapeArgs;if(R&&v){let D=_.clientX??_.plotX??0,E=_.plotY||0;return _.isNode&&C&&y(C.x)&&y(C.y)&&(D=C.x,E=C.y),P?{chartX:v.len+v.pos-E,chartY:R.len+R.pos-D}:{chartX:D+R.pos,chartY:E+v.pos}}if(C&&C.x&&C.y)return{chartX:C.x,chartY:C.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:_}=this.chart,P=A(_);this.chartPosition={left:P.left,top:P.top,scaleX:1,scaleY:1};let{offsetHeight:R,offsetWidth:v}=_;return v>2&&R>2&&(this.chartPosition.scaleX=P.width/v,this.chartPosition.scaleY=P.height/R),this.chartPosition}getCoordinates(_){let P={xAxis:[],yAxis:[]};for(let R of this.chart.axes)P[R.isXAxis?"xAxis":"yAxis"].push({axis:R,value:R.toValue(_[R.horiz?"chartX":"chartY"])});return P}getHoverData(_,P,R,v,C,D){let E=[],L=function(b){return b.visible&&!(!C&&b.directTouch)&&S(b.options.enableMouseTracking,!0)},G=P,Y,J={chartX:D?D.chartX:void 0,chartY:D?D.chartY:void 0,shared:C};g(this,"beforeGetHoverData",J),Y=G&&!G.stickyTracking?[G]:R.filter(b=>b.stickyTracking&&(J.filter||L)(b));let de=v&&_||!D?_:this.findNearestKDPoint(Y,C,D);return G=de&&de.series,de&&(C&&!G.noSharedTooltip?(Y=R.filter(function(b){return J.filter?J.filter(b):L(b)&&!b.noSharedTooltip})).forEach(function(b){let K=f(b.points,function(z){return z.x===de.x&&!z.isNull});x(K)&&(b.boosted&&b.boost&&(K=b.boost.getPoint(K)),E.push(K))}):E.push(de)),g(this,"afterGetHoverData",J={hoverPoint:de}),{hoverPoint:J.hoverPoint,hoverSeries:G,hoverPoints:E}}getPointFromEvent(_){let P=_.target,R;for(;P&&!R;)R=P.point,P=P.parentNode;return R}onTrackerMouseOut(_){let P=this.chart,R=_.relatedTarget,v=P.hoverSeries;this.isDirectTouch=!1,!v||!R||v.stickyTracking||this.inClass(R,"highcharts-tooltip")||this.inClass(R,"highcharts-series-"+v.index)&&this.inClass(R,"highcharts-tracker")||v.onMouseOut()}inClass(_,P){let R=_,v;for(;R;){if(v=p(R,"class")){if(v.indexOf(P)!==-1)return!0;if(v.indexOf("highcharts-container")!==-1)return!1}R=R.parentElement}}constructor(_,P){this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=P,this.chart=_,this.runChartClick=!!P.chart.events?.click,this.pinchDown=[],this.setDOMEvents(),g(this,"afterInit")}normalize(_,P){let R=_.touches,v=R?R.length?R.item(0):S(R.changedTouches,_.changedTouches)[0]:_;P||(P=this.getChartPosition());let C=v.pageX-P.left,D=v.pageY-P.top;return m(_,{chartX:Math.round(C/=P.scaleX),chartY:Math.round(D/=P.scaleY)})}onContainerClick(_){let P=this.chart,R=P.hoverPoint,v=this.normalize(_),C=P.plotLeft,D=P.plotTop;!P.cancelClick&&(R&&this.inClass(v.target,"highcharts-tracker")?(g(R.series,"click",m(v,{point:R})),P.hoverPoint&&R.firePointEvent("click",v)):(m(v,this.getCoordinates(v)),P.isInsidePlot(v.chartX-C,v.chartY-D,{visiblePlotOnly:!0})&&g(P,"click",v)))}onContainerMouseDown(_){let P=(1&(_.buttons||_.button))==1;_=this.normalize(_),r.isFirefox&&_.button!==0&&this.onContainerMouseMove(_),(_.button===void 0||P)&&(this.zoomOption(_),P&&_.preventDefault?.(),this.dragStart(_))}onContainerMouseLeave(_){let{pointer:P}=l[S(j.hoverChartIndex,-1)]||{};_=this.normalize(_),this.onContainerMouseMove(_),P&&_.relatedTarget&&!this.inClass(_.relatedTarget,"highcharts-tooltip")&&(P.reset(),P.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(_){let P=this.chart,R=P.tooltip,v=this.normalize(_);this.setHoverChartIndex(_),(P.mouseIsDown==="mousedown"||this.touchSelect(v))&&this.drag(v),!P.openMenu&&(this.inClass(v.target,"highcharts-tracker")||P.isInsidePlot(v.chartX-P.plotLeft,v.chartY-P.plotTop,{visiblePlotOnly:!0}))&&!(R&&R.shouldStickOnContact(v))&&(this.inClass(v.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(v))}onDocumentTouchEnd(_){this.onDocumentMouseUp(_)}onContainerTouchMove(_){this.touchSelect(_)?this.onContainerMouseMove(_):this.touch(_)}onContainerTouchStart(_){this.touchSelect(_)?this.onContainerMouseDown(_):(this.zoomOption(_),this.touch(_,!0))}onDocumentMouseMove(_){let P=this.chart,R=P.tooltip,v=this.chartPosition,C=this.normalize(_,v);!v||P.isInsidePlot(C.chartX-P.plotLeft,C.chartY-P.plotTop,{visiblePlotOnly:!0})||R&&R.shouldStickOnContact(C)||this.inClass(C.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(_){l[S(j.hoverChartIndex,-1)]?.pointer?.drop(_)}pinch(_){let P=this,{chart:R,hasZoom:v,lastTouches:C}=P,D=[].map.call(_.touches||[],J=>P.normalize(J)),E=D.length,L=E===1&&(P.inClass(_.target,"highcharts-tracker")&&R.runTrackerClick||P.runChartClick),G=R.tooltip,Y=E===1&&S(G?.options.followTouchMove,!0);E>1?P.initiated=!0:Y&&(P.initiated=!1),v&&P.initiated&&!L&&_.cancelable!==!1&&_.preventDefault(),_.type==="touchstart"?(P.pinchDown=D,P.res=!0):Y?this.runPointActions(P.normalize(_)):C&&(g(R,"touchpan",{originalEvent:_,touches:D},()=>{let J=de=>{let b=de[0],K=de[1]||b;return{x:b.chartX,y:b.chartY,width:K.chartX-b.chartX,height:K.chartY-b.chartY}};R.transform({axes:R.axes.filter(de=>de.zoomEnabled&&(this.zoomHor&&de.horiz||this.zoomVert&&!de.horiz)),to:J(D),from:J(C),trigger:_.type})}),P.res&&(P.res=!1,this.reset(!1,0))),P.lastTouches=D}reset(_,P){let R=this.chart,v=R.hoverSeries,C=R.hoverPoint,D=R.hoverPoints,E=R.tooltip,L=E&&E.shared?D:C;_&&L&&B(L).forEach(function(G){G.series.isCartesian&&G.plotX===void 0&&(_=!1)}),_?E&&L&&B(L).length&&(E.refresh(L),E.shared&&D?D.forEach(function(G){G.setState(G.state,!0),G.series.isCartesian&&(G.series.xAxis.crosshair&&G.series.xAxis.drawCrosshair(null,G),G.series.yAxis.crosshair&&G.series.yAxis.drawCrosshair(null,G))}):C&&(C.setState(C.state,!0),R.axes.forEach(function(G){G.crosshair&&C.series[G.coll]===G&&G.drawCrosshair(null,C)}))):(C&&C.onMouseOut(),D&&D.forEach(function(G){G.setState()}),v&&v.onMouseOut(),E&&E.hide(P),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),R.axes.forEach(function(G){G.hideCrosshair()}),R.hoverPoints=R.hoverPoint=void 0)}runPointActions(_,P,R){let v=this.chart,C=v.series,D=v.tooltip&&v.tooltip.options.enabled?v.tooltip:void 0,E=!!D&&D.shared,L=P||v.hoverPoint,G=L&&L.series||v.hoverSeries,Y=(!_||_.type!=="touchmove")&&(!!P||G&&G.directTouch&&this.isDirectTouch),J=this.getHoverData(L,G,C,Y,E,_);L=J.hoverPoint,G=J.hoverSeries;let de=J.hoverPoints,b=G&&G.tooltipOptions.followPointer&&!G.tooltipOptions.split,K=E&&G&&!G.noSharedTooltip;if(L&&(R||L!==v.hoverPoint||D&&D.isHidden)){if((v.hoverPoints||[]).forEach(function(z){de.indexOf(z)===-1&&z.setState()}),v.hoverSeries!==G&&G.onMouseOver(),this.applyInactiveState(de),(de||[]).forEach(function(z){z.setState("hover")}),v.hoverPoint&&v.hoverPoint.firePointEvent("mouseOut"),!L.series)return;v.hoverPoints=de,v.hoverPoint=L,L.firePointEvent("mouseOver",void 0,()=>{D&&L&&D.refresh(K?de:L,_)})}else if(b&&D&&!D.isHidden){let z=D.getAnchor([{}],_);v.isInsidePlot(z[0],z[1],{visiblePlotOnly:!0})&&D.updatePosition({plotX:z[0],plotY:z[1]})}this.unDocMouseMove||(this.unDocMouseMove=d(v.container.ownerDocument,"mousemove",z=>l[j.hoverChartIndex??-1]?.pointer?.onDocumentMouseMove(z)),this.eventsToUnbind.push(this.unDocMouseMove)),v.axes.forEach(function(z){let W,re=S((z.crosshair||{}).snap,!0);!re||(W=v.hoverPoint)&&W.series[z.coll]===z||(W=f(de,I=>I.series&&I.series[z.coll]===z)),W||!re?z.drawCrosshair(_,W):z.hideCrosshair()})}setDOMEvents(){let _=this.chart.container,P=_.ownerDocument;_.onmousedown=this.onContainerMouseDown.bind(this),_.onmousemove=this.onContainerMouseMove.bind(this),_.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(d(_,"mouseenter",this.onContainerMouseEnter.bind(this)),d(_,"mouseleave",this.onContainerMouseLeave.bind(this))),j.unbindDocumentMouseUp||(j.unbindDocumentMouseUp=d(P,"mouseup",this.onDocumentMouseUp.bind(this)));let R=this.chart.renderTo.parentElement;for(;R&&R.tagName!=="BODY";)this.eventsToUnbind.push(d(R,"scroll",()=>{delete this.chartPosition})),R=R.parentElement;this.eventsToUnbind.push(d(_,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),d(_,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),j.unbindDocumentTouchEnd||(j.unbindDocumentTouchEnd=d(P,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),d(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){if(!c)return;let _=this.pointerCaptureEventsToUnbind,P=this.chart,R=P.container,v=S(P.options.tooltip?.followTouchMove,!0)&&P.series.some(C=>C.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&v?(_.push(d(R,"pointerdown",C=>{C.target?.hasPointerCapture(C.pointerId)&&C.target?.releasePointerCapture(C.pointerId)}),d(R,"pointermove",C=>{P.pointer?.getPointFromEvent(C)?.onMouseOver(C)})),P.styledMode||u(R,{"touch-action":"none"}),R.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!v&&(_.forEach(C=>C()),_.length=0,P.styledMode||u(R,{"touch-action":S(P.options.chart.style?.["touch-action"],"manipulation")}),R.className=R.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(_){let P=this.chart,R=r.charts[S(j.hoverChartIndex,-1)];R&&R!==P&&R.pointer?.onContainerMouseLeave(_||{relatedTarget:P.container}),R&&R.mouseIsDown||(j.hoverChartIndex=P.index)}touch(_,P){let R,{chart:v,pinchDown:C=[]}=this;this.setHoverChartIndex(),_.touches.length===1?(_=this.normalize(_),v.isInsidePlot(_.chartX-v.plotLeft,_.chartY-v.plotTop,{visiblePlotOnly:!0})&&!v.openMenu?(P&&this.runPointActions(_),_.type==="touchmove"&&(R=!!C[0]&&Math.pow(C[0].chartX-_.chartX,2)+Math.pow(C[0].chartY-_.chartY,2)>=16),S(R,!0)&&this.pinch(_)):P&&this.reset()):_.touches.length===2&&this.pinch(_)}touchSelect(_){return!!(this.chart.zooming.singleTouch&&_.touches&&_.touches.length===1)}zoomOption(_){let P=this.chart,R=P.inverted,v=P.zooming.type||"",C,D;/touch/.test(_.type)&&(v=S(P.zooming.pinchType,v)),this.zoomX=C=/x/.test(v),this.zoomY=D=/y/.test(v),this.zoomHor=C&&!R||D&&R,this.zoomVert=D&&!R||C&&R,this.hasZoom=C||D}}return(o=j||(j={})).compose=function(O){M(h,"Core.Pointer")&&d(O,"beforeRender",function(){this.pointer=new o(this,this.options)})},j}),i(e,"Core/Legend/Legend.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Templating.js"],e["Core/Globals.js"],e["Core/Series/Point.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Utilities.js"]],function(s,r,n,o,a,l){var h;let{animObject:c,setAnimation:d}=s,{format:p}=r,{composed:u,marginNames:m}=n,{distribute:f}=a,{addEvent:g,createElement:y,css:x,defined:T,discardElement:A,find:S,fireEvent:M,isNumber:B,merge:j,pick:O,pushUnique:_,relativeLength:P,stableSort:R,syncTimeout:v}=l;class C{constructor(E,L){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=E,this.setOptions(L),L.enabled&&(this.render(),g(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),g(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(E){let L=O(E.padding,8);this.options=E,this.chart.styledMode||(this.itemStyle=E.itemStyle,this.itemHiddenStyle=j(this.itemStyle,E.itemHiddenStyle)),this.itemMarginTop=E.itemMarginTop,this.itemMarginBottom=E.itemMarginBottom,this.padding=L,this.initialItemY=L-5,this.symbolWidth=O(E.symbolWidth,16),this.pages=[],this.proximate=E.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(E,L){let G=this.chart;this.setOptions(j(!0,this.options,E)),this.destroy(),G.isDirtyLegend=G.isDirtyBox=!0,O(L,!0)&&G.redraw(),M(this,"afterUpdate",{redraw:L})}colorizeItem(E,L){let{area:G,group:Y,label:J,line:de,symbol:b}=E.legendItem||{};if(Y?.[L?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:K={}}=this,z=K.color,{fillColor:W,fillOpacity:re,lineColor:I,marker:k}=E.options,N=q=>(!L&&(q.fill&&(q.fill=z),q.stroke&&(q.stroke=z)),q);J?.css(j(L?this.itemStyle:K)),de?.attr(N({stroke:I||E.color})),b&&b.attr(N(k&&b.isMarker?E.pointAttribs():{fill:E.color})),G?.attr(N({fill:W||E.color,"fill-opacity":W?1:re??.75}))}M(this,"afterColorizeItem",{item:E,visible:L})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(E){let{group:L,x:G=0,y:Y=0}=E.legendItem||{},J=this.options,de=J.symbolPadding,b=!J.rtl,K=E.checkbox;if(L&&L.element){let z={translateX:b?G:this.legendWidth-G-2*de-4,translateY:Y};L[T(L.translateY)?"animate":"attr"](z,void 0,()=>{M(this,"afterPositionItem",{item:E})})}K&&(K.x=G,K.y=Y)}destroyItem(E){let L=E.checkbox,G=E.legendItem||{};for(let Y of["group","label","line","symbol"])G[Y]&&(G[Y]=G[Y].destroy());L&&A(L),E.legendItem=void 0}destroy(){for(let E of this.getAllItems())this.destroyItem(E);for(let E of["clipRect","up","down","pager","nav","box","title","group"])this[E]&&(this[E]=this[E].destroy());this.display=null}positionCheckboxes(){let E,L=this.group&&this.group.alignAttr,G=this.clipHeight||this.legendHeight,Y=this.titleHeight;L&&(E=L.translateY,this.allItems.forEach(function(J){let de,b=J.checkbox;b&&(de=E+Y+b.y+(this.scrollOffset||0)+3,x(b,{left:L.translateX+J.checkboxOffset+b.x-20+"px",top:de+"px",display:this.proximate||de>E-6&&de<E+G-6?"":"none"}))},this))}renderTitle(){let E=this.options,L=this.padding,G=E.title,Y,J=0;G.text&&(this.title||(this.title=this.chart.renderer.label(G.text,L-3,L-4,void 0,void 0,void 0,E.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(G.style),this.title.add(this.group)),G.width||this.title.css({width:this.maxLegendWidth+"px"}),J=(Y=this.title.getBBox()).height,this.offsetWidth=Y.width,this.contentGroup.attr({translateY:J})),this.titleHeight=J}setText(E){let L=this.options;E.legendItem.label.attr({text:L.labelFormat?p(L.labelFormat,E,this.chart):L.labelFormatter.call(E)})}renderItem(E){let L=E.legendItem=E.legendItem||{},G=this.chart,Y=G.renderer,J=this.options,de=J.layout==="horizontal",b=this.symbolWidth,K=J.symbolPadding||0,z=this.itemStyle,W=this.itemHiddenStyle,re=de?O(J.itemDistance,20):0,I=!J.rtl,k=!E.series,N=!k&&E.series.drawLegendSymbol?E.series:E,q=N.options,F=!!this.createCheckboxForItem&&q&&q.showCheckbox,H=J.useHTML,U=E.options.className,X=L.label,Z=b+K+re+(F?20:0);!X&&(L.group=Y.g("legend-item").addClass("highcharts-"+N.type+"-series highcharts-color-"+E.colorIndex+(U?" "+U:"")+(k?" highcharts-series-"+E.index:"")).attr({zIndex:1}).add(this.scrollGroup),L.label=X=Y.text("",I?b+K:-K,this.baseline||0,H),G.styledMode||X.css(j(E.visible?z:W)),X.attr({align:I?"left":"right",zIndex:2}).add(L.group),!this.baseline&&(this.fontMetrics=Y.fontMetrics(X),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,X.attr("y",this.baseline),this.symbolHeight=O(J.symbolHeight,this.fontMetrics.f),J.squareSymbol&&(this.symbolWidth=O(J.symbolWidth,Math.max(this.symbolHeight,16)),Z=this.symbolWidth+K+re+(F?20:0),I&&X.attr("x",this.symbolWidth+K))),N.drawLegendSymbol(this,E),this.setItemEvents&&this.setItemEvents(E,X,H)),F&&!E.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(E),this.colorizeItem(E,E.visible),(G.styledMode||!z.width)&&X.css({width:(J.itemWidth||this.widthOption||G.spacingBox.width)-Z+"px"}),this.setText(E);let ee=X.getBBox(),ne=this.fontMetrics&&this.fontMetrics.h||0;E.itemWidth=E.checkboxOffset=J.itemWidth||L.labelWidth||ee.width+Z,this.maxItemWidth=Math.max(this.maxItemWidth,E.itemWidth),this.totalItemWidth+=E.itemWidth,this.itemHeight=E.itemHeight=Math.round(L.labelHeight||(ee.height>1.5*ne?ee.height:ne))}layoutItem(E){let L=this.options,G=this.padding,Y=L.layout==="horizontal",J=E.itemHeight,de=this.itemMarginBottom,b=this.itemMarginTop,K=Y?O(L.itemDistance,20):0,z=this.maxLegendWidth,W=L.alignColumns&&this.totalItemWidth>z?this.maxItemWidth:E.itemWidth,re=E.legendItem||{};Y&&this.itemX-G+W>z&&(this.itemX=G,this.lastLineHeight&&(this.itemY+=b+this.lastLineHeight+de),this.lastLineHeight=0),this.lastItemY=b+this.itemY+de,this.lastLineHeight=Math.max(J,this.lastLineHeight),re.x=this.itemX,re.y=this.itemY,Y?this.itemX+=W:(this.itemY+=b+J+de,this.lastLineHeight=J),this.offsetWidth=this.widthOption||Math.max((Y?this.itemX-G-(E.checkbox?0:K):W)+G,this.offsetWidth)}getAllItems(){let E=[];return this.chart.series.forEach(function(L){let G=L&&L.options;L&&O(G.showInLegend,!T(G.linkedTo)&&void 0,!0)&&(E=E.concat((L.legendItem||{}).labels||(G.legendType==="point"?L.data:L)))}),M(this,"afterGetAllItems",{allItems:E}),E}getAlignment(){let E=this.options;return this.proximate?E.align.charAt(0)+"tv":E.floating?"":E.align.charAt(0)+E.verticalAlign.charAt(0)+E.layout.charAt(0)}adjustMargins(E,L){let G=this.chart,Y=this.options,J=this.getAlignment();J&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(de,b){de.test(J)&&!T(E[b])&&(G[m[b]]=Math.max(G[m[b]],G.legend[(b+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][b]*Y[b%2?"x":"y"]+O(Y.margin,12)+L[b]+(G.titleOffset[b]||0)))})}proximatePositions(){let E,L=this.chart,G=[],Y=this.options.align==="left";for(let J of(this.allItems.forEach(function(de){let b,K,z=Y,W,re;de.yAxis&&(de.xAxis.options.reversed&&(z=!z),de.points&&(b=S(z?de.points:de.points.slice(0).reverse(),function(I){return B(I.plotY)})),K=this.itemMarginTop+de.legendItem.label.getBBox().height+this.itemMarginBottom,re=de.yAxis.top-L.plotTop,W=de.visible?(b?b.plotY:de.yAxis.height)+(re-.3*K):re+de.yAxis.height,G.push({target:W,size:K,item:de}))},this),f(G,L.plotHeight)))E=J.item.legendItem||{},B(J.pos)&&(E.y=L.plotTop-L.spacing[0]+J.pos)}render(){let E=this.chart,L=E.renderer,G=this.options,Y=this.padding,J=this.getAllItems(),de,b,K,z=this.group,W,re=this.box;this.itemX=Y,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=P(G.width,E.spacingBox.width-Y),W=E.spacingBox.width-2*Y-G.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(W/=2),this.maxLegendWidth=this.widthOption||W,z||(this.group=z=L.g("legend").addClass(G.className||"").attr({zIndex:7}).add(),this.contentGroup=L.g().attr({zIndex:1}).add(z),this.scrollGroup=L.g().add(this.contentGroup)),this.renderTitle(),R(J,(I,k)=>(I.options&&I.options.legendIndex||0)-(k.options&&k.options.legendIndex||0)),G.reversed&&J.reverse(),this.allItems=J,this.display=de=!!J.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,J.forEach(this.renderItem,this),J.forEach(this.layoutItem,this),b=(this.widthOption||this.offsetWidth)+Y,K=this.lastItemY+this.lastLineHeight+this.titleHeight,K=this.handleOverflow(K)+Y,re||(this.box=re=L.rect().addClass("highcharts-legend-box").attr({r:G.borderRadius}).add(z)),E.styledMode||re.attr({stroke:G.borderColor,"stroke-width":G.borderWidth||0,fill:G.backgroundColor||"none"}).shadow(G.shadow),b>0&&K>0&&re[re.placed?"animate":"attr"](re.crisp.call({},{x:0,y:0,width:b,height:K},re.strokeWidth())),z[de?"show":"hide"](),E.styledMode&&z.getStyle("display")==="none"&&(b=K=0),this.legendWidth=b,this.legendHeight=K,de&&this.align(),this.proximate||this.positionItems(),M(this,"afterRender")}align(E=this.chart.spacingBox){let L=this.chart,G=this.options,Y=E.y;/(lth|ct|rth)/.test(this.getAlignment())&&L.titleOffset[0]>0?Y+=L.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&L.titleOffset[2]>0&&(Y-=L.titleOffset[2]),Y!==E.y&&(E=j(E,{y:Y})),L.hasRendered||(this.group.placed=!1),this.group.align(j(G,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":G.verticalAlign}),!0,E)}handleOverflow(E){let L=this,G=this.chart,Y=G.renderer,J=this.options,de=J.y,b=J.verticalAlign==="top",K=this.padding,z=J.maxHeight,W=J.navigation,re=O(W.animation,!0),I=W.arrowSize||12,k=this.pages,N=this.allItems,q=function(le){typeof le=="number"?ne.attr({height:le}):ne&&(L.clipRect=ne.destroy(),L.contentGroup.clip()),L.contentGroup.div&&(L.contentGroup.div.style.clip=le?"rect("+K+"px,9999px,"+(K+le)+"px,0)":"auto")},F=function(le){return L[le]=Y.circle(0,0,1.3*I).translate(I/2,I/2).add(ee),G.styledMode||L[le].attr("fill","rgba(0,0,0,0.0001)"),L[le]},H,U,X,Z=G.spacingBox.height+(b?-de:de)-K,ee=this.nav,ne=this.clipRect;return J.layout!=="horizontal"||J.verticalAlign==="middle"||J.floating||(Z/=2),z&&(Z=Math.min(Z,z)),k.length=0,E&&Z>0&&E>Z&&W.enabled!==!1?(this.clipHeight=H=Math.max(Z-20-this.titleHeight-K,0),this.currentPage=O(this.currentPage,1),this.fullHeight=E,N.forEach((le,ge)=>{let xe=(X=le.legendItem||{}).y||0,Se=Math.round(X.label.getBBox().height),se=k.length;(!se||xe-k[se-1]>H&&(U||xe)!==k[se-1])&&(k.push(U||xe),se++),X.pageIx=se-1,U&&((N[ge-1].legendItem||{}).pageIx=se-1),ge===N.length-1&&xe+Se-k[se-1]>H&&xe>k[se-1]&&(k.push(xe),X.pageIx=se),xe!==U&&(U=xe)}),ne||(ne=L.clipRect=Y.clipRect(0,K-2,9999,0),L.contentGroup.clip(ne)),q(H),ee||(this.nav=ee=Y.g().attr({zIndex:1}).add(this.group),this.up=Y.symbol("triangle",0,0,I,I).add(ee),F("upTracker").on("click",function(){L.scroll(-1,re)}),this.pager=Y.text("",15,10).addClass("highcharts-legend-navigation"),!G.styledMode&&W.style&&this.pager.css(W.style),this.pager.add(ee),this.down=Y.symbol("triangle-down",0,0,I,I).add(ee),F("downTracker").on("click",function(){L.scroll(1,re)})),L.scroll(0),E=Z):ee&&(q(),this.nav=ee.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),E}scroll(E,L){let G=this.chart,Y=this.pages,J=Y.length,de=this.clipHeight,b=this.options.navigation,K=this.pager,z=this.padding,W=this.currentPage+E;W>J&&(W=J),W>0&&(L!==void 0&&d(L,G),this.nav.attr({translateX:z,translateY:de+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(re){re.attr({class:W===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),K.attr({text:W+"/"+J}),[this.down,this.downTracker].forEach(function(re){re.attr({x:18+this.pager.getBBox().width,class:W===J?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),G.styledMode||(this.up.attr({fill:W===1?b.inactiveColor:b.activeColor}),this.upTracker.css({cursor:W===1?"default":"pointer"}),this.down.attr({fill:W===J?b.inactiveColor:b.activeColor}),this.downTracker.css({cursor:W===J?"default":"pointer"})),this.scrollOffset=-Y[W-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=W,this.positionCheckboxes(),v(()=>{M(this,"afterScroll",{currentPage:W})},c(O(L,G.renderer.globalAnimation,!0)).duration))}setItemEvents(E,L,G){let Y=this,J=E.legendItem||{},de=Y.chart.renderer.boxWrapper,b=E instanceof o,K="highcharts-legend-"+(b?"point":"series")+"-active",z=Y.chart.styledMode,W=G?[L,J.symbol]:[J.group],re=I=>{Y.allItems.forEach(k=>{E!==k&&[k].concat(k.linkedSeries||[]).forEach(N=>{N.setState(I,!b)})})};for(let I of W)I&&I.on("mouseover",function(){E.visible&&re("inactive"),E.setState("hover"),E.visible&&de.addClass(K),z||L.css(Y.options.itemHoverStyle)}).on("mouseout",function(){Y.chart.styledMode||L.css(j(E.visible?Y.itemStyle:Y.itemHiddenStyle)),re(""),de.removeClass(K),E.setState()}).on("click",function(k){let N="legendItemClick",q=function(){E.setVisible&&E.setVisible(),re(E.visible?"inactive":"")};de.removeClass(K),k={browserEvent:k},E.firePointEvent?E.firePointEvent(N,k,q):M(E,N,k,q)})}createCheckboxForItem(E){E.checkbox=y("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:E.selected,defaultChecked:E.selected},this.options.itemCheckboxStyle,this.chart.container),g(E.checkbox,"click",function(L){let G=L.target;M(E.series||E,"checkboxClick",{checked:G.checked,item:E},function(){E.select()})})}}return(h=C||(C={})).compose=function(D){_(u,"Core.Legend")&&g(D,"beforeMargins",function(){this.legend=new h(this,this.options.legend)})},C}),i(e,"Core/Legend/LegendSymbol.js",[e["Core/Utilities.js"]],function(s){var r;let{extend:n,merge:o,pick:a}=s;return function(l){function h(c,d,p){let u=this.legendItem=this.legendItem||{},{chart:m,options:f}=this,{baseline:g=0,symbolWidth:y,symbolHeight:x}=c,T=this.symbol||"circle",A=x/2,S=m.renderer,M=u.group,B=g-Math.round(x*(p?.4:.3)),j={},O,_=f.marker,P=0;if(m.styledMode||(j["stroke-width"]=Math.min(f.lineWidth||0,24),f.dashStyle?j.dashstyle=f.dashStyle:f.linecap==="square"||(j["stroke-linecap"]="round")),u.line=S.path().addClass("highcharts-graph").attr(j).add(M),p&&(u.area=S.path().addClass("highcharts-area").add(M)),j["stroke-linecap"]&&(P=Math.min(u.line.strokeWidth(),y)/2),y){let R=[["M",P,B],["L",y-P,B]];u.line.attr({d:R}),u.area?.attr({d:[...R,["L",y-P,g],["L",P,g]]})}if(_&&_.enabled!==!1&&y){let R=Math.min(a(_.radius,A),A);T.indexOf("url")===0&&(_=o(_,{width:x,height:x}),R=0),u.symbol=O=S.symbol(T,y/2-R,B-R,2*R,2*R,n({context:"legend"},_)).addClass("highcharts-point").add(M),O.isMarker=!0}}l.areaMarker=function(c,d){h.call(this,c,d,!0)},l.lineMarker=h,l.rectangle=function(c,d){let p=d.legendItem||{},u=c.options,m=c.symbolHeight,f=u.squareSymbol,g=f?m:c.symbolWidth;p.symbol=this.chart.renderer.rect(f?(c.symbolWidth-m)/2:0,c.baseline-m+1,g,m,a(c.options.symbolRadius,m/2)).addClass("highcharts-point").attr({zIndex:3}).add(p.group)}}(r||(r={})),r}),i(e,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:s}=this.series.chart;return typeof this.y!="number"?"":s(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),i(e,"Core/Series/SeriesRegistry.js",[e["Core/Globals.js"],e["Core/Defaults.js"],e["Core/Series/Point.js"],e["Core/Utilities.js"]],function(s,r,n,o){var a;let{defaultOptions:l}=r,{extend:h,extendClass:c,merge:d}=o;return function(p){function u(m,f){let g=l.plotOptions||{},y=f.defaultOptions,x=f.prototype;return x.type=m,x.pointClass||(x.pointClass=n),!p.seriesTypes[m]&&(y&&(g[m]=y),p.seriesTypes[m]=f,!0)}p.seriesTypes=s.seriesTypes,p.registerSeriesType=u,p.seriesType=function(m,f,g,y,x){let T=l.plotOptions||{};if(f=f||"",T[m]=d(T[f],g),delete p.seriesTypes[m],u(m,c(p.seriesTypes[f]||function(){},y)),p.seriesTypes[m].prototype.type=m,x){class A extends n{}h(A.prototype,x),p.seriesTypes[m].prototype.pointClass=A}return p.seriesTypes[m]}}(a||(a={})),a}),i(e,"Core/Series/Series.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Defaults.js"],e["Core/Foundation.js"],e["Core/Globals.js"],e["Core/Legend/LegendSymbol.js"],e["Core/Series/Point.js"],e["Core/Series/SeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Utilities.js"]],function(s,r,n,o,a,l,h,c,d,p){let{animObject:u,setAnimation:m}=s,{defaultOptions:f}=r,{registerEventOptions:g}=n,{svg:y,win:x}=o,{seriesTypes:T}=c,{arrayMax:A,arrayMin:S,clamp:M,correctFloat:B,crisp:j,defined:O,destroyObjectProperties:_,diffObjects:P,erase:R,error:v,extend:C,find:D,fireEvent:E,getClosestDistance:L,getNestedProperty:G,insertItem:Y,isArray:J,isNumber:de,isString:b,merge:K,objectEach:z,pick:W,removeEvent:re,splat:I,syncTimeout:k}=p;class N{constructor(){this.zoneAxis="y"}init(F,H){let U;E(this,"init",{options:H});let X=this,Z=F.series;this.eventsToUnbind=[],X.chart=F,X.options=X.setOptions(H);let ee=X.options,ne=ee.visible!==!1;X.linkedSeries=[],X.bindAxes(),C(X,{name:ee.name,state:"",visible:ne,selected:ee.selected===!0}),g(this,ee);let le=ee.events;(le&&le.click||ee.point&&ee.point.events&&ee.point.events.click||ee.allowPointSelect)&&(F.runTrackerClick=!0),X.getColor(),X.getSymbol(),X.parallelArrays.forEach(function(ge){X[ge+"Data"]||(X[ge+"Data"]=[])}),X.isCartesian&&(F.hasCartesianSeries=!0),Z.length&&(U=Z[Z.length-1]),X._i=W(U&&U._i,-1)+1,X.opacity=X.options.opacity,F.orderItems("series",Y(this,Z)),ee.dataSorting&&ee.dataSorting.enabled?X.setDataSortingOptions():X.points||X.data||X.setData(ee.data,!1),E(this,"afterInit")}is(F){return T[F]&&this instanceof T[F]}bindAxes(){let F,H=this,U=H.options,X=H.chart;E(this,"bindAxes",null,function(){(H.axisTypes||[]).forEach(function(Z){(X[Z]||[]).forEach(function(ee){F=ee.options,(W(U[Z],0)===ee.index||U[Z]!==void 0&&U[Z]===F.id)&&(Y(H,ee.series),H[Z]=ee,ee.isDirty=!0)}),H[Z]||H.optionalAxis===Z||v(18,!0,X)})}),E(this,"afterBindAxes")}updateParallelArrays(F,H,U){let X=F.series,Z=de(H)?function(ee){let ne=ee==="y"&&X.toYData?X.toYData(F):F[ee];X[ee+"Data"][H]=ne}:function(ee){Array.prototype[H].apply(X[ee+"Data"],U)};X.parallelArrays.forEach(Z)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(F,H){let U=F.marker,X=H.marker||{};return U&&(X.enabled&&!U.enabled||X.symbol!==U.symbol||X.height!==U.height||X.width!==U.width)}autoIncrement(F){let H=this.options,U=H.pointIntervalUnit,X=H.relativeXValue,Z=this.chart.time,ee=this.xIncrement,ne,le;return ee=W(ee,H.pointStart,0),this.pointInterval=le=W(this.pointInterval,H.pointInterval,1),X&&de(F)&&(le*=F),U&&(ne=new Z.Date(ee),U==="day"?Z.set("Date",ne,Z.get("Date",ne)+le):U==="month"?Z.set("Month",ne,Z.get("Month",ne)+le):U==="year"&&Z.set("FullYear",ne,Z.get("FullYear",ne)+le),le=ne.getTime()-ee),X&&de(F)?ee+le:(this.xIncrement=ee+le,ee)}setDataSortingOptions(){let F=this.options;C(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),O(F.pointRange)||(F.pointRange=1)}setOptions(F){let H,U=this.chart,X=U.options.plotOptions,Z=U.userOptions||{},ee=K(F),ne=U.styledMode,le={plotOptions:X,userOptions:ee};E(this,"setOptions",le);let ge=le.plotOptions[this.type],xe=Z.plotOptions||{},Se=xe.series||{},se=f.plotOptions[this.type]||{},ie=xe[this.type]||{};this.userOptions=le.userOptions;let oe=K(ge,X.series,ie,ee);this.tooltipOptions=K(f.tooltip,f.plotOptions.series?.tooltip,se?.tooltip,U.userOptions.tooltip,xe.series?.tooltip,ie.tooltip,ee.tooltip),this.stickyTracking=W(ee.stickyTracking,ie.stickyTracking,Se.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||oe.stickyTracking),ge.marker===null&&delete oe.marker,this.zoneAxis=oe.zoneAxis||"y";let ce=this.zones=(oe.zones||[]).map(ve=>Xe({},ve));return(oe.negativeColor||oe.negativeFillColor)&&!oe.zones&&(H={value:oe[this.zoneAxis+"Threshold"]||oe.threshold||0,className:"highcharts-negative"},ne||(H.color=oe.negativeColor,H.fillColor=oe.negativeFillColor),ce.push(H)),ce.length&&O(ce[ce.length-1].value)&&ce.push(ne?{}:{color:this.color,fillColor:this.fillColor}),E(this,"afterSetOptions",{options:oe}),oe}getName(){return W(this.options.name,"Series "+(this.index+1))}getCyclic(F,H,U){let X,Z,ee=this.chart,ne=`${F}Index`,le=`${F}Counter`,ge=U?.length||ee.options.chart.colorCount;!H&&(O(Z=W(F==="color"?this.options.colorIndex:void 0,this[ne]))?X=Z:(ee.series.length||(ee[le]=0),X=ee[le]%ge,ee[le]+=1),U&&(H=U[X])),X!==void 0&&(this[ne]=X),this[F]=H}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||f.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let F=this.options.marker;this.getCyclic("symbol",F.symbol,this.chart.options.symbols)}findPointIndex(F,H){let U,X,Z,ee=F.id,ne=F.x,le=this.points,ge=this.options.dataSorting;if(ee){let xe=this.chart.get(ee);xe instanceof l&&(U=xe)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let xe=Se=>!Se.touched&&Se.index===F.index;if(ge&&ge.matchByName?xe=Se=>!Se.touched&&Se.name===F.name:this.options.relativeXValue&&(xe=Se=>!Se.touched&&Se.options.x===F.x),!(U=D(le,xe)))return}return U&&(Z=U&&U.index)!==void 0&&(X=!0),Z===void 0&&de(ne)&&(Z=this.xData.indexOf(ne,H)),Z!==-1&&Z!==void 0&&this.cropped&&(Z=Z>=this.cropStart?Z-this.cropStart:Z),!X&&de(Z)&&le[Z]&&le[Z].touched&&(Z=void 0),Z}updateData(F,H){let U=this.options,X=U.dataSorting,Z=this.points,ee=[],ne=this.requireSorting,le=F.length===Z.length,ge,xe,Se,se,ie=!0;if(this.xIncrement=null,F.forEach(function(oe,ce){let ve,me=O(oe)&&this.pointClass.prototype.optionsToObject.call({series:this},oe)||{},ye=me.x;me.id||de(ye)?((ve=this.findPointIndex(me,se))===-1||ve===void 0?ee.push(oe):Z[ve]&&oe!==U.data[ve]?(Z[ve].update(oe,!1,null,!1),Z[ve].touched=!0,ne&&(se=ve+1)):Z[ve]&&(Z[ve].touched=!0),(!le||ce!==ve||X&&X.enabled||this.hasDerivedData)&&(ge=!0)):ee.push(oe)},this),ge)for(xe=Z.length;xe--;)(Se=Z[xe])&&!Se.touched&&Se.remove&&Se.remove(!1,H);else!le||X&&X.enabled?ie=!1:(F.forEach(function(oe,ce){oe===Z[ce].y||Z[ce].destroyed||Z[ce].update(oe,!1,null,!1)}),ee.length=0);return Z.forEach(function(oe){oe&&(oe.touched=!1)}),!!ie&&(ee.forEach(function(oe){this.addPoint(oe,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=A(this.xData),this.autoIncrement()),!0)}setData(F,H=!0,U,X){let Z=this,ee=Z.points,ne=ee&&ee.length||0,le=Z.options,ge=Z.chart,xe=le.dataSorting,Se=Z.xAxis,se=le.turboThreshold,ie=this.xData,oe=this.yData,ce=Z.pointArrayMap,ve=ce&&ce.length,me=le.keys,ye,we,Ee,Pe=0,Oe=1,Re=null,We;ge.options.chart.allowMutatingData||(le.data&&delete Z.options.data,Z.userOptions.data&&delete Z.userOptions.data,We=K(!0,F));let Ze=(F=We||F||[]).length;if(xe&&xe.enabled&&(F=this.sortData(F)),ge.options.chart.allowMutatingData&&X!==!1&&Ze&&ne&&!Z.cropped&&!Z.hasGroupedData&&Z.visible&&!Z.boosted&&(Ee=this.updateData(F,U)),!Ee){if(Z.xIncrement=null,Z.colorCounter=0,this.parallelArrays.forEach(function(ze){Z[ze+"Data"].length=0}),se&&Ze>se)if(de(Re=Z.getFirstValidPoint(F)))for(ye=0;ye<Ze;ye++)ie[ye]=this.autoIncrement(),oe[ye]=F[ye];else if(J(Re))if(ve)if(Re.length===ve)for(ye=0;ye<Ze;ye++)ie[ye]=this.autoIncrement(),oe[ye]=F[ye];else for(ye=0;ye<Ze;ye++)we=F[ye],ie[ye]=we[0],oe[ye]=we.slice(1,ve+1);else if(me&&(Pe=me.indexOf("x"),Oe=me.indexOf("y"),Pe=Pe>=0?Pe:0,Oe=Oe>=0?Oe:1),Re.length===1&&(Oe=0),Pe===Oe)for(ye=0;ye<Ze;ye++)ie[ye]=this.autoIncrement(),oe[ye]=F[ye][Oe];else for(ye=0;ye<Ze;ye++)we=F[ye],ie[ye]=we[Pe],oe[ye]=we[Oe];else v(12,!1,ge);else for(ye=0;ye<Ze;ye++)we={series:Z},Z.pointClass.prototype.applyOptions.apply(we,[F[ye]]),Z.updateParallelArrays(we,ye);for(oe&&b(oe[0])&&v(14,!0,ge),Z.data=[],Z.options.data=Z.userOptions.data=F,ye=ne;ye--;)ee[ye]?.destroy();Se&&(Se.minRange=Se.userMinRange),Z.isDirty=ge.isDirtyBox=!0,Z.isDirtyData=!!ee,U=!1}le.legendType==="point"&&(this.processData(),this.generatePoints()),H&&ge.redraw(U)}sortData(F){let H=this,U=H.options.dataSorting.sortKey||"y",X=function(Z,ee){return O(ee)&&Z.pointClass.prototype.optionsToObject.call({series:Z},ee)||{}};return F.forEach(function(Z,ee){F[ee]=X(H,Z),F[ee].index=ee},this),F.concat().sort((Z,ee)=>{let ne=G(U,Z),le=G(U,ee);return le<ne?-1:le>ne?1:0}).forEach(function(Z,ee){Z.x=ee},this),H.linkedSeries&&H.linkedSeries.forEach(function(Z){let ee=Z.options,ne=ee.data;ee.dataSorting&&ee.dataSorting.enabled||!ne||(ne.forEach(function(le,ge){ne[ge]=X(Z,le),F[ge]&&(ne[ge].x=F[ge].x,ne[ge].index=ge)}),Z.setData(ne,!1))}),F}getProcessedData(F){let H=this,U=H.xAxis,X=H.options.cropThreshold,Z=U?.logarithmic,ee=H.isCartesian,ne,le,ge=0,xe,Se,se,ie=H.xData,oe=H.yData,ce=!1,ve=ie.length;U&&(Se=(xe=U.getExtremes()).min,se=xe.max,ce=!!(U.categories&&!U.names.length)),ee&&H.sorted&&!F&&(!X||ve>X||H.forceCrop)&&(ie[ve-1]<Se||ie[0]>se?(ie=[],oe=[]):H.yData&&(ie[0]<Se||ie[ve-1]>se)&&(ie=(ne=this.cropData(H.xData,H.yData,Se,se)).xData,oe=ne.yData,ge=ne.start,le=!0));let me=L([Z?ie.map(Z.log2lin):ie],()=>H.requireSorting&&!ce&&v(15,!1,H.chart));return{xData:ie,yData:oe,cropped:le,cropStart:ge,closestPointRange:me}}processData(F){let H=this.xAxis;if(this.isCartesian&&!this.isDirty&&!H.isDirty&&!this.yAxis.isDirty&&!F)return!1;let U=this.getProcessedData();this.cropped=U.cropped,this.cropStart=U.cropStart,this.processedXData=U.xData,this.processedYData=U.yData,this.closestPointRange=this.basePointRange=U.closestPointRange,E(this,"afterProcessData")}cropData(F,H,U,X){let Z=F.length,ee,ne,le=0,ge=Z;for(ee=0;ee<Z;ee++)if(F[ee]>=U){le=Math.max(0,ee-1);break}for(ne=ee;ne<Z;ne++)if(F[ne]>X){ge=ne+1;break}return{xData:F.slice(le,ge),yData:H.slice(le,ge),start:le,end:ge}}generatePoints(){let F=this.options,H=this.processedData||F.data,U=this.processedXData,X=this.processedYData,Z=this.pointClass,ee=U.length,ne=this.cropStart||0,le=this.hasGroupedData,ge=F.keys,xe=[],Se=F.dataGrouping&&F.dataGrouping.groupAll?ne:0,se,ie,oe,ce,ve=this.data;if(!ve&&!le){let me=[];me.length=H.length,ve=this.data=me}for(ge&&le&&(this.options.keys=!1),ce=0;ce<ee;ce++)ie=ne+ce,le?((oe=new Z(this,[U[ce]].concat(I(X[ce])))).dataGroup=this.groupMap[Se+ce],oe.dataGroup.options&&(oe.options=oe.dataGroup.options,C(oe,oe.dataGroup.options),delete oe.dataLabels)):(oe=ve[ie])||H[ie]===void 0||(ve[ie]=oe=new Z(this,H[ie],U[ce])),oe&&(oe.index=le?Se+ce:ie,xe[ce]=oe);if(this.options.keys=ge,ve&&(ee!==(se=ve.length)||le))for(ce=0;ce<se;ce++)ce!==ne||le||(ce+=ee),ve[ce]&&(ve[ce].destroyElements(),ve[ce].plotX=void 0);this.data=ve,this.points=xe,E(this,"afterGeneratePoints")}getXExtremes(F){return{min:S(F),max:A(F)}}getExtremes(F,H){let U=this.xAxis,X=this.yAxis,Z=[],ee=this.requireSorting&&!this.is("column")?1:0,ne=!!X&&X.positiveValuesOnly,le=H||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:ge,processedYData:xe}=this,Se,se,ie,oe,ce,ve,me,ye=0,we=0,Ee=0;if(this.cropped&&le){let We=this.getProcessedData(!0);ge=We.xData,xe=We.yData}let Pe=(F=F||this.stackedYData||xe||[]).length,Oe=ge||this.xData;for(U&&(ye=(Se=U.getExtremes()).min,we=Se.max),ve=0;ve<Pe;ve++)if(oe=Oe[ve],se=(de(ce=F[ve])||J(ce))&&((de(ce)?ce>0:ce.length)||!ne),ie=H||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!U||(Oe[ve+ee]||oe)>=ye&&(Oe[ve-ee]||oe)<=we,se&&ie)if(me=ce.length)for(;me--;)de(ce[me])&&(Z[Ee++]=ce[me]);else Z[Ee++]=ce;let Re={activeYData:Z,dataMin:S(Z),dataMax:A(Z)};return E(this,"afterGetExtremes",{dataExtremes:Re}),Re}applyExtremes(){let F=this.getExtremes();return this.dataMin=F.dataMin,this.dataMax=F.dataMax,F}getFirstValidPoint(F){let H=F.length,U=0,X=null;for(;X===null&&U<H;)X=F[U],U++;return X}translate(){this.processedXData||this.processData(),this.generatePoints();let F=this.options,H=F.stacking,U=this.xAxis,X=U.categories,Z=this.enabledDataSorting,ee=this.yAxis,ne=this.points,le=ne.length,ge=this.pointPlacementToXValue(),xe=!!ge,Se=F.threshold,se=F.startFromThreshold?Se:0,ie,oe,ce,ve,me=Number.MAX_VALUE;function ye(we){return M(we,-1e5,1e5)}for(ie=0;ie<le;ie++){let we,Ee=ne[ie],Pe=Ee.x,Oe,Re,We=Ee.y,Ze=Ee.low,ze=H&&ee.stacking?.stacks[(this.negStacks&&We<(se?0:Se)?"-":"")+this.stackKey];oe=U.translate(Pe,!1,!1,!1,!0,ge),Ee.plotX=de(oe)?B(ye(oe)):void 0,H&&this.visible&&ze&&ze[Pe]&&(ve=this.getStackIndicator(ve,Pe,this.index),!Ee.isNull&&ve.key&&(Re=(Oe=ze[Pe]).points[ve.key]),Oe&&J(Re)&&(Ze=Re[0],We=Re[1],Ze===se&&ve.key===ze[Pe].base&&(Ze=W(de(Se)?Se:ee.min)),ee.positiveValuesOnly&&O(Ze)&&Ze<=0&&(Ze=void 0),Ee.total=Ee.stackTotal=W(Oe.total),Ee.percentage=O(Ee.y)&&Oe.total?Ee.y/Oe.total*100:void 0,Ee.stackY=We,this.irregularWidths||Oe.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),Ee.yBottom=O(Ze)?ye(ee.translate(Ze,!1,!0,!1,!0)):void 0,this.dataModify&&(We=this.dataModify.modifyValue(We,ie)),de(We)&&Ee.plotX!==void 0&&(we=de(we=ee.translate(We,!1,!0,!1,!0))?ye(we):void 0),Ee.plotY=we,Ee.isInside=this.isPointInside(Ee),Ee.clientX=xe?B(U.translate(Pe,!1,!1,!1,!0,ge)):oe,Ee.negative=(Ee.y||0)<(Se||0),Ee.category=W(X&&X[Ee.x],Ee.x),Ee.isNull||Ee.visible===!1||(ce!==void 0&&(me=Math.min(me,Math.abs(oe-ce))),ce=oe),Ee.zone=this.zones.length?Ee.getZone():void 0,!Ee.graphic&&this.group&&Z&&(Ee.isNew=!0)}this.closestPointRangePx=me,E(this,"afterTranslate")}getValidPoints(F,H,U){let X=this.chart;return(F||this.points||[]).filter(function(Z){let{plotX:ee,plotY:ne}=Z;return!!((U||!Z.isNull&&de(ne))&&(!H||X.isInsidePlot(ee,ne,{inverted:X.inverted})))&&Z.visible!==!1})}getClipBox(){let{chart:F,xAxis:H,yAxis:U}=this,{x:X,y:Z,width:ee,height:ne}=K(F.clipBox);return H&&H.len!==F.plotSizeX&&(ee=H.len),U&&U.len!==F.plotSizeY&&(ne=U.len),F.inverted&&!this.invertible&&([ee,ne]=[ne,ee]),{x:X,y:Z,width:ee,height:ne}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:F,group:H,markerGroup:U}=this,X=F.sharedClips,Z=F.renderer,ee=this.getClipBox(),ne=this.getSharedClipKey(),le=X[ne];le?le.animate(ee):X[ne]=le=Z.clipRect(ee),H&&H.clip(this.options.clip===!1?void 0:le),U&&U.clip()}animate(F){let{chart:H,group:U,markerGroup:X}=this,Z=H.inverted,ee=u(this.options.animation),ne=[this.getSharedClipKey(),ee.duration,ee.easing,ee.defer].join(","),le=H.sharedClips[ne],ge=H.sharedClips[ne+"m"];if(F&&U){let xe=this.getClipBox();if(le)le.attr("height",xe.height);else{xe.width=0,Z&&(xe.x=H.plotHeight),le=H.renderer.clipRect(xe),H.sharedClips[ne]=le;let Se={x:-99,y:-99,width:Z?H.plotWidth+199:99,height:Z?99:H.plotHeight+199};ge=H.renderer.clipRect(Se),H.sharedClips[ne+"m"]=ge}U.clip(le),X?.clip(ge)}else if(le&&!le.hasClass("highcharts-animating")){let xe=this.getClipBox(),Se=ee.step;(X?.element.childNodes.length||H.series.length>1)&&(ee.step=function(se,ie){Se&&Se.apply(ie,arguments),ie.prop==="width"&&ge?.element&&ge.attr(Z?"height":"width",se+99)}),le.addClass("highcharts-animating").animate(xe,ee)}}afterAnimate(){this.setClip(),z(this.chart.sharedClips,(F,H,U)=>{F&&!this.chart.container.querySelector(`[clip-path="url(#${F.id})"]`)&&(F.destroy(),delete U[H])}),this.finishedAnimating=!0,E(this,"afterAnimate")}drawPoints(F=this.points){let H,U,X,Z,ee,ne,le,ge=this.chart,xe=ge.styledMode,{colorAxis:Se,options:se}=this,ie=se.marker,oe=this[this.specialGroup||"markerGroup"],ce=this.xAxis,ve=W(ie.enabled,!ce||!!ce.isRadial||null,this.closestPointRangePx>=ie.enabledThreshold*ie.radius);if(ie.enabled!==!1||this._hasPointMarkers)for(H=0;H<F.length;H++)if(Z=(X=(U=F[H]).graphic)?"animate":"attr",ee=U.marker||{},ne=!!U.marker,(ve&&ee.enabled===void 0||ee.enabled)&&!U.isNull&&U.visible!==!1){let me=W(ee.symbol,this.symbol,"rect");le=this.markerAttribs(U,U.selected&&"select"),this.enabledDataSorting&&(U.startXPos=ce.reversed?-(le.width||0):ce.width);let ye=U.isInside!==!1;if(!X&&ye&&((le.width||0)>0||U.hasImage)&&(U.graphic=X=ge.renderer.symbol(me,le.x,le.y,le.width,le.height,ne?ee:ie).add(oe),this.enabledDataSorting&&ge.hasRendered&&(X.attr({x:U.startXPos}),Z="animate")),X&&Z==="animate"&&X[ye?"show":"hide"](ye).animate(le),X){let we=this.pointAttribs(U,xe||!U.selected?void 0:"select");xe?Se&&X.css({fill:we.fill}):X[Z](we)}X&&X.addClass(U.getClassName(),!0)}else X&&(U.graphic=X.destroy())}markerAttribs(F,H){let U=this.options,X=U.marker,Z=F.marker||{},ee=Z.symbol||X.symbol,ne={},le,ge,xe=W(Z.radius,X&&X.radius);H&&(le=X.states[H],xe=W((ge=Z.states&&Z.states[H])&&ge.radius,le&&le.radius,xe&&xe+(le&&le.radiusPlus||0))),F.hasImage=ee&&ee.indexOf("url")===0,F.hasImage&&(xe=0);let Se=F.pos();return de(xe)&&Se&&(U.crisp&&(Se[0]=j(Se[0],F.hasImage?0:ee==="rect"?X?.lineWidth||0:1)),ne.x=Se[0]-xe,ne.y=Se[1]-xe),xe&&(ne.width=ne.height=2*xe),ne}pointAttribs(F,H){let U=this.options.marker,X=F&&F.options,Z=X&&X.marker||{},ee=X&&X.color,ne=F&&F.color,le=F&&F.zone&&F.zone.color,ge,xe,Se=this.color,se,ie,oe=W(Z.lineWidth,U.lineWidth),ce=1;return Se=ee||le||ne||Se,se=Z.fillColor||U.fillColor||Se,ie=Z.lineColor||U.lineColor||Se,H=H||"normal",ge=U.states[H]||{},oe=W((xe=Z.states&&Z.states[H]||{}).lineWidth,ge.lineWidth,oe+W(xe.lineWidthPlus,ge.lineWidthPlus,0)),se=xe.fillColor||ge.fillColor||se,{stroke:ie=xe.lineColor||ge.lineColor||ie,"stroke-width":oe,fill:se,opacity:ce=W(xe.opacity,ge.opacity,ce)}}destroy(F){let H,U,X,Z=this,ee=Z.chart,ne=/AppleWebKit\/533/.test(x.navigator.userAgent),le=Z.data||[];for(E(Z,"destroy",{keepEventsForUpdate:F}),this.removeEvents(F),(Z.axisTypes||[]).forEach(function(ge){(X=Z[ge])&&X.series&&(R(X.series,Z),X.isDirty=X.forceRedraw=!0)}),Z.legendItem&&Z.chart.legend.destroyItem(Z),H=le.length;H--;)(U=le[H])&&U.destroy&&U.destroy();for(let ge of Z.zones)_(ge,void 0,!0);p.clearTimeout(Z.animationTimeout),z(Z,function(ge,xe){ge instanceof d&&!ge.survive&&ge[ne&&xe==="group"?"hide":"destroy"]()}),ee.hoverSeries===Z&&(ee.hoverSeries=void 0),R(ee.series,Z),ee.orderItems("series"),z(Z,function(ge,xe){F&&xe==="hcEvents"||delete Z[xe]})}applyZones(){let{area:F,chart:H,graph:U,zones:X,points:Z,xAxis:ee,yAxis:ne,zoneAxis:le}=this,{inverted:ge,renderer:xe}=H,Se=this[`${le}Axis`],{isXAxis:se,len:ie=0}=Se||{},oe=(U?.strokeWidth()||0)/2+1,ce=(ve,me=0,ye=0)=>{ge&&(ye=ie-ye);let{translated:we=0,lineClip:Ee}=ve,Pe=ye-we;Ee?.push(["L",me,Math.abs(Pe)<oe?ye-oe*(Pe<=0?-1:1):we])};if(X.length&&(U||F)&&Se&&de(Se.min)){let ve=Se.getExtremes().max,me=Ee=>{Ee.forEach((Pe,Oe)=>{(Pe[0]==="M"||Pe[0]==="L")&&(Ee[Oe]=[Pe[0],se?ie-Pe[1]:Pe[1],se?Pe[2]:ie-Pe[2]])})};if(X.forEach(Ee=>{Ee.lineClip=[],Ee.translated=M(Se.toPixels(W(Ee.value,ve),!0)||0,0,ie)}),U&&!this.showLine&&U.hide(),F&&F.hide(),le==="y"&&Z.length<ee.len)for(let Ee of Z){let{plotX:Pe,plotY:Oe,zone:Re}=Ee,We=Re&&X[X.indexOf(Re)-1];Re&&ce(Re,Pe,Oe),We&&ce(We,Pe,Oe)}let ye=[],we=Se.toPixels(Se.getExtremes().min,!0);X.forEach(Ee=>{let Pe=Ee.lineClip||[],Oe=Math.round(Ee.translated||0);ee.reversed&&Pe.reverse();let{clip:Re,simpleClip:We}=Ee,Ze=0,ze=0,Ge=ee.len,ut=ne.len;se?(Ze=Oe,Ge=we):(ze=Oe,ut=we);let Ct=[["M",Ze,ze],["L",Ge,ze],["L",Ge,ut],["L",Ze,ut],["Z"]],Mt=[Ct[0],...Pe,Ct[1],Ct[2],...ye,Ct[3],Ct[4]];ye=Pe.reverse(),we=Oe,ge&&(me(Mt),F&&me(Ct)),Re?(Re.animate({d:Mt}),We?.animate({d:Ct})):(Re=Ee.clip=xe.path(Mt),F&&(We=Ee.simpleClip=xe.path(Ct))),U&&Ee.graph?.clip(Re),F&&Ee.area?.clip(We)})}else this.visible&&(U&&U.show(),F&&F.show())}plotGroup(F,H,U,X,Z){let ee=this[F],ne=!ee,le={visibility:U,zIndex:X||.1};return O(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(le.opacity=this.opacity),ee||(this[F]=ee=this.chart.renderer.g().add(Z)),ee.addClass("highcharts-"+H+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(O(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(ee.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),ee.attr(le)[ne?"attr":"animate"](this.getPlotBox(H)),ee}getPlotBox(F){let H=this.xAxis,U=this.yAxis,X=this.chart,Z=X.inverted&&!X.polar&&H&&this.invertible&&F==="series";return X.inverted&&(H=U,U=this.xAxis),{translateX:H?H.left:X.plotLeft,translateY:U?U.top:X.plotTop,rotation:Z?90:0,rotationOriginX:Z?(H.len-U.len)/2:0,rotationOriginY:Z?(H.len+U.len)/2:0,scaleX:Z?-1:1,scaleY:1}}removeEvents(F){let{eventsToUnbind:H}=this;F||re(this),H.length&&(H.forEach(U=>{U()}),H.length=0)}render(){let F=this,{chart:H,options:U,hasRendered:X}=F,Z=u(U.animation),ee=F.visible?"inherit":"hidden",ne=U.zIndex,le=H.seriesGroup,ge=F.finishedAnimating?0:Z.duration;E(this,"render"),F.plotGroup("group","series",ee,ne,le),F.markerGroup=F.plotGroup("markerGroup","markers",ee,ne,le),U.clip!==!1&&F.setClip(),ge&&F.animate?.(!0),F.drawGraph&&(F.drawGraph(),F.applyZones()),F.visible&&F.drawPoints(),F.drawDataLabels?.(),F.redrawPoints?.(),U.enableMouseTracking&&F.drawTracker?.(),ge&&F.animate?.(),X||(ge&&Z.defer&&(ge+=Z.defer),F.animationTimeout=k(()=>{F.afterAnimate()},ge||0)),F.isDirty=!1,F.hasRendered=!0,E(F,"afterRender")}redraw(){let F=this.isDirty||this.isDirtyData;this.translate(),this.render(),F&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(F,H){let{xAxis:U,yAxis:X}=this,Z=this.chart.inverted;return this.searchKDTree({clientX:Z?U.len-F.chartY+U.pos:F.chartX-U.pos,plotY:Z?X.len-F.chartX+X.pos:F.chartY-X.pos},H,F)}buildKDTree(F){this.buildingKdTree=!0;let H=this,U=H.options.findNearestPointBy.indexOf("y")>-1?2:1;delete H.kdTree,k(function(){H.kdTree=function X(Z,ee,ne){let le,ge,xe=Z?.length;if(xe)return le=H.kdAxisArray[ee%ne],Z.sort((Se,se)=>(Se[le]||0)-(se[le]||0)),{point:Z[ge=Math.floor(xe/2)],left:X(Z.slice(0,ge),ee+1,ne),right:X(Z.slice(ge+1),ee+1,ne)}}(H.getValidPoints(void 0,!H.directTouch),U,U),H.buildingKdTree=!1},H.options.kdNow||F?.type==="touchstart"?0:1)}searchKDTree(F,H,U){let X=this,[Z,ee]=this.kdAxisArray,ne=H?"distX":"dist",le=(X.options.findNearestPointBy||"").indexOf("y")>-1?2:1,ge=!!X.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(U),this.kdTree)return function xe(Se,se,ie,oe){let ce=se.point,ve=X.kdAxisArray[ie%oe],me,ye,we=ce;(function(Re,We){let Ze=Re[Z],ze=We[Z],Ge=O(Ze)&&O(ze)?Ze-ze:null,ut=Re[ee],Ct=We[ee],Mt=O(ut)&&O(Ct)?ut-Ct:0,Vt=ge&&We.marker?.radius||0;We.dist=Math.sqrt((Ge&&Ge*Ge||0)+Mt*Mt)-Vt,We.distX=O(Ge)?Math.abs(Ge)-Vt:Number.MAX_VALUE})(Se,ce);let Ee=(Se[ve]||0)-(ce[ve]||0)+(ge&&ce.marker?.radius||0),Pe=Ee<0?"left":"right",Oe=Ee<0?"right":"left";return se[Pe]&&(we=(me=xe(Se,se[Pe],ie+1,oe))[ne]<we[ne]?me:ce),se[Oe]&&Math.sqrt(Ee*Ee)<we[ne]&&(we=(ye=xe(Se,se[Oe],ie+1,oe))[ne]<we[ne]?ye:we),we}(F,this.kdTree,le,le)}pointPlacementToXValue(){let{options:F,xAxis:H}=this,U=F.pointPlacement;return U==="between"&&(U=H.reversed?-.5:.5),de(U)?U*(F.pointRange||H.pointRange):0}isPointInside(F){let{chart:H,xAxis:U,yAxis:X}=this,{plotX:Z=-1,plotY:ee=-1}=F;return ee>=0&&ee<=(X?X.len:H.plotHeight)&&Z>=0&&Z<=(U?U.len:H.plotWidth)}drawTracker(){let F=this,H=F.options,U=H.trackByArea,X=[].concat((U?F.areaPath:F.graphPath)||[]),Z=F.chart,ee=Z.pointer,ne=Z.renderer,le=Z.options.tooltip?.snap||0,ge=()=>{H.enableMouseTracking&&Z.hoverSeries!==F&&F.onMouseOver()},xe="rgba(192,192,192,"+(y?1e-4:.002)+")",Se=F.tracker;Se?Se.attr({d:X}):F.graph&&(F.tracker=Se=ne.path(X).attr({visibility:F.visible?"inherit":"hidden",zIndex:2}).addClass(U?"highcharts-tracker-area":"highcharts-tracker-line").add(F.group),Z.styledMode||Se.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:xe,fill:U?xe:"none","stroke-width":F.graph.strokeWidth()+(U?0:2*le)}),[F.tracker,F.markerGroup,F.dataLabelsGroup].forEach(se=>{se&&(se.addClass("highcharts-tracker").on("mouseover",ge).on("mouseout",ie=>{ee?.onTrackerMouseOut(ie)}),H.cursor&&!Z.styledMode&&se.css({cursor:H.cursor}),se.on("touchstart",ge))})),E(this,"afterDrawTracker")}addPoint(F,H,U,X,Z){let ee,ne,le=this.options,ge=this.data,xe=this.chart,Se=this.xAxis,se=Se&&Se.hasNames&&Se.names,ie=le.data,oe=this.xData;H=W(H,!0);let ce={series:this};this.pointClass.prototype.applyOptions.apply(ce,[F]);let ve=ce.x;if(ne=oe.length,this.requireSorting&&ve<oe[ne-1])for(ee=!0;ne&&oe[ne-1]>ve;)ne--;this.updateParallelArrays(ce,"splice",[ne,0,0]),this.updateParallelArrays(ce,ne),se&&ce.name&&(se[ve]=ce.name),ie.splice(ne,0,F),(ee||this.processedData)&&(this.data.splice(ne,0,null),this.processData()),le.legendType==="point"&&this.generatePoints(),U&&(ge[0]&&ge[0].remove?ge[0].remove(!1):(ge.shift(),this.updateParallelArrays(ce,"shift"),ie.shift())),Z!==!1&&E(this,"addPoint",{point:ce}),this.isDirty=!0,this.isDirtyData=!0,H&&xe.redraw(X)}removePoint(F,H,U){let X=this,Z=X.data,ee=Z[F],ne=X.points,le=X.chart,ge=function(){ne&&ne.length===Z.length&&ne.splice(F,1),Z.splice(F,1),X.options.data.splice(F,1),X.updateParallelArrays(ee||{series:X},"splice",[F,1]),ee&&ee.destroy(),X.isDirty=!0,X.isDirtyData=!0,H&&le.redraw()};m(U,le),H=W(H,!0),ee?ee.firePointEvent("remove",null,ge):ge()}remove(F,H,U,X){let Z=this,ee=Z.chart;function ne(){Z.destroy(X),ee.isDirtyLegend=ee.isDirtyBox=!0,ee.linkSeries(X),W(F,!0)&&ee.redraw(H)}U!==!1?E(Z,"remove",null,ne):ne()}update(F,H){E(this,"update",{options:F=P(F,this.userOptions)});let U=this,X=U.chart,Z=U.userOptions,ee=U.initialType||U.type,ne=X.options.plotOptions,le=T[ee].prototype,ge=U.finishedAnimating&&{animation:!1},xe={},Se,se,ie=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],oe=F.type||Z.type||X.options.chart.type,ce=!(this.hasDerivedData||oe&&oe!==this.type||F.pointStart!==void 0||F.pointInterval!==void 0||F.relativeXValue!==void 0||F.joinBy||F.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(me=>U.hasOptionChanged(me)));oe=oe||ee,ce&&(ie.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),F.visible!==!1&&ie.push("area","graph"),U.parallelArrays.forEach(function(me){ie.push(me+"Data")}),F.data&&(F.dataSorting&&C(U.options.dataSorting,F.dataSorting),this.setData(F.data,!1))),F=K(Z,{index:Z.index===void 0?U.index:Z.index,pointStart:ne?.series?.pointStart??Z.pointStart??U.xData?.[0]},!ce&&{data:U.options.data},F,ge),ce&&F.data&&(F.data=U.options.data),(ie=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(ie)).forEach(function(me){ie[me]=U[me],delete U[me]});let ve=!1;if(T[oe]){if(ve=oe!==U.type,U.remove(!1,!1,!1,!0),ve)if(X.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(U,T[oe].prototype);else{let me=Object.hasOwnProperty.call(U,"hcEvents")&&U.hcEvents;for(se in le)U[se]=void 0;C(U,T[oe].prototype),me?U.hcEvents=me:delete U.hcEvents}}else v(17,!0,X,{missingModuleFor:oe});if(ie.forEach(function(me){U[me]=ie[me]}),U.init(X,F),ce&&this.points)for(let me of((Se=U.options).visible===!1?(xe.graphic=1,xe.dataLabel=1):(this.hasMarkerChanged(Se,Z)&&(xe.graphic=1),U.hasDataLabels?.()||(xe.dataLabel=1)),this.points))me&&me.series&&(me.resolveColor(),Object.keys(xe).length&&me.destroyElements(xe),Se.showInLegend===!1&&me.legendItem&&X.legend.destroyItem(me));U.initialType=ee,X.linkSeries(),X.setSortedData(),ve&&U.linkedSeries.length&&(U.isDirtyData=!0),E(this,"afterUpdate"),W(H,!0)&&X.redraw(!!ce&&void 0)}setName(F){this.name=this.options.name=this.userOptions.name=F,this.chart.isDirtyLegend=!0}hasOptionChanged(F){let H=this.chart,U=this.options[F],X=H.options.plotOptions,Z=this.userOptions[F],ee=W(X?.[this.type]?.[F],X?.series?.[F]);return Z&&!O(ee)?U!==Z:U!==W(ee,U)}onMouseOver(){let F=this.chart,H=F.hoverSeries;F.pointer?.setHoverChartIndex(),H&&H!==this&&H.onMouseOut(),this.options.events.mouseOver&&E(this,"mouseOver"),this.setState("hover"),F.hoverSeries=this}onMouseOut(){let F=this.options,H=this.chart,U=H.tooltip,X=H.hoverPoint;H.hoverSeries=null,X&&X.onMouseOut(),this&&F.events.mouseOut&&E(this,"mouseOut"),U&&!this.stickyTracking&&(!U.shared||this.noSharedTooltip)&&U.hide(),H.series.forEach(function(Z){Z.setState("",!0)})}setState(F,H){let U=this,X=U.options,Z=U.graph,ee=X.inactiveOtherPoints,ne=X.states,le=W(ne[F||"normal"]&&ne[F||"normal"].animation,U.chart.options.chart.animation),ge=X.lineWidth,xe=X.opacity;if(F=F||"",U.state!==F&&([U.group,U.markerGroup,U.dataLabelsGroup].forEach(function(Se){Se&&(U.state&&Se.removeClass("highcharts-series-"+U.state),F&&Se.addClass("highcharts-series-"+F))}),U.state=F,!U.chart.styledMode)){if(ne[F]&&ne[F].enabled===!1)return;if(F&&(ge=ne[F].lineWidth||ge+(ne[F].lineWidthPlus||0),xe=W(ne[F].opacity,xe)),Z&&!Z.dashstyle&&de(ge))for(let Se of[Z,...this.zones.map(se=>se.graph)])Se?.animate({"stroke-width":ge},le);ee||[U.group,U.markerGroup,U.dataLabelsGroup,U.labelBySeries].forEach(function(Se){Se&&Se.animate({opacity:xe},le)})}H&&ee&&U.points&&U.setAllPointsToState(F||void 0)}setAllPointsToState(F){this.points.forEach(function(H){H.setState&&H.setState(F)})}setVisible(F,H){let U=this,X=U.chart,Z=X.options.chart.ignoreHiddenSeries,ee=U.visible;U.visible=F=U.options.visible=U.userOptions.visible=F===void 0?!ee:F;let ne=F?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(le=>{U[le]?.[ne]()}),(X.hoverSeries===U||X.hoverPoint?.series===U)&&U.onMouseOut(),U.legendItem&&X.legend.colorizeItem(U,F),U.isDirty=!0,U.options.stacking&&X.series.forEach(le=>{le.options.stacking&&le.visible&&(le.isDirty=!0)}),U.linkedSeries.forEach(le=>{le.setVisible(F,!1)}),Z&&(X.isDirtyBox=!0),E(U,ne),H!==!1&&X.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(F){this.selected=F=this.options.selected=F===void 0?!this.selected:F,this.checkbox&&(this.checkbox.checked=F),E(this,F?"select":"unselect")}shouldShowTooltip(F,H,U={}){return U.series=this,U.visiblePlotOnly=!0,this.chart.isInsidePlot(F,H,U)}drawLegendSymbol(F,H){a[this.options.legendSymbol||"rectangle"]?.call(this,F,H)}}return N.defaultOptions=h,N.types=c.seriesTypes,N.registerType=c.registerSeriesType,C(N.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:l,requireSorting:!0,sorted:!0}),c.series=N,N}),i(e,"Core/Chart/Chart.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Axis/Axis.js"],e["Core/Defaults.js"],e["Core/Templating.js"],e["Core/Foundation.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Time.js"],e["Core/Utilities.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Axis/Tick.js"]],function(s,r,n,o,a,l,h,c,d,p,u,m,f,g){let{animate:y,animObject:x,setAnimation:T}=s,{defaultOptions:A,defaultTime:S}=n,{numberFormat:M}=o,{registerEventOptions:B}=a,{charts:j,doc:O,marginNames:_,svg:P,win:R}=l,{seriesTypes:v}=d,{addEvent:C,attr:D,createElement:E,css:L,defined:G,diffObjects:Y,discardElement:J,erase:de,error:b,extend:K,find:z,fireEvent:W,getStyle:re,isArray:I,isNumber:k,isObject:N,isString:q,merge:F,objectEach:H,pick:U,pInt:X,relativeLength:Z,removeEvent:ee,splat:ne,syncTimeout:le,uniqueKey:ge}=m;class xe{static chart(se,ie,oe){return new xe(se,ie,oe)}constructor(se,ie,oe){this.sharedClips={};let ce=[...arguments];(q(se)||se.nodeName)&&(this.renderTo=ce.shift()),this.init(ce[0],ce[1])}setZoomOptions(){let se=this.options.chart,ie=se.zooming;this.zooming=It(Xe({},ie),{type:U(se.zoomType,ie.type),key:U(se.zoomKey,ie.key),pinchType:U(se.pinchType,ie.pinchType),singleTouch:U(se.zoomBySingleTouch,ie.singleTouch,!1),resetButton:F(ie.resetButton,se.resetZoomButton)})}init(se,ie){W(this,"init",{args:arguments},function(){let oe=F(A,se),ce=oe.chart;this.userOptions=K({},se),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=ie,this.isResizing=0,this.options=oe,this.axes=[],this.series=[],this.time=se.time&&Object.keys(se.time).length?new u(se.time):l.time,this.numberFormatter=ce.numberFormatter||M,this.styledMode=ce.styledMode,this.hasCartesianSeries=ce.showAxes,this.index=j.length,j.push(this),l.chartCount++,B(this,ce),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),W(this,"afterInit"),this.firstRender()})}initSeries(se){let ie=this.options.chart,oe=se.type||ie.type,ce=v[oe];ce||b(17,!0,this,{missingModuleFor:oe});let ve=new ce;return typeof ve.init=="function"&&ve.init(this,se),ve}setSortedData(){this.getSeriesOrderByLinks().forEach(function(se){se.points||se.data||!se.enabledDataSorting||se.setData(se.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(se,ie){return se.linkedSeries.length||ie.linkedSeries.length?ie.linkedSeries.length-se.linkedSeries.length:0})}orderItems(se,ie=0){let oe=this[se],ce=this.options[se]=ne(this.options[se]).slice(),ve=this.userOptions[se]=this.userOptions[se]?ne(this.userOptions[se]).slice():[];if(this.hasRendered&&(ce.splice(ie),ve.splice(ie)),oe)for(let me=ie,ye=oe.length;me<ye;++me){let we=oe[me];we&&(we.index=me,we instanceof c&&(we.name=we.getName()),we.options.isInternal||(ce[me]=we.options,ve[me]=we.userOptions))}}isInsidePlot(se,ie,oe={}){let{inverted:ce,plotBox:ve,plotLeft:me,plotTop:ye,scrollablePlotBox:we}=this,{scrollLeft:Ee=0,scrollTop:Pe=0}=oe.visiblePlotOnly&&this.scrollablePlotArea?.scrollingContainer||{},Oe=oe.series,Re=oe.visiblePlotOnly&&we||ve,We=oe.inverted?ie:se,Ze=oe.inverted?se:ie,ze={x:We,y:Ze,isInsidePlot:!0,options:oe};if(!oe.ignoreX){let Ge=Oe&&(ce&&!this.polar?Oe.yAxis:Oe.xAxis)||{pos:me,len:1/0},ut=oe.paneCoordinates?Ge.pos+We:me+We;ut>=Math.max(Ee+me,Ge.pos)&&ut<=Math.min(Ee+me+Re.width,Ge.pos+Ge.len)||(ze.isInsidePlot=!1)}if(!oe.ignoreY&&ze.isInsidePlot){let Ge=!ce&&oe.axis&&!oe.axis.isXAxis&&oe.axis||Oe&&(ce?Oe.xAxis:Oe.yAxis)||{pos:ye,len:1/0},ut=oe.paneCoordinates?Ge.pos+Ze:ye+Ze;ut>=Math.max(Pe+ye,Ge.pos)&&ut<=Math.min(Pe+ye+Re.height,Ge.pos+Ge.len)||(ze.isInsidePlot=!1)}return W(this,"afterIsInsidePlot",ze),ze.isInsidePlot}redraw(se){W(this,"beforeRedraw");let ie=this.hasCartesianSeries?this.axes:this.colorAxis||[],oe=this.series,ce=this.pointer,ve=this.legend,me=this.userOptions.legend,ye=this.renderer,we=ye.isHidden(),Ee=[],Pe,Oe,Re,We=this.isDirtyBox,Ze=this.isDirtyLegend,ze;for(ye.rootFontSize=ye.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),T(!!this.hasRendered&&se,this),we&&this.temporaryDisplay(),this.layOutTitles(!1),Re=oe.length;Re--;)if(((ze=oe[Re]).options.stacking||ze.options.centerInCategory)&&(Oe=!0,ze.isDirty)){Pe=!0;break}if(Pe)for(Re=oe.length;Re--;)(ze=oe[Re]).options.stacking&&(ze.isDirty=!0);oe.forEach(function(Ge){Ge.isDirty&&(Ge.options.legendType==="point"?(typeof Ge.updateTotals=="function"&&Ge.updateTotals(),Ze=!0):me&&(me.labelFormatter||me.labelFormat)&&(Ze=!0)),Ge.isDirtyData&&W(Ge,"updatedData")}),Ze&&ve&&ve.options.enabled&&(ve.render(),this.isDirtyLegend=!1),Oe&&this.getStacks(),ie.forEach(function(Ge){Ge.updateNames(),Ge.setScale()}),this.getMargins(),ie.forEach(function(Ge){Ge.isDirty&&(We=!0)}),ie.forEach(function(Ge){let ut=Ge.min+","+Ge.max;Ge.extKey!==ut&&(Ge.extKey=ut,Ee.push(function(){W(Ge,"afterSetExtremes",K(Ge.eventArgs,Ge.getExtremes())),delete Ge.eventArgs})),(We||Oe)&&Ge.redraw()}),We&&this.drawChartBox(),W(this,"predraw"),oe.forEach(function(Ge){(We||Ge.isDirty)&&Ge.visible&&Ge.redraw(),Ge.isDirtyData=!1}),ce&&ce.reset(!0),ye.draw(),W(this,"redraw"),W(this,"render"),we&&this.temporaryDisplay(!0),Ee.forEach(function(Ge){Ge.call()})}get(se){let ie=this.series;function oe(ve){return ve.id===se||ve.options&&ve.options.id===se}let ce=z(this.axes,oe)||z(this.series,oe);for(let ve=0;!ce&&ve<ie.length;ve++)ce=z(ie[ve].points||[],oe);return ce}getAxes(){let se=this.userOptions;for(let ie of(W(this,"getAxes"),["xAxis","yAxis"]))for(let oe of se[ie]=ne(se[ie]||{}))new r(this,oe,ie);W(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((se,ie)=>(ie.getPointsCollection().forEach(oe=>{U(oe.selectedStaging,oe.selected)&&se.push(oe)}),se),[])}getSelectedSeries(){return this.series.filter(function(se){return se.selected})}setTitle(se,ie,oe){this.applyDescription("title",se),this.applyDescription("subtitle",ie),this.applyDescription("caption",void 0),this.layOutTitles(oe)}applyDescription(se,ie){let oe=this,ce=this.options[se]=F(this.options[se],ie),ve=this[se];ve&&ie&&(this[se]=ve=ve.destroy()),ce&&!ve&&((ve=this.renderer.text(ce.text,0,0,ce.useHTML).attr({align:ce.align,class:"highcharts-"+se,zIndex:ce.zIndex||4}).add()).update=function(me,ye){oe.applyDescription(se,me),oe.layOutTitles(ye)},this.styledMode||ve.css(K(se==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},ce.style)),this[se]=ve)}layOutTitles(se=!0){let ie=[0,0,0],oe=this.renderer,ce=this.spacingBox;["title","subtitle","caption"].forEach(function(me){let ye=this[me],we=this.options[me],Ee=we.verticalAlign||"top",Pe=me==="title"?Ee==="top"?-3:0:Ee==="top"?ie[0]+2:0;if(ye){ye.css({width:(we.width||ce.width+(we.widthAdjust||0))+"px"});let Oe=oe.fontMetrics(ye).b,Re=Math.round(ye.getBBox(we.useHTML).height);ye.align(K({y:Ee==="bottom"?Oe:Pe+Oe,height:Re},we),!1,"spacingBox"),we.floating||(Ee==="top"?ie[0]=Math.ceil(ie[0]+Re):Ee==="bottom"&&(ie[2]=Math.ceil(ie[2]+Re)))}},this),ie[0]&&(this.options.title.verticalAlign||"top")==="top"&&(ie[0]+=this.options.title.margin),ie[2]&&this.options.caption.verticalAlign==="bottom"&&(ie[2]+=this.options.caption.margin);let ve=!this.titleOffset||this.titleOffset.join(",")!==ie.join(",");this.titleOffset=ie,W(this,"afterLayOutTitles"),!this.isDirtyBox&&ve&&(this.isDirtyBox=this.isDirtyLegend=ve,this.hasRendered&&se&&this.isDirtyBox&&this.redraw())}getContainerBox(){return{width:re(this.renderTo,"width",!0)||0,height:re(this.renderTo,"height",!0)||0}}getChartSize(){let se=this.options.chart,ie=se.width,oe=se.height,ce=this.getContainerBox();this.chartWidth=Math.max(0,ie||ce.width||600),this.chartHeight=Math.max(0,Z(oe,this.chartWidth)||(ce.height>1?ce.height:400)),this.containerBox=ce}temporaryDisplay(se){let ie=this.renderTo,oe;if(se)for(;ie&&ie.style;)ie.hcOrigStyle&&(L(ie,ie.hcOrigStyle),delete ie.hcOrigStyle),ie.hcOrigDetached&&(O.body.removeChild(ie),ie.hcOrigDetached=!1),ie=ie.parentNode;else for(;ie&&ie.style&&(O.body.contains(ie)||ie.parentNode||(ie.hcOrigDetached=!0,O.body.appendChild(ie)),(re(ie,"display",!1)==="none"||ie.hcOricDetached)&&(ie.hcOrigStyle={display:ie.style.display,height:ie.style.height,overflow:ie.style.overflow},oe={display:"block",overflow:"hidden"},ie!==this.renderTo&&(oe.height=0),L(ie,oe),ie.offsetWidth||ie.style.setProperty("display","block","important")),(ie=ie.parentNode)!==O.body););}setClassName(se){this.container.className="highcharts-container "+(se||"")}getContainer(){let se=this.options,ie=se.chart,oe="data-highcharts-chart",ce=ge(),ve,me=this.renderTo;me||(this.renderTo=me=ie.renderTo),q(me)&&(this.renderTo=me=O.getElementById(me)),me||b(13,!0,this);let ye=X(D(me,oe));k(ye)&&j[ye]&&j[ye].hasRendered&&j[ye].destroy(),D(me,oe,this.index),me.innerHTML=f.emptyHTML,ie.skipClone||me.offsetWidth||this.temporaryDisplay(),this.getChartSize();let we=this.chartHeight,Ee=this.chartWidth;L(me,{overflow:"hidden"}),this.styledMode||(ve=K({position:"relative",overflow:"hidden",width:Ee+"px",height:we+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},ie.style||{}));let Pe=E("div",{id:ce},ve,me);this.container=Pe,this.getChartSize(),Ee===this.chartWidth||(Ee=this.chartWidth,this.styledMode||L(Pe,{width:U(ie.style?.width,Ee+"px")})),this.containerBox=this.getContainerBox(),this._cursor=Pe.style.cursor;let Oe=ie.renderer||!P?h.getRendererType(ie.renderer):p;if(this.renderer=new Oe(Pe,Ee,we,void 0,ie.forExport,se.exporting&&se.exporting.allowHTML,this.styledMode),T(void 0,this),this.setClassName(ie.className),this.styledMode)for(let Re in se.defs)this.renderer.definition(se.defs[Re]);else this.renderer.setStyle(ie.style);this.renderer.chartIndex=this.index,W(this,"afterGetContainer")}getMargins(se){let{spacing:ie,margin:oe,titleOffset:ce}=this;this.resetMargins(),ce[0]&&!G(oe[0])&&(this.plotTop=Math.max(this.plotTop,ce[0]+ie[0])),ce[2]&&!G(oe[2])&&(this.marginBottom=Math.max(this.marginBottom,ce[2]+ie[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(oe,ie),W(this,"getMargins"),se||this.getAxisMargins()}getAxisMargins(){let se=this,ie=se.axisOffset=[0,0,0,0],oe=se.colorAxis,ce=se.margin,ve=function(me){me.forEach(function(ye){ye.visible&&ye.getOffset()})};se.hasCartesianSeries?ve(se.axes):oe&&oe.length&&ve(oe),_.forEach(function(me,ye){G(ce[ye])||(se[me]+=ie[ye])}),se.setChartSize()}getOptions(){return Y(this.userOptions,A)}reflow(se){let ie=this,oe=ie.containerBox,ce=ie.getContainerBox();delete ie.pointer?.chartPosition,!ie.isPrinting&&!ie.isResizing&&oe&&ce.width&&((ce.width!==oe.width||ce.height!==oe.height)&&(m.clearTimeout(ie.reflowTimeout),ie.reflowTimeout=le(function(){ie.container&&ie.setSize(void 0,void 0,!1)},se?100:0)),ie.containerBox=ce)}setReflow(){let se=this,ie=oe=>{se.options?.chart.reflow&&se.hasLoaded&&se.reflow(oe)};if(typeof ResizeObserver=="function")new ResizeObserver(ie).observe(se.renderTo);else{let oe=C(R,"resize",ie);C(this,"destroy",oe)}}setSize(se,ie,oe){let ce=this,ve=ce.renderer;ce.isResizing+=1,T(oe,ce);let me=ve.globalAnimation;ce.oldChartHeight=ce.chartHeight,ce.oldChartWidth=ce.chartWidth,se!==void 0&&(ce.options.chart.width=se),ie!==void 0&&(ce.options.chart.height=ie),ce.getChartSize();let{chartWidth:ye,chartHeight:we,scrollablePixelsX:Ee=0,scrollablePixelsY:Pe=0}=ce;(ce.isDirtyBox||ye!==ce.oldChartWidth||we!==ce.oldChartHeight)&&(ce.styledMode||(me?y:L)(ce.container,{width:`${ye+Ee}px`,height:`${we+Pe}px`},me),ce.setChartSize(!0),ve.setSize(ye,we,me),ce.axes.forEach(function(Oe){Oe.isDirty=!0,Oe.setScale()}),ce.isDirtyLegend=!0,ce.isDirtyBox=!0,ce.layOutTitles(),ce.getMargins(),ce.redraw(me),ce.oldChartHeight=void 0,W(ce,"resize"),setTimeout(()=>{ce&&W(ce,"endResize")},x(me).duration)),ce.isResizing-=1}setChartSize(se){let ie,oe,ce,ve,{chartHeight:me,chartWidth:ye,inverted:we,spacing:Ee,renderer:Pe}=this,Oe=this.clipOffset,Re=Math[we?"floor":"round"];this.plotLeft=ie=Math.round(this.plotLeft),this.plotTop=oe=Math.round(this.plotTop),this.plotWidth=ce=Math.max(0,Math.round(ye-ie-this.marginRight)),this.plotHeight=ve=Math.max(0,Math.round(me-oe-this.marginBottom)),this.plotSizeX=we?ve:ce,this.plotSizeY=we?ce:ve,this.spacingBox=Pe.spacingBox={x:Ee[3],y:Ee[0],width:ye-Ee[3]-Ee[1],height:me-Ee[0]-Ee[2]},this.plotBox=Pe.plotBox={x:ie,y:oe,width:ce,height:ve},Oe&&(this.clipBox={x:Re(Oe[3]),y:Re(Oe[0]),width:Re(this.plotSizeX-Oe[1]-Oe[3]),height:Re(this.plotSizeY-Oe[0]-Oe[2])}),se||(this.axes.forEach(function(We){We.setAxisSize(),We.setAxisTranslation()}),Pe.alignElements()),W(this,"afterSetChartSize",{skipAxes:se})}resetMargins(){W(this,"resetMargins");let se=this,ie=se.options.chart,oe=ie.plotBorderWidth||0,ce=oe/2;["margin","spacing"].forEach(function(ve){let me=ie[ve],ye=N(me)?me:[me,me,me,me];["Top","Right","Bottom","Left"].forEach(function(we,Ee){se[ve][Ee]=U(ie[ve+we],ye[Ee])})}),_.forEach(function(ve,me){se[ve]=U(se.margin[me],se.spacing[me])}),se.axisOffset=[0,0,0,0],se.clipOffset=[ce,ce,ce,ce],se.plotBorderWidth=oe}drawChartBox(){let se=this.options.chart,ie=this.renderer,oe=this.chartWidth,ce=this.chartHeight,ve=this.styledMode,me=this.plotBGImage,ye=se.backgroundColor,we=se.plotBackgroundColor,Ee=se.plotBackgroundImage,Pe=this.plotLeft,Oe=this.plotTop,Re=this.plotWidth,We=this.plotHeight,Ze=this.plotBox,ze=this.clipRect,Ge=this.clipBox,ut=this.chartBackground,Ct=this.plotBackground,Mt=this.plotBorder,Vt,Mi,Bt,hi="animate";ut||(this.chartBackground=ut=ie.rect().addClass("highcharts-background").add(),hi="attr"),ve?Vt=Mi=ut.strokeWidth():(Mi=(Vt=se.borderWidth||0)+(se.shadow?8:0),Bt={fill:ye||"none"},(Vt||ut["stroke-width"])&&(Bt.stroke=se.borderColor,Bt["stroke-width"]=Vt),ut.attr(Bt).shadow(se.shadow)),ut[hi]({x:Mi/2,y:Mi/2,width:oe-Mi-Vt%2,height:ce-Mi-Vt%2,r:se.borderRadius}),hi="animate",Ct||(hi="attr",this.plotBackground=Ct=ie.rect().addClass("highcharts-plot-background").add()),Ct[hi](Ze),!ve&&(Ct.attr({fill:we||"none"}).shadow(se.plotShadow),Ee&&(me?(Ee!==me.attr("href")&&me.attr("href",Ee),me.animate(Ze)):this.plotBGImage=ie.image(Ee,Pe,Oe,Re,We).add())),ze?ze.animate({width:Ge.width,height:Ge.height}):this.clipRect=ie.clipRect(Ge),hi="animate",Mt||(hi="attr",this.plotBorder=Mt=ie.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),ve||Mt.attr({stroke:se.plotBorderColor,"stroke-width":se.plotBorderWidth||0,fill:"none"}),Mt[hi](Mt.crisp({x:Pe,y:Oe,width:Re,height:We},-Mt.strokeWidth())),this.isDirtyBox=!1,W(this,"afterDrawChartBox")}propFromSeries(){let se,ie,oe,ce=this,ve=ce.options.chart,me=ce.options.series;["inverted","angular","polar"].forEach(function(ye){for(ie=v[ve.type],oe=ve[ye]||ie&&ie.prototype[ye],se=me&&me.length;!oe&&se--;)(ie=v[me[se].type])&&ie.prototype[ye]&&(oe=!0);ce[ye]=oe})}linkSeries(se){let ie=this,oe=ie.series;oe.forEach(function(ce){ce.linkedSeries.length=0}),oe.forEach(function(ce){let{linkedTo:ve}=ce.options;if(q(ve)){let me;(me=ve===":previous"?ie.series[ce.index-1]:ie.get(ve))&&me.linkedParent!==ce&&(me.linkedSeries.push(ce),ce.linkedParent=me,me.enabledDataSorting&&ce.setDataSortingOptions(),ce.visible=U(ce.options.visible,me.options.visible,ce.visible))}}),W(this,"afterLinkSeries",{isUpdating:se})}renderSeries(){this.series.forEach(function(se){se.translate(),se.render()})}render(){let se=this.axes,ie=this.colorAxis,oe=this.renderer,ce=this.options.chart.axisLayoutRuns||2,ve=Pe=>{Pe.forEach(Oe=>{Oe.visible&&Oe.render()})},me=0,ye=!0,we,Ee=0;for(let Pe of(this.setTitle(),W(this,"beforeMargins"),this.getStacks?.(),this.getMargins(!0),this.setChartSize(),se)){let{options:Oe}=Pe,{labels:Re}=Oe;if(this.hasCartesianSeries&&Pe.horiz&&Pe.visible&&Re.enabled&&Pe.series.length&&Pe.coll!=="colorAxis"&&!this.polar){me=Oe.tickLength,Pe.createGroups();let We=new g(Pe,0,"",!0),Ze=We.createLabel("x",Re);if(We.destroy(),Ze&&U(Re.reserveSpace,!k(Oe.crossing))&&(me=Ze.getBBox().height+Re.distance+Math.max(Oe.offset||0,0)),me){Ze?.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-me,0);(ye||we||ce>1)&&Ee<ce;){let Pe=this.plotWidth,Oe=this.plotHeight;for(let Re of se)Ee===0?Re.setScale():(Re.horiz&&ye||!Re.horiz&&we)&&Re.setTickInterval(!0);Ee===0?this.getAxisMargins():this.getMargins(),ye=Pe/this.plotWidth>(Ee?1:1.1),we=Oe/this.plotHeight>(Ee?1:1.05),Ee++}this.drawChartBox(),this.hasCartesianSeries?ve(se):ie&&ie.length&&ve(ie),this.seriesGroup||(this.seriesGroup=oe.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(se){let ie=this,oe=F(!0,this.options.credits,se);oe.enabled&&!this.credits&&(this.credits=this.renderer.text(oe.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){oe.href&&(R.location.href=oe.href)}).attr({align:oe.position.align,zIndex:8}),ie.styledMode||this.credits.css(oe.style),this.credits.add().align(oe.position),this.credits.update=function(ce){ie.credits=ie.credits.destroy(),ie.addCredits(ce)})}destroy(){let se,ie=this,oe=ie.axes,ce=ie.series,ve=ie.container,me=ve&&ve.parentNode;for(W(ie,"destroy"),ie.renderer.forExport?de(j,ie):j[ie.index]=void 0,l.chartCount--,ie.renderTo.removeAttribute("data-highcharts-chart"),ee(ie),se=oe.length;se--;)oe[se]=oe[se].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),se=ce.length;se--;)ce[se]=ce[se].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(ye){let we=ie[ye];we&&we.destroy&&(ie[ye]=we.destroy())}),ve&&(ve.innerHTML=f.emptyHTML,ee(ve),me&&J(ve)),H(ie,function(ye,we){delete ie[we]})}firstRender(){let se=this,ie=se.options;se.getContainer(),se.resetMargins(),se.setChartSize(),se.propFromSeries(),se.getAxes();let oe=I(ie.series)?ie.series:[];ie.series=[],oe.forEach(function(ce){se.initSeries(ce)}),se.linkSeries(),se.setSortedData(),W(se,"beforeRender"),se.render(),se.pointer?.getChartPosition(),se.renderer.imgCount||se.hasLoaded||se.onload(),se.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(se){se&&this.index!==void 0&&se.apply(this,[this])},this),W(this,"load"),W(this,"render"),G(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:se,title:ie}=this;!se||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(ie&&ie.element.textContent||"").replace(/</g,"&lt;")}),se.accessibility&&se.accessibility.enabled===!1||b('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(se,ie,oe){let ce,ve=this;return se&&(ie=U(ie,!0),W(ve,"addSeries",{options:se},function(){ce=ve.initSeries(se),ve.isDirtyLegend=!0,ve.linkSeries(),ce.enabledDataSorting&&ce.setData(se.data,!1),W(ve,"afterAddSeries",{series:ce}),ie&&ve.redraw(oe)})),ce}addAxis(se,ie,oe,ce){return this.createAxis(ie?"xAxis":"yAxis",{axis:se,redraw:oe,animation:ce})}addColorAxis(se,ie,oe){return this.createAxis("colorAxis",{axis:se,redraw:ie,animation:oe})}createAxis(se,ie){let oe=new r(this,ie.axis,se);return U(ie.redraw,!0)&&this.redraw(ie.animation),oe}showLoading(se){let ie=this,oe=ie.options,ce=oe.loading,ve=function(){me&&L(me,{left:ie.plotLeft+"px",top:ie.plotTop+"px",width:ie.plotWidth+"px",height:ie.plotHeight+"px"})},me=ie.loadingDiv,ye=ie.loadingSpan;me||(ie.loadingDiv=me=E("div",{className:"highcharts-loading highcharts-loading-hidden"},null,ie.container)),ye||(ie.loadingSpan=ye=E("span",{className:"highcharts-loading-inner"},null,me),C(ie,"redraw",ve)),me.className="highcharts-loading",f.setElementHTML(ye,U(se,oe.lang.loading,"")),ie.styledMode||(L(me,K(ce.style,{zIndex:10})),L(ye,ce.labelStyle),ie.loadingShown||(L(me,{opacity:0,display:""}),y(me,{opacity:ce.style.opacity||.5},{duration:ce.showDuration||0}))),ie.loadingShown=!0,ve()}hideLoading(){let se=this.options,ie=this.loadingDiv;ie&&(ie.className="highcharts-loading highcharts-loading-hidden",this.styledMode||y(ie,{opacity:0},{duration:se.loading.hideDuration||100,complete:function(){L(ie,{display:"none"})}})),this.loadingShown=!1}update(se,ie,oe,ce){let ve,me,ye,we=this,Ee={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},Pe=se.isResponsiveOptions,Oe=[];W(we,"update",{options:se}),Pe||we.setResponsive(!1,!0),se=Y(se,we.options),we.userOptions=F(we.userOptions,se);let Re=se.chart;Re&&(F(!0,we.options.chart,Re),this.setZoomOptions(),"className"in Re&&we.setClassName(Re.className),("inverted"in Re||"polar"in Re||"type"in Re)&&(we.propFromSeries(),ve=!0),"alignTicks"in Re&&(ve=!0),"events"in Re&&B(this,Re),H(Re,function(ze,Ge){we.propsRequireUpdateSeries.indexOf("chart."+Ge)!==-1&&(me=!0),we.propsRequireDirtyBox.indexOf(Ge)!==-1&&(we.isDirtyBox=!0),we.propsRequireReflow.indexOf(Ge)===-1||(we.isDirtyBox=!0,Pe||(ye=!0))}),!we.styledMode&&Re.style&&we.renderer.setStyle(we.options.chart.style||{})),!we.styledMode&&se.colors&&(this.options.colors=se.colors),se.time&&(this.time===S&&(this.time=new u(se.time)),F(!0,we.options.time,se.time)),H(se,function(ze,Ge){we[Ge]&&typeof we[Ge].update=="function"?we[Ge].update(ze,!1):typeof we[Ee[Ge]]=="function"?we[Ee[Ge]](ze):Ge!=="colors"&&we.collectionsWithUpdate.indexOf(Ge)===-1&&F(!0,we.options[Ge],se[Ge]),Ge!=="chart"&&we.propsRequireUpdateSeries.indexOf(Ge)!==-1&&(me=!0)}),this.collectionsWithUpdate.forEach(function(ze){se[ze]&&(ne(se[ze]).forEach(function(Ge,ut){let Ct,Mt=G(Ge.id);Mt&&(Ct=we.get(Ge.id)),!Ct&&we[ze]&&(Ct=we[ze][U(Ge.index,ut)])&&(Mt&&G(Ct.options.id)||Ct.options.isInternal)&&(Ct=void 0),Ct&&Ct.coll===ze&&(Ct.update(Ge,!1),oe&&(Ct.touched=!0)),!Ct&&oe&&we.collectionsWithInit[ze]&&(we.collectionsWithInit[ze][0].apply(we,[Ge].concat(we.collectionsWithInit[ze][1]||[]).concat([!1])).touched=!0)}),oe&&we[ze].forEach(function(Ge){Ge.touched||Ge.options.isInternal?delete Ge.touched:Oe.push(Ge)}))}),Oe.forEach(function(ze){ze.chart&&ze.remove&&ze.remove(!1)}),ve&&we.axes.forEach(function(ze){ze.update({},!1)}),me&&we.getSeriesOrderByLinks().forEach(function(ze){ze.chart&&ze.update({},!1)},this);let We=Re&&Re.width,Ze=Re&&(q(Re.height)?Z(Re.height,We||we.chartWidth):Re.height);ye||k(We)&&We!==we.chartWidth||k(Ze)&&Ze!==we.chartHeight?we.setSize(We,Ze,ce):U(ie,!0)&&we.redraw(ce),W(we,"afterUpdate",{options:se,redraw:ie,animation:ce})}setSubtitle(se,ie){this.applyDescription("subtitle",se),this.layOutTitles(ie)}setCaption(se,ie){this.applyDescription("caption",se),this.layOutTitles(ie)}showResetZoom(){let se=this,ie=A.lang,oe=se.zooming.resetButton,ce=oe.theme,ve=oe.relativeTo==="chart"||oe.relativeTo==="spacingBox"?null:"plotBox";function me(){se.zoomOut()}W(this,"beforeShowResetZoom",null,function(){se.resetZoomButton=se.renderer.button(ie.resetZoom,null,null,me,ce).attr({align:oe.position.align,title:ie.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(oe.position,!1,ve)}),W(this,"afterShowResetZoom")}zoomOut(){W(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(se,ie){let oe=this,ce=typeof ie=="object"?ie:{enabled:ie,type:"x"},ve=ce.type,me=ve&&oe[{x:"xAxis",xy:"axes",y:"yAxis"}[ve]].filter(we=>we.options.panningEnabled&&!we.options.isInternal),ye=oe.options.chart;ye?.panning&&(ye.panning=ce),W(this,"pan",{originalEvent:se},()=>{oe.transform({axes:me,event:se,to:{x:se.chartX-(oe.mouseDownX||0),y:se.chartY-(oe.mouseDownY||0)},trigger:"pan"}),L(oe.container,{cursor:"move"})})}transform(se){let{axes:ie=this.axes,event:oe,from:ce={},reset:ve,selection:me,to:ye={},trigger:we}=se,{inverted:Ee}=this,Pe=!1,Oe;for(let Re of(this.hoverPoints?.forEach(We=>We.setState()),ie)){let{horiz:We,len:Ze,minPointOffset:ze=0,options:Ge,reversed:ut}=Re,Ct=We?"width":"height",Mt=We?"x":"y",Vt=U(ye[Ct],Re.len),Mi=U(ce[Ct],Re.len),Bt=10>Math.abs(Vt)?1:Vt/Mi,hi=(ce[Mt]||0)+Mi/2-Re.pos,wr=hi-((ye[Mt]??Re.pos)+Vt/2-Re.pos)/Bt,rr=ut&&!Ee||!ut&&Ee?-1:1;if(!ve&&(hi<0||hi>Re.len))continue;let xi=Re.toValue(wr,!0)+(me?0:ze*rr),Si=Re.toValue(wr+Ze/Bt,!0)-(me?0:ze*rr||0),nr=Re.allExtremes;if(xi>Si&&([xi,Si]=[Si,xi]),Bt===1&&!ve&&Re.coll==="yAxis"&&!nr){for(let De of Re.series){let _e=De.getExtremes(De.getProcessedData(!0).yData,!0);nr??(nr={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),k(_e.dataMin)&&k(_e.dataMax)&&(nr.dataMin=Math.min(_e.dataMin,nr.dataMin),nr.dataMax=Math.max(_e.dataMax,nr.dataMax))}Re.allExtremes=nr}let{dataMin:Ip,dataMax:Op,min:ta,max:Bc}=K(Re.getExtremes(),nr||{}),Hc=Ip??Ge.min,Wc=Op??Ge.max,te=Si-xi,ue=Re.categories?0:Math.min(te,Wc-Hc),ae=Hc-ue*(G(Ge.min)?0:Ge.minPadding),he=Wc+ue*(G(Ge.max)?0:Ge.maxPadding),pe=Re.allowZoomOutside||Bt===1||we!=="zoom"&&Bt>1,fe=Math.min(Ge.min??ae,ae,pe?ta:ae),be=Math.max(Ge.max??he,he,pe?Bc:he);(!Re.isOrdinal||Bt!==1||ve)&&(xi<fe&&(xi=fe,Bt>=1&&(Si=xi+te)),Si>be&&(Si=be,Bt>=1&&(xi=Si-te)),(ve||Re.series.length&&(xi!==ta||Si!==Bc)&&xi>=fe&&Si<=be)&&(me?me[Re.coll].push({axis:Re,min:xi,max:Si}):(Re.isPanning=we!=="zoom",Re.setExtremes(ve?void 0:xi,ve?void 0:Si,!1,!1,{move:wr,trigger:we,scale:Bt}),!ve&&(xi>fe||Si<be)&&we!=="mousewheel"&&(Oe=!0)),Pe=!0),oe&&(this[We?"mouseDownX":"mouseDownY"]=oe[We?"chartX":"chartY"]))}return Pe&&(me?W(this,"selection",me,()=>{delete se.selection,se.trigger="zoom",this.transform(se)}):(Oe&&!this.resetZoomButton?this.showResetZoom():!Oe&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()),this.redraw(we==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),Pe}}return K(xe.prototype,{callbacks:[],collectionsWithInit:{xAxis:[xe.prototype.addAxis,[!0]],yAxis:[xe.prototype.addAxis,[!1]],series:[xe.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),xe}),i(e,"Extensions/ScrollablePlotArea.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Utilities.js"]],function(s,r,n,o){let{stop:a}=s,{composed:l}=r,{addEvent:h,createElement:c,css:d,defined:p,merge:u,pushUnique:m}=o;function f(){let x=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!x&&(this.scrollablePlotArea=x=new y(this)),x?.applyFixed()}function g(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class y{static compose(T,A,S){m(l,this.compose)&&(h(T,"afterInit",g),h(A,"afterSetChartSize",M=>this.afterSetSize(M.target,M)),h(A,"render",f),h(S,"show",g))}static afterSetSize(T,A){let S,M,B,{minWidth:j,minHeight:O}=T.options.chart.scrollablePlotArea||{},{clipBox:_,plotBox:P,inverted:R,renderer:v}=T;if(!v.forExport&&(j?(T.scrollablePixelsX=S=Math.max(0,j-T.chartWidth),S&&(T.scrollablePlotBox=u(T.plotBox),P.width=T.plotWidth+=S,_[R?"height":"width"]+=S,B=!0)):O&&(T.scrollablePixelsY=M=Math.max(0,O-T.chartHeight),p(M)&&(T.scrollablePlotBox=u(T.plotBox),P.height=T.plotHeight+=M,_[R?"width":"height"]+=M,B=!1)),p(B)&&!A.skipAxes))for(let C of T.axes)C.horiz===B&&(C.setAxisSize(),C.setAxisTranslation())}constructor(T){let A,S=T.options.chart,M=n.getRendererType(),B=S.scrollablePlotArea||{},j=this.moveFixedElements.bind(this),O={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};T.scrollablePixelsX&&(O.overflowX="auto"),T.scrollablePixelsY&&(O.overflowY="auto"),this.chart=T;let _=this.parentDiv=c("div",{className:"highcharts-scrolling-parent"},{position:"relative"},T.renderTo),P=this.scrollingContainer=c("div",{className:"highcharts-scrolling"},O,_),R=this.innerContainer=c("div",{className:"highcharts-inner-container"},void 0,P),v=this.fixedDiv=c("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(S.style?.zIndex||0)+2,top:0},void 0,!0),C=this.fixedRenderer=new M(v,T.chartWidth,T.chartHeight,S.style);this.mask=C.path().attr({fill:S.backgroundColor||"#fff","fill-opacity":B.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),P.parentNode.insertBefore(v,P),d(T.renderTo,{overflow:"visible"}),h(T,"afterShowResetZoom",j),h(T,"afterApplyDrilldown",j),h(T,"afterLayOutTitles",j),h(P,"scroll",()=>{let{pointer:D,hoverPoint:E}=T;D&&(delete D.chartPosition,E&&(A=E),D.runPointActions(void 0,A,!0))}),R.appendChild(T.container)}applyFixed(){let{chart:T,fixedRenderer:A,isDirty:S,scrollingContainer:M}=this,{axisOffset:B,chartWidth:j,chartHeight:O,container:_,plotHeight:P,plotLeft:R,plotTop:v,plotWidth:C,scrollablePixelsX:D=0,scrollablePixelsY:E=0}=T,{scrollPositionX:L=0,scrollPositionY:G=0}=T.options.chart.scrollablePlotArea||{},Y=j+D,J=O+E;A.setSize(j,O),(S??!0)&&(this.isDirty=!1,this.moveFixedElements()),a(T.container),d(_,{width:`${Y}px`,height:`${J}px`}),T.renderer.boxWrapper.attr({width:Y,height:J,viewBox:[0,0,Y,J].join(" ")}),T.chartBackground?.attr({width:Y,height:J}),d(M,{width:`${j}px`,height:`${O}px`}),p(S)||(M.scrollLeft=D*L,M.scrollTop=E*G);let de=v-B[0]-1,b=R-B[3]-1,K=v+P+B[2]+1,z=R+C+B[1]+1,W=R+C-D,re=v+P-E,I=[["M",0,0]];D?I=[["M",0,de],["L",R-1,de],["L",R-1,K],["L",0,K],["Z"],["M",W,de],["L",j,de],["L",j,K],["L",W,K],["Z"]]:E&&(I=[["M",b,0],["L",b,v-1],["L",z,v-1],["L",z,0],["Z"],["M",b,re],["L",b,O],["L",z,O],["L",z,re],["Z"]]),T.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:I})}moveFixedElements(){let T,{container:A,inverted:S,scrollablePixelsX:M,scrollablePixelsY:B}=this.chart,j=this.fixedRenderer,O=y.fixedSelectors;for(let _ of(M&&!S?T=".highcharts-yaxis":M&&S||B&&!S?T=".highcharts-xaxis":B&&S&&(T=".highcharts-yaxis"),T&&O.push(`${T}:not(.highcharts-radial-axis)`,`${T}-labels:not(.highcharts-radial-axis-labels)`),O))[].forEach.call(A.querySelectorAll(_),P=>{(P.namespaceURI===j.SVG_NS?j.box:j.box.parentNode).appendChild(P),P.style.pointerEvents="auto"})}}return y.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],y}),i(e,"Core/Axis/Stacking/StackItem.js",[e["Core/Templating.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n){let{format:o}=s,{series:a}=r,{destroyObjectProperties:l,fireEvent:h,isNumber:c,pick:d}=n;return class{constructor(p,u,m,f,g){let y=p.chart.inverted,x=p.reversed;this.axis=p;let T=this.isNegative=!!m!=!!x;this.options=u=u||{},this.x=f,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=g,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:u.align||(y?T?"left":"right":"center"),verticalAlign:u.verticalAlign||(y?"middle":T?"bottom":"top"),y:u.y,x:u.x},this.textAlign=u.textAlign||(y?T?"right":"left":"center")}destroy(){l(this,this.axis)}render(p){let u=this.axis.chart,m=this.options,f=m.format,g=f?o(f,this,u):m.formatter.call(this);if(this.label)this.label.attr({text:g,visibility:"hidden"});else{this.label=u.renderer.label(g,null,void 0,m.shape,void 0,void 0,m.useHTML,!1,"stack-labels");let y={r:m.borderRadius||0,text:g,padding:d(m.padding,5),visibility:"hidden"};u.styledMode||(y.fill=m.backgroundColor,y.stroke=m.borderColor,y["stroke-width"]=m.borderWidth,this.label.css(m.style||{})),this.label.attr(y),this.label.added||this.label.add(p)}this.label.labelrank=u.plotSizeY,h(this,"afterRender")}setOffset(p,u,m,f,g,y){let{alignOptions:x,axis:T,label:A,options:S,textAlign:M}=this,B=T.chart,j=this.getStackBox({xOffset:p,width:u,boxBottom:m,boxTop:f,defaultX:g,xAxis:y}),{verticalAlign:O}=x;if(A&&j){let _=A.getBBox(void 0,0),P=A.padding,R=d(S.overflow,"justify")==="justify",v;x.x=S.x||0,x.y=S.y||0;let{x:C,y:D}=this.adjustStackPosition({labelBox:_,verticalAlign:O,textAlign:M});j.x-=C,j.y-=D,A.align(x,!1,j),(v=B.isInsidePlot(A.alignAttr.x+x.x+C,A.alignAttr.y+x.y+D))||(R=!1),R&&a.prototype.justifyDataLabel.call(T,A,x,A.alignAttr,_,j),A.attr({x:A.alignAttr.x,y:A.alignAttr.y,rotation:S.rotation,rotationOriginX:_.width*{left:0,center:.5,right:1}[S.textAlign||"center"],rotationOriginY:_.height/2}),d(!R&&S.crop,!0)&&(v=c(A.x)&&c(A.y)&&B.isInsidePlot(A.x-P+(A.width||0),A.y)&&B.isInsidePlot(A.x+P,A.y)),A[v?"show":"hide"]()}h(this,"afterSetOffset",{xOffset:p,width:u})}adjustStackPosition({labelBox:p,verticalAlign:u,textAlign:m}){let f={bottom:0,middle:1,top:2,right:1,center:0,left:-1},g=f[u],y=f[m];return{x:p.width/2+p.width/2*y,y:p.height/2*g}}getStackBox(p){let u=this.axis,m=u.chart,{boxTop:f,defaultX:g,xOffset:y,width:x,boxBottom:T}=p,A=u.stacking.usePercentage?100:d(f,this.total,0),S=u.toPixels(A),M=p.xAxis||m.xAxis[0],B=d(g,M.translate(this.x))+y,j=Math.abs(S-u.toPixels(T||c(u.min)&&u.logarithmic&&u.logarithmic.lin2log(u.min)||0)),O=m.inverted,_=this.isNegative;return O?{x:(_?S:S-j)-m.plotLeft,y:M.height-B-x,width:j,height:x}:{x:B+M.transB-m.plotLeft,y:(_?S-j:S)-m.plotTop,width:x,height:j}}}}),i(e,"Core/Axis/Stacking/StackingAxis.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Axis/Axis.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Axis/Stacking/StackItem.js"],e["Core/Utilities.js"]],function(s,r,n,o,a){var l;let{getDeferredAnimation:h}=s,{series:{prototype:c}}=n,{addEvent:d,correctFloat:p,defined:u,destroyObjectProperties:m,fireEvent:f,isArray:g,isNumber:y,objectEach:x,pick:T}=a;function A(){let v=this.inverted;this.axes.forEach(C=>{C.stacking&&C.stacking.stacks&&C.hasVisibleSeries&&(C.stacking.oldStacks=C.stacking.stacks)}),this.series.forEach(C=>{let D=C.xAxis&&C.xAxis.options||{};C.options.stacking&&C.reserveSpace()&&(C.stackKey=[C.type,T(C.options.stack,""),v?D.top:D.left,v?D.height:D.width].join(","))})}function S(){let v=this.stacking;if(v){let C=v.stacks;x(C,(D,E)=>{m(D),delete C[E]}),v.stackTotalGroup?.destroy()}}function M(){this.stacking||(this.stacking=new R(this))}function B(v,C,D,E){return!u(v)||v.x!==C||E&&v.stackKey!==E?v={x:C,index:0,key:E,stackKey:E}:v.index++,v.key=[D,C,v.index].join(","),v}function j(){let v,C=this,D=C.yAxis,E=C.stackKey||"",L=D.stacking.stacks,G=C.processedXData,Y=C.options.stacking,J=C[Y+"Stacker"];J&&[E,"-"+E].forEach(de=>{let b=G.length,K,z,W;for(;b--;)K=G[b],v=C.getStackIndicator(v,K,C.index,de),z=L[de]?.[K],(W=z?.points[v.key||""])&&J.call(C,W,z,b)})}function O(v,C,D){let E=C.total?100/C.total:0;v[0]=p(v[0]*E),v[1]=p(v[1]*E),this.stackedYData[D]=v[1]}function _(v){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?c.setStackedPoints.call(this,v,"group"):v.stacking.resetStacks())}function P(v,C){let D,E,L,G,Y,J,de,b,K,z=C||this.options.stacking;if(!z||!this.reserveSpace()||({group:"xAxis"}[z]||"yAxis")!==v.coll)return;let W=this.processedXData,re=this.processedYData,I=[],k=re.length,N=this.options,q=N.threshold||0,F=N.startFromThreshold?q:0,H=N.stack,U=C?`${this.type},${z}`:this.stackKey||"",X="-"+U,Z=this.negStacks,ee=v.stacking,ne=ee.stacks,le=ee.oldStacks;for(ee.stacksTouched+=1,de=0;de<k;de++){b=W[de],K=re[de],J=(D=this.getStackIndicator(D,b,this.index)).key||"",ne[Y=(E=Z&&K<(F?0:q))?X:U]||(ne[Y]={}),ne[Y][b]||(le[Y]?.[b]?(ne[Y][b]=le[Y][b],ne[Y][b].total=null):ne[Y][b]=new o(v,v.options.stackLabels,!!E,b,H)),L=ne[Y][b],K!==null?(L.points[J]=L.points[this.index]=[T(L.cumulative,F)],u(L.cumulative)||(L.base=J),L.touched=ee.stacksTouched,D.index>0&&this.singleStacks===!1&&(L.points[J][0]=L.points[this.index+","+b+",0"][0])):(delete L.points[J],delete L.points[this.index]);let ge=L.total||0;z==="percent"?(G=E?U:X,ge=Z&&ne[G]?.[b]?(G=ne[G][b]).total=Math.max(G.total||0,ge)+Math.abs(K)||0:p(ge+(Math.abs(K)||0))):z==="group"?(g(K)&&(K=K[0]),K!==null&&ge++):ge=p(ge+(K||0)),z==="group"?L.cumulative=(ge||1)-1:L.cumulative=p(T(L.cumulative,F)+(K||0)),L.total=ge,K!==null&&(L.points[J].push(L.cumulative),I[de]=L.cumulative,L.hasValidPoints=!0)}z==="percent"&&(ee.usePercentage=!0),z!=="group"&&(this.stackedYData=I),ee.oldStacks={}}class R{constructor(C){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=C}buildStacks(){let C,D,E=this.axis,L=E.series,G=E.coll==="xAxis",Y=E.options.reversedStacks,J=L.length;for(this.resetStacks(),this.usePercentage=!1,D=J;D--;)C=L[Y?D:J-D-1],G&&C.setGroupedPoints(E),C.setStackedPoints(E);if(!G)for(D=0;D<J;D++)L[D].modifyStacks();f(E,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,x(this.stacks,C=>{x(C,D=>{D.cumulative=D.total})}))}resetStacks(){x(this.stacks,C=>{x(C,(D,E)=>{y(D.touched)&&D.touched<this.stacksTouched?(D.destroy(),delete C[E]):(D.total=null,D.cumulative=null)})})}renderStackTotals(){let C=this.axis,D=C.chart,E=D.renderer,L=this.stacks,G=h(D,C.options.stackLabels?.animation||!1),Y=this.stackTotalGroup=this.stackTotalGroup||E.g("stack-labels").attr({zIndex:6,opacity:0}).add();Y.translate(D.plotLeft,D.plotTop),x(L,J=>{x(J,de=>{de.render(Y)})}),Y.animate({opacity:1},G)}}return(l||(l={})).compose=function(v,C,D){let E=C.prototype,L=D.prototype;E.getStacks||(d(v,"init",M),d(v,"destroy",S),E.getStacks=A,L.getStackIndicator=B,L.modifyStacks=j,L.percentStacker=O,L.setGroupedPoints=_,L.setStackedPoints=P)},l}),i(e,"Series/Line/LineSeries.js",[e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n){let{defined:o,merge:a,isObject:l}=n;class h extends s{drawGraph(){let d=this.options,p=(this.gappedPath||this.getGraphPath).call(this),u=this.chart.styledMode;[this,...this.zones].forEach((m,f)=>{let g,y=m.graph,x=y?"animate":"attr",T=m.dashStyle||d.dashStyle;y?(y.endX=this.preventGraphAnimation?null:p.xMap,y.animate({d:p})):p.length&&(m.graph=y=this.chart.renderer.path(p).addClass("highcharts-graph"+(f?` highcharts-zone-graph-${f-1} `:" ")+(f&&m.className||"")).attr({zIndex:1}).add(this.group)),y&&!u&&(g={stroke:!f&&d.lineColor||m.color||this.color||"#cccccc","stroke-width":d.lineWidth||0,fill:this.fillGraph&&this.color||"none"},T?g.dashstyle=T:d.linecap!=="square"&&(g["stroke-linecap"]=g["stroke-linejoin"]="round"),y[x](g).shadow(f<2&&d.shadow&&a({filterUnits:"userSpaceOnUse"},l(d.shadow)?d.shadow:{}))),y&&(y.startX=p.xMap,y.isArea=p.isArea)})}getGraphPath(d,p,u){let m=this,f=m.options,g=[],y=[],x,T=f.step,A=(d=d||m.points).reversed;return A&&d.reverse(),(T={right:1,center:2}[T]||T&&3)&&A&&(T=4-T),(d=this.getValidPoints(d,!1,!(f.connectNulls&&!p&&!u))).forEach(function(S,M){let B,j=S.plotX,O=S.plotY,_=d[M-1],P=S.isNull||typeof O!="number";(S.leftCliff||_&&_.rightCliff)&&!u&&(x=!0),P&&!o(p)&&M>0?x=!f.connectNulls:P&&!p?x=!0:(M===0||x?B=[["M",S.plotX,S.plotY]]:m.getPointSpline?B=[m.getPointSpline(d,S,M)]:T?(B=T===1?[["L",_.plotX,O]]:T===2?[["L",(_.plotX+j)/2,_.plotY],["L",(_.plotX+j)/2,O]]:[["L",j,_.plotY]]).push(["L",j,O]):B=[["L",j,O]],y.push(S.x),T&&(y.push(S.x),T===2&&y.push(S.x)),g.push.apply(g,B),x=!1)}),g.xMap=y,m.graphPath=g,g}}return h.defaultOptions=a(s.defaultOptions,{legendSymbol:"lineMarker"}),r.registerSeriesType("line",h),h}),i(e,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),i(e,"Series/Area/AreaSeries.js",[e["Series/Area/AreaSeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n){let{seriesTypes:{line:o}}=r,{extend:a,merge:l,objectEach:h,pick:c}=n;class d extends o{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:u,options:m}=this;[this,...this.zones].forEach((f,g)=>{let y={},x=f.fillColor||m.fillColor,T=f.area,A=T?"animate":"attr";T?(T.endX=this.preventGraphAnimation?null:u.xMap,T.animate({d:u})):(y.zIndex=0,(T=f.area=this.chart.renderer.path(u).addClass("highcharts-area"+(g?` highcharts-zone-area-${g-1} `:" ")+(g&&f.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(y.fill=x||f.color||this.color,y["fill-opacity"]=x?1:m.fillOpacity??.75,T.css({pointerEvents:this.stickyTracking?"none":"auto"})),T[A](y),T.startX=u.xMap,T.shiftUnit=m.step?2:1})}getGraphPath(u){let m,f,g,y=o.prototype.getGraphPath,x=this.options,T=x.stacking,A=this.yAxis,S=[],M=[],B=this.index,j=A.stacking.stacks[this.stackKey],O=x.threshold,_=Math.round(A.getThreshold(x.threshold)),P=c(x.connectNulls,T==="percent"),R=function(G,Y,J){let de=u[G],b=T&&j[de.x].points[B],K=de[J+"Null"]||0,z=de[J+"Cliff"]||0,W,re,I=!0;z||K?(W=(K?b[0]:b[1])+z,re=b[0]+z,I=!!K):!T&&u[Y]&&u[Y].isNull&&(W=re=O),W!==void 0&&(M.push({plotX:m,plotY:W===null?_:A.getThreshold(W),isNull:I,isCliff:!0}),S.push({plotX:m,plotY:re===null?_:A.getThreshold(re),doCurve:!1}))};u=u||this.points,T&&(u=this.getStackPoints(u));for(let G=0,Y=u.length;G<Y;++G)T||(u[G].leftCliff=u[G].rightCliff=u[G].leftNull=u[G].rightNull=void 0),f=u[G].isNull,m=c(u[G].rectPlotX,u[G].plotX),g=T?c(u[G].yBottom,_):_,f&&!P||(P||R(G,G-1,"left"),f&&!T&&P||(M.push(u[G]),S.push({x:G,plotX:m,plotY:g})),P||R(G,G+1,"right"));let v=y.call(this,M,!0,!0);S.reversed=!0;let C=y.call(this,S,!0,!0),D=C[0];D&&D[0]==="M"&&(C[0]=["L",D[1],D[2]]);let E=v.concat(C);E.length&&E.push(["Z"]);let L=y.call(this,M,!1,P);return E.xMap=v.xMap,this.areaPath=E,L}getStackPoints(u){let m=this,f=[],g=[],y=this.xAxis,x=this.yAxis,T=x.stacking.stacks[this.stackKey],A={},S=x.series,M=S.length,B=x.options.reversedStacks?1:-1,j=S.indexOf(m);if(u=u||this.points,this.options.stacking){for(let _=0;_<u.length;_++)u[_].leftNull=u[_].rightNull=void 0,A[u[_].x]=u[_];h(T,function(_,P){_.total!==null&&g.push(P)}),g.sort(function(_,P){return _-P});let O=S.map(_=>_.visible);g.forEach(function(_,P){let R=0,v,C;if(A[_]&&!A[_].isNull)f.push(A[_]),[-1,1].forEach(function(D){let E=D===1?"rightNull":"leftNull",L=T[g[P+D]],G=0;if(L){let Y=j;for(;Y>=0&&Y<M;){let J=S[Y].index;!(v=L.points[J])&&(J===m.index?A[_][E]=!0:O[Y]&&(C=T[_].points[J])&&(G-=C[1]-C[0])),Y+=B}}A[_][D===1?"rightCliff":"leftCliff"]=G});else{let D=j;for(;D>=0&&D<M;){let E=S[D].index;if(v=T[_].points[E]){R=v[1];break}D+=B}R=c(R,0),R=x.translate(R,0,1,0,1),f.push({isNull:!0,plotX:y.translate(_,0,0,0,1),x:_,plotY:R,yBottom:R})}})}return f}}return d.defaultOptions=l(o.defaultOptions,s),a(d.prototype,{singleStacks:!1}),r.registerSeriesType("area",d),d}),i(e,"Series/Spline/SplineSeries.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r){let{line:n}=s.seriesTypes,{merge:o,pick:a}=r;class l extends n{getPointSpline(c,d,p){let u,m,f,g,y=d.plotX||0,x=d.plotY||0,T=c[p-1],A=c[p+1];function S(B){return B&&!B.isNull&&B.doCurve!==!1&&!d.isCliff}if(S(T)&&S(A)){let B=T.plotX||0,j=T.plotY||0,O=A.plotX||0,_=A.plotY||0,P=0;u=(1.5*y+B)/2.5,m=(1.5*x+j)/2.5,f=(1.5*y+O)/2.5,g=(1.5*x+_)/2.5,f!==u&&(P=(g-m)*(f-y)/(f-u)+x-g),m+=P,g+=P,m>j&&m>x?(m=Math.max(j,x),g=2*x-m):m<j&&m<x&&(m=Math.min(j,x),g=2*x-m),g>_&&g>x?(g=Math.max(_,x),m=2*x-g):g<_&&g<x&&(g=Math.min(_,x),m=2*x-g),d.rightContX=f,d.rightContY=g,d.controlPoints={low:[u,m],high:[f,g]}}let M=["C",a(T.rightContX,T.plotX,0),a(T.rightContY,T.plotY,0),a(u,y,0),a(m,x,0),y,x];return T.rightContX=T.rightContY=void 0,M}}return l.defaultOptions=o(n.defaultOptions),s.registerSeriesType("spline",l),l}),i(e,"Series/AreaSpline/AreaSplineSeries.js",[e["Series/Spline/SplineSeries.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n){let{area:o,area:{prototype:a}}=r.seriesTypes,{extend:l,merge:h}=n;class c extends s{}return c.defaultOptions=h(s.defaultOptions,o.defaultOptions),l(c.prototype,{getGraphPath:a.getGraphPath,getStackPoints:a.getStackPoints,drawGraph:a.drawGraph}),r.registerSeriesType("areaspline",c),c}),i(e,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),i(e,"Series/Column/ColumnSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Color/Color.js"],e["Series/Column/ColumnSeriesDefaults.js"],e["Core/Globals.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n,o,a,l,h){let{animObject:c}=s,{parse:d}=r,{noop:p}=o,{clamp:u,crisp:m,defined:f,extend:g,fireEvent:y,isArray:x,isNumber:T,merge:A,pick:S,objectEach:M}=h;class B extends a{animate(O){let _,P,R=this,v=this.yAxis,C=v.pos,D=v.reversed,E=R.options,{clipOffset:L,inverted:G}=this.chart,Y={},J=G?"translateX":"translateY";O&&L?(Y.scaleY=.001,P=u(v.toPixels(E.threshold),C,C+v.len),G?(P+=D?-Math.floor(L[0]):Math.ceil(L[2]),Y.translateX=P-v.len):(P+=D?Math.ceil(L[0]):-Math.floor(L[2]),Y.translateY=P),R.clipBox&&R.setClip(),R.group.attr(Y)):(_=Number(R.group.attr(J)),R.group.animate({scaleY:1},g(c(R.options.animation),{step:function(de,b){R.group&&(Y[J]=_+b.pos*(C-_),R.group.attr(Y))}})))}init(O,_){super.init.apply(this,arguments);let P=this;(O=P.chart).hasRendered&&O.series.forEach(function(R){R.type===P.type&&(R.isDirty=!0)})}getColumnMetrics(){let O=this,_=O.options,P=O.xAxis,R=O.yAxis,v=P.options.reversedStacks,C=P.reversed&&!v||!P.reversed&&v,D={},E,L=0;_.grouping===!1?L=1:O.chart.series.forEach(function(K){let z,W=K.yAxis,re=K.options;K.type===O.type&&K.reserveSpace()&&R.len===W.len&&R.pos===W.pos&&(re.stacking&&re.stacking!=="group"?(D[E=K.stackKey]===void 0&&(D[E]=L++),z=D[E]):re.grouping!==!1&&(z=L++),K.columnIndex=z)});let G=Math.min(Math.abs(P.transA)*(!P.brokenAxis?.hasBreaks&&P.ordinal?.slope||_.pointRange||P.closestPointRange||P.tickInterval||1),P.len),Y=G*_.groupPadding,J=(G-2*Y)/(L||1),de=Math.min(_.maxPointWidth||P.len,S(_.pointWidth,J*(1-2*_.pointPadding))),b=(O.columnIndex||0)+(C?1:0);return O.columnMetrics={width:de,offset:(J-de)/2+(Y+b*J-G/2)*(C?-1:1),paddedWidth:J,columnCount:L},O.columnMetrics}crispCol(O,_,P,R){let v=this.borderWidth,C=this.chart.inverted;return R=m(_+R,v,C)-(_=m(_,v,C)),this.options.crisp&&(P=m(O+P,v)-(O=m(O,v))),{x:O,y:_,width:P,height:R}}adjustForMissingColumns(O,_,P,R){if(!P.isNull&&R.columnCount>1){let v=this.xAxis.series.filter(L=>L.visible).map(L=>L.index),C=0,D=0;M(this.xAxis.stacking?.stacks,L=>{if(typeof P.x=="number"){let G=L[P.x.toString()];if(G&&x(G.points[this.index])){let Y=Object.keys(G.points).filter(J=>!J.match(",")&&G.points[J]&&G.points[J].length>1).map(parseFloat).filter(J=>v.indexOf(J)!==-1).sort((J,de)=>de-J);C=Y.indexOf(this.index),D=Y.length}}}),C=this.xAxis.reversed?D-1-C:C;let E=(D-1)*R.paddedWidth+_;O=(P.plotX||0)+E/2-_-C*R.paddedWidth}return O}translate(){let O=this,_=O.chart,P=O.options,R=O.dense=O.closestPointRange*O.xAxis.transA<2,v=O.borderWidth=S(P.borderWidth,R?0:1),C=O.xAxis,D=O.yAxis,E=P.threshold,L=S(P.minPointLength,5),G=O.getColumnMetrics(),Y=G.width,J=O.pointXOffset=G.offset,de=O.dataMin,b=O.dataMax,K=O.translatedThreshold=D.getThreshold(E),z=O.barW=Math.max(Y,1+2*v);P.pointPadding&&(z=Math.ceil(z)),a.prototype.translate.apply(O),O.points.forEach(function(W){let re=S(W.yBottom,K),I=999+Math.abs(re),k=W.plotX||0,N=u(W.plotY,-I,D.len+I),q,F=Math.min(N,re),H=Math.max(N,re)-F,U=Y,X=k+J,Z=z;L&&Math.abs(H)<L&&(H=L,q=!D.reversed&&!W.negative||D.reversed&&W.negative,T(E)&&T(b)&&W.y===E&&b<=E&&(D.min||0)<E&&(de!==b||(D.max||0)<=E)&&(q=!q,W.negative=!W.negative),F=Math.abs(F-K)>L?re-L:K-(q?L:0)),f(W.options.pointWidth)&&(X-=Math.round(((U=Z=Math.ceil(W.options.pointWidth))-Y)/2)),P.centerInCategory&&!P.stacking&&(X=O.adjustForMissingColumns(X,U,W,G)),W.barX=X,W.pointWidth=U,W.tooltipPos=_.inverted?[u(D.len+D.pos-_.plotLeft-N,D.pos-_.plotLeft,D.len+D.pos-_.plotLeft),C.len+C.pos-_.plotTop-X-Z/2,H]:[C.left-_.plotLeft+X+Z/2,u(N+D.pos-_.plotTop,D.pos-_.plotTop,D.len+D.pos-_.plotTop),H],W.shapeType=O.pointClass.prototype.shapeType||"roundedRect",W.shapeArgs=O.crispCol(X,W.isNull?K:F,Z,W.isNull?0:H)}),y(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(O,_){let P=this.options,R=this.pointAttrToOptions||{},v=R.stroke||"borderColor",C=R["stroke-width"]||"borderWidth",D,E,L,G=O&&O.color||this.color,Y=O&&O[v]||P[v]||G,J=O&&O.options.dashStyle||P.dashStyle,de=O&&O[C]||P[C]||this[C]||0,b=S(O&&O.opacity,P.opacity,1);O&&this.zones.length&&(E=O.getZone(),G=O.options.color||E&&(E.color||O.nonZonedColor)||this.color,E&&(Y=E.borderColor||Y,J=E.dashStyle||J,de=E.borderWidth||de)),_&&O&&(L=(D=A(P.states[_],O.options.states&&O.options.states[_]||{})).brightness,G=D.color||L!==void 0&&d(G).brighten(D.brightness).get()||G,Y=D[v]||Y,de=D[C]||de,J=D.dashStyle||J,b=S(D.opacity,b));let K={fill:G,stroke:Y,"stroke-width":de,opacity:b};return J&&(K.dashstyle=J),K}drawPoints(O=this.points){let _,P=this,R=this.chart,v=P.options,C=R.renderer,D=v.animationLimit||250;O.forEach(function(E){let L=E.plotY,G=E.graphic,Y=!!G,J=G&&R.pointCount<D?"animate":"attr";T(L)&&E.y!==null?(_=E.shapeArgs,G&&E.hasNewShapeType()&&(G=G.destroy()),P.enabledDataSorting&&(E.startXPos=P.xAxis.reversed?-(_&&_.width||0):P.xAxis.width),!G&&(E.graphic=G=C[E.shapeType](_).add(E.group||P.group),G&&P.enabledDataSorting&&R.hasRendered&&R.pointCount<D&&(G.attr({x:E.startXPos}),Y=!0,J="animate")),G&&Y&&G[J](A(_)),R.styledMode||G[J](P.pointAttribs(E,E.selected&&"select")).shadow(E.allowShadow!==!1&&v.shadow),G&&(G.addClass(E.getClassName(),!0),G.attr({visibility:E.visible?"inherit":"hidden"}))):G&&(E.graphic=G.destroy())})}drawTracker(O=this.points){let _,P=this,R=P.chart,v=R.pointer,C=function(D){let E=v?.getPointFromEvent(D);v&&E&&P.options.enableMouseTracking&&(v.isDirectTouch=!0,E.onMouseOver(D))};O.forEach(function(D){_=x(D.dataLabels)?D.dataLabels:D.dataLabel?[D.dataLabel]:[],D.graphic&&(D.graphic.element.point=D),_.forEach(function(E){(E.div||E.element).point=D})}),P._hasTracking||(P.trackerGroups.forEach(function(D){P[D]&&(P[D].addClass("highcharts-tracker").on("mouseover",C).on("mouseout",function(E){v?.onTrackerMouseOut(E)}).on("touchstart",C),!R.styledMode&&P.options.cursor&&P[D].css({cursor:P.options.cursor}))}),P._hasTracking=!0),y(this,"afterDrawTracker")}remove(){let O=this,_=O.chart;_.hasRendered&&_.series.forEach(function(P){P.type===O.type&&(P.isDirty=!0)}),a.prototype.remove.apply(O,arguments)}}return B.defaultOptions=A(a.defaultOptions,n),g(B.prototype,{directTouch:!0,getSymbol:p,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),l.registerSeriesType("column",B),B}),i(e,"Core/Series/DataLabel.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Templating.js"],e["Core/Utilities.js"]],function(s,r,n){var o;let{getDeferredAnimation:a}=s,{format:l}=r,{defined:h,extend:c,fireEvent:d,isArray:p,isString:u,merge:m,objectEach:f,pick:g,pInt:y,splat:x}=n;return function(T){function A(){return P(this).some(v=>v?.enabled)}function S(v,C,D,E,L){let{chart:G,enabledDataSorting:Y}=this,J=this.isCartesian&&G.inverted,de=v.plotX,b=v.plotY,K=D.rotation||0,z=h(de)&&h(b)&&G.isInsidePlot(de,Math.round(b),{inverted:J,paneCoordinates:!0,series:this}),W=K===0&&g(D.overflow,Y?"none":"justify")==="justify",re=this.visible&&v.visible!==!1&&h(de)&&(v.series.forceDL||Y&&!W||z||g(D.inside,!!this.options.stacking)&&E&&G.isInsidePlot(de,J?E.x+1:E.y+E.height-1,{inverted:J,paneCoordinates:!0,series:this})),I=v.pos();if(re&&I){var k;let N=C.getBBox(),q=C.getBBox(void 0,0),F={right:1,center:.5}[D.align||0]||0,H={bottom:1,middle:.5}[D.verticalAlign||0]||0;if(E=c({x:I[0],y:Math.round(I[1]),width:0,height:0},E||{}),D.alignTo==="plotEdges"&&this.isCartesian&&(E[J?"x":"y"]=0,E[J?"width":"height"]=this.yAxis?.len||0),c(D,{width:N.width,height:N.height}),k=E,Y&&this.xAxis&&!W&&this.setDataLabelStartPos(v,C,L,z,k),C.align(m(D,{width:q.width,height:q.height}),!1,E,!1),C.alignAttr.x+=F*(q.width-N.width),C.alignAttr.y+=H*(q.height-N.height),C[C.placed?"animate":"attr"]({x:C.alignAttr.x+(N.width-q.width)/2,y:C.alignAttr.y+(N.height-q.height)/2,rotationOriginX:(C.width||0)/2,rotationOriginY:(C.height||0)/2}),W&&E.height>=0)this.justifyDataLabel(C,D,C.alignAttr,N,E,L);else if(g(D.crop,!0)){let{x:U,y:X}=C.alignAttr;re=G.isInsidePlot(U,X,{paneCoordinates:!0,series:this})&&G.isInsidePlot(U+N.width-1,X+N.height-1,{paneCoordinates:!0,series:this})}D.shape&&!K&&C[L?"attr":"animate"]({anchorX:I[0],anchorY:I[1]})}L&&Y&&(C.placed=!1),re||Y&&!W?(C.show(),C.placed=!0):(C.hide(),C.placed=!1)}function M(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function B(v){let C=this.hasRendered||0,D=this.initDataLabelsGroup().attr({opacity:+C});return!C&&D&&(this.visible&&D.show(),this.options.animation?D.animate({opacity:1},v):D.attr({opacity:1})),D}function j(v){let C;v=v||this.points;let D=this,E=D.chart,L=D.options,G=E.renderer,{backgroundColor:Y,plotBackgroundColor:J}=E.options.chart,de=G.getContrast(u(J)&&J||u(Y)&&Y||"#000000"),b=P(D),{animation:K,defer:z}=b[0],W=z?a(E,K,D):{defer:0,duration:0};d(this,"drawDataLabels"),D.hasDataLabels?.()&&(C=this.initDataLabels(W),v.forEach(re=>{let I=re.dataLabels||[];x(_(b,re.dlOptions||re.options?.dataLabels)).forEach((N,q)=>{let F=N.enabled&&(re.visible||re.dataLabelOnHidden)&&(!re.isNull||re.dataLabelOnNull)&&function(oe,ce){let ve=ce.filter;if(ve){let me=ve.operator,ye=oe[ve.property],we=ve.value;return me===">"&&ye>we||me==="<"&&ye<we||me===">="&&ye>=we||me==="<="&&ye<=we||me==="=="&&ye==we||me==="==="&&ye===we||me==="!="&&ye!=we||me==="!=="&&ye!==we}return!0}(re,N),{backgroundColor:H,borderColor:U,distance:X,style:Z={}}=N,ee,ne,le,ge,xe={},Se=I[q],se=!Se,ie;if(F&&(ne=g(N[re.formatPrefix+"Format"],N.format),ee=re.getLabelConfig(),le=h(ne)?l(ne,ee,E):(N[re.formatPrefix+"Formatter"]||N.formatter).call(ee,N),ge=N.rotation,!E.styledMode&&(Z.color=g(N.color,Z.color,u(D.color)?D.color:void 0,"#000000"),Z.color==="contrast"?(H!=="none"&&(ie=H),re.contrastColor=G.getContrast(ie!=="auto"&&ie||re.color||D.color),Z.color=ie||!h(X)&&N.inside||0>y(X||0)||L.stacking?re.contrastColor:de):delete re.contrastColor,L.cursor&&(Z.cursor=L.cursor)),xe={r:N.borderRadius||0,rotation:ge,padding:N.padding,zIndex:1},E.styledMode||(xe.fill=H==="auto"?re.color:H,xe.stroke=U==="auto"?re.color:U,xe["stroke-width"]=N.borderWidth),f(xe,(oe,ce)=>{oe===void 0&&delete xe[ce]})),!Se||F&&h(le)&&!!Se.div==!!N.useHTML&&(Se.rotation&&N.rotation||Se.rotation===N.rotation)||(Se=void 0,se=!0),F&&h(le)&&(Se?xe.text=le:(Se=G.label(le,0,0,N.shape,void 0,void 0,N.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+re.colorIndex+" "+(N.className||"")+(N.useHTML?" highcharts-tracker":"")),Se)){Se.options=N,Se.attr(xe),E.styledMode||Se.css(Z).shadow(N.shadow);let oe=N[re.formatPrefix+"TextPath"]||N.textPath;oe&&!N.useHTML&&(Se.setTextPath(re.getDataLabelPath?.(Se)||re.graphic,oe),re.dataLabelPath&&!oe.enabled&&(re.dataLabelPath=re.dataLabelPath.destroy())),Se.added||Se.add(C),D.alignDataLabel(re,Se,N,void 0,se),Se.isActive=!0,I[q]&&I[q]!==Se&&I[q].destroy(),I[q]=Se}});let k=I.length;for(;k--;)I[k]&&I[k].isActive?I[k].isActive=!1:(I[k]?.destroy(),I.splice(k,1));re.dataLabel=I[0],re.dataLabels=I})),d(this,"afterDrawDataLabels")}function O(v,C,D,E,L,G){let Y=this.chart,J=C.align,de=C.verticalAlign,b=v.box?0:v.padding||0,K=Y.inverted?this.yAxis:this.xAxis,z=K?K.left-Y.plotLeft:0,W=Y.inverted?this.xAxis:this.yAxis,re=W?W.top-Y.plotTop:0,{x:I=0,y:k=0}=C,N,q;return(N=(D.x||0)+b+z)<0&&(J==="right"&&I>=0?(C.align="left",C.inside=!0):I-=N,q=!0),(N=(D.x||0)+E.width-b+z)>Y.plotWidth&&(J==="left"&&I<=0?(C.align="right",C.inside=!0):I+=Y.plotWidth-N,q=!0),(N=D.y+b+re)<0&&(de==="bottom"&&k>=0?(C.verticalAlign="top",C.inside=!0):k-=N,q=!0),(N=(D.y||0)+E.height-b+re)>Y.plotHeight&&(de==="top"&&k<=0?(C.verticalAlign="bottom",C.inside=!0):k+=Y.plotHeight-N,q=!0),q&&(C.x=I,C.y=k,v.placed=!G,v.align(C,void 0,L)),q}function _(v,C){let D=[],E;if(p(v)&&!p(C))D=v.map(function(L){return m(L,C)});else if(p(C)&&!p(v))D=C.map(function(L){return m(v,L)});else if(p(v)||p(C)){if(p(v)&&p(C))for(E=Math.max(v.length,C.length);E--;)D[E]=m(v[E],C[E])}else D=m(v,C);return D}function P(v){let C=v.chart.options.plotOptions;return x(_(_(C?.series?.dataLabels,C?.[v.type]?.dataLabels),v.options.dataLabels))}function R(v,C,D,E,L){let G=this.chart,Y=G.inverted,J=this.xAxis,de=J.reversed,b=((Y?C.height:C.width)||0)/2,K=v.pointWidth,z=K?K/2:0;C.startXPos=Y?L.x:de?-b-z:J.width-b+z,C.startYPos=Y?de?this.yAxis.height-b+z:-b-z:L.y,E?C.visibility==="hidden"&&(C.show(),C.attr({opacity:0}).animate({opacity:1})):C.attr({opacity:1}).animate({opacity:0},void 0,C.hide),G.hasRendered&&(D&&C.attr({x:C.startXPos,y:C.startYPos}),C.placed=!0)}T.compose=function(v){let C=v.prototype;C.initDataLabels||(C.initDataLabels=B,C.initDataLabelsGroup=M,C.alignDataLabel=S,C.drawDataLabels=j,C.justifyDataLabel=O,C.setDataLabelStartPos=R,C.hasDataLabels=A)}}(o||(o={})),o}),i(e,"Series/Column/ColumnDataLabel.js",[e["Core/Series/DataLabel.js"],e["Core/Globals.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n,o){var a;let{composed:l}=r,{series:h}=n,{merge:c,pick:d,pushUnique:p}=o;return function(u){function m(f,g,y,x,T){let A=this.chart.inverted,S=f.series,M=(S.xAxis?S.xAxis.len:this.chart.plotSizeX)||0,B=(S.yAxis?S.yAxis.len:this.chart.plotSizeY)||0,j=f.dlBox||f.shapeArgs,O=d(f.below,f.plotY>d(this.translatedThreshold,B)),_=d(y.inside,!!this.options.stacking);if(j){if(x=c(j),!(y.overflow==="allow"&&y.crop===!1)){x.y<0&&(x.height+=x.y,x.y=0);let P=x.y+x.height-B;P>0&&P<x.height-1&&(x.height-=P)}A&&(x={x:B-x.y-x.height,y:M-x.x-x.width,width:x.height,height:x.width}),_||(A?(x.x+=O?0:x.width,x.width=0):(x.y+=O?x.height:0,x.height=0))}y.align=d(y.align,!A||_?"center":O?"right":"left"),y.verticalAlign=d(y.verticalAlign,A||_?"middle":O?"top":"bottom"),h.prototype.alignDataLabel.call(this,f,g,y,x,T),y.inside&&f.contrastColor&&g.css({color:f.contrastColor})}u.compose=function(f){s.compose(h),p(l,"ColumnDataLabel")&&(f.prototype.alignDataLabel=m)}}(a||(a={})),a}),i(e,"Series/Bar/BarSeries.js",[e["Series/Column/ColumnSeries.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n){let{extend:o,merge:a}=n;class l extends s{}return l.defaultOptions=a(s.defaultOptions,{}),o(l.prototype,{inverted:!0}),r.registerSeriesType("bar",l),l}),i(e,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25CF</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),i(e,"Series/Scatter/ScatterSeries.js",[e["Series/Scatter/ScatterSeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n){let{column:o,line:a}=r.seriesTypes,{addEvent:l,extend:h,merge:c}=n;class d extends a{applyJitter(){let u=this,m=this.options.jitter,f=this.points.length;m&&this.points.forEach(function(g,y){["x","y"].forEach(function(x,T){if(m[x]&&!g.isNull){let A=`plot${x.toUpperCase()}`,S=u[`${x}Axis`],M=m[x]*S.transA;if(S&&!S.logarithmic){let B=Math.max(0,(g[A]||0)-M),j=Math.min(S.len,(g[A]||0)+M);g[A]=B+(j-B)*function(O){let _=1e4*Math.sin(O);return _-Math.floor(_)}(y+T*f),x==="x"&&(g.clientX=g.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return d.defaultOptions=c(a.defaultOptions,s),h(d.prototype,{drawTracker:o.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),l(d,"afterTranslate",function(){this.applyJitter()}),r.registerSeriesType("scatter",d),d}),i(e,"Series/CenteredUtilities.js",[e["Core/Globals.js"],e["Core/Series/Series.js"],e["Core/Utilities.js"]],function(s,r,n){var o,a;let{deg2rad:l}=s,{fireEvent:h,isNumber:c,pick:d,relativeLength:p}=n;return(a=o||(o={})).getCenter=function(){let u=this.options,m=this.chart,f=2*(u.slicedOffset||0),g=m.plotWidth-2*f,y=m.plotHeight-2*f,x=u.center,T=Math.min(g,y),A=u.thickness,S,M=u.size,B=u.innerSize||0,j,O;typeof M=="string"&&(M=parseFloat(M)),typeof B=="string"&&(B=parseFloat(B));let _=[d(x[0],"50%"),d(x[1],"50%"),d(M&&M<0?void 0:u.size,"100%"),d(B&&B<0?void 0:u.innerSize||0,"0%")];for(!m.angular||this instanceof r||(_[3]=0),j=0;j<4;++j)O=_[j],S=j<2||j===2&&/%$/.test(O),_[j]=p(O,[g,y,T,_[2]][j])+(S?f:0);return _[3]>_[2]&&(_[3]=_[2]),c(A)&&2*A<_[2]&&A>0&&(_[3]=_[2]-2*A),h(this,"afterGetCenter",{positions:_}),_},a.getStartAndEndRadians=function(u,m){let f=c(u)?u:0,g=c(m)&&m>f&&m-f<360?m:f+360;return{start:l*(f+-90),end:l*(g+-90)}},o}),i(e,"Series/Pie/PiePoint.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Series/Point.js"],e["Core/Utilities.js"]],function(s,r,n){let{setAnimation:o}=s,{addEvent:a,defined:l,extend:h,isNumber:c,pick:d,relativeLength:p}=n;class u extends r{getConnectorPath(f){let g=f.dataLabelPosition,y=f.options||{},x=y.connectorShape,T=this.connectorShapes[x]||x;return g&&T.call(this,It(Xe({},g.computed),{alignment:g.alignment}),g.connectorPosition,y)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(f){let g=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(g.x,g.y,g.r+f,g.r+f,{innerR:g.r-1,start:g.start,end:g.end,borderRadius:g.borderRadius})}constructor(f,g,y){super(f,g,y),this.half=0,this.name??(this.name="Slice");let x=T=>{this.slice(T.type==="select")};a(this,"select",x),a(this,"unselect",x)}isValid(){return c(this.y)&&this.y>=0}setVisible(f,g=!0){f!==this.visible&&this.update({visible:f??!this.visible},g,void 0,!1)}slice(f,g,y){let x=this.series;o(y,x.chart),g=d(g,!0),this.sliced=this.options.sliced=f=l(f)?f:!this.sliced,x.options.data[x.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return h(u.prototype,{connectorShapes:{fixedOffset:function(m,f,g){let y=f.breakAt,x=f.touchingSliceAt,T=g.softConnector?["C",m.x+(m.alignment==="left"?-5:5),m.y,2*y.x-x.x,2*y.y-x.y,y.x,y.y]:["L",y.x,y.y];return[["M",m.x,m.y],T,["L",x.x,x.y]]},straight:function(m,f){let g=f.touchingSliceAt;return[["M",m.x,m.y],["L",g.x,g.y]]},crookedLine:function(m,f,g){let{breakAt:y,touchingSliceAt:x}=f,{series:T}=this,[A,S,M]=T.center,B=M/2,{plotLeft:j,plotWidth:O}=T.chart,_=m.alignment==="left",{x:P,y:R}=m,v=y.x;if(g.crookDistance){let D=p(g.crookDistance,1);v=_?A+B+(O+j-A-B)*(1-D):j+(A-B)*D}else v=A+(S-R)*Math.tan((this.angle||0)-Math.PI/2);let C=[["M",P,R]];return(_?v<=P&&v>=y.x:v>=P&&v<=y.x)&&C.push(["L",v,R]),C.push(["L",y.x,y.y],["L",x.x,x.y]),C}}}),u}),i(e,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),i(e,"Series/Pie/PieSeries.js",[e["Series/CenteredUtilities.js"],e["Series/Column/ColumnSeries.js"],e["Core/Globals.js"],e["Series/Pie/PiePoint.js"],e["Series/Pie/PieSeriesDefaults.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/Symbols.js"],e["Core/Utilities.js"]],function(s,r,n,o,a,l,h,c,d){let{getStartAndEndRadians:p}=s,{noop:u}=n,{clamp:m,extend:f,fireEvent:g,merge:y,pick:x}=d;class T extends l{animate(S){let M=this,B=M.points,j=M.startAngleRad;S||B.forEach(function(O){let _=O.graphic,P=O.shapeArgs;_&&P&&(_.attr({r:x(O.startR,M.center&&M.center[3]/2),start:j,end:j}),_.animate({r:P.r,start:P.start,end:P.end},M.options.animation))})}drawEmpty(){let S,M,B=this.startAngleRad,j=this.endAngleRad,O=this.options;this.total===0&&this.center?(S=this.center[0],M=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(S,M,this.center[1]/2,0,B,j).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:c.arc(S,M,this.center[2]/2,0,{start:B,end:j,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":O.borderWidth,fill:O.fillColor||"none",stroke:O.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let S=this.chart.renderer;this.points.forEach(function(M){M.graphic&&M.hasNewShapeType()&&(M.graphic=M.graphic.destroy()),M.graphic||(M.graphic=S[M.shapeType](M.shapeArgs).add(M.series.group),M.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(S,M,B,j){let O=this.center,_=this.radii?this.radii[B.index]||0:O[2]/2,P=j.dataLabelPosition,R=P?.distance||0,v=Math.asin(m((S-O[1])/(_+R),-1,1));return O[0]+Math.cos(v)*(_+R)*(M?-1:1)+(R>0?(M?-1:1)*(j.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let S,M,B,j,O=this,_=O.chart;this.drawEmpty(),O.group&&!_.styledMode&&O.group.shadow(O.options.shadow),O.points.forEach(function(P){let R={};M=P.graphic,!P.isNull&&M?(j=P.shapeArgs,S=P.getTranslate(),_.styledMode||(B=O.pointAttribs(P,P.selected&&"select")),P.delayedRendering?(M.setRadialReference(O.center).attr(j).attr(S),_.styledMode||M.attr(B).attr({"stroke-linejoin":"round"}),P.delayedRendering=!1):(M.setRadialReference(O.center),_.styledMode||y(!0,R,B),y(!0,R,j,S),M.animate(R)),M.attr({visibility:P.visible?"inherit":"hidden"}),M.addClass(P.getClassName(),!0)):M&&(P.graphic=M.destroy())})}sortByAngle(S,M){S.sort(function(B,j){return B.angle!==void 0&&(j.angle-B.angle)*M})}translate(S){g(this,"translate"),this.generatePoints();let M=this.options,B=M.slicedOffset,j=p(M.startAngle,M.endAngle),O=this.startAngleRad=j.start,_=(this.endAngleRad=j.end)-O,P=this.points,R=M.ignoreHiddenPoint,v=P.length,C,D,E,L,G,Y,J,de=0;for(S||(this.center=S=this.getCenter()),Y=0;Y<v;Y++){J=P[Y],C=O+de*_,J.isValid()&&(!R||J.visible)&&(de+=J.percentage/100),D=O+de*_;let b={x:S[0],y:S[1],r:S[2]/2,innerR:S[3]/2,start:Math.round(1e3*C)/1e3,end:Math.round(1e3*D)/1e3};J.shapeType="arc",J.shapeArgs=b,(E=(D+C)/2)>1.5*Math.PI?E-=2*Math.PI:E<-Math.PI/2&&(E+=2*Math.PI),J.slicedTranslation={translateX:Math.round(Math.cos(E)*B),translateY:Math.round(Math.sin(E)*B)},L=Math.cos(E)*S[2]/2,G=Math.sin(E)*S[2]/2,J.tooltipPos=[S[0]+.7*L,S[1]+.7*G],J.half=E<-Math.PI/2||E>Math.PI/2?1:0,J.angle=E}g(this,"afterTranslate")}updateTotals(){let S=this.points,M=S.length,B=this.options.ignoreHiddenPoint,j,O,_=0;for(j=0;j<M;j++)(O=S[j]).isValid()&&(!B||O.visible)&&(_+=O.y);for(j=0,this.total=_;j<M;j++)(O=S[j]).percentage=_>0&&(O.visible||!B)?O.y/_*100:0,O.total=_}}return T.defaultOptions=y(l.defaultOptions,a),f(T.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:r.prototype.drawTracker,getCenter:s.getCenter,getSymbol:u,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:r.prototype.pointAttribs,pointClass:o,requireSorting:!1,searchPoint:u,trackerGroups:["group","dataLabelsGroup"]}),h.registerSeriesType("pie",T),T}),i(e,"Series/Pie/PieDataLabel.js",[e["Core/Series/DataLabel.js"],e["Core/Globals.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(s,r,n,o,a){var l;let{composed:h,noop:c}=r,{distribute:d}=n,{series:p}=o,{arrayMax:u,clamp:m,defined:f,pick:g,pushUnique:y,relativeLength:x}=a;return function(T){let A={radialDistributionY:function(O,_){return(_.dataLabelPosition?.top||0)+O.distributeBox.pos},radialDistributionX:function(O,_,P,R,v){let C=v.dataLabelPosition;return O.getX(P<(C?.top||0)+2||P>(C?.bottom||0)-2?R:P,_.half,_,v)},justify:function(O,_,P,R){return R[0]+(O.half?-1:1)*(P+(_.dataLabelPosition?.distance||0))},alignToPlotEdges:function(O,_,P,R){let v=O.getBBox().width;return _?v+R:P-v-R},alignToConnectors:function(O,_,P,R){let v=0,C;return O.forEach(function(D){(C=D.dataLabel.getBBox().width)>v&&(v=C)}),_?v+R:P-v-R}};function S(O,_){let{center:P,options:R}=this,v=P[2]/2,C=O.angle||0,D=Math.cos(C),E=Math.sin(C),L=P[0]+D*v,G=P[1]+E*v,Y=Math.min((R.slicedOffset||0)+(R.borderWidth||0),_/5);return{natural:{x:L+D*_,y:G+E*_},computed:{},alignment:_<0?"center":O.half?"right":"left",connectorPosition:{breakAt:{x:L+D*Y,y:G+E*Y},touchingSliceAt:{x:L,y:G}},distance:_}}function M(){let O=this,_=O.points,P=O.chart,R=P.plotWidth,v=P.plotHeight,C=P.plotLeft,D=Math.round(P.chartWidth/3),E=O.center,L=E[2]/2,G=E[1],Y=[[],[]],J=[0,0,0,0],de=O.dataLabelPositioners,b,K,z,W=0;O.visible&&O.hasDataLabels?.()&&(_.forEach(re=>{(re.dataLabels||[]).forEach(I=>{I.shortened&&(I.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),I.shortened=!1)})}),p.prototype.drawDataLabels.apply(O),_.forEach(re=>{(re.dataLabels||[]).forEach((I,k)=>{let N=E[2]/2,q=I.options,F=x(q?.distance||0,N);k===0&&Y[re.half].push(re),!f(q?.style?.width)&&I.getBBox().width>D&&(I.css({width:Math.round(.7*D)+"px"}),I.shortened=!0),I.dataLabelPosition=this.getDataLabelPosition(re,F),W=Math.max(W,F)})}),Y.forEach((re,I)=>{let k=re.length,N=[],q,F,H=0,U;k&&(O.sortByAngle(re,I-.5),W>0&&(q=Math.max(0,G-L-W),F=Math.min(G+L+W,P.plotHeight),re.forEach(X=>{(X.dataLabels||[]).forEach(Z=>{let ee=Z.dataLabelPosition;ee&&ee.distance>0&&(ee.top=Math.max(0,G-L-ee.distance),ee.bottom=Math.min(G+L+ee.distance,P.plotHeight),H=Z.getBBox().height||21,X.distributeBox={target:(Z.dataLabelPosition?.natural.y||0)-ee.top+H/2,size:H,rank:X.y},N.push(X.distributeBox))})}),d(N,U=F+H-q,U/5)),re.forEach(X=>{(X.dataLabels||[]).forEach(Z=>{let ee=Z.options||{},ne=X.distributeBox,le=Z.dataLabelPosition,ge=le?.natural.y||0,xe=ee.connectorPadding||0,Se=0,se=ge,ie="inherit";if(le){if(N&&f(ne)&&le.distance>0&&(ne.pos===void 0?ie="hidden":(z=ne.size,se=de.radialDistributionY(X,Z))),ee.justify)Se=de.justify(X,Z,L,E);else switch(ee.alignTo){case"connectors":Se=de.alignToConnectors(re,I,R,C);break;case"plotEdges":Se=de.alignToPlotEdges(Z,I,R,C);break;default:Se=de.radialDistributionX(O,X,se,ge,Z)}if(le.attribs={visibility:ie,align:le.alignment},le.posAttribs={x:Se+(ee.x||0)+({left:xe,right:-xe}[le.alignment]||0),y:se+(ee.y||0)-Z.getBBox().height/2},le.computed.x=Se,le.computed.y=se,g(ee.crop,!0)){let oe;Se-(K=Z.getBBox().width)<xe&&I===1?(oe=Math.round(K-Se+xe),J[3]=Math.max(oe,J[3])):Se+K>R-xe&&I===0&&(oe=Math.round(Se+K-R+xe),J[1]=Math.max(oe,J[1])),se-z/2<0?J[0]=Math.max(Math.round(-se+z/2),J[0]):se+z/2>v&&(J[2]=Math.max(Math.round(se+z/2-v),J[2])),le.sideOverflow=oe}}})}))}),(u(J)===0||this.verifyDataLabelOverflow(J))&&(this.placeDataLabels(),this.points.forEach(re=>{(re.dataLabels||[]).forEach(I=>{let{connectorColor:k,connectorWidth:N=1}=I.options||{},q=I.dataLabelPosition;if(N){let F;b=I.connector,q&&q.distance>0?(F=!b,b||(I.connector=b=P.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+re.colorIndex+(re.className?" "+re.className:"")).add(O.dataLabelsGroup)),P.styledMode||b.attr({"stroke-width":N,stroke:k||re.color||"#666666"}),b[F?"attr":"animate"]({d:re.getConnectorPath(I)}),b.attr({visibility:q.attribs?.visibility})):b&&(I.connector=b.destroy())}})})))}function B(){this.points.forEach(O=>{(O.dataLabels||[]).forEach(_=>{let P=_.dataLabelPosition;P?(P.sideOverflow&&(_.css({width:Math.max(_.getBBox().width-P.sideOverflow,0)+"px",textOverflow:(_.options?.style||{}).textOverflow||"ellipsis"}),_.shortened=!0),_.attr(P.attribs),_[_.moved?"animate":"attr"](P.posAttribs),_.moved=!0):_&&_.attr({y:-9999})}),delete O.distributeBox},this)}function j(O){let _=this.center,P=this.options,R=P.center,v=P.minSize||80,C=v,D=P.size!==null;return!D&&(R[0]!==null?C=Math.max(_[2]-Math.max(O[1],O[3]),v):(C=Math.max(_[2]-O[1]-O[3],v),_[0]+=(O[3]-O[1])/2),R[1]!==null?C=m(C,v,_[2]-Math.max(O[0],O[2])):(C=m(C,v,_[2]-O[0]-O[2]),_[1]+=(O[0]-O[2])/2),C<_[2]?(_[2]=C,_[3]=Math.min(P.thickness?Math.max(0,C-2*P.thickness):Math.max(0,x(P.innerSize||0,C)),C),this.translate(_),this.drawDataLabels&&this.drawDataLabels()):D=!0),D}T.compose=function(O){if(s.compose(p),y(h,"PieDataLabel")){let _=O.prototype;_.dataLabelPositioners=A,_.alignDataLabel=c,_.drawDataLabels=M,_.getDataLabelPosition=S,_.placeDataLabels=B,_.verifyDataLabelOverflow=j}}}(l||(l={})),l}),i(e,"Extensions/OverlappingDataLabels.js",[e["Core/Utilities.js"]],function(s){let{addEvent:r,fireEvent:n,objectEach:o,pick:a}=s;function l(d){let p=d.length,u=(A,S)=>!(S.x>=A.x+A.width||S.x+S.width<=A.x||S.y>=A.y+A.height||S.y+S.height<=A.y),m,f,g,y,x,T=!1;for(let A=0;A<p;A++)(m=d[A])&&(m.oldOpacity=m.opacity,m.newOpacity=1,m.absoluteBox=function(S){if(S&&(!S.alignAttr||S.placed)){let M=S.box?0:S.padding||0,B=S.alignAttr||{x:S.attr("x"),y:S.attr("y")},j=S.getBBox();return S.width=j.width,S.height=j.height,{x:B.x+(S.parentGroup?.translateX||0)+M,y:B.y+(S.parentGroup?.translateY||0)+M,width:(S.width||0)-2*M,height:(S.height||0)-2*M}}}(m));d.sort((A,S)=>(S.labelrank||0)-(A.labelrank||0));for(let A=0;A<p;++A){y=(f=d[A])&&f.absoluteBox;for(let S=A+1;S<p;++S)x=(g=d[S])&&g.absoluteBox,y&&x&&f!==g&&f.newOpacity!==0&&g.newOpacity!==0&&f.visibility!=="hidden"&&g.visibility!=="hidden"&&u(y,x)&&((f.labelrank<g.labelrank?f:g).newOpacity=0)}for(let A of d)h(A,this)&&(T=!0);T&&n(this,"afterHideAllOverlappingLabels")}function h(d,p){let u,m,f=!1;return d&&(m=d.newOpacity,d.oldOpacity!==m&&(d.hasClass("highcharts-data-label")?(d[m?"removeClass":"addClass"]("highcharts-data-label-hidden"),u=function(){p.styledMode||d.css({pointerEvents:m?"auto":"none"})},f=!0,d[d.isOld?"animate":"attr"]({opacity:m},void 0,u),n(p,"afterHideOverlappingLabel")):d.attr({opacity:m})),d.isOld=!0),f}function c(){let d=this,p=[];for(let u of d.labelCollectors||[])p=p.concat(u());for(let u of d.yAxis||[])u.stacking&&u.options.stackLabels&&!u.options.stackLabels.allowOverlap&&o(u.stacking.stacks,m=>{o(m,f=>{f.label&&p.push(f.label)})});for(let u of d.series||[])if(u.visible&&u.hasDataLabels?.()){let m=f=>{for(let g of f)g.visible&&(g.dataLabels||[]).forEach(y=>{let x=y.options||{};y.labelrank=a(x.labelrank,g.labelrank,g.shapeArgs?.height),x.allowOverlap??Number(x.distance)>0?(y.oldOpacity=y.opacity,y.newOpacity=1,h(y,d)):p.push(y)})};m(u.nodes||[]),m(u.points)}this.hideOverlappingLabels(p)}return{compose:function(d){let p=d.prototype;p.hideOverlappingLabels||(p.hideOverlappingLabels=l,r(d,"render",c))}}}),i(e,"Extensions/BorderRadius.js",[e["Core/Defaults.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(s,r,n){let{defaultOptions:o}=s,{noop:a}=r,{addEvent:l,extend:h,isObject:c,merge:d,relativeLength:p}=n,u={radius:0,scope:"stack",where:void 0},m=a,f=a;function g(S,M,B,j,O={}){let _=m(S,M,B,j,O),{innerR:P=0,r:R=B,start:v=0,end:C=0}=O;if(O.open||!O.borderRadius)return _;let D=C-v,E=Math.sin(D/2),L=Math.max(Math.min(p(O.borderRadius||0,R-P),(R-P)/2,R*E/(1+E)),0),G=Math.min(L,D/Math.PI*2*P),Y=_.length-1;for(;Y--;)(function(J,de,b){let K,z,W,re=J[de],I=J[de+1];if(I[0]==="Z"&&(I=J[0]),(re[0]==="M"||re[0]==="L")&&I[0]==="A"?(K=re,z=I,W=!0):re[0]==="A"&&(I[0]==="M"||I[0]==="L")&&(K=I,z=re),K&&z&&z.params){let k=z[1],N=z[5],q=z.params,{start:F,end:H,cx:U,cy:X}=q,Z=N?k-b:k+b,ee=Z?Math.asin(b/Z):0,ne=N?ee:-ee,le=Math.cos(ee)*Z;W?(q.start=F+ne,K[1]=U+le*Math.cos(F),K[2]=X+le*Math.sin(F),J.splice(de+1,0,["A",b,b,0,0,1,U+k*Math.cos(q.start),X+k*Math.sin(q.start)])):(q.end=H-ne,z[6]=U+k*Math.cos(q.end),z[7]=X+k*Math.sin(q.end),J.splice(de+1,0,["A",b,b,0,0,1,U+le*Math.cos(H),X+le*Math.sin(H)])),z[4]=Math.abs(q.end-q.start)<Math.PI?0:1}})(_,Y,Y>1?G:L);return _}function y(){if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:S,yAxis:M}=this,B=S.stacking==="percent",j=o.plotOptions?.[this.type]?.borderRadius,O=x(S.borderRadius,c(j)?j:{}),_=M.options.reversed;for(let P of this.points){let{shapeArgs:R}=P;if(P.shapeType==="roundedRect"&&R){let{width:v=0,height:C=0,y:D=0}=R,E=D,L=C;if(O.scope==="stack"&&P.stackTotal){let de=M.translate(B?100:P.stackTotal,!1,!0,!1,!0),b=M.translate(S.threshold||0,!1,!0,!1,!0),K=this.crispCol(0,Math.min(de,b),0,Math.abs(de-b));E=K.y,L=K.height}let G=(P.negative?-1:1)*(_?-1:1)==-1,Y=O.where;!Y&&this.is("waterfall")&&Math.abs((P.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(Y="all"),Y||(Y="end");let J=Math.min(p(O.radius,v),v/2,Y==="all"?C/2:1/0)||0;Y==="end"&&(G&&(E-=J),L+=J),h(R,{brBoxHeight:L,brBoxY:E,r:J})}}}}function x(S,M){return c(S)||(S={radius:S||0}),d(u,M,S)}function T(){let S=x(this.options.borderRadius);for(let M of this.points){let B=M.shapeArgs;B&&(B.borderRadius=p(S.radius,(B.r||0)-(B.innerR||0)))}}function A(S,M,B,j,O={}){let _=f(S,M,B,j,O),{r:P=0,brBoxHeight:R=j,brBoxY:v=M}=O,C=M-v,D=v+R-(M+j),E=C-P>-.1?0:P,L=D-P>-.1?0:P,G=Math.max(E&&C,0),Y=Math.max(L&&D,0),J=[S+E,M],de=[S+B-E,M],b=[S+B,M+E],K=[S+B,M+j-L],z=[S+B-L,M+j],W=[S+L,M+j],re=[S,M+j-L],I=[S,M+E],k=(N,q)=>Math.sqrt(Math.pow(N,2)-Math.pow(q,2));if(G){let N=k(E,E-G);J[0]-=N,de[0]+=N,b[1]=I[1]=M+E-G}if(j<E-G){let N=k(E,E-G-j);b[0]=K[0]=S+B-E+N,z[0]=Math.min(b[0],z[0]),W[0]=Math.max(K[0],W[0]),re[0]=I[0]=S+E-N,b[1]=I[1]=M+j}if(Y){let N=k(L,L-Y);z[0]+=N,W[0]-=N,K[1]=re[1]=M+j-L+Y}if(j<L-Y){let N=k(L,L-Y-j);b[0]=K[0]=S+B-L+N,de[0]=Math.min(b[0],de[0]),J[0]=Math.max(K[0],J[0]),re[0]=I[0]=S+L-N,K[1]=re[1]=M}return _.length=0,_.push(["M",...J],["L",...de],["A",E,E,0,0,1,...b],["L",...K],["A",L,L,0,0,1,...z],["L",...W],["A",L,L,0,0,1,...re],["L",...I],["A",E,E,0,0,1,...J],["Z"]),_}return{compose:function(S,M,B){let j=S.types.pie;if(!M.symbolCustomAttribs.includes("borderRadius")){let O=B.prototype.symbols;l(S,"afterColumnTranslate",y,{order:9}),l(j,"afterTranslate",T),M.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),m=O.arc,f=O.roundedRect,O.arc=g,O.roundedRect=A}},optionsToObject:x}}),i(e,"Core/Responsive.js",[e["Core/Utilities.js"]],function(s){var r;let{diffObjects:n,extend:o,find:a,merge:l,pick:h,uniqueKey:c}=s;return function(d){function p(m,f){let g=m.condition;(g.callback||function(){return this.chartWidth<=h(g.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=h(g.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=h(g.minWidth,0)&&this.chartHeight>=h(g.minHeight,0)}).call(this)&&f.push(m._id)}function u(m,f){let g=this.options.responsive,y=this.currentResponsive,x=[],T;!f&&g&&g.rules&&g.rules.forEach(M=>{M._id===void 0&&(M._id=c()),this.matchResponsiveRule(M,x)},this);let A=l(...x.map(M=>a((g||{}).rules||[],B=>B._id===M)).map(M=>M&&M.chartOptions));A.isResponsiveOptions=!0,x=x.toString()||void 0;let S=y&&y.ruleIds;x!==S&&(y&&this.update(y.undoOptions,m,!0),x?((T=n(A,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:x,mergedOptions:A,undoOptions:T},this.update(A,m,!0)):this.currentResponsive=void 0)}d.compose=function(m){let f=m.prototype;return f.matchResponsiveRule||o(f,{matchResponsiveRule:p,setResponsive:u}),m}}(r||(r={})),r}),i(e,"masters/highcharts.src.js",[e["Core/Globals.js"],e["Core/Utilities.js"],e["Core/Defaults.js"],e["Core/Animation/Fx.js"],e["Core/Animation/AnimationUtilities.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Templating.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Renderer/RendererUtilities.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Renderer/HTML/HTMLElement.js"],e["Core/Axis/Axis.js"],e["Core/Axis/DateTimeAxis.js"],e["Core/Axis/LogarithmicAxis.js"],e["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],e["Core/Axis/Tick.js"],e["Core/Tooltip.js"],e["Core/Series/Point.js"],e["Core/Pointer.js"],e["Core/Legend/Legend.js"],e["Core/Legend/LegendSymbol.js"],e["Core/Chart/Chart.js"],e["Extensions/ScrollablePlotArea.js"],e["Core/Axis/Stacking/StackingAxis.js"],e["Core/Axis/Stacking/StackItem.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Series/Column/ColumnDataLabel.js"],e["Series/Pie/PieDataLabel.js"],e["Core/Series/DataLabel.js"],e["Extensions/OverlappingDataLabels.js"],e["Extensions/BorderRadius.js"],e["Core/Responsive.js"],e["Core/Color/Color.js"],e["Core/Time.js"]],function(s,r,n,o,a,l,h,c,d,p,u,m,f,g,y,x,T,A,S,M,B,j,O,_,P,R,v,C,D,E,L,G,Y,J,de,b){return s.AST=l,s.Axis=f,s.Chart=O,s.Color=de,s.DataLabel=L,s.Fx=o,s.HTMLElement=m,s.Legend=B,s.LegendSymbol=j,s.OverlappingDataLabels=s.OverlappingDataLabels||G,s.PlotLineOrBand=x,s.Point=S,s.Pointer=M,s.RendererRegistry=c,s.Series=v,s.SeriesRegistry=C,s.StackItem=R,s.SVGElement=p,s.SVGRenderer=u,s.Templating=h,s.Tick=T,s.Time=b,s.Tooltip=A,s.animate=a.animate,s.animObject=a.animObject,s.chart=O.chart,s.color=de.parse,s.dateFormat=h.dateFormat,s.defaultOptions=n.defaultOptions,s.distribute=d.distribute,s.format=h.format,s.getDeferredAnimation=a.getDeferredAnimation,s.getOptions=n.getOptions,s.numberFormat=h.numberFormat,s.seriesType=C.seriesType,s.setAnimation=a.setAnimation,s.setOptions=n.setOptions,s.stop=a.stop,s.time=n.defaultTime,s.timers=o.timers,Y.compose(s.Series,s.SVGElement,s.SVGRenderer),D.compose(s.Series.types.column),L.compose(s.Series),g.compose(s.Axis),m.compose(s.SVGRenderer),B.compose(s.Chart),y.compose(s.Axis),G.compose(s.Chart),E.compose(s.Series.types.pie),x.compose(s.Axis),M.compose(s.Chart),J.compose(s.Chart),_.compose(s.Axis,s.Chart,s.Series),P.compose(s.Axis,s.Chart,s.Series),A.compose(s.Pointer),r.extend(s,r),s}),e["masters/highcharts.src.js"]._modules=e,e["masters/highcharts.src.js"]})});var Hl=class{},rd=class{},Jn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(i=>{let s=i.indexOf(":");if(s>0){let r=i.slice(0,s),n=r.toLowerCase(),o=i.slice(s+1).trim();this.maybeSetNormalizedName(r,n),this.headers.has(n)?this.headers.get(n).push(o):this.headers.set(n,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((i,s)=>{this.setHeaderEntries(s,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([i,s])=>{this.setHeaderEntries(i,s)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){let i=new t;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){let i=e.name.toLowerCase();switch(e.op){case"a":case"s":let s=e.value;if(typeof s=="string"&&(s=[s]),s.length===0)return;this.maybeSetNormalizedName(e.name,i);let r=(e.op==="a"?this.headers.get(i):void 0)||[];r.push(...s),this.headers.set(i,r);break;case"d":let n=e.value;if(!n)this.headers.delete(i),this.normalizedNames.delete(i);else{let o=this.headers.get(i);if(!o)return;o=o.filter(a=>n.indexOf(a)===-1),o.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,o)}break}}setHeaderEntries(e,i){let s=(Array.isArray(i)?i:[i]).map(n=>n.toString()),r=e.toLowerCase();this.headers.set(r,s),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}};var sf=class{encodeKey(e){return kv(e)}encodeValue(e){return kv(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function A_(t,e){let i=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let n=r.indexOf("="),[o,a]=n==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,n)),e.decodeValue(r.slice(n+1))],l=i.get(o)||[];l.push(a),i.set(o,l)}),i}var R_=/%(\d[a-f0-9])/gi,D_={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kv(t){return encodeURIComponent(t).replace(R_,(e,i)=>D_[i]??e)}function sd(t){return`${t}`}var gn=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new sf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=A_(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{let s=e.fromObject[i],r=Array.isArray(s)?s.map(sd):[sd(s)];this.map.set(i,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){let i=[];return Object.keys(e).forEach(s=>{let r=e[s];Array.isArray(r)?r.forEach(n=>{i.push({param:s,value:n,op:"a"})}):i.push({param:s,value:r,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let i=this.encoder.encodeKey(e);return this.map.get(e).map(s=>i+"="+this.encoder.encodeValue(s)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let i=new t({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let i=(e.op==="a"?this.map.get(e.param):void 0)||[];i.push(sd(e.value)),this.map.set(e.param,i);break;case"d":if(e.value!==void 0){let s=this.map.get(e.param)||[],r=s.indexOf(sd(e.value));r!==-1&&s.splice(r,1),s.length>0?this.map.set(e.param,s):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var rf=class{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function F_(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Nv(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Gv(t){return typeof Blob<"u"&&t instanceof Blob}function Vv(t){return typeof FormData<"u"&&t instanceof FormData}function P_(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Bl=class t{constructor(e,i,s,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let n;if(F_(this.method)||r?(this.body=s!==void 0?s:null,n=r):n=s,n&&(this.reportProgress=!!n.reportProgress,this.withCredentials=!!n.withCredentials,n.responseType&&(this.responseType=n.responseType),n.headers&&(this.headers=n.headers),n.context&&(this.context=n.context),n.params&&(this.params=n.params),this.transferCache=n.transferCache),this.headers??=new Jn,this.context??=new rf,!this.params)this.params=new gn,this.urlWithParams=i;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=i;else{let a=i.indexOf("?"),l=a===-1?"?":a<i.length-1?"&":"";this.urlWithParams=i+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Nv(this.body)||Gv(this.body)||Vv(this.body)||P_(this.body)?this.body:this.body instanceof gn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Vv(this.body)?null:Gv(this.body)?this.body.type||null:Nv(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof gn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let i=e.method||this.method,s=e.url||this.url,r=e.responseType||this.responseType,n=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,c=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((p,u)=>p.set(u,e.setHeaders[u]),h)),e.setParams&&(c=Object.keys(e.setParams).reduce((p,u)=>p.set(u,e.setParams[u]),c)),new t(i,s,o,{params:c,headers:h,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:n})}},ca=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ca||{}),Wl=class{constructor(e,i=ad.Ok,s="OK"){this.headers=e.headers||new Jn,this.status=e.status!==void 0?e.status:i,this.statusText=e.statusText||s,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},nf=class t extends Wl{constructor(e={}){super(e),this.type=ca.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},nd=class t extends Wl{constructor(e={}){super(e),this.type=ca.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},od=class extends Wl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ad=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(ad||{});function tf(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var af=(()=>{let e=class e{constructor(s){this.handler=s}request(s,r,n={}){let o;if(s instanceof Bl)o=s;else{let h;n.headers instanceof Jn?h=n.headers:h=new Jn(n.headers);let c;n.params&&(n.params instanceof gn?c=n.params:c=new gn({fromObject:n.params})),o=new Bl(s,r,n.body!==void 0?n.body:null,{headers:h,context:n.context,params:c,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials,transferCache:n.transferCache})}let a=ot(o).pipe($n(h=>this.handler.handle(h)));if(s instanceof Bl||n.observe==="events")return a;let l=a.pipe(Ei(h=>h instanceof nd));switch(n.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(wt(h=>{if(h.body!==null&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return l.pipe(wt(h=>{if(h.body!==null&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return l.pipe(wt(h=>{if(h.body!==null&&typeof h.body!="string")throw new Error("Response is not a string.");return h.body}));case"json":default:return l.pipe(wt(h=>h.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(s,r={}){return this.request("DELETE",s,r)}get(s,r={}){return this.request("GET",s,r)}head(s,r={}){return this.request("HEAD",s,r)}jsonp(s,r){return this.request("JSONP",s,{params:new gn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(s,r={}){return this.request("OPTIONS",s,r)}patch(s,r,n={}){return this.request("PATCH",s,tf(n,r))}post(s,r,n={}){return this.request("POST",s,tf(n,r))}put(s,r,n={}){return this.request("PUT",s,tf(n,r))}};e.\u0275fac=function(r){return new(r||e)(Ve(Hl))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})();function Uv(t,e){return e(t)}function M_(t,e){return(i,s)=>e.intercept(i,{handle:r=>t(r,s)})}function I_(t,e,i){return(s,r)=>Hr(i,()=>e(s,n=>t(n,r)))}var O_=new pt(""),lf=new pt(""),L_=new pt(""),k_=new pt("");function N_(){let t=null;return(e,i)=>{t===null&&(t=(tt(O_,{optional:!0})??[]).reduceRight(M_,Uv));let s=tt(Nl),r=s.add();return t(e,i).pipe(Kn(()=>s.remove(r)))}}var Bv=(()=>{let e=class e extends Hl{constructor(s,r){super(),this.backend=s,this.injector=r,this.chain=null,this.pendingTasks=tt(Nl);let n=tt(k_,{optional:!0});this.backend=n??s}handle(s){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(lf),...this.injector.get(L_,[])]));this.chain=n.reduceRight((o,a)=>I_(o,a,this.injector),Uv)}let r=this.pendingTasks.add();return this.chain(s,n=>this.backend.handle(n)).pipe(Kn(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(Ve(rd),Ve(sa))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})();var G_=/^\)\]\}',?\n/;function V_(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Hv=(()=>{let e=class e{constructor(s){this.xhrFactory=s}handle(s){if(s.method==="JSONP")throw new Zt(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Xi(r.\u0275loadImpl()):ot(null)).pipe(Rs(()=>new Uc(o=>{let a=r.build();if(a.open(s.method,s.urlWithParams),s.withCredentials&&(a.withCredentials=!0),s.headers.forEach((g,y)=>a.setRequestHeader(g,y.join(","))),s.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!s.headers.has("Content-Type")){let g=s.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(s.responseType){let g=s.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let l=s.serializeBody(),h=null,c=()=>{if(h!==null)return h;let g=a.statusText||"OK",y=new Jn(a.getAllResponseHeaders()),x=V_(a)||s.url;return h=new nf({headers:y,status:a.status,statusText:g,url:x}),h},d=()=>{let{headers:g,status:y,statusText:x,url:T}=c(),A=null;y!==ad.NoContent&&(A=typeof a.response>"u"?a.responseText:a.response),y===0&&(y=A?ad.Ok:0);let S=y>=200&&y<300;if(s.responseType==="json"&&typeof A=="string"){let M=A;A=A.replace(G_,"");try{A=A!==""?JSON.parse(A):null}catch(B){A=M,S&&(S=!1,A={error:B,text:A})}}S?(o.next(new nd({body:A,headers:g,status:y,statusText:x,url:T||void 0})),o.complete()):o.error(new od({error:A,headers:g,status:y,statusText:x,url:T||void 0}))},p=g=>{let{url:y}=c(),x=new od({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:y||void 0});o.error(x)},u=!1,m=g=>{u||(o.next(c()),u=!0);let y={type:ca.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),s.responseType==="text"&&a.responseText&&(y.partialText=a.responseText),o.next(y)},f=g=>{let y={type:ca.UploadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),o.next(y)};return a.addEventListener("load",d),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),s.reportProgress&&(a.addEventListener("progress",m),l!==null&&a.upload&&a.upload.addEventListener("progress",f)),a.send(l),o.next({type:ca.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",d),a.removeEventListener("timeout",p),s.reportProgress&&(a.removeEventListener("progress",m),l!==null&&a.upload&&a.upload.removeEventListener("progress",f)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(Ve(id))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})(),zv=new pt(""),B_="XSRF-TOKEN",H_=new pt("",{providedIn:"root",factory:()=>B_}),W_="X-XSRF-TOKEN",U_=new pt("",{providedIn:"root",factory:()=>W_}),ld=class{},z_=(()=>{let e=class e{constructor(s,r,n){this.doc=s,this.platform=r,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let s=this.doc.cookie||"";return s!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jc(s,this.cookieName),this.lastCookieString=s),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(Ve(yt),Ve(Wr),Ve(H_))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})();function j_(t,e){let i=t.url.toLowerCase();if(!tt(zv)||t.method==="GET"||t.method==="HEAD"||i.startsWith("http://")||i.startsWith("https://"))return e(t);let s=tt(ld).getToken(),r=tt(U_);return s!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,s)})),e(t)}var jv=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(jv||{});function $_(t,e){return{\u0275kind:t,\u0275providers:e}}function hf(...t){let e=[af,Hv,Bv,{provide:Hl,useExisting:Bv},{provide:rd,useExisting:Hv},{provide:lf,useValue:j_,multi:!0},{provide:zv,useValue:!0},{provide:ld,useClass:z_}];for(let i of t)e.push(...i.\u0275providers);return qn(e)}var Wv=new pt("");function K_(){return $_(jv.LegacyInterceptors,[{provide:Wv,useFactory:N_},{provide:lf,useExisting:Wv,multi:!0}])}var $v=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=vi({type:e}),e.\u0275inj=mi({providers:[hf(K_())]});let t=e;return t})();var uf=class extends Iv{constructor(){super(...arguments),this.supportsDOMEvents=!0}},pf=class t extends uf{static makeCurrent(){Mv(new t)}onAndCancel(e,i,s){return e.addEventListener(i,s),()=>{e.removeEventListener(i,s)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=Z_();return i==null?null:Q_(i)}resetBaseElement(){Ul=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Jc(document.cookie,e)}},Ul=null;function Z_(){return Ul=Ul||document.querySelector("base"),Ul?Ul.getAttribute("href"):null}function Q_(t){return new URL(t,document.baseURI).pathname}var J_=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})(),ff=new pt(""),qv=(()=>{let e=class e{constructor(s,r){this._zone=r,this._eventNameToPlugin=new Map,s.forEach(n=>{n.manager=this}),this._plugins=s.slice().reverse()}addEventListener(s,r,n){return this._findPluginFor(r).addEventListener(s,r,n)}getZone(){return this._zone}_findPluginFor(s){let r=this._eventNameToPlugin.get(s);if(r)return r;if(r=this._plugins.find(o=>o.supports(s)),!r)throw new Zt(5101,!1);return this._eventNameToPlugin.set(s,r),r}};e.\u0275fac=function(r){return new(r||e)(Ve(ff),Ve(xt))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})(),hd=class{constructor(e){this._doc=e}},cf="ng-app-id",Zv=(()=>{let e=class e{constructor(s,r,n,o={}){this.doc=s,this.appId=r,this.nonce=n,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=td(o),this.resetHostNodes()}addStyles(s){for(let r of s)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(s){for(let r of s)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let s=this.styleNodesInDOM;s&&(s.forEach(r=>r.remove()),s.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(s){this.hostNodes.add(s);for(let r of this.getAllStyles())this.addStyleToHost(s,r)}removeHost(s){this.hostNodes.delete(s)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(s){for(let r of this.hostNodes)this.addStyleToHost(r,s)}onStyleRemoved(s){let r=this.styleRef;r.get(s)?.elements?.forEach(n=>n.remove()),r.delete(s)}collectServerRenderedStyles(){let s=this.doc.head?.querySelectorAll(`style[${cf}="${this.appId}"]`);if(s?.length){let r=new Map;return s.forEach(n=>{n.textContent!=null&&r.set(n.textContent,n)}),r}return null}changeUsageCount(s,r){let n=this.styleRef;if(n.has(s)){let o=n.get(s);return o.usage+=r,o.usage}return n.set(s,{usage:r,elements:[]}),r}getStyleElement(s,r){let n=this.styleNodesInDOM,o=n?.get(r);if(o?.parentNode===s)return n.delete(r),o.removeAttribute(cf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(cf,this.appId),s.appendChild(a),a}}addStyleToHost(s,r){let n=this.getStyleElement(s,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(n):o.set(r,{elements:[n],usage:1})}resetHostNodes(){let s=this.hostNodes;s.clear(),s.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(Ve(yt),Ve(Kc),Ve(Xp,8),Ve(Wr))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})(),df={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mf=/%COMP%/g,Qv="%COMP%",eT=`_nghost-${Qv}`,tT=`_ngcontent-${Qv}`,iT=!0,sT=new pt("",{providedIn:"root",factory:()=>iT});function rT(t){return tT.replace(mf,t)}function nT(t){return eT.replace(mf,t)}function Jv(t,e){return e.map(i=>i.replace(mf,t))}var cd=(()=>{let e=class e{constructor(s,r,n,o,a,l,h,c=null){this.eventManager=s,this.sharedStylesHost=r,this.appId=n,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=h,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=td(l),this.defaultRenderer=new zl(s,a,h,this.platformIsServer)}createRenderer(s,r){if(!s||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ol.ShadowDom&&(r=It(Xe({},r),{encapsulation:Ol.Emulated}));let n=this.getOrCreateRenderer(s,r);return n instanceof dd?n.applyToHost(s):n instanceof jl&&n.applyStyles(),n}getOrCreateRenderer(s,r){let n=this.rendererByCompId,o=n.get(r.id);if(!o){let a=this.doc,l=this.ngZone,h=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Ol.Emulated:o=new dd(h,c,r,this.appId,d,a,l,p);break;case Ol.ShadowDom:return new gf(h,c,s,r,a,l,this.nonce,p);default:o=new jl(h,c,r,d,a,l,p);break}n.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(Ve(qv),Ve(Zv),Ve(Kc),Ve(sT),Ve(yt),Ve(Wr),Ve(xt),Ve(Xp))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})(),zl=class{constructor(e,i,s,r){this.eventManager=e,this.doc=i,this.ngZone=s,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(df[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(Kv(e)?e.content:e).appendChild(i)}insertBefore(e,i,s){e&&(Kv(e)?e.content:e).insertBefore(i,s)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let s=typeof e=="string"?this.doc.querySelector(e):e;if(!s)throw new Zt(-5104,!1);return i||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,s,r){if(r){i=r+":"+i;let n=df[r];n?e.setAttributeNS(n,i,s):e.setAttribute(i,s)}else e.setAttribute(i,s)}removeAttribute(e,i,s){if(s){let r=df[s];r?e.removeAttributeNS(r,i):e.removeAttribute(`${s}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,s,r){r&(Ll.DashCase|Ll.Important)?e.style.setProperty(i,s,r&Ll.Important?"important":""):e.style[i]=s}removeStyle(e,i,s){s&Ll.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,s){e!=null&&(e[i]=s)}setValue(e,i){e.nodeValue=i}listen(e,i,s){if(typeof e=="string"&&(e=ha().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(s))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function Kv(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var gf=class extends zl{constructor(e,i,s,r,n,o,a,l){super(e,n,o,l),this.sharedStylesHost=i,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=Jv(r.id,r.styles);for(let c of h){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,s){return super.insertBefore(this.nodeOrShadowRoot(e),i,s)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jl=class extends zl{constructor(e,i,s,r,n,o,a,l){super(e,n,o,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=l?Jv(l,s.styles):s.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},dd=class extends jl{constructor(e,i,s,r,n,o,a,l){let h=r+"-"+s.id;super(e,i,s,n,o,a,l,h),this.contentAttr=rT(h),this.hostAttr=nT(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let s=super.createElement(e,i);return super.setAttribute(s,this.contentAttr,""),s}},oT=(()=>{let e=class e extends hd{constructor(s){super(s)}supports(s){return!0}addEventListener(s,r,n){return s.addEventListener(r,n,!1),()=>this.removeEventListener(s,r,n)}removeEventListener(s,r,n){return s.removeEventListener(r,n)}};e.\u0275fac=function(r){return new(r||e)(Ve(yt))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})(),Xv=["alt","control","meta","shift"],aT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lT={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},hT=(()=>{let e=class e extends hd{constructor(s){super(s)}supports(s){return e.parseEventName(s)!=null}addEventListener(s,r,n){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ha().onAndCancel(s,o.domEventName,a))}static parseEventName(s){let r=s.toLowerCase().split("."),n=r.shift();if(r.length===0||!(n==="keydown"||n==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),Xv.forEach(c=>{let d=r.indexOf(c);d>-1&&(r.splice(d,1),a+=c+".")}),a+=o,r.length!=0||o.length===0)return null;let h={};return h.domEventName=n,h.fullKey=a,h}static matchEventFullKeyCode(s,r){let n=aT[s.key]||s.key,o="";return r.indexOf("code.")>-1&&(n=s.code,o="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),Xv.forEach(a=>{if(a!==n){let l=lT[a];l(s)&&(o+=a+".")}}),o+=n,o===r)}static eventCallback(s,r,n){return o=>{e.matchEventFullKeyCode(o,s)&&n.runGuarded(()=>r(o))}}static _normalizeKey(s){return s==="esc"?"escape":s}};e.\u0275fac=function(r){return new(r||e)(Ve(yt))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})();function eC(t,e){return Pv(Xe({rootComponent:t},cT(e)))}function cT(t){return{appProviders:[...gT,...t?.providers??[]],platformProviders:fT}}function dT(){pf.makeCurrent()}function uT(){return new Kp}function pT(){return _v(document),document}var fT=[{provide:Wr,useValue:Ov},{provide:Tv,useValue:dT,multi:!0},{provide:yt,useFactory:pT,deps:[]}];var gT=[{provide:bv,useValue:"root"},{provide:Kp,useFactory:uT,deps:[]},{provide:ff,useClass:oT,multi:!0,deps:[yt,xt,Wr]},{provide:ff,useClass:hT,multi:!0,deps:[yt]},cd,Zv,qv,{provide:Yc,useExisting:cd},{provide:id,useClass:J_,deps:[]},[]];var tC=(()=>{let e=class e{constructor(s){this._doc=s}getTitle(){return this._doc.title}setTitle(s){this._doc.title=s||""}};e.\u0275fac=function(r){return new(r||e)(Ve(yt))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ft="primary",oh=Symbol("RouteTitle"),xf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function ga(t){return new xf(t)}function vT(t,e,i){let s=i.path.split("/");if(s.length>t.length||i.pathMatch==="full"&&(e.hasChildren()||s.length<t.length))return null;let r={};for(let n=0;n<s.length;n++){let o=s[n],a=t[n];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,s.length),posParams:r}}function CT(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Er(t[i],e[i]))return!1;return!0}function Er(t,e){let i=t?Sf(t):void 0,s=e?Sf(e):void 0;if(!i||!s||i.length!=s.length)return!1;let r;for(let n=0;n<i.length;n++)if(r=i[n],!aC(t[r],e[r]))return!1;return!0}function Sf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function aC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let i=[...t].sort(),s=[...e].sort();return i.every((r,n)=>s[n]===r)}else return t===e}function lC(t){return t.length>0?t[t.length-1]:null}function Cn(t){return Gp(t)?t:Qc(t)?Xi(Promise.resolve(t)):ot(t)}var yT={exact:cC,subset:dC},hC={exact:wT,subset:xT,ignored:()=>!0};function iC(t,e,i){return yT[i.paths](t.root,e.root,i.matrixParams)&&hC[i.queryParams](t.queryParams,e.queryParams)&&!(i.fragment==="exact"&&t.fragment!==e.fragment)}function wT(t,e){return Er(t,e)}function cC(t,e,i){if(!to(t.segments,e.segments)||!fd(t.segments,e.segments,i)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let s in e.children)if(!t.children[s]||!cC(t.children[s],e.children[s],i))return!1;return!0}function xT(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(i=>aC(t[i],e[i]))}function dC(t,e,i){return uC(t,e,e.segments,i)}function uC(t,e,i,s){if(t.segments.length>i.length){let r=t.segments.slice(0,i.length);return!(!to(r,i)||e.hasChildren()||!fd(r,i,s))}else if(t.segments.length===i.length){if(!to(t.segments,i)||!fd(t.segments,i,s))return!1;for(let r in e.children)if(!t.children[r]||!dC(t.children[r],e.children[r],s))return!1;return!0}else{let r=i.slice(0,t.segments.length),n=i.slice(t.segments.length);return!to(t.segments,r)||!fd(t.segments,r,s)||!t.children[ft]?!1:uC(t.children[ft],e,n,s)}}function fd(t,e,i){return e.every((s,r)=>hC[i](t[r].parameters,s.parameters))}var mn=class{constructor(e=new Dt([],{}),i={},s=null){this.root=e,this.queryParams=i,this.fragment=s}get queryParamMap(){return this._queryParamMap??=ga(this.queryParams),this._queryParamMap}toString(){return bT.serialize(this)}},Dt=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(s=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gd(this)}},eo=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=ga(this.parameters),this._parameterMap}toString(){return fC(this)}};function ST(t,e){return to(t,e)&&t.every((i,s)=>Er(i.parameters,e[s].parameters))}function to(t,e){return t.length!==e.length?!1:t.every((i,s)=>i.path===e[s].path)}function ET(t,e){let i=[];return Object.entries(t.children).forEach(([s,r])=>{s===ft&&(i=i.concat(e(r,s)))}),Object.entries(t.children).forEach(([s,r])=>{s!==ft&&(i=i.concat(e(r,s)))}),i}var Yf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:()=>new vd,providedIn:"root"});let t=e;return t})(),vd=class{parse(e){let i=new bf(e);return new mn(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${$l(e.root,!0)}`,s=AT(e.queryParams),r=typeof e.fragment=="string"?`#${_T(e.fragment)}`:"";return`${i}${s}${r}`}},bT=new vd;function gd(t){return t.segments.map(e=>fC(e)).join("/")}function $l(t,e){if(!t.hasChildren())return gd(t);if(e){let i=t.children[ft]?$l(t.children[ft],!1):"",s=[];return Object.entries(t.children).forEach(([r,n])=>{r!==ft&&s.push(`${r}:${$l(n,!1)}`)}),s.length>0?`${i}(${s.join("//")})`:i}else{let i=ET(t,(s,r)=>r===ft?[$l(t.children[ft],!1)]:[`${r}:${$l(s,!1)}`]);return Object.keys(t.children).length===1&&t.children[ft]!=null?`${gd(t)}/${i[0]}`:`${gd(t)}/(${i.join("//")})`}}function pC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ud(t){return pC(t).replace(/%3B/gi,";")}function _T(t){return encodeURI(t)}function Ef(t){return pC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function md(t){return decodeURIComponent(t)}function sC(t){return md(t.replace(/\+/g,"%20"))}function fC(t){return`${Ef(t.path)}${TT(t.parameters)}`}function TT(t){return Object.entries(t).map(([e,i])=>`;${Ef(e)}=${Ef(i)}`).join("")}function AT(t){let e=Object.entries(t).map(([i,s])=>Array.isArray(s)?s.map(r=>`${ud(i)}=${ud(r)}`).join("&"):`${ud(i)}=${ud(s)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var RT=/^[^\/()?;#]+/;function vf(t){let e=t.match(RT);return e?e[0]:""}var DT=/^[^\/()?;=#]+/;function FT(t){let e=t.match(DT);return e?e[0]:""}var PT=/^[^=?&#]+/;function MT(t){let e=t.match(PT);return e?e[0]:""}var IT=/^[^&#]+/;function OT(t){let e=t.match(IT);return e?e[0]:""}var bf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dt([],{}):new Dt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(s[ft]=new Dt(e,i)),s}parseSegment(){let e=vf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Zt(4009,!1);return this.capture(e),new eo(md(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=FT(this.remaining);if(!i)return;this.capture(i);let s="";if(this.consumeOptional("=")){let r=vf(this.remaining);r&&(s=r,this.capture(s))}e[md(i)]=md(s)}parseQueryParam(e){let i=MT(this.remaining);if(!i)return;this.capture(i);let s="";if(this.consumeOptional("=")){let o=OT(this.remaining);o&&(s=o,this.capture(s))}let r=sC(i),n=sC(s);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(n)}else e[r]=n}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let s=vf(this.remaining),r=this.remaining[s.length];if(r!=="/"&&r!==")"&&r!==";")throw new Zt(4010,!1);let n;s.indexOf(":")>-1?(n=s.slice(0,s.indexOf(":")),this.capture(n),this.capture(":")):e&&(n=ft);let o=this.parseChildren();i[n]=Object.keys(o).length===1?o[ft]:new Dt([],o),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Zt(4011,!1)}};function gC(t){return t.segments.length>0?new Dt([],{[ft]:t}):t}function mC(t){let e={};for(let[s,r]of Object.entries(t.children)){let n=mC(r);if(s===ft&&n.segments.length===0&&n.hasChildren())for(let[o,a]of Object.entries(n.children))e[o]=a;else(n.segments.length>0||n.hasChildren())&&(e[s]=n)}let i=new Dt(t.segments,e);return LT(i)}function LT(t){if(t.numberOfChildren===1&&t.children[ft]){let e=t.children[ft];return new Dt(t.segments.concat(e.segments),e.children)}return t}function ma(t){return t instanceof mn}function kT(t,e,i=null,s=null){let r=vC(t);return CC(r,e,i,s)}function vC(t){let e;function i(n){let o={};for(let l of n.children){let h=i(l);o[l.outlet]=h}let a=new Dt(n.url,o);return n===t&&(e=a),a}let s=i(t.root),r=gC(s);return e??r}function CC(t,e,i,s){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Cf(r,r,r,i,s);let n=NT(e);if(n.toRoot())return Cf(r,r,new Dt([],{}),i,s);let o=GT(n,r,t),a=o.processChildren?Yl(o.segmentGroup,o.index,n.commands):wC(o.segmentGroup,o.index,n.commands);return Cf(r,o.segmentGroup,a,i,s)}function Cd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ql(t){return typeof t=="object"&&t!=null&&t.outlets}function Cf(t,e,i,s,r){let n={};s&&Object.entries(s).forEach(([l,h])=>{n[l]=Array.isArray(h)?h.map(c=>`${c}`):`${h}`});let o;t===e?o=i:o=yC(t,e,i);let a=gC(mC(o));return new mn(a,n,r)}function yC(t,e,i){let s={};return Object.entries(t.children).forEach(([r,n])=>{n===e?s[r]=i:s[r]=yC(n,e,i)}),new Dt(t.segments,s)}var yd=class{constructor(e,i,s){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=s,e&&s.length>0&&Cd(s[0]))throw new Zt(4003,!1);let r=s.find(Ql);if(r&&r!==lC(s))throw new Zt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NT(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new yd(!0,0,t);let e=0,i=!1,s=t.reduce((r,n,o)=>{if(typeof n=="object"&&n!=null){if(n.outlets){let a={};return Object.entries(n.outlets).forEach(([l,h])=>{a[l]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:a}]}if(n.segmentPath)return[...r,n.segmentPath]}return typeof n!="string"?[...r,n]:o===0?(n.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,n]},[]);return new yd(i,e,s)}var pa=class{constructor(e,i,s){this.segmentGroup=e,this.processChildren=i,this.index=s}};function GT(t,e,i){if(t.isAbsolute)return new pa(e,!0,0);if(!i)return new pa(e,!1,NaN);if(i.parent===null)return new pa(i,!0,0);let s=Cd(t.commands[0])?0:1,r=i.segments.length-1+s;return VT(i,r,t.numberOfDoubleDots)}function VT(t,e,i){let s=t,r=e,n=i;for(;n>r;){if(n-=r,s=s.parent,!s)throw new Zt(4005,!1);r=s.segments.length}return new pa(s,!1,r-n)}function BT(t){return Ql(t[0])?t[0].outlets:{[ft]:t}}function wC(t,e,i){if(t??=new Dt([],{}),t.segments.length===0&&t.hasChildren())return Yl(t,e,i);let s=HT(t,e,i),r=i.slice(s.commandIndex);if(s.match&&s.pathIndex<t.segments.length){let n=new Dt(t.segments.slice(0,s.pathIndex),{});return n.children[ft]=new Dt(t.segments.slice(s.pathIndex),t.children),Yl(n,0,r)}else return s.match&&r.length===0?new Dt(t.segments,{}):s.match&&!t.hasChildren()?_f(t,e,i):s.match?Yl(t,0,r):_f(t,e,i)}function Yl(t,e,i){if(i.length===0)return new Dt(t.segments,{});{let s=BT(i),r={};if(Object.keys(s).some(n=>n!==ft)&&t.children[ft]&&t.numberOfChildren===1&&t.children[ft].segments.length===0){let n=Yl(t.children[ft],e,i);return new Dt(t.segments,n.children)}return Object.entries(s).forEach(([n,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[n]=wC(t.children[n],e,o))}),Object.entries(t.children).forEach(([n,o])=>{s[n]===void 0&&(r[n]=o)}),new Dt(t.segments,r)}}function HT(t,e,i){let s=0,r=e,n={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(s>=i.length)return n;let o=t.segments[r],a=i[s];if(Ql(a))break;let l=`${a}`,h=s<i.length-1?i[s+1]:null;if(r>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!nC(l,h,o))return n;s+=2}else{if(!nC(l,{},o))return n;s++}r++}return{match:!0,pathIndex:r,commandIndex:s}}function _f(t,e,i){let s=t.segments.slice(0,e),r=0;for(;r<i.length;){let n=i[r];if(Ql(n)){let l=WT(n.outlets);return new Dt(s,l)}if(r===0&&Cd(i[0])){let l=t.segments[e];s.push(new eo(l.path,rC(i[0]))),r++;continue}let o=Ql(n)?n.outlets[ft]:`${n}`,a=r<i.length-1?i[r+1]:null;o&&a&&Cd(a)?(s.push(new eo(o,rC(a))),r+=2):(s.push(new eo(o,{})),r++)}return new Dt(s,{})}function WT(t){let e={};return Object.entries(t).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(e[i]=_f(new Dt([],{}),0,s))}),e}function rC(t){let e={};return Object.entries(t).forEach(([i,s])=>e[i]=`${s}`),e}function nC(t,e,i){return t==i.path&&Er(e,i.parameters)}var ql="imperative",Oi=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Oi||{}),js=class{constructor(e,i){this.id=e,this.url=i}},Jl=class extends js{constructor(e,i,s="imperative",r=null){super(e,i),this.type=Oi.NavigationStart,this.navigationTrigger=s,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},io=class extends js{constructor(e,i,s){super(e,i),this.urlAfterRedirects=s,this.type=Oi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Os=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Os||{}),Tf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Tf||{}),vn=class extends js{constructor(e,i,s,r){super(e,i),this.reason=s,this.code=r,this.type=Oi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},so=class extends js{constructor(e,i,s,r){super(e,i),this.reason=s,this.code=r,this.type=Oi.NavigationSkipped}},eh=class extends js{constructor(e,i,s,r){super(e,i),this.error=s,this.target=r,this.type=Oi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wd=class extends js{constructor(e,i,s,r){super(e,i),this.urlAfterRedirects=s,this.state=r,this.type=Oi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Af=class extends js{constructor(e,i,s,r){super(e,i),this.urlAfterRedirects=s,this.state=r,this.type=Oi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rf=class extends js{constructor(e,i,s,r,n){super(e,i),this.urlAfterRedirects=s,this.state=r,this.shouldActivate=n,this.type=Oi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Df=class extends js{constructor(e,i,s,r){super(e,i),this.urlAfterRedirects=s,this.state=r,this.type=Oi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ff=class extends js{constructor(e,i,s,r){super(e,i),this.urlAfterRedirects=s,this.state=r,this.type=Oi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pf=class{constructor(e){this.route=e,this.type=Oi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mf=class{constructor(e){this.route=e,this.type=Oi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},If=class{constructor(e){this.snapshot=e,this.type=Oi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Of=class{constructor(e){this.snapshot=e,this.type=Oi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lf=class{constructor(e){this.snapshot=e,this.type=Oi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kf=class{constructor(e){this.snapshot=e,this.type=Oi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var th=class{},ih=class{constructor(e){this.url=e}};var Nf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Td,this.attachRef=null}},Td=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(s,r){let n=this.getOrCreateContext(s);n.outlet=r,this.contexts.set(s,n)}onChildOutletDestroyed(s){let r=this.getContext(s);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let s=this.contexts;return this.contexts=new Map,s}onOutletReAttached(s){this.contexts=s}getOrCreateContext(s){let r=this.getContext(s);return r||(r=new Nf,this.contexts.set(s,r)),r}getContext(s){return this.contexts.get(s)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=Gf(e,this._root);return i?i.children.map(s=>s.value):[]}firstChild(e){let i=Gf(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=Vf(e,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Vf(e,this._root).map(i=>i.value)}};function Gf(t,e){if(t===e.value)return e;for(let i of e.children){let s=Gf(t,i);if(s)return s}return null}function Vf(t,e){if(t===e.value)return[e];for(let i of e.children){let s=Vf(t,i);if(s.length)return s.unshift(e),s}return[]}var Is=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function ua(t){let e={};return t&&t.children.forEach(i=>e[i.value.outlet]=i),e}var Sd=class extends xd{constructor(e,i){super(e),this.snapshot=i,Zf(this,e)}toString(){return this.snapshot.toString()}};function xC(t){let e=UT(t),i=new hs([new eo("",{})]),s=new hs({}),r=new hs({}),n=new hs({}),o=new hs(""),a=new va(i,s,n,o,r,ft,t,e.root);return a.snapshot=e.root,new Sd(new Is(a,[]),e)}function UT(t){let e={},i={},s={},r="",n=new sh([],e,s,r,i,ft,t,null,{});return new Ed("",new Is(n,[]))}var va=class{constructor(e,i,s,r,n,o,a,l){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=s,this.fragmentSubject=r,this.dataSubject=n,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(wt(h=>h[oh]))??ot(void 0),this.url=e,this.params=i,this.queryParams=s,this.fragment=r,this.data=n}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(wt(e=>ga(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(wt(e=>ga(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qf(t,e,i="emptyOnly"){let s,{routeConfig:r}=t;return e!==null&&(i==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?s={params:Xe(Xe({},e.params),t.params),data:Xe(Xe({},e.data),t.data),resolve:Xe(Xe(Xe(Xe({},t.data),e.data),r?.data),t._resolvedData)}:s={params:Xe({},t.params),data:Xe({},t.data),resolve:Xe(Xe({},t.data),t._resolvedData??{})},r&&EC(r)&&(s.resolve[oh]=r.title),s}var sh=class{get title(){return this.data?.[oh]}constructor(e,i,s,r,n,o,a,l,h){this.url=e,this.params=i,this.queryParams=s,this.fragment=r,this.data=n,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ga(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ga(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(s=>s.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},Ed=class extends xd{constructor(e,i){super(i),this.url=e,Zf(this,i)}toString(){return SC(this._root)}};function Zf(t,e){e.value._routerState=t,e.children.forEach(i=>Zf(t,i))}function SC(t){let e=t.children.length>0?` { ${t.children.map(SC).join(", ")} } `:"";return`${t.value}${e}`}function yf(t){if(t.snapshot){let e=t.snapshot,i=t._futureSnapshot;t.snapshot=i,Er(e.queryParams,i.queryParams)||t.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&t.fragmentSubject.next(i.fragment),Er(e.params,i.params)||t.paramsSubject.next(i.params),CT(e.url,i.url)||t.urlSubject.next(i.url),Er(e.data,i.data)||t.dataSubject.next(i.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Bf(t,e){let i=Er(t.params,e.params)&&ST(t.url,e.url),s=!t.parent!=!e.parent;return i&&!s&&(!t.parent||Bf(t.parent,e.parent))}function EC(t){return typeof t.title=="string"||t.title===null}var zT=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ft,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=tt(Td),this.location=tt(un),this.changeDetector=tt(Qn),this.environmentInjector=tt(sa),this.inputBinder=tt(Qf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(s){if(s.name){let{firstChange:r,previousValue:n}=s.name;if(r)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(s){return this.parentContexts.getContext(s)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let s=this.parentContexts.getContext(this.name);s?.route&&(s.attachRef?this.attach(s.attachRef,s.route):this.activateWith(s.route,s.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Zt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Zt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Zt(4012,!1);this.location.detach();let s=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(s.instance),s}attach(s,r){this.activated=s,this._activatedRoute=r,this.location.insert(s.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(s.instance)}deactivate(){if(this.activated){let s=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(s)}}activateWith(s,r){if(this.isActivated)throw new Zt(4013,!1);this._activatedRoute=s;let n=this.location,a=s.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,h=new Hf(s,l,n.injector);this.activated=n.createComponent(a,{index:n.length,injector:h,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ri({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ds]});let t=e;return t})(),Hf=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,i,s){this.route=e,this.childContexts=i,this.parent=s}get(e,i){return e===va?this.route:e===Td?this.childContexts:this.parent.get(e,i)}},Qf=new pt("");function jT(t,e,i){let s=rh(t,e._root,i?i._root:void 0);return new Sd(s,e)}function rh(t,e,i){if(i&&t.shouldReuseRoute(e.value,i.value.snapshot)){let s=i.value;s._futureSnapshot=e.value;let r=$T(t,e,i);return new Is(s,r)}else{if(t.shouldAttach(e.value)){let n=t.retrieve(e.value);if(n!==null){let o=n.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>rh(t,a)),o}}let s=KT(e.value),r=e.children.map(n=>rh(t,n));return new Is(s,r)}}function $T(t,e,i){return e.children.map(s=>{for(let r of i.children)if(t.shouldReuseRoute(s.value,r.value.snapshot))return rh(t,s,r);return rh(t,s)})}function KT(t){return new va(new hs(t.url),new hs(t.params),new hs(t.queryParams),new hs(t.fragment),new hs(t.data),t.outlet,t.component,t)}var bC="ngNavigationCancelingError";function _C(t,e){let{redirectTo:i,navigationBehaviorOptions:s}=ma(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=TC(!1,Os.Redirect);return r.url=i,r.navigationBehaviorOptions=s,r}function TC(t,e){let i=new Error(`NavigationCancelingError: ${t||""}`);return i[bC]=!0,i.cancellationCode=e,i}function XT(t){return AC(t)&&ma(t.url)}function AC(t){return!!t&&t[bC]}var YT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Yi({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ms],decls:1,vars:0,template:function(r,n){r&1&&Fs(0,"router-outlet")},dependencies:[zT],encapsulation:2});let t=e;return t})();function qT(t,e){return t.providers&&!t._injector&&(t._injector=Dv(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Jf(t){let e=t.children&&t.children.map(Jf),i=e?It(Xe({},t),{children:e}):Xe({},t);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==ft&&(i.component=YT),i}function br(t){return t.outlet||ft}function ZT(t,e){let i=t.filter(s=>br(s)===e);return i.push(...t.filter(s=>br(s)!==e)),i}function ah(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var QT=(t,e,i,s)=>wt(r=>(new Wf(e,r.targetRouterState,r.currentRouterState,i,s).activate(t),r)),Wf=class{constructor(e,i,s,r,n){this.routeReuseStrategy=e,this.futureState=i,this.currState=s,this.forwardEvent=r,this.inputBindingEnabled=n}activate(e){let i=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,s,e),yf(this.futureState.root),this.activateChildRoutes(i,s,e)}deactivateChildRoutes(e,i,s){let r=ua(i);e.children.forEach(n=>{let o=n.value.outlet;this.deactivateRoutes(n,r[o],s),delete r[o]}),Object.values(r).forEach(n=>{this.deactivateRouteAndItsChildren(n,s)})}deactivateRoutes(e,i,s){let r=e.value,n=i?i.value:null;if(r===n)if(r.component){let o=s.getContext(r.outlet);o&&this.deactivateChildRoutes(e,i,o.children)}else this.deactivateChildRoutes(e,i,s);else n&&this.deactivateRouteAndItsChildren(i,s)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let s=i.getContext(e.value.outlet),r=s&&e.value.component?s.children:i,n=ua(e);for(let o of Object.values(n))this.deactivateRouteAndItsChildren(o,r);if(s&&s.outlet){let o=s.outlet.detach(),a=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let s=i.getContext(e.value.outlet),r=s&&e.value.component?s.children:i,n=ua(e);for(let o of Object.values(n))this.deactivateRouteAndItsChildren(o,r);s&&(s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated()),s.attachRef=null,s.route=null)}activateChildRoutes(e,i,s){let r=ua(i);e.children.forEach(n=>{this.activateRoutes(n,r[n.value.outlet],s),this.forwardEvent(new kf(n.value.snapshot))}),e.children.length&&this.forwardEvent(new Of(e.value.snapshot))}activateRoutes(e,i,s){let r=e.value,n=i?i.value:null;if(yf(r),r===n)if(r.component){let o=s.getOrCreateContext(r.outlet);this.activateChildRoutes(e,i,o.children)}else this.activateChildRoutes(e,i,s);else if(r.component){let o=s.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),yf(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ah(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,s)}},bd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fa=class{constructor(e,i){this.component=e,this.route=i}};function JT(t,e,i){let s=t._root,r=e?e._root:null;return Kl(s,r,i,[s.value])}function e1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ya(t,e){let i=Symbol(),s=e.get(t,i);return s===i?typeof t=="function"&&!Ev(t)?t:e.get(t):s}function Kl(t,e,i,s,r={canDeactivateChecks:[],canActivateChecks:[]}){let n=ua(e);return t.children.forEach(o=>{t1(o,n[o.value.outlet],i,s.concat([o.value]),r),delete n[o.value.outlet]}),Object.entries(n).forEach(([o,a])=>Zl(a,i.getContext(o),r)),r}function t1(t,e,i,s,r={canDeactivateChecks:[],canActivateChecks:[]}){let n=t.value,o=e?e.value:null,a=i?i.getContext(t.value.outlet):null;if(o&&n.routeConfig===o.routeConfig){let l=i1(o,n,n.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new bd(s)):(n.data=o.data,n._resolvedData=o._resolvedData),n.component?Kl(t,e,a?a.children:null,s,r):Kl(t,e,i,s,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new fa(a.outlet.component,o))}else o&&Zl(e,a,r),r.canActivateChecks.push(new bd(s)),n.component?Kl(t,null,a?a.children:null,s,r):Kl(t,null,i,s,r);return r}function i1(t,e,i){if(typeof i=="function")return i(t,e);switch(i){case"pathParamsChange":return!to(t.url,e.url);case"pathParamsOrQueryParamsChange":return!to(t.url,e.url)||!Er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bf(t,e)||!Er(t.queryParams,e.queryParams);case"paramsChange":default:return!Bf(t,e)}}function Zl(t,e,i){let s=ua(t),r=t.value;Object.entries(s).forEach(([n,o])=>{r.component?e?Zl(o,e.children.getContext(n),i):Zl(o,null,i):Zl(o,e,i)}),r.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new fa(e.outlet.component,r)):i.canDeactivateChecks.push(new fa(null,r)):i.canDeactivateChecks.push(new fa(null,r))}function lh(t){return typeof t=="function"}function s1(t){return typeof t=="boolean"}function r1(t){return t&&lh(t.canLoad)}function n1(t){return t&&lh(t.canActivate)}function o1(t){return t&&lh(t.canActivateChild)}function a1(t){return t&&lh(t.canDeactivate)}function l1(t){return t&&lh(t.canMatch)}function RC(t){return t instanceof mv||t?.name==="EmptyError"}var pd=Symbol("INITIAL_VALUE");function Ca(){return Rs(t=>Vp(t.map(e=>e.pipe(cs(1),Xn(pd)))).pipe(wt(e=>{for(let i of e)if(i!==!0){if(i===pd)return pd;if(i===!1||i instanceof mn)return i}return!0}),Ei(e=>e!==pd),cs(1)))}function h1(t,e){return Us(i=>{let{targetSnapshot:s,currentSnapshot:r,guards:{canActivateChecks:n,canDeactivateChecks:o}}=i;return o.length===0&&n.length===0?ot(It(Xe({},i),{guardsResult:!0})):c1(o,s,r,t).pipe(Us(a=>a&&s1(a)?d1(s,n,t,e):ot(a)),wt(a=>It(Xe({},i),{guardsResult:a})))})}function c1(t,e,i,s){return Xi(t).pipe(Us(r=>m1(r.component,r.route,i,e,s)),dn(r=>r!==!0,!0))}function d1(t,e,i,s){return Xi(e).pipe($n(r=>vv(p1(r.route.parent,s),u1(r.route,s),g1(t,r.path,i),f1(t,r.route,i))),dn(r=>r!==!0,!0))}function u1(t,e){return t!==null&&e&&e(new Lf(t)),ot(!0)}function p1(t,e){return t!==null&&e&&e(new If(t)),ot(!0)}function f1(t,e,i){let s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||s.length===0)return ot(!0);let r=s.map(n=>jn(()=>{let o=ah(e)??i,a=ya(n,o),l=n1(a)?a.canActivate(e,t):Hr(o,()=>a(e,t));return Cn(l).pipe(dn())}));return ot(r).pipe(Ca())}function g1(t,e,i){let s=e[e.length-1],n=e.slice(0,e.length-1).reverse().map(o=>e1(o)).filter(o=>o!==null).map(o=>jn(()=>{let a=o.guards.map(l=>{let h=ah(o.node)??i,c=ya(l,h),d=o1(c)?c.canActivateChild(s,t):Hr(h,()=>c(s,t));return Cn(d).pipe(dn())});return ot(a).pipe(Ca())}));return ot(n).pipe(Ca())}function m1(t,e,i,s,r){let n=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!n||n.length===0)return ot(!0);let o=n.map(a=>{let l=ah(e)??r,h=ya(a,l),c=a1(h)?h.canDeactivate(t,e,i,s):Hr(l,()=>h(t,e,i,s));return Cn(c).pipe(dn())});return ot(o).pipe(Ca())}function v1(t,e,i,s){let r=e.canLoad;if(r===void 0||r.length===0)return ot(!0);let n=r.map(o=>{let a=ya(o,t),l=r1(a)?a.canLoad(e,i):Hr(t,()=>a(e,i));return Cn(l)});return ot(n).pipe(Ca(),DC(s))}function DC(t){return gv(bi(e=>{if(ma(e))throw _C(t,e)}),wt(e=>e===!0))}function C1(t,e,i,s){let r=e.canMatch;if(!r||r.length===0)return ot(!0);let n=r.map(o=>{let a=ya(o,t),l=l1(a)?a.canMatch(e,i):Hr(t,()=>a(e,i));return Cn(l)});return ot(n).pipe(Ca(),DC(s))}var nh=class{constructor(e){this.segmentGroup=e||null}},_d=class extends Error{constructor(e){super(),this.urlTree=e}};function da(t){return Il(new nh(t))}function y1(t){return Il(new Zt(4e3,!1))}function w1(t){return Il(TC(!1,Os.GuardRejected))}var Uf=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let s=[],r=i.root;for(;;){if(s=s.concat(r.segments),r.numberOfChildren===0)return ot(s);if(r.numberOfChildren>1||!r.children[ft])return y1(e.redirectTo);r=r.children[ft]}}applyRedirectCommands(e,i,s){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,s);if(i.startsWith("/"))throw new _d(r);return r}applyRedirectCreateUrlTree(e,i,s,r){let n=this.createSegmentGroup(e,i.root,s,r);return new mn(n,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let s={};return Object.entries(e).forEach(([r,n])=>{if(typeof n=="string"&&n.startsWith(":")){let a=n.substring(1);s[r]=i[a]}else s[r]=n}),s}createSegmentGroup(e,i,s,r){let n=this.createSegments(e,i.segments,s,r),o={};return Object.entries(i.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,s,r)}),new Dt(n,o)}createSegments(e,i,s,r){return i.map(n=>n.path.startsWith(":")?this.findPosParam(e,n,r):this.findOrReturn(n,s))}findPosParam(e,i,s){let r=s[i.path.substring(1)];if(!r)throw new Zt(4001,!1);return r}findOrReturn(e,i){let s=0;for(let r of i){if(r.path===e.path)return i.splice(s),r;s++}return e}},zf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function x1(t,e,i,s,r){let n=eg(t,e,i);return n.matched?(s=qT(e,s),C1(s,e,i,r).pipe(wt(o=>o===!0?n:Xe({},zf)))):ot(n)}function eg(t,e,i){if(e.path==="**")return S1(i);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||i.length>0)?Xe({},zf):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(e.matcher||vT)(i,t,e);if(!r)return Xe({},zf);let n={};Object.entries(r.posParams??{}).forEach(([a,l])=>{n[a]=l.path});let o=r.consumed.length>0?Xe(Xe({},n),r.consumed[r.consumed.length-1].parameters):n;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function S1(t){return{matched:!0,parameters:t.length>0?lC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function oC(t,e,i,s){return i.length>0&&_1(t,i,s)?{segmentGroup:new Dt(e,b1(s,new Dt(i,t.children))),slicedSegments:[]}:i.length===0&&T1(t,i,s)?{segmentGroup:new Dt(t.segments,E1(t,i,s,t.children)),slicedSegments:i}:{segmentGroup:new Dt(t.segments,t.children),slicedSegments:i}}function E1(t,e,i,s){let r={};for(let n of i)if(Ad(t,e,n)&&!s[br(n)]){let o=new Dt([],{});r[br(n)]=o}return Xe(Xe({},s),r)}function b1(t,e){let i={};i[ft]=e;for(let s of t)if(s.path===""&&br(s)!==ft){let r=new Dt([],{});i[br(s)]=r}return i}function _1(t,e,i){return i.some(s=>Ad(t,e,s)&&br(s)!==ft)}function T1(t,e,i){return i.some(s=>Ad(t,e,s))}function Ad(t,e,i){return(t.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function A1(t,e,i,s){return br(t)!==s&&(s===ft||!Ad(e,i,t))?!1:eg(e,t,i).matched}function R1(t,e,i){return e.length===0&&!t.children[i]}var jf=class{};function D1(t,e,i,s,r,n,o="emptyOnly"){return new $f(t,e,i,s,r,o,n).recognize()}var F1=31,$f=class{constructor(e,i,s,r,n,o,a){this.injector=e,this.configLoader=i,this.rootComponentType=s,this.config=r,this.urlTree=n,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Uf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Zt(4002,`'${e.segmentGroup}'`)}recognize(){let e=oC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(wt(i=>{let s=new sh([],Object.freeze({}),Object.freeze(Xe({},this.urlTree.queryParams)),this.urlTree.fragment,{},ft,this.rootComponentType,null,{}),r=new Is(s,i),n=new Ed("",r),o=kT(s,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,n.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(n._root,null),{state:n,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ft).pipe(ia(s=>{if(s instanceof _d)return this.urlTree=s.urlTree,this.match(s.urlTree.root);throw s instanceof nh?this.noMatchError(s):s}))}inheritParamsAndData(e,i){let s=e.value,r=qf(s,i,this.paramsInheritanceStrategy);s.params=Object.freeze(r.params),s.data=Object.freeze(r.data),e.children.forEach(n=>this.inheritParamsAndData(n,s))}processSegmentGroup(e,i,s,r){return s.segments.length===0&&s.hasChildren()?this.processChildren(e,i,s):this.processSegment(e,i,s,s.segments,r,!0).pipe(wt(n=>n instanceof Is?[n]:[]))}processChildren(e,i,s){let r=[];for(let n of Object.keys(s.children))n==="primary"?r.unshift(n):r.push(n);return Xi(r).pipe($n(n=>{let o=s.children[n],a=ZT(i,n);return this.processSegmentGroup(e,a,o,n)}),xv((n,o)=>(n.push(...o),n)),Hp(null),wv(),Us(n=>{if(n===null)return da(s);let o=FC(n);return P1(o),ot(o)}))}processSegment(e,i,s,r,n,o){return Xi(i).pipe($n(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,s,r,n,o).pipe(ia(l=>{if(l instanceof nh)return ot(null);throw l}))),dn(a=>!!a),ia(a=>{if(RC(a))return R1(s,r,n)?ot(new jf):da(s);throw a}))}processSegmentAgainstRoute(e,i,s,r,n,o,a){return A1(s,r,n,o)?s.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,s,n,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,i,s,n,o):da(r):da(r)}expandSegmentAgainstRouteUsingRedirect(e,i,s,r,n,o){let{matched:a,consumedSegments:l,positionalParamSegments:h,remainingSegments:c}=eg(i,r,n);if(!a)return da(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>F1&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return this.applyRedirects.lineralizeSegments(r,d).pipe(Us(p=>this.processSegment(e,s,i,p.concat(c),o,!1)))}matchSegmentAgainstRoute(e,i,s,r,n){let o=x1(i,s,r,e,this.urlSerializer);return s.path==="**"&&(i.children={}),o.pipe(Rs(a=>a.matched?(e=s._injector??e,this.getChildConfig(e,s,r).pipe(Rs(({routes:l})=>{let h=s._loadedInjector??e,{consumedSegments:c,remainingSegments:d,parameters:p}=a,u=new sh(c,p,Object.freeze(Xe({},this.urlTree.queryParams)),this.urlTree.fragment,I1(s),br(s),s.component??s._loadedComponent??null,s,O1(s)),{segmentGroup:m,slicedSegments:f}=oC(i,c,d,l);if(f.length===0&&m.hasChildren())return this.processChildren(h,l,m).pipe(wt(y=>y===null?null:new Is(u,y)));if(l.length===0&&f.length===0)return ot(new Is(u,[]));let g=br(s)===n;return this.processSegment(h,l,m,f,g?ft:n,!0).pipe(wt(y=>new Is(u,y instanceof Is?[y]:[])))}))):da(i)))}getChildConfig(e,i,s){return i.children?ot({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?ot({routes:i._loadedRoutes,injector:i._loadedInjector}):v1(e,i,s,this.urlSerializer).pipe(Us(r=>r?this.configLoader.loadChildren(e,i).pipe(bi(n=>{i._loadedRoutes=n.routes,i._loadedInjector=n.injector})):w1(i))):ot({routes:[],injector:e})}};function P1(t){t.sort((e,i)=>e.value.outlet===ft?-1:i.value.outlet===ft?1:e.value.outlet.localeCompare(i.value.outlet))}function M1(t){let e=t.value.routeConfig;return e&&e.path===""}function FC(t){let e=[],i=new Set;for(let s of t){if(!M1(s)){e.push(s);continue}let r=e.find(n=>s.value.routeConfig===n.value.routeConfig);r!==void 0?(r.children.push(...s.children),i.add(r)):e.push(s)}for(let s of i){let r=FC(s.children);e.push(new Is(s.value,r))}return e.filter(s=>!i.has(s))}function I1(t){return t.data||{}}function O1(t){return t.resolve||{}}function L1(t,e,i,s,r,n){return Us(o=>D1(t,e,i,s,o.extractedUrl,r,n).pipe(wt(({state:a,tree:l})=>It(Xe({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function k1(t,e){return Us(i=>{let{targetSnapshot:s,guards:{canActivateChecks:r}}=i;if(!r.length)return ot(i);let n=new Set(r.map(l=>l.route)),o=new Set;for(let l of n)if(!o.has(l))for(let h of PC(l))o.add(h);let a=0;return Xi(o).pipe($n(l=>n.has(l)?N1(l,s,t,e):(l.data=qf(l,l.parent,t).resolve,ot(void 0))),bi(()=>a++),Up(1),Us(l=>a===o.size?ot(i):cn))})}function PC(t){let e=t.children.map(i=>PC(i)).flat();return[t,...e]}function N1(t,e,i,s){let r=t.routeConfig,n=t._resolve;return r?.title!==void 0&&!EC(r)&&(n[oh]=r.title),G1(n,t,e,s).pipe(wt(o=>(t._resolvedData=o,t.data=qf(t,t.parent,i).resolve,null)))}function G1(t,e,i,s){let r=Sf(t);if(r.length===0)return ot({});let n={};return Xi(r).pipe(Us(o=>V1(t[o],e,i,s).pipe(dn(),bi(a=>{n[o]=a}))),Up(1),yv(n),ia(o=>RC(o)?cn:Il(o)))}function V1(t,e,i,s){let r=ah(e)??s,n=ya(t,r),o=n.resolve?n.resolve(e,i):Hr(r,()=>n(e,i));return Cn(o)}function wf(t){return Rs(e=>{let i=t(e);return i?Xi(i).pipe(wt(()=>e)):ot(e)})}var MC=(()=>{let e=class e{buildTitle(s){let r,n=s.root;for(;n!==void 0;)r=this.getResolvedTitleForRoute(n)??r,n=n.children.find(o=>o.outlet===ft);return r}getResolvedTitleForRoute(s){return s.data[oh]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:()=>tt(B1),providedIn:"root"});let t=e;return t})(),B1=(()=>{let e=class e extends MC{constructor(s){super(),this.title=s}updateTitle(s){let r=this.buildTitle(s);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(Ve(tC))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tg=new pt("",{providedIn:"root",factory:()=>({})}),ig=new pt(""),H1=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=tt(Jp)}loadComponent(s){if(this.componentLoaders.get(s))return this.componentLoaders.get(s);if(s._loadedComponent)return ot(s._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(s);let r=Cn(s.loadComponent()).pipe(wt(IC),bi(o=>{this.onLoadEndListener&&this.onLoadEndListener(s),s._loadedComponent=o}),Kn(()=>{this.componentLoaders.delete(s)})),n=new Np(r,()=>new Ot).pipe(kp());return this.componentLoaders.set(s,n),n}loadChildren(s,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=W1(r,this.compiler,s,this.onLoadEndListener).pipe(Kn(()=>{this.childrenLoaders.delete(r)})),a=new Np(o,()=>new Ot).pipe(kp());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function W1(t,e,i,s){return Cn(t.loadChildren()).pipe(wt(IC),Us(r=>r instanceof Rv||Array.isArray(r)?ot(r):Xi(e.compileModuleAsync(r))),wt(r=>{s&&s(t);let n,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(n=r.create(i).injector,o=n.get(ig,[],{optional:!0,self:!0}).flat()),{routes:o.map(Jf),injector:n}}))}function U1(t){return t&&typeof t=="object"&&"default"in t}function IC(t){return U1(t)?t.default:t}var sg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:()=>tt(z1),providedIn:"root"});let t=e;return t})(),z1=(()=>{let e=class e{shouldProcessUrl(s){return!0}extract(s){return s}merge(s,r){return s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),j1=new pt("");var $1=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ot,this.transitionAbortSubject=new Ot,this.configLoader=tt(H1),this.environmentInjector=tt(sa),this.urlSerializer=tt(Yf),this.rootContexts=tt(Td),this.location=tt(fn),this.inputBindingEnabled=tt(Qf,{optional:!0})!==null,this.titleStrategy=tt(MC),this.options=tt(tg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=tt(sg),this.createViewTransition=tt(j1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null;let s=n=>this.events.next(new Pf(n)),r=n=>this.events.next(new Mf(n));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=s}complete(){this.transitions?.complete()}handleNavigationRequest(s){let r=++this.navigationId;this.transitions?.next(It(Xe(Xe({},this.transitions.value),s),{id:r}))}setupNavigations(s,r,n){return this.transitions=new hs({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ql,restoredState:null,currentSnapshot:n.snapshot,targetSnapshot:null,currentRouterState:n,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ei(o=>o.id!==0),wt(o=>It(Xe({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Rs(o=>{let a=!1,l=!1;return ot(o).pipe(Rs(h=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Os.SupersededByNewNavigation),cn;this.currentTransition=o,this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?It(Xe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!s.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=h.extras.onSameUrlNavigation??s.onSameUrlNavigation;if(!c&&d!=="reload"){let p="";return this.events.next(new so(h.id,this.urlSerializer.serialize(h.rawUrl),p,Tf.IgnoredSameUrlNavigation)),h.resolve(null),cn}if(this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return ot(h).pipe(Rs(p=>{let u=this.transitions?.getValue();return this.events.next(new Jl(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),u!==this.transitions?.getValue()?cn:Promise.resolve(p)}),L1(this.environmentInjector,this.configLoader,this.rootComponentType,s.config,this.urlSerializer,this.paramsInheritanceStrategy),bi(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=It(Xe({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let u=new wd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(u)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(h.currentRawUrl)){let{id:p,extractedUrl:u,source:m,restoredState:f,extras:g}=h,y=new Jl(p,this.urlSerializer.serialize(u),m,f);this.events.next(y);let x=xC(this.rootComponentType).snapshot;return this.currentTransition=o=It(Xe({},h),{targetSnapshot:x,urlAfterRedirects:u,extras:It(Xe({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,ot(o)}else{let p="";return this.events.next(new so(h.id,this.urlSerializer.serialize(h.extractedUrl),p,Tf.IgnoredByUrlHandlingStrategy)),h.resolve(null),cn}}),bi(h=>{let c=new Af(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(c)}),wt(h=>(this.currentTransition=o=It(Xe({},h),{guards:JT(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),o)),h1(this.environmentInjector,h=>this.events.next(h)),bi(h=>{if(o.guardsResult=h.guardsResult,ma(h.guardsResult))throw _C(this.urlSerializer,h.guardsResult);let c=new Rf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(c)}),Ei(h=>h.guardsResult?!0:(this.cancelNavigationTransition(h,"",Os.GuardRejected),!1)),wf(h=>{if(h.guards.canActivateChecks.length)return ot(h).pipe(bi(c=>{let d=new Df(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Rs(c=>{let d=!1;return ot(c).pipe(k1(this.paramsInheritanceStrategy,this.environmentInjector),bi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Os.NoDataFromResolver)}}))}),bi(c=>{let d=new Ff(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),wf(h=>{let c=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(bi(u=>{d.component=u}),wt(()=>{})));for(let u of d.children)p.push(...c(u));return p};return Vp(c(h.targetSnapshot.root)).pipe(Hp(null),cs(1))}),wf(()=>this.afterPreactivation()),Rs(()=>{let{currentSnapshot:h,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,h.root,c.root);return d?Xi(d).pipe(wt(()=>o)):ot(o)}),wt(h=>{let c=jT(s.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return this.currentTransition=o=It(Xe({},h),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),bi(()=>{this.events.next(new th)}),QT(this.rootContexts,s.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),cs(1),bi({next:h=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new io(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects))),this.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{a=!0}}),Yn(this.transitionAbortSubject.pipe(bi(h=>{throw h}))),Kn(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",Os.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ia(h=>{if(l=!0,AC(h))this.events.next(new vn(o.id,this.urlSerializer.serialize(o.extractedUrl),h.message,h.cancellationCode)),XT(h)?this.events.next(new ih(h.url)):o.resolve(!1);else{this.events.next(new eh(o.id,this.urlSerializer.serialize(o.extractedUrl),h,o.targetSnapshot??void 0));try{o.resolve(s.errorHandler(h))}catch(c){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(c)}}return cn}))}))}cancelNavigationTransition(s,r,n){let o=new vn(s.id,this.urlSerializer.serialize(s.extractedUrl),r,n);this.events.next(o),s.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function K1(t){return t!==ql}var X1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:()=>tt(Y1),providedIn:"root"});let t=e;return t})(),Kf=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},Y1=(()=>{let e=class e extends Kf{};e.\u0275fac=(()=>{let s;return function(n){return(s||(s=zs(e)))(n||e)}})(),e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),OC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:()=>tt(q1),providedIn:"root"});let t=e;return t})(),q1=(()=>{let e=class e extends OC{constructor(){super(...arguments),this.location=tt(fn),this.urlSerializer=tt(Yf),this.options=tt(tg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=tt(sg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(s){return this.location.subscribe(r=>{r.type==="popstate"&&s(r.url,r.state)})}handleRouterEvent(s,r){if(s instanceof Jl)this.stateMemento=this.createStateMemento();else if(s instanceof so)this.rawUrlTree=r.initialUrl;else if(s instanceof wd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let n=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(n,r)}}else s instanceof th?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):s instanceof vn&&(s.code===Os.GuardRejected||s.code===Os.NoDataFromResolver)?this.restoreHistory(r):s instanceof eh?this.restoreHistory(r,!0):s instanceof io&&(this.lastSuccessfulId=s.id,this.currentPageId=this.browserPageId)}setBrowserUrl(s,r){let n=this.urlSerializer.serialize(s);if(this.location.isCurrentPathEqualTo(n)||r.extras.replaceUrl){let o=this.browserPageId,a=Xe(Xe({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(n,"",a)}else{let o=Xe(Xe({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(n,"",o)}}restoreHistory(s,r=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,o=this.currentPageId-n;o!==0?this.location.historyGo(o):this.currentUrlTree===s.finalUrl&&o===0&&(this.resetState(s),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(s),this.resetUrlToCurrentUrlTree())}resetState(s){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,s.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(s,r){return this.canceledNavigationResolution==="computed"?{navigationId:s,\u0275routerPageId:r}:{navigationId:s}}};e.\u0275fac=(()=>{let s;return function(n){return(s||(s=zs(e)))(n||e)}})(),e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Xl||{});function Z1(t,e){t.events.pipe(Ei(i=>i instanceof io||i instanceof vn||i instanceof eh||i instanceof so),wt(i=>i instanceof io||i instanceof so?Xl.COMPLETE:(i instanceof vn?i.code===Os.Redirect||i.code===Os.SupersededByNewNavigation:!1)?Xl.REDIRECTING:Xl.FAILED),Ei(i=>i!==Xl.REDIRECTING),cs(1)).subscribe(()=>{e()})}function Q1(t){throw t}var J1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},LC=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=tt(Zc),this.stateManager=tt(OC),this.options=tt(tg,{optional:!0})||{},this.pendingTasks=tt(Nl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=tt($1),this.urlSerializer=tt(Yf),this.location=tt(fn),this.urlHandlingStrategy=tt(sg),this._events=new Ot,this.errorHandler=this.options.errorHandler||Q1,this.navigated=!1,this.routeReuseStrategy=tt(X1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=tt(ig,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!tt(Qf,{optional:!0}),this.eventsSubscription=new zn,this.isNgZoneEnabled=tt(xt)instanceof xt&&xt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:s=>{this.console.warn(s)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let s=this.navigationTransitions.events.subscribe(r=>{try{let n=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(n!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof vn&&r.code!==Os.Redirect&&r.code!==Os.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof io)this.navigated=!0;else if(r instanceof ih){let a=this.urlHandlingStrategy.merge(r.url,n.currentRawUrl),l={info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||K1(n.source)};this.scheduleNavigation(a,ql,null,l,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}iA(r)&&this._events.next(r)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(s)}resetRootComponentType(s){this.routerState.root.component=s,this.navigationTransitions.rootComponentType=s}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ql,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((s,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(s,"popstate",r)},0)})}navigateToSyncWithBrowser(s,r,n){let o={replaceUrl:!0},a=n?.navigationId?n:null;if(n){let h=Xe({},n);delete h.navigationId,delete h.\u0275routerPageId,Object.keys(h).length!==0&&(o.state=h)}let l=this.parseUrl(s);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(s){this.config=s.map(Jf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(s,r={}){let{relativeTo:n,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:h}=r,c=h?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=Xe(Xe({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let u=n?n.snapshot:this.routerState.snapshot.root;p=vC(u)}catch{(typeof s[0]!="string"||!s[0].startsWith("/"))&&(s=[]),p=this.currentUrlTree.root}return CC(p,s,d,c??null)}navigateByUrl(s,r={skipLocationChange:!1}){let n=ma(s)?s:this.parseUrl(s),o=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(o,ql,null,r)}navigate(s,r={skipLocationChange:!1}){return tA(s),this.navigateByUrl(this.createUrlTree(s,r),r)}serializeUrl(s){return this.urlSerializer.serialize(s)}parseUrl(s){try{return this.urlSerializer.parse(s)}catch{return this.urlSerializer.parse("/")}}isActive(s,r){let n;if(r===!0?n=Xe({},J1):r===!1?n=Xe({},eA):n=r,ma(s))return iC(this.currentUrlTree,s,n);let o=this.parseUrl(s);return iC(this.currentUrlTree,o,n)}removeEmptyProps(s){return Object.entries(s).reduce((r,[n,o])=>(o!=null&&(r[n]=o),r),{})}scheduleNavigation(s,r,n,o,a){if(this.disposed)return Promise.resolve(!1);let l,h,c;a?(l=a.resolve,h=a.reject,c=a.promise):c=new Promise((p,u)=>{l=p,h=u});let d=this.pendingTasks.add();return Z1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:s,extras:o,resolve:l,reject:h,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tA(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Zt(4008,!1)}function iA(t){return!(t instanceof th)&&!(t instanceof ih)}var sA=new pt("");function kC(t,...e){return qn([{provide:ig,multi:!0,useValue:t},[],{provide:va,useFactory:rA,deps:[LC]},{provide:Qp,multi:!0,useFactory:nA},e.map(i=>i.\u0275providers)])}function rA(t){return t.routerState.root}function nA(){let t=tt(ds);return e=>{let i=t.get(la);if(e!==i.components[0])return;let s=t.get(LC),r=t.get(oA);t.get(aA)===1&&s.initialNavigation(),t.get(lA,null,zp.Optional)?.setUpPreloading(),t.get(sA,null,zp.Optional)?.init(),s.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var oA=new pt("",{factory:()=>new Ot}),aA=new pt("",{providedIn:"root",factory:()=>1});var lA=new pt("");var NC=[];var hA="@",cA=(()=>{let e=class e{constructor(s,r,n,o,a){this.doc=s,this.delegate=r,this.zone=n,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=tt(Av,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-JG32HCLJ.js")).catch(r=>{throw new Zt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:n})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new n(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(s,r){let n=this.delegate.createRenderer(s,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let o=new rg(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(s,r);o.use(l)}).catch(a=>{o.use(n)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Yp()},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})(),rg=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let i of this.replay)i(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,i){this.delegate.appendChild(e,i)}insertBefore(e,i,s,r){this.delegate.insertBefore(e,i,s,r)}removeChild(e,i,s){this.delegate.removeChild(e,i,s)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,s,r){this.delegate.setAttribute(e,i,s,r)}removeAttribute(e,i,s){this.delegate.removeAttribute(e,i,s)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,s,r){this.delegate.setStyle(e,i,s,r)}removeStyle(e,i,s){this.delegate.removeStyle(e,i,s)}setProperty(e,i,s){this.shouldReplay(i)&&this.replay.push(r=>r.setProperty(e,i,s)),this.delegate.setProperty(e,i,s)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,s){return this.shouldReplay(i)&&this.replay.push(r=>r.listen(e,i,s)),this.delegate.listen(e,i,s)}shouldReplay(e){return this.replay!==null&&e.startsWith(hA)}};function GC(t="animations"){return qp("NgAsyncAnimations"),qn([{provide:Yc,useFactory:(e,i,s)=>new cA(e,i,s,t),deps:[yt,cd,xt]},{provide:Zn,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var VC={providers:[kC(NC),GC("noop"),hf()]};var Yg=Object.defineProperty,dA=Object.defineProperties,uA=Object.getOwnPropertyDescriptor,pA=Object.getOwnPropertyDescriptors,Nd=Object.getOwnPropertySymbols,ay=Object.prototype.hasOwnProperty,ly=Object.prototype.propertyIsEnumerable,BC=(t,e,i)=>e in t?Yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Qe=(t,e)=>{for(var i in e||(e={}))ay.call(e,i)&&BC(t,i,e[i]);if(Nd)for(var i of Nd(e))ly.call(e,i)&&BC(t,i,e[i]);return t},zt=(t,e)=>dA(t,pA(e)),fA=(t,e)=>{var i={};for(var s in t)ay.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&Nd)for(var s of Nd(t))e.indexOf(s)<0&&ly.call(t,s)&&(i[s]=t[s]);return i},Ai=(t,e)=>{for(var i in e)Yg(t,i,{get:e[i],enumerable:!0})},w=(t,e,i,s)=>{for(var r=s>1?void 0:s?uA(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&Yg(e,i,r),r},lr=(t,e)=>(i,s)=>e(i,s,t),hy={};Ai(hy,{attrToBoolean:()=>Gd,attrToNumber:()=>xn,attrToString:()=>gA,defaultComparator:()=>mA,exists:()=>Me,jsonEquals:()=>Sg,makeNull:()=>Dr,missing:()=>rt,missingOrEmpty:()=>Ks,toStringOrNull:()=>Ch,values:()=>lo});function Dr(t){return t==null||t===""?null:t}function Me(t,e=!1){return t!=null&&(t!==""||e)}function rt(t){return!Me(t)}function Ks(t){return t==null||t.length===0}function Ch(t){return t!=null&&typeof t.toString=="function"?t.toString():null}function xn(t){if(t===void 0)return;if(t===null||t==="")return null;if(typeof t=="number")return isNaN(t)?void 0:t;let e=parseInt(t,10);return isNaN(e)?void 0:e}function Gd(t){if(t!==void 0)return t===null||t===""?!1:typeof t=="boolean"?t:/true/i.test(t)}function gA(t){if(!(t==null||t===""))return t}function Sg(t,e){let i=t?JSON.stringify(t):null,s=e?JSON.stringify(e):null;return i===s}function mA(t,e,i=!1){let s=t==null,r=e==null;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),s&&r)return 0;if(s)return-1;if(r)return 1;function n(o,a){return o>a?1:o<a?-1:0}if(typeof t!="string"||!i)return n(t,e);try{return t.localeCompare(e)}catch{return n(t,e)}}function lo(t){if(t instanceof Set||t instanceof Map){let e=[];return t.forEach(i=>e.push(i)),e}return Object.values(t)}var vA=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++)this.existingKeys[t[e]]=!0}getUniqueKey(t,e){t=Ch(t);let i=0;for(;;){let s;if(t?(s=t,i!==0&&(s+="_"+i)):e?(s=e,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},cy={};Ai(cy,{cloneObject:()=>qg,deepCloneDefinition:()=>Vd,getAllValuesInObject:()=>Sn,getValueUsingField:()=>Ta,isNonNullObject:()=>Bd,iterateObject:()=>Ui,mergeDeep:()=>fs,removeAllReferences:()=>dy});function Ui(t,e){if(t!=null){if(Array.isArray(t)){for(let i=0;i<t.length;i++)e(i.toString(),t[i]);return}for(let[i,s]of Object.entries(t))e(i,s)}}function qg(t){let e={},i=Object.keys(t);for(let s=0;s<i.length;s++){let r=i[s],n=t[r];e[r]=n}return e}function Vd(t,e){if(!t)return;let i=t,s={};return Object.keys(i).forEach(r=>{if(e&&e.indexOf(r)>=0)return;let n=i[r];Bd(n)&&n.constructor===Object?s[r]=Vd(n):s[r]=n}),s}function Sn(t){if(!t)return[];let e=Object;if(typeof e.values=="function")return e.values(t);let i=[];for(let s in t)t.hasOwnProperty(s)&&t.propertyIsEnumerable(s)&&i.push(t[s]);return i}function fs(t,e,i=!0,s=!1){Me(e)&&Ui(e,(r,n)=>{let o=t[r];o!==n&&(s&&o==null&&n!=null&&typeof n=="object"&&n.constructor===Object&&(o={},t[r]=o),Bd(n)&&Bd(o)&&!Array.isArray(o)?fs(o,n,i,s):(i||n!==void 0)&&(t[r]=n))})}function Ta(t,e,i){if(!e||!t)return;if(!i)return t[e];let s=e.split("."),r=t;for(let n=0;n<s.length;n++){if(r==null)return;r=r[s[n]]}return r}function dy(t,e=[],i){Object.keys(t).forEach(o=>{typeof t[o]=="object"&&!e.includes(o)&&(t[o]=void 0)});let s=Object.getPrototypeOf(t),r={},n=o=>`AG Grid: Grid API function ${o}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`;Object.getOwnPropertyNames(s).forEach(o=>{if(typeof s[o]=="function"&&!e.includes(o)){let l=()=>{console.warn(n(o))};r[o]={value:l,writable:!0}}}),Object.defineProperties(t,r)}function Bd(t){return typeof t=="object"&&t!==null}var uy={};Ai(uy,{compose:()=>CA,debounce:()=>Qi,doOnce:()=>Da,errorOnce:()=>Ar,executeAfter:()=>fy,executeInAWhile:()=>py,executeNextVMTurn:()=>Eg,getFunctionName:()=>iu,isFunction:()=>su,noop:()=>yA,throttle:()=>bg,waitUntil:()=>Zg,warnOnce:()=>et});var HC={};function Da(t,e){HC[e]||(t(),HC[e]=!0)}function et(t){Da(()=>console.warn("AG Grid: "+t),t)}function Ar(t){Da(()=>console.error("AG Grid: "+t),t)}function iu(t){if(t.name)return t.name;let e=/function\s+([^\(]+)/.exec(t.toString());return e&&e.length===2?e[1].trim():null}function su(t){return!!(t&&t.constructor&&t.call&&t.apply)}function py(t){fy(t,400)}var ng=[],og=!1;function Eg(t){ng.push(t),!og&&(og=!0,window.setTimeout(()=>{let e=ng.slice();ng.length=0,og=!1,e.forEach(i=>i())},0))}function fy(t,e=0){t.length>0&&window.setTimeout(()=>t.forEach(i=>i()),e)}function Qi(t,e){let i;return function(...s){let r=this;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(r,s)},e)}}function bg(t,e){let i=0;return function(...s){let r=this,n=new Date().getTime();n-i<e||(i=n,t.apply(r,s))}}function Zg(t,e,i=100,s){let r=new Date().getTime(),n=null,o=!1,a=()=>{let l=new Date().getTime()-r>i;(t()||l)&&(e(),o=!0,n!=null&&(window.clearInterval(n),n=null),l&&s&&console.warn(s))};a(),o||(n=window.setInterval(a,10))}function CA(...t){return e=>t.reduce((i,s)=>s(i),e)}var yA=()=>{},gy=(t=>(t.CommunityCoreModule="@ag-grid-community/core",t.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",t.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",t.CsvExportModule="@ag-grid-community/csv-export",t.EnterpriseCoreModule="@ag-grid-enterprise/core",t.RowGroupingModule="@ag-grid-enterprise/row-grouping",t.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",t.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",t.MenuModule="@ag-grid-enterprise/menu",t.SetFilterModule="@ag-grid-enterprise/set-filter",t.MultiFilterModule="@ag-grid-enterprise/multi-filter",t.StatusBarModule="@ag-grid-enterprise/status-bar",t.SideBarModule="@ag-grid-enterprise/side-bar",t.RangeSelectionModule="@ag-grid-enterprise/range-selection",t.MasterDetailModule="@ag-grid-enterprise/master-detail",t.RichSelectModule="@ag-grid-enterprise/rich-select",t.GridChartsModule="@ag-grid-enterprise/charts",t.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",t.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",t.ExcelExportModule="@ag-grid-enterprise/excel-export",t.ClipboardModule="@ag-grid-enterprise/clipboard",t.SparklinesModule="@ag-grid-enterprise/sparklines",t.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",t.AngularModule="@ag-grid-community/angular",t.ReactModule="@ag-grid-community/react",t.VueModule="@ag-grid-community/vue",t))(gy||{}),ru=class At{static register(e){At.__register(e,!0,void 0)}static registerModules(e){At.__registerModules(e,!0,void 0)}static __register(e,i,s){At.runVersionChecks(e),s!==void 0?(At.areGridScopedModules=!0,At.gridModulesMap[s]===void 0&&(At.gridModulesMap[s]={}),At.gridModulesMap[s][e.moduleName]=e):At.globalModulesMap[e.moduleName]=e,At.setModuleBased(i)}static __unRegisterGridModules(e){delete At.gridModulesMap[e]}static __registerModules(e,i,s){At.setModuleBased(i),e&&e.forEach(r=>At.__register(r,i,s))}static isValidModuleVersion(e){let[i,s]=e.version.split(".")||[],[r,n]=At.currentModuleVersion.split(".")||[];return i===r&&s===n}static runVersionChecks(e){if(At.currentModuleVersion||(At.currentModuleVersion=e.version),e.version?At.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){let i=e.validate();i.isValid||console.error(`AG Grid: ${i.message}`)}}static setModuleBased(e){At.moduleBased===void 0?At.moduleBased=e:At.moduleBased!==e&&Da(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){At.isBundled=!0}static __assertRegistered(e,i,s){var r;if(this.__isRegistered(e,s))return!0;let n=i+e,o;if(At.isBundled)o=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(At.moduleBased||At.moduleBased===void 0){let a=(r=Object.entries(gy).find(([l,h])=>h===e))==null?void 0:r[0];o=`AG Grid: unable to use ${i} as the ${a} is not registered${At.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${e}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else o=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Da(()=>{console.warn(o)},n),!1}static __isRegistered(e,i){var s;return!!At.globalModulesMap[e]||!!((s=At.gridModulesMap[i])!=null&&s[e])}static __getRegisteredModules(e){return[...lo(At.globalModulesMap),...lo(At.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){var i;return lo((i=At.gridModulesMap[e])!=null?i:{})||[]}static __isPackageBased(){return!At.moduleBased}};ru.globalModulesMap={};ru.gridModulesMap={};ru.areGridScopedModules=!1;var bt=ru,wA=class{constructor(t,e){if(this.beanWrappers={},this.destroyed=!1,!t||!t.beanClasses)return;this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();let i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return lo(this.beanWrappers).map(t=>t.beanInstance)}createBean(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t}wireBeans(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),Me(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Ui(this.beanWrappers,(e,i)=>{let s;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(s=i.bean.__agBeanMetaData.autowireMethods.agConstructor);let r=this.getBeansForParameters(s,i.bean.name),n=new(i.bean.bind.apply(i.bean,[null,...r]));i.beanInstance=n});let t=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${t}`)}createBeanWrapper(t){let e=t.__agBeanMetaData;if(!e){let s;t.prototype.constructor?s=iu(t.prototype.constructor):s=""+t,console.error(`Context item ${s} is not a bean`);return}let i={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=i}autoWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(i,s)=>{let r=i.agClassAttributes;r&&r.forEach(n=>{let o=this.lookupBeanInstance(s,n.beanName,n.optional);e[n.attributeName]=o})})})}methodWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(i,s)=>{Ui(i.autowireMethods,(r,n)=>{if(r==="agConstructor")return;let o=this.getBeansForParameters(n,s);e[r].apply(e,o)})})})}forEachMetaDataInHierarchy(t,e){let i=Object.getPrototypeOf(t);for(;i!=null;){let s=i.constructor;if(s.hasOwnProperty("__agBeanMetaData")){let r=s.__agBeanMetaData,n=this.getBeanName(s);e(r,n)}i=Object.getPrototypeOf(i)}}getBeanName(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;let e=t.toString();return e.substring(9,e.indexOf("("))}getBeansForParameters(t,e){let i=[];return t&&Ui(t,(s,r)=>{let n=this.lookupBeanInstance(e,r);i[Number(s)]=n}),i}lookupBeanInstance(t,e,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${e} is used after the grid is destroyed!`),null;if(e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];let s=this.beanWrappers[e];return s?s.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${e} while initialising ${t}`),null)}callLifeCycleMethods(t,e){t.forEach(i=>this.callLifeCycleMethodsOnBean(i,e))}callLifeCycleMethodsOnBean(t,e,i){let s={};this.forEachMetaDataInHierarchy(t,n=>{let o=n[e];o&&o.forEach(a=>{a!=i&&(s[a]=!0)})}),Object.keys(s).forEach(n=>t[n]())}getBean(t){return this.lookupBeanInstance("getBean",t,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");let t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,bt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(t){t&&this.destroyBeans([t])}destroyBeans(t){return t?(t.forEach(e=>{this.callLifeCycleMethodsOnBean(e,"preDestroyMethods","destroy");let i=e;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function my(t,e,i){let s=go(t.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(e)}function ke(t,e,i){let s=go(t.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(e)}function ts(t,e,i){let s=go(t.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(e)}function Ye(t){return e=>{let i=go(e);i.beanName=t}}function Q(t){return(e,i,s)=>{vy(e,t,!1,e,i,null)}}function _t(t){return(e,i,s)=>{vy(e,t,!0,e,i,null)}}function vy(t,e,i,s,r,n){if(e===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof n=="number"){console.error("AG Grid: Autowired should be on an attribute");return}let o=go(t.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:r,beanName:e,optional:i})}function Xs(t){return(e,i,s)=>{let r=typeof e=="function"?e:e.constructor,n;if(typeof s=="number"){let o;i?(n=go(r),o=i):(n=go(r),o="agConstructor"),n.autowireMethods||(n.autowireMethods={}),n.autowireMethods[o]||(n.autowireMethods[o]={}),n.autowireMethods[o][s]=t}}}function go(t){return t.hasOwnProperty("__agBeanMetaData")||(t.__agBeanMetaData={}),t.__agBeanMetaData}var ur=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(t,e,i=null,s=null){if(this.frameworkOverrides=e,this.gos=t,i){let r=t.useAsyncEvents();this.addGlobalListener(i,r)}s&&this.addGlobalListener(s,!1)}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,i){let s=e?this.allAsyncListeners:this.allSyncListeners,r=s.get(t);return!r&&i&&(r=new Set,s.set(t,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,i=!1){this.getListeners(t,i,!0).add(e)}removeEventListener(t,e,i=!1){let s=this.getListeners(t,i,!1);s&&(s.delete(e),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(t))}addGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)}removeGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)}dispatchEvent(t){let e=t;this.gos&&this.gos.addGridCommonParams(e),this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(t){this.firedEvents[t.type]||this.dispatchEvent(t)}dispatchToListeners(t,e){var i;let s=t.type;if(e&&"event"in t){let l=t.event;l instanceof Event&&(t.eventPath=l.composedPath())}let r=(l,h)=>l.forEach(c=>{if(!h.has(c))return;let d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(t)):()=>c(t);e?this.dispatchAsync(d):d()}),n=(i=this.getListeners(s,e,!1))!=null?i:new Set,o=new Set(n);o.size>0&&r(o,n),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{let h=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(s,t)):()=>l(s,t);e?this.dispatchAsync(h):h()})}dispatchAsync(t){this.asyncFunctionsQueue.push(t),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;let t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(e=>e())}};w([lr(0,Xs("gridOptionsService")),lr(1,Xs("frameworkOverrides")),lr(2,Xs("globalEventListener")),lr(3,Xs("globalSyncEventListener"))],ur.prototype,"setBeans",1);ur=w([Ye("eventService")],ur);var Qg=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=i=>{this.frameworkOverrides.wrapOutgoing(()=>t(i))},this.wrappedListeners.set(t,e)),e}wrapGlobal(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>t(i,s))},this.wrappedGlobalListeners.set(t,e)),e}unwrap(t){var e;return(e=this.wrappedListeners.get(t))!=null?e:t}unwrapGlobal(t){var e;return(e=this.wrappedGlobalListeners.get(t))!=null?e:t}},xA={resizable:!0,sortable:!0},SA=0;function Cy(){return SA++}var ai=class yy{constructor(e,i,s,r){this.instanceId=Cy(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new ur,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=i,this.colId=s,this.primary=r,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let i=e.sortIndex,s=e.initialSortIndex;i!==void 0?i!==null&&(this.sortIndex=i):s!==null&&(this.sortIndex=s);let r=e.hide,n=e.initialHide;r!==void 0?this.visible=!r:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let o=e.flex,a=e.initialFlex;o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(e,i,s){this.colDef=e,this.userProvidedColDef=i,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",s))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=Me(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=Me(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){var e,i;let s=this.colDef;this.minWidth=(e=s.minWidth)!=null?e:this.environment.getMinColWidth(),this.maxWidth=(i=s.maxWidth)!=null?i:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=Me(this.colDef.tooltipField)||Me(this.colDef.tooltipValueGetter)||Me(this.colDef.tooltipComponent)}resetActualWidth(e){let i=this.calculateColInitialWidth(this.colDef);this.setActualWidth(i,e,!0)}calculateColInitialWidth(e){var i,s;let r=(i=e.minWidth)!=null?i:this.environment.getMinColWidth(),n=(s=e.maxWidth)!=null?s:Number.MAX_SAFE_INTEGER,o,a=xn(e.width),l=xn(e.initialWidth);return a!=null?o=a:l!=null?o=l:o=200,Math.max(Math.min(o,n),r)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(rt(this.colDef)||rt(this.colDef.showRowGroup))return!1;let i=this.colDef.showRowGroup===!0,s=this.colDef.showRowGroup===e;return i||s}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,i){var s,r;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Qg(this.frameworkOverrides));let n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))!=null?r:i;this.eventService.addEventListener(e,n)}removeEventListener(e,i){var s,r;let n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))!=null?r:i;this.eventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let i=this.createColumnFunctionCallbackParams(e),s=this.colDef.suppressNavigable;return s(i)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var i;return(i=this.colDef[e])!=null?i:xA[e]}isColumnFunc(e,i){if(typeof i=="boolean")return i;if(typeof i=="function"){let s=this.createColumnFunctionCallbackParams(e);return i(s)}return!1}setMoving(e,i){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",i))}createColumnEvent(e,i){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:i})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,i){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",i))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,i){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",i)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return rt(this.sort)}isSorting(){return Me(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,i){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",i)))}isFilterActive(){return this.filterActive}setFilterActive(e,i,s){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",i)));let r=this.createColumnEvent("filterChanged",i);s&&fs(r,s),this.eventService.dispatchEvent(r)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,i){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",i)))}setLastLeftPinned(e,i){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",i)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,i){let s=e===!0;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",i))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let i=e.getPaddingLevel()+1,s=!0;for(;e;){if(!e.isPadding()){s=!1;break}e=e.getParent()}return{numberOfParents:i,isSpanningTotal:s}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let i=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,i}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(rt(this.colDef.colSpan))return 1;let i=this.createBaseColDefParams(e),s=this.colDef.colSpan(i);return Math.max(s,1)}getRowSpan(e){if(rt(this.colDef.rowSpan))return 1;let i=this.createBaseColDefParams(e),s=this.colDef.rowSpan(i);return Math.max(s,1)}setActualWidth(e,i,s=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&i!=="flex"&&i!=="gridInitializing"&&(this.flex=null),s||this.fireColumnWidthChangedEvent(i)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){Me(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,i){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",i))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,i){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",i))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,i){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",i)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){et("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let i=this.getColDef().menuTabs;return i==null&&(i=e),i}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:yy.EVENT_STATE_UPDATED,key:e})}};ai.EVENT_MOVING_CHANGED="movingChanged";ai.EVENT_LEFT_CHANGED="leftChanged";ai.EVENT_WIDTH_CHANGED="widthChanged";ai.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";ai.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";ai.EVENT_VISIBLE_CHANGED="visibleChanged";ai.EVENT_FILTER_CHANGED="filterChanged";ai.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";ai.EVENT_SORT_CHANGED="sortChanged";ai.EVENT_COL_DEF_CHANGED="colDefChanged";ai.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";ai.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";ai.EVENT_PIVOT_CHANGED="columnPivotChanged";ai.EVENT_VALUE_CHANGED="columnValueChanged";ai.EVENT_STATE_UPDATED="columnStateUpdated";w([Q("gridOptionsService")],ai.prototype,"gos",2);w([Q("environment")],ai.prototype,"environment",2);w([Q("columnHoverService")],ai.prototype,"columnHoverService",2);w([Q("frameworkOverrides")],ai.prototype,"frameworkOverrides",2);w([ke],ai.prototype,"initialise",1);var Pt=ai,nu=class ch{constructor(e,i,s,r){this.localEventService=new ur,this.expandable=!1,this.instanceId=Cy(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=i,this.expanded=!!e&&!!e.openByDefault,this.padding=s,this.level=r}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,i){this.colGroupDef=e,this.level=i,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;let i={type:ch.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(i)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(i=>{i instanceof Pt?e.push(i):i instanceof ch&&i.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(i=>i.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(i=>i.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,i=!1,s=!1,r=this.findChildrenRemovingPadding();for(let o=0,a=r.length;o<a;o++){let l=r[o];if(!l.isVisible())continue;let h=l.getColumnGroupShow();h==="open"?(e=!0,s=!0):h==="closed"?(i=!0,s=!0):(e=!0,i=!0)}let n=e&&i&&s;if(this.expandable!==n){this.expandable=n;let o={type:ch.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(o)}}findChildrenRemovingPadding(){let e=[],i=s=>{s.forEach(r=>{r instanceof ch&&r.isPadding()?i(r.children):e.push(r)})};return i(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,i){this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService.removeEventListener(e,i)}};nu.EVENT_EXPANDED_CHANGED="expandedChanged";nu.EVENT_EXPANDABLE_CHANGED="expandableChanged";w([ts],nu.prototype,"destroy",1);var ni=nu,EA={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},wy={};Ai(wy,{addSafePassiveEventListener:()=>Fy,createEventPath:()=>Ry,getCtrlForEventTarget:()=>Hd,getEventPath:()=>Dy,isElementInEventPath:()=>Wd,isEventSupported:()=>em,isStopPropagationForAgGrid:()=>dr,stopPropagationForAgGrid:()=>pr});var xy={};Ai(xy,{areEqual:()=>Rr,existsAndNotEmpty:()=>Sy,flatten:()=>Ty,forEachReverse:()=>AA,includes:()=>Ls,insertArrayIntoArray:()=>_g,insertIntoArray:()=>yh,last:()=>St,moveInArray:()=>Tg,pushAll:()=>Ag,removeAllFromArray:()=>_y,removeAllFromUnorderedArray:()=>by,removeFromArray:()=>ps,removeFromUnorderedArray:()=>Jg,removeRepeatsFromArray:()=>_A,shallowCompare:()=>bA,sortNumerically:()=>Ey,toStrings:()=>TA});function Sy(t){return t!=null&&t.length>0}function St(t){if(!(!t||!t.length))return t[t.length-1]}function Rr(t,e,i){return t==null&&e==null?!0:t!=null&&e!=null&&t.length===e.length&&t.every((s,r)=>i?i(s,e[r]):e[r]===s)}function bA(t,e){return Rr(t,e)}function Ey(t){return t.sort((e,i)=>e-i)}function _A(t,e){if(t)for(let i=t.length-2;i>=0;i--){let s=t[i]===e,r=t[i+1]===e;s&&r&&t.splice(i+1,1)}}function Jg(t,e){let i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.pop())}function ps(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)}function by(t,e){for(let i=0;i<e.length;i++)Jg(t,e[i])}function _y(t,e){for(let i=0;i<e.length;i++)ps(t,e[i])}function yh(t,e,i){t.splice(i,0,e)}function _g(t,e,i){if(!(t==null||e==null))for(let s=e.length-1;s>=0;s--){let r=e[s];yh(t,r,i)}}function Tg(t,e,i){_y(t,e),e.slice().reverse().forEach(s=>yh(t,s,i))}function Ls(t,e){return t.indexOf(e)>-1}function Ty(t){return[].concat.apply([],t)}function Ag(t,e){e==null||t==null||e.forEach(i=>t.push(i))}function TA(t){return t.map(Ch)}function AA(t,e){if(t!=null)for(let i=t.length-1;i>=0;i--)e(t[i],i)}var Ay="__ag_Grid_Stop_Propagation",RA=["touchstart","touchend","touchmove","touchcancel","scroll"],ag={};function pr(t){t[Ay]=!0}function dr(t){return t[Ay]===!0}var em=(()=>{let t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof ag[i]=="boolean")return ag[i];let s=document.createElement(t[i]||"div");return i="on"+i,ag[i]=i in s}})();function Hd(t,e,i){let s=e;for(;s;){let r=t.getDomData(s,i);if(r)return r;s=s.parentElement}return null}function Wd(t,e){return!e||!t?!1:Dy(e).indexOf(t)>=0}function Ry(t){let e=[],i=t.target;for(;i;)e.push(i),i=i.parentElement;return e}function Dy(t){let e=t;return e.path?e.path:e.composedPath?e.composedPath():Ry(e)}function Fy(t,e,i,s){let n=Ls(RA,i)?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,i,s,n)}var Xr=class Py{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:Py.EVENT_DESTROYED})}addEventListener(e,i){this.localEventService||(this.localEventService=new ur),this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService&&this.localEventService.removeEventListener(e,i)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,i,s){if(this.destroyed)return;e instanceof HTMLElement?Fy(this.getFrameworkOverrides(),e,i,s):e.addEventListener(i,s);let r=()=>(e.removeEventListener(i,s),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==r),null)}setupGridOptionListener(e,i){this.gos.addEventListener(e,i);let s=()=>(this.gos.removeEventListener(e,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==s),null)}addManagedPropertyListener(e,i){return this.destroyed?()=>null:this.setupGridOptionListener(e,i)}addManagedPropertyListeners(e,i){if(this.destroyed)return;let s=e.join("-")+this.propertyListenerId++,r=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[s])return;this.lastChangeSetIdLookup[s]=n.changeSet.id}let o={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};i(o)};e.forEach(n=>this.setupGridOptionListener(n,r))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,i){let s=this.createBean(e,i);return this.addDestroyFunc(this.destroyBean.bind(this,e,i)),s}createBean(e,i,s){return(i||this.getContext()).createBean(e,s)}destroyBean(e,i){return(i||this.getContext()).destroyBean(e)}destroyBeans(e,i){if(e)for(let s=0;s<e.length;s++)this.destroyBean(e[s],i);return[]}};Xr.EVENT_DESTROYED="destroyed";w([Q("frameworkOverrides")],Xr.prototype,"frameworkOverrides",2);w([Q("context")],Xr.prototype,"context",2);w([Q("eventService")],Xr.prototype,"eventService",2);w([Q("gridOptionsService")],Xr.prototype,"gos",2);w([Q("localeService")],Xr.prototype,"localeService",2);w([Q("environment")],Xr.prototype,"environment",2);w([ts],Xr.prototype,"destroy",1);var Ie=Xr,wh=class extends Ie{setBeans(t){this.logger=t.create("ColumnFactory")}createColumnTree(t,e,i,s){let r=new vA,{existingCols:n,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(i);r.addExistingKeys(a);let l=this.recursivelyCreateColumns(t,0,e,n,r,o,s),h=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+h);let c=this.balanceColumnTree(l,0,h,r);return zr(null,c,(p,u)=>{p instanceof ni&&p.setupExpandable(),p.setOriginalParent(u)}),{columnTree:c,treeDept:h}}extractExistingTreeData(t){let e=[],i=[],s=[];return t&&zr(null,t,r=>{if(r instanceof ni){let n=r;i.push(n)}else{let n=r;s.push(n.getId()),e.push(n)}}),{existingCols:e,existingGroups:i,existingColKeys:s}}createForAutoGroups(t,e){return t.map(i=>this.createAutoGroupTreeItem(e,i))}createAutoGroupTreeItem(t,e){let i=this.findDepth(t),s=e;for(let r=i-1;r>=0;r--){let n=new ni(null,`FAKE_PATH_${e.getId()}}_${r}`,!0,r);this.createBean(n),n.setChildren([s]),s.setOriginalParent(n),s=n}return i===0&&e.setOriginalParent(null),s}findDepth(t){let e=0,i=t;for(;i&&i[0]&&i[0]instanceof ni;)e++,i=i[0].getChildren();return e}balanceColumnTree(t,e,i,s){let r=[];for(let n=0;n<t.length;n++){let o=t[n];if(o instanceof ni){let a=o,l=this.balanceColumnTree(a.getChildren(),e+1,i,s);a.setChildren(l),r.push(a)}else{let a,l;for(let h=i-1;h>=e;h--){let c=s.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),p=new ni(d,c,!0,e);this.createBean(p),l&&l.setChildren([p]),l=p,a||(a=l)}if(a&&l)if(r.push(a),t.some(c=>c instanceof ni)){l.setChildren([o]);continue}else{l.setChildren(t);break}r.push(o)}}return r}findMaxDept(t,e){let i=e;for(let s=0;s<t.length;s++){let r=t[s];if(r instanceof ni){let n=r,o=this.findMaxDept(n.getChildren(),e+1);i<o&&(i=o)}}return i}recursivelyCreateColumns(t,e,i,s,r,n,o){if(!t)return[];let a=new Array(t.length);for(let l=0;l<a.length;l++){let h=t[l];this.isColumnGroup(h)?a[l]=this.createColumnGroup(i,h,e,s,r,n,o):a[l]=this.createColumn(i,h,s,r,o)}return a}createColumnGroup(t,e,i,s,r,n,o){let a=this.createMergedColGroupDef(e),l=r.getUniqueKey(a.groupId||null,null),h=new ni(a,l,!1,i);this.createBean(h);let c=this.findExistingGroup(e,n);c&&n.splice(c.idx,1);let d=c?.group;d&&h.setExpanded(d.isExpanded());let p=this.recursivelyCreateColumns(a.children,i+1,t,s,r,n,o);return h.setChildren(p),h}createMergedColGroupDef(t){let e={};return Object.assign(e,this.gos.get("defaultColGroupDef")),Object.assign(e,t),e}createColumn(t,e,i,s,r){let n=this.findExistingColumn(e,i);n&&i?.splice(n.idx,1);let o=n?.column;if(o){let a=this.addColumnDefaultAndTypes(e,o.getColId());o.setColDef(a,e,r),this.applyColumnState(o,a,r)}else{let a=s.getUniqueKey(e.colId,e.field),l=this.addColumnDefaultAndTypes(e,a);o=new Pt(l,e,a,t),this.context.createBean(o)}return this.dataTypeService.addColumnListeners(o),o}applyColumnState(t,e,i){let s=xn(e.flex);if(s!==void 0&&t.setFlex(s),t.getFlex()<=0){let a=xn(e.width);if(a!=null)t.setActualWidth(a,i);else{let l=t.getActualWidth();t.setActualWidth(l,i)}}e.sort!==void 0&&(e.sort=="asc"||e.sort=="desc"?t.setSort(e.sort,i):t.setSort(void 0,i));let n=xn(e.sortIndex);n!==void 0&&t.setSortIndex(n);let o=Gd(e.hide);o!==void 0&&t.setVisible(!o,i),e.pinned!==void 0&&t.setPinned(e.pinned)}findExistingColumn(t,e){if(e)for(let i=0;i<e.length;i++){let s=e[i].getUserProvidedColDef();if(!s)continue;if(t.colId!=null){if(e[i].getId()===t.colId)return{idx:i,column:e[i]};continue}if(t.field!=null){if(s.field===t.field)return{idx:i,column:e[i]};continue}if(s===t)return{idx:i,column:e[i]}}}findExistingGroup(t,e){if(t.groupId!=null)for(let s=0;s<e.length;s++){let r=e[s];if(r.getColGroupDef()&&r.getId()===t.groupId)return{idx:s,group:r}}}addColumnDefaultAndTypes(t,e){let i={},s=this.gos.get("defaultColDef");fs(i,s,!1,!0);let r=this.dataTypeService.updateColDefAndGetColumnType(i,t,e);r&&this.assignColumnTypes(r,i),fs(i,t,!1,!0);let n=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return t.rowGroup&&n&&o&&fs(i,{sort:n.sort,initialSort:n.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(t,e){if(!t.length)return;let i=Object.assign({},EA),s=this.gos.get("columnTypes")||{};Ui(s,(r,n)=>{r in i?console.warn(`AG Grid: the column type '${r}' is a default column type and cannot be overridden.`):(n.type&&et("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[r]=n)}),t.forEach(r=>{let n=i[r.trim()];n?fs(e,n,!1,!0):console.warn("AG Grid: colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(t){return t.children!==void 0}};w([Q("dataTypeService")],wh.prototype,"dataTypeService",2);w([lr(0,Xs("loggerFactory"))],wh.prototype,"setBeans",1);wh=w([Ye("columnFactory")],wh);function zr(t,e,i){if(e)for(let s=0;s<e.length;s++){let r=e[s];r instanceof ni&&zr(r,r.getChildren(),i),i(r,t)}}var ou=class _r{constructor(e,i,s,r){this.displayedChildren=[],this.localEventService=new ur,this.groupId=i,this.partId=s,this.providedColumnGroup=e,this.pinned=r}static createUniqueId(e,i){return e+"_"+i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return _r.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(i=>i.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof _r&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let i=St(this.displayedChildren).getLeft();this.setLeft(i)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(_r.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,i){this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService.removeEventListener(e,i)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let i=!1;return this.children.forEach(s=>{e===s&&(i=!0),s instanceof _r&&s.isChildInThisGroupDeepSearch(e)&&(i=!0)}),i}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(i=>{e+=i.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(i=>{i.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(i=>{e+=i.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(i=>{i instanceof Pt?e.push(i):i instanceof _r&&i.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(i=>{i instanceof Pt?e.push(i):i instanceof _r&&i.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(_r.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(s=>{if(s instanceof _r&&(!s.displayedChildren||!s.displayedChildren.length))return;switch(s.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(s);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(s);break;default:this.displayedChildren.push(s);break}}),this.localEventService.dispatchEvent(this.createAgEvent(_r.EVENT_DISPLAYED_CHILDREN_CHANGED))}};ou.EVENT_LEFT_CHANGED="leftChanged";ou.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";w([Q("gridOptionsService")],ou.prototype,"gos",2);var yi=ou,V=class{};V.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";V.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";V.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";V.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";V.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";V.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";V.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";V.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";V.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";V.EVENT_COLUMN_MOVED="columnMoved";V.EVENT_COLUMN_VISIBLE="columnVisible";V.EVENT_COLUMN_PINNED="columnPinned";V.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";V.EVENT_COLUMN_RESIZED="columnResized";V.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";V.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";V.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";V.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";V.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";V.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";V.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";V.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";V.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";V.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";V.EVENT_ROW_GROUP_OPENED="rowGroupOpened";V.EVENT_ROW_DATA_UPDATED="rowDataUpdated";V.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";V.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";V.EVENT_CHART_CREATED="chartCreated";V.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";V.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";V.EVENT_CHART_DESTROYED="chartDestroyed";V.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";V.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";V.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";V.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";V.EVENT_MODEL_UPDATED="modelUpdated";V.EVENT_CUT_START="cutStart";V.EVENT_CUT_END="cutEnd";V.EVENT_PASTE_START="pasteStart";V.EVENT_PASTE_END="pasteEnd";V.EVENT_FILL_START="fillStart";V.EVENT_FILL_END="fillEnd";V.EVENT_RANGE_DELETE_START="rangeDeleteStart";V.EVENT_RANGE_DELETE_END="rangeDeleteEnd";V.EVENT_UNDO_STARTED="undoStarted";V.EVENT_UNDO_ENDED="undoEnded";V.EVENT_REDO_STARTED="redoStarted";V.EVENT_REDO_ENDED="redoEnded";V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";V.EVENT_CELL_CLICKED="cellClicked";V.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";V.EVENT_CELL_MOUSE_DOWN="cellMouseDown";V.EVENT_CELL_CONTEXT_MENU="cellContextMenu";V.EVENT_CELL_VALUE_CHANGED="cellValueChanged";V.EVENT_CELL_EDIT_REQUEST="cellEditRequest";V.EVENT_ROW_VALUE_CHANGED="rowValueChanged";V.EVENT_CELL_FOCUSED="cellFocused";V.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";V.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";V.EVENT_ROW_SELECTED="rowSelected";V.EVENT_SELECTION_CHANGED="selectionChanged";V.EVENT_TOOLTIP_SHOW="tooltipShow";V.EVENT_TOOLTIP_HIDE="tooltipHide";V.EVENT_CELL_KEY_DOWN="cellKeyDown";V.EVENT_CELL_MOUSE_OVER="cellMouseOver";V.EVENT_CELL_MOUSE_OUT="cellMouseOut";V.EVENT_FILTER_CHANGED="filterChanged";V.EVENT_FILTER_MODIFIED="filterModified";V.EVENT_FILTER_OPENED="filterOpened";V.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";V.EVENT_SORT_CHANGED="sortChanged";V.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";V.EVENT_ROW_CLICKED="rowClicked";V.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";V.EVENT_GRID_READY="gridReady";V.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";V.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";V.EVENT_VIEWPORT_CHANGED="viewportChanged";V.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";V.EVENT_FIRST_DATA_RENDERED="firstDataRendered";V.EVENT_DRAG_STARTED="dragStarted";V.EVENT_DRAG_STOPPED="dragStopped";V.EVENT_CHECKBOX_CHANGED="checkboxChanged";V.EVENT_ROW_EDITING_STARTED="rowEditingStarted";V.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";V.EVENT_CELL_EDITING_STARTED="cellEditingStarted";V.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";V.EVENT_BODY_SCROLL="bodyScroll";V.EVENT_BODY_SCROLL_END="bodyScrollEnd";V.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";V.EVENT_PAGINATION_CHANGED="paginationChanged";V.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";V.EVENT_STORE_REFRESHED="storeRefreshed";V.EVENT_STATE_UPDATED="stateUpdated";V.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";V.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged";V.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";V.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";V.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";V.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";V.EVENT_FLASH_CELLS="flashCells";V.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";V.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";V.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";V.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";V.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";V.EVENT_ROW_DRAG_ENTER="rowDragEnter";V.EVENT_ROW_DRAG_MOVE="rowDragMove";V.EVENT_ROW_DRAG_LEAVE="rowDragLeave";V.EVENT_ROW_DRAG_END="rowDragEnd";V.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";V.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";V.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";V.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";V.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";V.EVENT_STORE_UPDATED="storeUpdated";V.EVENT_FILTER_DESTROYED="filterDestroyed";V.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";V.EVENT_ROW_COUNT_READY="rowCountReady";V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";V.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";V.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";V.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";V.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var Pd=new Set([V.EVENT_GRID_PRE_DESTROYED,V.EVENT_FILL_START]),My=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){let e=this.existingIds[t],i;return typeof e!="number"?i=0:i=e+1,this.existingIds[t]=i,i}},Fa="ag-Grid-AutoColumn",xh=class extends Ie{createAutoGroupColumns(t){let e=[],i=this.gos.get("treeData"),s=this.gos.isGroupMultiAutoColumn();return i&&s&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),s=!1),s?t.forEach((r,n)=>{e.push(this.createOneAutoGroupColumn(r,n))}):e.push(this.createOneAutoGroupColumn()),e}updateAutoGroupColumns(t,e){t.forEach((i,s)=>this.updateOneAutoGroupColumn(i,s,e))}createOneAutoGroupColumn(t,e){let i;t?i=`${Fa}-${t.getId()}`:i=Fa;let s=this.createAutoGroupColDef(i,t,e);s.colId=i;let r=new Pt(s,null,i,!0);return this.context.createBean(r),r}updateOneAutoGroupColumn(t,e,i){let s=t.getColDef(),r=typeof s.showRowGroup=="string"?s.showRowGroup:void 0,n=r!=null?this.columnModel.getPrimaryColumn(r):void 0,o=this.createAutoGroupColDef(t.getId(),n??void 0,e);t.setColDef(o,null,i),this.columnFactory.applyColumnState(t,o,i)}createAutoGroupColDef(t,e,i){let s=this.createBaseColDef(e),r=this.gos.get("autoGroupColumnDef");fs(s,r),s=this.columnFactory.addColumnDefaultAndTypes(s,t),this.gos.get("treeData")||rt(s.field)&&rt(s.valueGetter)&&rt(s.filterValueGetter)&&s.filter!=="agGroupColumnFilter"&&(s.filter=!1),i&&i>0&&(s.headerCheckboxSelection=!1);let n=this.gos.isColumnsSortingCoupledToGroup(),o=s.valueGetter||s.field!=null;return n&&!o&&(s.sortIndex=void 0,s.initialSort=void 0),s}createBaseColDef(t){let e=this.gos.get("autoGroupColumnDef"),s={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(e&&(e.cellRenderer||e.cellRendererSelector)||(s.cellRenderer="agGroupCellRenderer"),t){let n=t.getColDef();Object.assign(s,{headerName:this.columnModel.getDisplayNameForColumn(t,"header"),headerValueGetter:n.headerValueGetter}),n.cellRenderer&&Object.assign(s,{cellRendererParams:{innerRenderer:n.cellRenderer,innerRendererParams:n.cellRendererParams}}),s.showRowGroup=t.getColId()}else s.showRowGroup=!0;return s}};w([Q("columnModel")],xh.prototype,"columnModel",2);w([Q("columnFactory")],xh.prototype,"columnFactory",2);xh=w([Ye("autoGroupColService")],xh);var Iy={};Ai(Iy,{camelCaseToHumanText:()=>Oy,camelCaseToHyphenated:()=>Ly,capitalise:()=>MA,escapeString:()=>oi,utf8_encode:()=>PA});var DA=/[&<>"']/g,FA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function PA(t){let e=String.fromCharCode;function i(d){let p=[];if(!d)return[];let u=d.length,m=0,f,g;for(;m<u;)f=d.charCodeAt(m++),f>=55296&&f<=56319&&m<u?(g=d.charCodeAt(m++),(g&64512)==56320?p.push(((f&1023)<<10)+(g&1023)+65536):(p.push(f),m--)):p.push(f);return p}function s(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function r(d,p){return e(d>>p&63|128)}function n(d){if(d>=0&&d<=31&&d!==10)return`_x${d.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(d&4294967168))return e(d);let p="";return d&4294965248?d&4294901760?d&4292870144||(p=e(d>>18&7|240),p+=r(d,12),p+=r(d,6)):(s(d),p=e(d>>12&15|224),p+=r(d,6)):p=e(d>>6&31|192),p+=e(d&63|128),p}let o=i(t),a=o.length,l=-1,h,c="";for(;++l<a;)h=o[l],c+=n(h);return c}function MA(t){return t[0].toUpperCase()+t.substring(1).toLowerCase()}function oi(t,e){if(t==null)return null;let i=t.toString().toString();return e?i:i.replace(DA,s=>FA[s])}function Oy(t){if(!t||t==null)return null;let e=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function Ly(t){return t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var ky={};Ai(ky,{convertToMap:()=>wn,keys:()=>OA,mapById:()=>IA});function wn(t){let e=new Map;return t.forEach(i=>e.set(i[0],i[1])),e}function IA(t,e){let i=new Map;return t.forEach(s=>i.set(e(s),s)),i}function OA(t){let e=[];return t.forEach((i,s)=>e.push(s)),e}var Ti=class extends Ie{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");let t=this.gos.get("pivotMode");this.isPivotSettingAllowed(t)&&(this.pivotMode=t),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.buildAutoGroupColumns(ba(e.source))),this.addManagedPropertyListener("autoGroupColumnDef",e=>this.onAutoGroupColumnDefChanged(ba(e.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],e=>this.onSharedColDefChanged(ba(e.source))),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),ba(e.source))),this.addManagedListener(this.eventService,V.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(t){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(t))}onAutoGroupColumnDefChanged(t){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t)}onSharedColDefChanged(t){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t),this.createColumnsFromColumnDefs(!0,t))}setColumnDefs(t,e){let i=!!this.columnDefs;this.columnDefs=t,this.createColumnsFromColumnDefs(i,e)}recreateColumnDefs(t){this.onSharedColDefChanged(t)}destroyOldColumns(t,e){let i={};if(!t)return;zr(null,t,r=>{i[r.getInstanceId()]=r}),e&&zr(null,e,r=>{i[r.getInstanceId()]=null});let s=Object.values(i).filter(r=>r!=null);this.destroyBeans(s)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(t,e){let i=t?this.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;let s=this.primaryColumns,r=this.primaryColumnTree,n=this.columnFactory.createColumnTree(this.columnDefs,!0,r,e);this.destroyOldColumns(this.primaryColumnTree,n.columnTree),this.primaryColumnTree=n.columnTree,this.primaryHeaderRowCount=n.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(l=>this.primaryColumnsMap[l.getId()]=l),this.extractRowGroupColumns(e,s),this.extractPivotColumns(e,s),this.extractValueColumns(e,s),this.ready=!0;let o=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||o||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),t&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(e),this.checkViewportColumns()),this.dispatchEverythingChanged(e),this.changeEventsDispatching=!0,i&&i(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(e)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(t){let e={type:V.EVENT_NEW_COLUMNS_LOADED,source:t};this.eventService.dispatchEvent(e),t==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(t){let e={type:V.EVENT_COLUMN_EVERYTHING_CHANGED,source:t};this.eventService.dispatchEvent(e)}orderGridColumnsLikePrimary(){let t=this.primaryColumns;if(!t)return;let e=t.filter(s=>this.gridColumns.indexOf(s)>=0),i=this.gridColumns.filter(s=>e.indexOf(s)<0);this.gridColumns=[...i,...e],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(t=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;let i={type:V.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(i)}setViewportPosition(t,e,i=!1){(t!==this.scrollWidth||e!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=t,this.scrollPosition=e,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(t){return t&&this.gos.get("treeData")?(et("Pivot mode not available with treeData."),!1):!0}setPivotMode(t,e){if(t===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=t,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(e);let i={type:V.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(t,e){if(rt(this.secondaryColumns))return null;let i=this.getPrimaryColumn(e),s=null;return this.secondaryColumns.forEach(r=>{let n=r.getColDef().pivotKeys,o=r.getColDef().pivotValueColumn;Rr(n,t)&&o===i&&(s=r)}),s}setBeans(t){this.logger=t.create("columnModel")}setFirstRightAndLastLeftPinned(t){let e,i;this.gos.get("enableRtl")?(e=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?St(this.displayedColumnsRight):null):(e=this.displayedColumnsLeft?St(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(s=>{s.setLastLeftPinned(s===e,t),s.setFirstRightPinned(s===i,t)})}autoSizeColumns(t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(t));return}let{columns:e,skipHeader:i,skipHeaderGroups:s,stopAtGroup:r,source:n="api"}=t;this.animationFrameService.flushAllFrames();let o=[],a=-1,l=i??this.gos.get("skipHeaderOnAutoSize"),h=s??l;for(;a!==0;)a=0,this.actionOnGridColumns(e,c=>{if(o.indexOf(c)>=0)return!1;let d=this.autoWidthCalculator.getPreferredWidthForColumn(c,l);if(d>0){let p=this.normaliseColumnWidth(c,d);c.setActualWidth(p,n),o.push(c),a++}return!0},n);h||this.autoSizeColumnGroupsByColumns(e,n,r),this.dispatchColumnResizedEvent(o,!0,"autosizeColumns")}dispatchColumnResizedEvent(t,e,i,s=null){if(t&&t.length){let r={type:V.EVENT_COLUMN_RESIZED,columns:t,column:t.length===1?t[0]:null,flexColumns:s,finished:e,source:i};this.eventService.dispatchEvent(r)}}dispatchColumnChangedEvent(t,e,i){let s={type:t,columns:e,column:e&&e.length==1?e[0]:null,source:i};this.eventService.dispatchEvent(s)}dispatchColumnMovedEvent(t){let{movedColumns:e,source:i,toIndex:s,finished:r}=t,n={type:V.EVENT_COLUMN_MOVED,columns:e,column:e&&e.length===1?e[0]:null,toIndex:s,finished:r,source:i};this.eventService.dispatchEvent(n)}dispatchColumnPinnedEvent(t,e){if(!t.length)return;let i=t.length===1?t[0]:null,s=this.getCommonValue(t,n=>n.getPinned()),r={type:V.EVENT_COLUMN_PINNED,pinned:s??null,columns:t,column:i,source:e};this.eventService.dispatchEvent(r)}dispatchColumnVisibleEvent(t,e){if(!t.length)return;let i=t.length===1?t[0]:null,s=this.getCommonValue(t,n=>n.isVisible()),r={type:V.EVENT_COLUMN_VISIBLE,visible:s,columns:t,column:i,source:e};this.eventService.dispatchEvent(r)}autoSizeColumn(t,e,i){t&&this.autoSizeColumns({columns:[t],skipHeader:i,skipHeaderGroups:!0,source:e})}autoSizeColumnGroupsByColumns(t,e,i){let s=new Set;this.getGridColumns(t).forEach(a=>{let l=a.getParent();for(;l&&l!=i;)l.isPadding()||s.add(l),l=l.getParent()});let n,o=[];for(let a of s){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(n=l.getHeaderCtrlForColumn(a),n)break;n&&n.resizeLeafColumnsToFit(e)}return o}autoSizeAllColumns(t,e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(t,e));return}let i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:t})}getColumnsFromTree(t){let e=[],i=s=>{for(let r=0;r<s.length;r++){let n=s[r];n instanceof Pt?e.push(n):n instanceof ni&&i(n.getChildren())}};return i(t),e}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(t){return this.getAllDisplayedColumns().indexOf(t)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(t,e,i,s){let r=[],n=null;for(let o=0;o<e.length;o++){let a=e[o],l=e.length-o,h=Math.min(a.getColSpan(t),l),c=[a];if(h>1){let p=h-1;for(let u=1;u<=p;u++)c.push(e[o+u]);o+=p}let d;i?(d=!1,c.forEach(p=>{i(p)&&(d=!0)})):d=!0,d&&(r.length===0&&n&&(s&&s(a))&&r.push(n),r.push(a)),n=a}return r}getViewportCenterColumnsForRow(t){if(!this.colSpanActive)return this.viewportColumnsCenter;let e=s=>{let r=s.getLeft();return Me(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(t,this.displayedColumnsCenter,i,e)}isColumnAtEdge(t,e){let i=this.getAllDisplayedColumns();if(!i.length)return!1;let s=e==="first",r;if(t instanceof yi){let n=t.getDisplayedLeafColumns();if(!n.length)return!1;r=s?n[0]:St(n)}else r=t;return(s?i[0]:St(i))===r}getAriaColumnIndex(t){let e;return t instanceof yi?e=t.getLeafColumns()[0]:e=t,this.ariaOrderColumns.indexOf(e)+1}isColumnInHeaderViewport(t){return t.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight())return!0;let e=t.getLeft()||0,i=e+t.getActualWidth(),s=this.viewportLeft-200,r=this.viewportRight+200,n=e<s&&i<s,o=e>r&&i>r;return!n&&!o}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(t,e,i,s,r,n){if(!t||Ks(t))return;let o=!1;if(t.forEach(l=>{if(!l)return;let h=this.getPrimaryColumn(l);if(h){if(i){if(e.indexOf(h)>=0)return;e.push(h)}else{if(e.indexOf(h)<0)return;ps(e,h)}s(h),o=!0}}),!o)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n);let a={type:r,columns:e,column:e.length===1?e[0]:null,source:n};this.eventService.dispatchEvent(a)}setRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(t,this.rowGroupColumns,V.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),e)}setRowGroupActive(t,e,i){t!==e.isRowGroupActive()&&(e.setRowGroupActive(t,i),t&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([e],!1,i),!t&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([e],!0,i))}addRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),V.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}removeRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),V.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}addPivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!0,i=>i.setPivotActive(!0,e),V.EVENT_COLUMN_PIVOT_CHANGED,e)}setPivotColumns(t,e){this.setPrimaryColumnList(t,this.pivotColumns,V.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,s)=>{s.setPivotActive(i,e)},e)}removePivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!1,i=>i.setPivotActive(!1,e),V.EVENT_COLUMN_PIVOT_CHANGED,e)}setPrimaryColumnList(t,e,i,s,r,n){if(!this.gridColumns)return;let o=new Map;e.forEach((a,l)=>o.set(a,l)),e.length=0,Me(t)&&t.forEach(a=>{let l=this.getPrimaryColumn(a);l&&e.push(l)}),e.forEach((a,l)=>{let h=o.get(a);if(h===void 0){o.set(a,0);return}s&&h!==l||o.delete(a)}),(this.primaryColumns||[]).forEach(a=>{let l=e.indexOf(a)>=0;r(l,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n),this.dispatchColumnChangedEvent(i,[...o.keys()],n)}setValueColumns(t,e){this.setPrimaryColumnList(t,this.valueColumns,V.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),e)}setValueActive(t,e,i){if(t!==e.isValueActive()&&(e.setValueActive(t,i),t&&!e.getAggFunc()&&this.aggFuncService)){let s=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(s)}}addValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!0,this.setValueActive.bind(this,!0),V.EVENT_COLUMN_VALUE_CHANGED,e)}removeValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!1,this.setValueActive.bind(this,!1),V.EVENT_COLUMN_VALUE_CHANGED,e)}normaliseColumnWidth(t,e){let i=t.getMinWidth();Me(i)&&e<i&&(e=i);let s=t.getMaxWidth();return Me(s)&&t.isGreaterThanMax(e)&&(e=s),e}getPrimaryOrGridColumn(t){return this.getPrimaryColumn(t)||this.getGridColumn(t)}setColumnWidths(t,e,i,s){let r=[];t.forEach(n=>{let o=this.getPrimaryOrGridColumn(n.key);if(!o)return;if(r.push({width:n.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(e=!e),e){let l=this.getDisplayedColAfter(o);if(!l)return;let h=o.getActualWidth()-n.newWidth,c=l.getActualWidth()+h;r.push({width:c,ratios:[1],columns:[l]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:i,source:s})}checkMinAndMaxWidthsForSet(t){let{columns:e,width:i}=t,s=0,r=0,n=!0;e.forEach(l=>{let h=l.getMinWidth();s+=h||0;let c=l.getMaxWidth();Me(c)&&c>0?r+=c:n=!1});let o=i>=s,a=!n||i<=r;return o&&a}resizeColumnSets(t){let{resizeSets:e,finished:i,source:s}=t;if(!(!e||e.every(c=>this.checkMinAndMaxWidthsForSet(c)))){if(i){let c=e&&e.length>0?e[0].columns:null;this.dispatchColumnResizedEvent(c,i,s)}return}let n=[],o=[];e.forEach(c=>{let{width:d,columns:p,ratios:u}=c,m={},f={};p.forEach(x=>o.push(x));let g=!0,y=0;for(;g;){if(y++,y>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}g=!1;let x=[],T=0,A=d;p.forEach((M,B)=>{if(f[M.getId()])A-=m[M.getId()];else{x.push(M);let O=u[B];T+=O}});let S=1/T;x.forEach((M,B)=>{let j=B===x.length-1,O;j?O=A:(O=Math.round(u[B]*d*S),A-=O);let _=M.getMinWidth(),P=M.getMaxWidth();Me(_)&&O<_?(O=_,f[M.getId()]=!0,g=!0):Me(P)&&P>0&&O>P&&(O=P,f[M.getId()]=!0,g=!0),m[M.getId()]=O})}p.forEach(x=>{let T=m[x.getId()];x.getActualWidth()!==T&&(x.setActualWidth(T,s),n.push(x))})});let a=n.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());let h=o.concat(l);(a||i)&&this.dispatchColumnResizedEvent(h,i,s,l)}setColumnAggFunc(t,e,i){if(!t)return;let s=this.getPrimaryColumn(t);s&&(s.setAggFunc(e),this.dispatchColumnChangedEvent(V.EVENT_COLUMN_VALUE_CHANGED,[s],i))}moveRowGroupColumn(t,e,i){if(this.isRowGroupEmpty())return;let s=this.rowGroupColumns[t],r=this.rowGroupColumns.slice(t,e);this.rowGroupColumns.splice(t,1),this.rowGroupColumns.splice(e,0,s);let n={type:V.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:r,column:r.length===1?r[0]:null,source:i};this.eventService.dispatchEvent(n)}moveColumns(t,e,i,s=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),e>this.gridColumns.length-t.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+e),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}let r=this.getGridColumns(t);this.doesMovePassRules(r,e)&&(Tg(this.gridColumns,r,e),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:r,source:i,toIndex:e,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(t,e){let i=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(i)}doesOrderPassRules(t){return!(!this.doesMovePassMarryChildren(t)||!this.doesMovePassLockedPositions(t))}getProposedColumnOrder(t,e){let i=this.gridColumns.slice();return Tg(i,t,e),i}sortColumnsLikeGridColumns(t){!t||t.length<=1||t.filter(i=>this.gridColumns.indexOf(i)<0).length>0||t.sort((i,s)=>{let r=this.gridColumns.indexOf(i),n=this.gridColumns.indexOf(s);return r-n})}doesMovePassLockedPositions(t){let e=0,i=!0,s=r=>r?r===!0||r==="left"?0:2:1;return t.forEach(r=>{let n=s(r.getColDef().lockPosition);n<e&&(i=!1),e=n}),i}doesMovePassMarryChildren(t){let e=!0;return zr(null,this.gridBalancedTree,i=>{if(!(i instanceof ni))return;let s=i,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;let o=[];s.getLeafColumns().forEach(d=>{let p=t.indexOf(d);o.push(p)});let a=Math.max.apply(Math,o),l=Math.min.apply(Math,o),h=a-l,c=s.getLeafColumns().length-1;h>c&&(e=!1)}),e}moveColumnByIndex(t,e,i){if(!this.gridColumns)return;let s=this.gridColumns[t];this.moveColumns([s],e,i)}getColumnDefs(){if(!this.primaryColumns)return;let t=this.primaryColumns.slice();return this.gridColsArePrimary?t.sort((e,i)=>this.gridColumns.indexOf(e)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&t.sort((e,i)=>this.lastPrimaryOrder.indexOf(e)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(t,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){let t=this.getWidthOfColsInList(this.displayedColumnsCenter),e=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==t,this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==i){this.bodyWidth=t,this.leftWidth=e,this.rightWidth=i;let r={type:V.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(r);let n={type:V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(n)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var t;return(t=this.gridColumns)!=null?t:[]}isRowGroupEmpty(){return Ks(this.rowGroupColumns)}setColumnsVisible(t,e=!1,i){this.applyColumnState({state:t.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!e}))},i)}setColumnsPinned(t,e,i){if(!this.gridColumns)return;if(this.gos.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;e===!0||e==="left"?s="left":e==="right"?s="right":s=null,this.actionOnGridColumns(t,r=>r.getPinned()!==s?(r.setPinned(s),!0):!1,i,()=>({type:V.EVENT_COLUMN_PINNED,pinned:s,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(t,e,i,s){if(Ks(t))return;let r=[];if(t.forEach(n=>{if(!n)return;let o=this.getGridColumn(n);if(!o)return;e(o)!==!1&&r.push(o)}),!!r.length&&(this.updateDisplayedColumns(i),Me(s)&&s)){let n=s();n.columns=r,n.column=r.length===1?r[0]:null,this.eventService.dispatchEvent(n)}}getDisplayedColBefore(t){let e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i>0?e[i-1]:null}getDisplayedColAfter(t){let e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i<e.length-1?e[i+1]:null}getDisplayedGroupAtDirection(t,e){let i=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),s=t.getDisplayedLeafColumns(),r=e==="After"?St(s):s[0],n=`getDisplayedCol${e}`;for(;;){let o=this[n](r);if(!o)return null;let a=this.getColumnGroupAtLevel(o,i);if(a!==t)return a}}getColumnGroupAtLevel(t,e){let i=t.getParent(),s,r;for(;s=i.getProvidedColumnGroup().getLevel(),r=i.getPaddingLevel(),!(s+r<=e);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(t){let e=t.isRowGroupActive()?this.rowGroupColumns.indexOf(t):null,i=t.isPivotActive()?this.pivotColumns.indexOf(t):null,s=t.isValueActive()?t.getAggFunc():null,r=t.getSort()!=null?t.getSort():null,n=t.getSortIndex()!=null?t.getSortIndex():null,o=t.getFlex()!=null&&t.getFlex()>0?t.getFlex():null;return{colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:r,sortIndex:n,aggFunc:s,rowGroup:t.isRowGroupActive(),rowGroupIndex:e,pivot:t.isPivotActive(),pivotIndex:i,flex:o}}getColumnState(){if(rt(this.primaryColumns)||!this.isAlive())return[];let e=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e}orderColumnStateList(t){let e=wn(this.gridColumns.map((i,s)=>[i.getColId(),s]));t.sort((i,s)=>{let r=e.has(i.colId)?e.get(i.colId):-1,n=e.has(s.colId)?e.get(s.colId):-1;return r-n})}resetColumnState(t){if(Ks(this.primaryColumns))return;let e=this.getColumnsFromTree(this.primaryColumnTree),i=[],s=1e3,r=1e3,n=[];this.groupAutoColumns&&(n=n.concat(this.groupAutoColumns)),e&&(n=n.concat(e)),n.forEach(o=>{let a=this.getColumnStateFromColDef(o);rt(a.rowGroupIndex)&&a.rowGroup&&(a.rowGroupIndex=s++),rt(a.pivotIndex)&&a.pivot&&(a.pivotIndex=r++),i.push(a)}),this.applyColumnState({state:i,applyOrder:!0},t)}getColumnStateFromColDef(t){let e=(m,f)=>m??f??null,i=t.getColDef(),s=e(i.sort,i.initialSort),r=e(i.sortIndex,i.initialSortIndex),n=e(i.hide,i.initialHide),o=e(i.pinned,i.initialPinned),a=e(i.width,i.initialWidth),l=e(i.flex,i.initialFlex),h=e(i.rowGroupIndex,i.initialRowGroupIndex),c=e(i.rowGroup,i.initialRowGroup);h==null&&(c==null||c==!1)&&(h=null,c=null);let d=e(i.pivotIndex,i.initialPivotIndex),p=e(i.pivot,i.initialPivot);d==null&&(p==null||p==!1)&&(d=null,p=null);let u=e(i.aggFunc,i.initialAggFunc);return{colId:t.getColId(),sort:s,sortIndex:r,hide:n,pinned:o,width:a,flex:l,rowGroup:c,rowGroupIndex:h,pivot:p,pivotIndex:d,aggFunc:u}}applyColumnState(t,e){if(Ks(this.primaryColumns))return!1;if(t&&t.state&&!t.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=(n,o,a)=>{let l=this.compareColumnStatesAndDispatchEvents(e);this.autoGroupsNeedBuilding=!0;let h=o.slice(),c={},d={},p=[],u=[],m=0,f=this.rowGroupColumns.slice(),g=this.pivotColumns.slice();n.forEach(A=>{let S=A.colId||"";if(S.startsWith(Fa)){p.push(A),u.push(A);return}let B=a(S);B?(this.syncColumnWithStateItem(B,A,t.defaultState,c,d,!1,e),ps(h,B)):(u.push(A),m+=1)});let y=A=>this.syncColumnWithStateItem(A,null,t.defaultState,c,d,!1,e);h.forEach(y);let x=(A,S,M,B)=>{let j=A[M.getId()],O=A[B.getId()],_=j!=null,P=O!=null;if(_&&P)return j-O;if(_)return-1;if(P)return 1;let R=S.indexOf(M),v=S.indexOf(B),C=R>=0,D=v>=0;return C&&D?R-v:C?-1:1};this.rowGroupColumns.sort(x.bind(this,c,f)),this.pivotColumns.sort(x.bind(this,d,g)),this.updateGridColumns();let T=this.groupAutoColumns?this.groupAutoColumns.slice():[];return p.forEach(A=>{let S=this.getAutoColumn(A.colId);ps(T,S),this.syncColumnWithStateItem(S,A,t.defaultState,null,null,!0,e)}),T.forEach(y),this.applyOrderAfterApplyState(t),this.updateDisplayedColumns(e),this.dispatchEverythingChanged(e),l(),{unmatchedAndAutoStates:u,unmatchedCount:m}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:r}=i(t.state||[],this.primaryColumns||[],n=>this.getPrimaryColumn(n));return(s.length>0||Me(t.defaultState))&&(r=i(s,this.secondaryColumns||[],n=>this.getSecondaryColumn(n)).unmatchedCount),this.columnAnimationService.finish(),r===0}applyOrderAfterApplyState(t){if(!t.applyOrder||!t.state)return;let e=[],i={};t.state.forEach(r=>{if(!r.colId||i[r.colId])return;let n=this.gridColumnsMap[r.colId];n&&(e.push(n),i[r.colId]=!0)});let s=0;if(this.gridColumns.forEach(r=>{let n=r.getColId();if(i[n]!=null)return;n.startsWith(Fa)?yh(e,r,s++):e.push(r)}),e=this.placeLockedColumns(e),!this.doesMovePassMarryChildren(e)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=e}compareColumnStatesAndDispatchEvents(t){let e={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),s={};return i.forEach(r=>{s[r.colId]=r}),()=>{let r=this.getPrimaryAndSecondaryAndAutoColumns(),n=(f,g,y,x)=>{let T=g.map(x),A=y.map(x);if(Rr(T,A))return;let M=new Set(g);y.forEach(O=>{M.delete(O)||M.add(O)});let B=[...M],j={type:f,columns:B,column:B.length===1?B[0]:null,source:t};this.eventService.dispatchEvent(j)},o=f=>{let g=[];return r.forEach(y=>{let x=s[y.getColId()];x&&f(x,y)&&g.push(y)}),g},a=f=>f.getColId();n(V.EVENT_COLUMN_ROW_GROUP_CHANGED,e.rowGroupColumns,this.rowGroupColumns,a),n(V.EVENT_COLUMN_PIVOT_CHANGED,e.pivotColumns,this.pivotColumns,a);let h=o((f,g)=>{let y=f.aggFunc!=null,x=y!=g.isValueActive(),T=y&&f.aggFunc!=g.getAggFunc();return x||T});h.length>0&&this.dispatchColumnChangedEvent(V.EVENT_COLUMN_VALUE_CHANGED,h,t);let c=(f,g)=>f.width!=g.getActualWidth();this.dispatchColumnResizedEvent(o(c),!0,t);let d=(f,g)=>f.pinned!=g.getPinned();this.dispatchColumnPinnedEvent(o(d),t);let p=(f,g)=>f.hide==g.isVisible();this.dispatchColumnVisibleEvent(o(p),t);let m=o((f,g)=>f.sort!=g.getSort()||f.sortIndex!=g.getSortIndex());m.length>0&&this.sortController.dispatchSortChangedEvents(t,m),this.normaliseColumnMovedEventForColumnState(i,t)}}getCommonValue(t,e){if(!t||t.length==0)return;let i=e(t[0]);for(let s=1;s<t.length;s++)if(i!==e(t[s]))return;return i}normaliseColumnMovedEventForColumnState(t,e){let i=this.getColumnState(),s={};i.forEach(l=>s[l.colId]=l);let r={};t.forEach(l=>{s[l.colId]&&(r[l.colId]=!0)});let n=t.filter(l=>r[l.colId]),o=i.filter(l=>r[l.colId]),a=[];o.forEach((l,h)=>{let c=n&&n[h];if(c&&c.colId!==l.colId){let d=this.getGridColumn(c.colId);d&&a.push(d)}}),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:e,finished:!0})}syncColumnWithStateItem(t,e,i,s,r,n,o){var a;if(!t)return;let l=(A,S)=>{let M={value1:void 0,value2:void 0},B=!1;return e&&(e[A]!==void 0&&(M.value1=e[A],B=!0),Me(S)&&e[S]!==void 0&&(M.value2=e[S],B=!0)),!B&&i&&(i[A]!==void 0&&(M.value1=i[A]),Me(S)&&i[S]!==void 0&&(M.value2=i[S])),M},h=l("hide").value1;h!==void 0&&t.setVisible(!h,o);let c=l("pinned").value1;c!==void 0&&t.setPinned(c);let d=(a=t.getColDef().minWidth)!=null?a:this.environment.getMinColWidth(),p=l("flex").value1;if(p!==void 0&&t.setFlex(p),p==null){let A=l("width").value1;A!=null&&d!=null&&A>=d&&t.setActualWidth(A,o)}let u=l("sort").value1;u!==void 0&&(u==="desc"||u==="asc"?t.setSort(u,o):t.setSort(void 0,o));let m=l("sortIndex").value1;if(m!==void 0&&t.setSortIndex(m),n||!t.isPrimary())return;let f=l("aggFunc").value1;f!==void 0&&(typeof f=="string"?(t.setAggFunc(f),t.isValueActive()||(t.setValueActive(!0,o),this.valueColumns.push(t))):(Me(f)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,o),ps(this.valueColumns,t))));let{value1:g,value2:y}=l("rowGroup","rowGroupIndex");(g!==void 0||y!==void 0)&&(typeof y=="number"||g?(t.isRowGroupActive()||(t.setRowGroupActive(!0,o),this.rowGroupColumns.push(t)),s&&typeof y=="number"&&(s[t.getId()]=y)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,o),ps(this.rowGroupColumns,t)));let{value1:x,value2:T}=l("pivot","pivotIndex");(x!==void 0||T!==void 0)&&(typeof T=="number"||x?(t.isPivotActive()||(t.setPivotActive(!0,o),this.pivotColumns.push(t)),r&&typeof T=="number"&&(r[t.getId()]=T)):t.isPivotActive()&&(t.setPivotActive(!1,o),ps(this.pivotColumns,t)))}getGridColumns(t){return this.getColumns(t,this.getGridColumn.bind(this))}getColumns(t,e){let i=[];return t&&t.forEach(s=>{let r=e(s);r&&i.push(r)}),i}getColumnWithValidation(t){if(t==null)return null;let e=this.getGridColumn(t);return e||console.warn("AG Grid: could not find column "+t),e}getPrimaryColumn(t){return this.primaryColumns?this.getColumn(t,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(t){return this.getColumn(t,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(t){return this.gridColumnsMap[t]}getSecondaryColumn(t){return this.secondaryColumns?this.getColumn(t,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(t,e,i){if(!t||!i)return null;if(typeof t=="string"&&i[t])return i[t];for(let s=0;s<e.length;s++)if(this.columnsMatch(e[s],t))return e[s];return this.getAutoColumn(t)}getSourceColumnsForGroupColumn(t){let e=t.getColDef().showRowGroup;if(!e)return null;if(e===!0)return this.rowGroupColumns.slice(0);let i=this.getPrimaryColumn(e);return i?[i]:null}getAutoColumn(t){return!this.groupAutoColumns||!Me(this.groupAutoColumns)||rt(this.groupAutoColumns)?null:this.groupAutoColumns.find(e=>this.columnsMatch(e,t))||null}columnsMatch(t,e){let i=t===e,s=t.getColDef()===e,r=t.getColId()==e;return i||s||r}getDisplayNameForColumn(t,e,i=!1){if(!t)return null;let s=this.getHeaderName(t.getColDef(),t,null,null,e);return i?this.wrapHeaderNameWithAggFunc(t,s):s}getDisplayNameForProvidedColumnGroup(t,e,i){let s=e?e.getColGroupDef():null;return s?this.getHeaderName(s,null,t,e,i):null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,i,s,r){let n=t.headerValueGetter;if(n){let o=this.gos.addGridCommonParams({colDef:t,column:e,columnGroup:i,providedColumnGroup:s,location:r});return typeof n=="function"?n(o):typeof n=="string"?this.expressionService.evaluate(n,o):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(t.headerName!=null)return t.headerName;if(t.field)return Oy(t.field)}return""}wrapHeaderNameWithAggFunc(t,e){if(this.gos.get("suppressAggFuncInHeader"))return e;let i=t.getColDef().pivotValueColumn,s=Me(i),r=null,n;if(s){let o=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,a=t.getColDef().pivotTotalColumnIds!==void 0;if(o&&!a)return e;r=i?i.getAggFunc():null,n=!0}else{let o=t.isValueActive(),a=this.pivotMode||!this.isRowGroupEmpty();o&&a?(r=t.getAggFunc(),n=!0):n=!1}if(n){let o=typeof r=="string"?r:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${e})`}return e}getColumnGroup(t,e){if(!t)return null;if(t instanceof yi)return t;let i=this.getAllDisplayedTrees(),s=typeof e=="number",r=null;return ro(i,!1,n=>{if(n instanceof yi){let o=n,a;s?a=t===o.getGroupId()&&e===o.getPartId():a=t===o.getGroupId(),a&&(r=o)}}),r}isReady(){return this.ready}extractValueColumns(t,e){this.valueColumns=this.extractColumns(e,this.valueColumns,(i,s)=>i.setValueActive(s,t),()=>{},()=>{},i=>{let s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{let s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupColumns(t,e){this.rowGroupColumns=this.extractColumns(e,this.rowGroupColumns,(i,s)=>i.setRowGroupActive(s,t),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(t=[],e=[],i,s,r,n,o){let a=[],l=[];(this.primaryColumns||[]).forEach(d=>{let p=t.indexOf(d)<0,u=d.getColDef(),m=Gd(n(u)),f=Gd(o(u)),g=xn(s(u)),y=xn(r(u)),x;m!==void 0?x=m:g!==void 0?g===null?x=!1:x=g>=0:p?f!==void 0?x=f:y!==void 0?x=y!=null&&y>=0:x=!1:x=e.indexOf(d)>=0,x&&((p?g!=null||y!=null:g!=null)?a.push(d):l.push(d))});let h=d=>{let p=s(d.getColDef()),u=r(d.getColDef());return p??u};a.sort((d,p)=>{let u=h(d),m=h(p);return u===m?0:u<m?-1:1});let c=[].concat(a);return e.forEach(d=>{l.indexOf(d)>=0&&c.push(d)}),l.forEach(d=>{c.indexOf(d)<0&&c.push(d)}),e.forEach(d=>{c.indexOf(d)<0&&i(d,!1)}),c.forEach(d=>{e.indexOf(d)<0&&i(d,!0)}),c}extractPivotColumns(t,e){this.pivotColumns=this.extractColumns(e,this.pivotColumns,(i,s)=>i.setPivotActive(s,t),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(t){if(!this.primaryColumnTree)return;let e=[];zr(null,this.primaryColumnTree,i=>{if(i instanceof ni){let s=i.getColGroupDef(),r={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};e.push(r)}}),this.setColumnGroupState(e,t)}getColumnGroupState(){let t=[];return zr(null,this.gridBalancedTree,e=>{e instanceof ni&&t.push({groupId:e.getGroupId(),open:e.isExpanded()})}),t}setColumnGroupState(t,e){if(!this.gridBalancedTree)return;this.columnAnimationService.start();let i=[];if(t.forEach(s=>{let r=s.groupId,n=s.open,o=this.getProvidedColumnGroup(r);o&&o.isExpanded()!==n&&(this.logger.log("columnGroupOpened("+o.getGroupId()+","+n+")"),o.setExpanded(n),i.push(o))}),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e),i.length){let s={type:V.EVENT_COLUMN_GROUP_OPENED,columnGroup:ni.length===1?i[0]:void 0,columnGroups:i};this.eventService.dispatchEvent(s)}this.columnAnimationService.finish()}setColumnGroupOpened(t,e,i){let s;t instanceof ni?s=t.getId():s=t||"",this.setColumnGroupState([{groupId:s,open:e}],i)}getProvidedColumnGroup(t){typeof t!="string"&&console.error("AG Grid: group key must be a string");let e=null;return zr(null,this.gridBalancedTree,i=>{i instanceof ni&&i.getId()===t&&(e=i)}),e}calculateColumnsForDisplay(){let t;return this.pivotMode&&rt(this.secondaryColumns)?t=this.gridColumns.filter(e=>{let i=this.groupAutoColumns&&Ls(this.groupAutoColumns,e),s=this.valueColumns&&Ls(this.valueColumns,e);return i||s}):t=this.gridColumns.filter(e=>this.groupAutoColumns&&Ls(this.groupAutoColumns,e)||e.isVisible()),t}checkColSpanActiveInCols(t){let e=!1;return t.forEach(i=>{Me(i.getColDef().colSpan)&&(e=!0)}),e}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};let t=e=>{let i=e.getColDef(),s=i.showRowGroup;i&&Me(s)&&(this.groupDisplayColumns.push(e),typeof s=="string"?this.groupDisplayColumnsMap[s]=e:s===!0&&this.getRowGroupColumns().forEach(r=>{this.groupDisplayColumnsMap[r.getId()]=e}))};this.gridColumns.forEach(t)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(t){return this.groupDisplayColumnsMap[t]}updateDisplayedColumns(t){let e=this.calculateColumnsForDisplay();this.buildDisplayedTrees(e),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t)}isSecondaryColumnsPresent(){return Me(this.secondaryColumns)}setSecondaryColumns(t,e){if(!this.gridColumns)return;let i=t;if(!(!i&&rt(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(t);let s=this.columnFactory.createColumnTree(t,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,e);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(r=>this.secondaryColumnsMap[r.getId()]=r),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(e)}}processSecondaryColumnDefinitions(t){let e=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!e&&!i)return;let s=r=>{r.forEach(n=>{if(Me(n.children)){let a=n;i&&i(a),s(a.children)}else e&&e(n)})};t&&s(t)}updateGridColumns(){let t=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){let s=wn(this.groupAutoColumns.map(r=>[r,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(r=>!s.has(r)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(r=>!s.has(r)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let i;if(this.secondaryColumns&&this.secondaryBalancedTree){let s=this.secondaryColumns.some(r=>this.gridColumnsMap[r.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,s&&(i=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,i=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(i),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(s=>this.gridColumnsMap[s.getId()]=s),this.setAutoHeightActive(),!Rr(t,this.gridBalancedTree)){let s={type:V.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(s)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(t=>t.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||et("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(t){if(rt(t))return;let e=wn(t.map((l,h)=>[l,h])),i=!0;if(this.gridColumns.forEach(l=>{e.has(l)&&(i=!1)}),i)return;let s=wn(this.gridColumns.map(l=>[l,!0])),r=t.filter(l=>s.has(l)),n=wn(r.map(l=>[l,!0])),o=this.gridColumns.filter(l=>!n.has(l)),a=r.slice();o.forEach(l=>{let h=l.getOriginalParent();if(!h){a.push(l);return}let c=[];for(;!c.length&&h;)h.getLeafColumns().forEach(m=>{let f=a.indexOf(m)>=0,g=c.indexOf(m)<0;f&&g&&c.push(m)}),h=h.getOriginalParent();if(!c.length){a.push(l);return}let d=c.map(u=>a.indexOf(u)),p=Math.max(...d);yh(a,l,p+1)}),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var t;let e=(t=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)!=null?t:[];this.groupAutoColumns&&(e=e.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?e:e.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(t){let e=[],i=[],s=[];return t.forEach(r=>{let n=r.getColDef().lockPosition;n==="right"?s.push(r):n==="left"||n===!0?e.push(r):i.push(r)}),[...e,...i,...s]}addAutoGroupToGridColumns(){if(rt(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;let t=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,t),this.groupAutoColsBalancedTree=t,this.gridBalancedTree=t.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(t){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(t),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();let e={type:V.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)}deriveDisplayedColumns(t){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(t),this.displayedAutoHeightCols=this.displayedColumns.filter(e=>e.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){let t=this.getAllGridColumns(),e=[],i=[],s=[];for(let r of t){let n=r.getPinned();n?n===!0||n==="left"?e.push(r):s.push(r):i.push(r)}this.ariaOrderColumns=e.concat(i).concat(s)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(t){this.setLeftValuesOfColumns(t),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(t){if(!this.primaryColumns)return;let e=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),i=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(s=>{if(i){let r=this.getWidthOfColsInList(s);s.forEach(n=>{r-=n.getActualWidth(),n.setLeft(r,t)})}else{let r=0;s.forEach(n=>{n.setLeft(r,t),r+=n.getActualWidth()})}by(e,s)}),e.forEach(s=>{s.setLeft(null,t)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(t=>{t.forEach(e=>{e instanceof yi&&e.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(t,e){e.length=0,ro(t,!0,i=>{i instanceof Pt&&e.push(i)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(t,e){let i;switch(t){case"left":i=this.viewportRowLeft[e];break;case"right":i=this.viewportRowRight[e];break;default:i=this.viewportRowCenter[e];break}return rt(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};let t={};this.headerViewportColumns.forEach(i=>t[i.getId()]=!0);let e=(i,s,r)=>{let n=!1;for(let o=0;o<i.length;o++){let a=i[o],l=!1;if(a instanceof Pt)l=t[a.getId()]===!0;else{let c=a.getDisplayedChildren();c&&(l=e(c,s,r+1))}l&&(n=!0,s[r]||(s[r]=[]),s[r].push(a))}return n};e(this.displayedTreeLeft,this.viewportRowLeft,0),e(this.displayedTreeRight,this.viewportRowRight,0),e(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){let t=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();let e=this.viewportColumns.map(t).join("#"),i=this.viewportColumnsHash!==e;return i&&(this.viewportColumnsHash=e,this.calculateHeaderRows()),i}refreshFlexedColumns(t={}){var e;let i=t.source?t.source:"flex";if(t.viewportWidth!=null&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];let s=-1;if(t.resizingCols){let p=new Set(t.resizingCols),u=this.displayedColumnsCenter;for(let m=u.length-1;m>=0;m--)if(p.has(u[m])){s=m;break}}let r=0,n=[],o=0,a=0;for(let p=0;p<this.displayedColumnsCenter.length;p++)this.displayedColumnsCenter[p].getFlex()&&p>s?(n.push(this.displayedColumnsCenter[p]),a+=this.displayedColumnsCenter[p].getFlex(),o+=(e=this.displayedColumnsCenter[p].getMinWidth())!=null?e:0):r+=this.displayedColumnsCenter[p].getActualWidth();if(!n.length)return[];let l=[];r+o>this.flexViewportWidth&&(n.forEach(p=>{var u;return p.setActualWidth((u=p.getMinWidth())!=null?u:0,i)}),l=n,n=[]);let h=[],c;e:for(;;){c=this.flexViewportWidth-r;let p=c/a;for(let u=0;u<n.length;u++){let m=n[u],f=p*m.getFlex(),g=0,y=m.getMinWidth(),x=m.getMaxWidth();if(Me(y)&&f<y?g=y:Me(x)&&f>x&&(g=x),g){m.setActualWidth(g,i),Jg(n,m),a-=m.getFlex(),l.push(m),r+=m.getActualWidth();continue e}h[u]=Math.round(f)}break}let d=c;return n.forEach((p,u)=>{p.setActualWidth(Math.min(h[u],d),i),l.push(p),d-=h[u]}),t.skipSetLeft||this.setLeftValues(i),t.updateBodyWidths&&this.updateBodyWidths(),t.fireResizedEvent&&this.dispatchColumnResizedEvent(l,!0,i,n),n}sizeColumnsToFit(t,e="sizeColumnsToFit",i,s){var r,n,o,a,l;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(t,e,i,s));return}let h={};s&&((r=s?.columnLimits)==null||r.forEach(y=>{var x=y,{key:T}=x,A=fA(x,["key"]);h[typeof T=="string"?T:T.getColId()]=A}));let c=this.getAllDisplayedColumns(),d=t===this.getWidthOfColsInList(c);if(t<=0||!c.length||d)return;let p=[],u=[];c.forEach(y=>{y.getColDef().suppressSizeToFit===!0?u.push(y):p.push(y)});let m=p.slice(0),f=!1,g=y=>{ps(p,y),u.push(y)};for(p.forEach(y=>{var x,T;y.resetActualWidth(e);let A=h?.[y.getId()],S=(x=A?.minWidth)!=null?x:s?.defaultMinWidth,M=(T=A?.maxWidth)!=null?T:s?.defaultMaxWidth,B=y.getActualWidth();typeof S=="number"&&B<S?y.setActualWidth(S,e,!0):typeof M=="number"&&B>M&&y.setActualWidth(M,e,!0)});!f;){f=!0;let y=t-this.getWidthOfColsInList(u);if(y<=0)p.forEach(x=>{var T,A;let S=(A=(T=h?.[x.getId()])==null?void 0:T.minWidth)!=null?A:s?.defaultMinWidth;if(typeof S=="number"){x.setActualWidth(S,e,!0);return}x.setMinimum(e)});else{let x=y/this.getWidthOfColsInList(p),T=y;for(let A=p.length-1;A>=0;A--){let S=p[A],M=h?.[S.getId()],B=(n=M?.minWidth)!=null?n:s?.defaultMinWidth,j=(o=M?.maxWidth)!=null?o:s?.defaultMaxWidth,O=(a=S.getMinWidth())!=null?a:0,_=(l=S.getMaxWidth())!=null?l:Number.MAX_VALUE,P=typeof B=="number"&&B>O?B:S.getMinWidth(),R=typeof j=="number"&&j<_?j:S.getMaxWidth(),v=Math.round(S.getActualWidth()*x);Me(P)&&v<P?(v=P,g(S),f=!1):Me(R)&&v>R?(v=R,g(S),f=!1):A===0&&(v=T),S.setActualWidth(v,e,!0),T-=v}}}m.forEach(y=>{y.fireColumnWidthChangedEvent(e)}),this.setLeftValues(e),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(m,!0,e)}buildDisplayedTrees(t){let e=[],i=[],s=[];t.forEach(n=>{switch(n.getPinned()){case"left":e.push(n);break;case"right":i.push(n);break;default:s.push(n);break}});let r=new My;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(e,r,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,r,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(s,r,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};let t=e=>{this.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};ro(this.displayedTreeCentre,!1,t),ro(this.displayedTreeLeft,!1,t),ro(this.displayedTreeRight,!1,t)}isDisplayed(t){return this.displayedColumnsAndGroupsMap[t.getUniqueId()]===t}updateOpenClosedVisibilityInColumnGroups(){let t=this.getAllDisplayedTrees();ro(t,!1,e=>{e instanceof yi&&e.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){let t=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;let e=this.gos.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!i&&!e){let n=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(n,this.groupAutoColumns)||t)return this.groupAutoColumns=n,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}autoColsEqual(t,e){return Rr(t,e,(i,s)=>i.getColId()===s.getColId())}getWidthOfColsInList(t){return t.reduce((e,i)=>e+i.getActualWidth(),0)}getFirstDisplayedColumn(){let t=this.gos.get("enableRtl"),e=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];t&&e.reverse();for(let i=0;i<e.length;i++){let s=this[e[i]]();if(s.length)return t?St(s):s[0]}return null}setColumnHeaderHeight(t,e){if(t.setAutoHeaderHeight(e)){let s={type:V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:t,columns:[t],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(s)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let t=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),e=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(t,...e)}getHeaderHeight(){var t;return(t=this.gos.get("headerHeight"))!=null?t:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var t;return(t=this.gos.get("floatingFiltersHeight"))!=null?t:this.getHeaderHeight()}getGroupHeaderHeight(){var t;return(t=this.gos.get("groupHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotHeaderHeight(){var t;return(t=this.gos.get("pivotHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var t;return(t=this.gos.get("pivotGroupHeaderHeight"))!=null?t:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(t=>t()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(t,e){let i=t.getUserProvidedColDef();if(!i)return!1;let s=this.columnFactory.addColumnDefaultAndTypes(i,t.getColId());return t.setColDef(s,i,e),!0}isColumnGroupingLocked(t){let e=this.gos.get("groupLockGroupColumns");if(!t.isRowGroupActive()||e===0)return!1;if(e===-1)return!0;let i=this.rowGroupColumns.findIndex(s=>s.getColId()===t.getColId());return e>i}generateColumnStateForRowGroupAndPivotIndexes(t,e){let i={},s=(r,n,o,a,l,h)=>{if(!n.length||!this.primaryColumns)return[];let c=Object.keys(r),d=new Set(c),p=new Set(c),u=new Set(n.map(S=>{let M=S.getColId();return p.delete(M),M}).concat(c)),m=[],f={},g=0;for(let S=0;S<this.primaryColumns.length;S++){let M=this.primaryColumns[S].getColId();u.has(M)&&(m.push(M),f[M]=g++)}let y=1e3,x=!1,T=0,A=S=>{let M=f[S];for(let B=T;B<M;B++){let j=m[B];p.has(j)&&(r[j][l]=y++,p.delete(j))}T=M};n.forEach(S=>{let M=S.getColId();if(d.has(M))A(M),r[M][l]=y++;else{let B=S.getColDef();(B[l]===null||B[l]===void 0&&B[h]==null)&&(x||(B[o]||B[o]===void 0&&B[a]?A(M):(p.forEach(_=>{r[_][l]=y+f[_]}),y+=m.length,x=!0)),i[M]||(i[M]={colId:M}),i[M][l]=y++)}})};return s(t,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(e,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}onColumnsReady(){let t=this.gos.get("autoSizeStrategy");if(!t)return;let{type:e}=t;setTimeout(()=>{if(e==="fitGridWidth"){let{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:r}=t,n=i?.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:r,columnLimits:n})}else e==="fitProvidedWidth"&&this.sizeColumnsToFit(t.width,"sizeColumnsToFit")})}onFirstDataRendered(){let t=this.gos.get("autoSizeStrategy");if(t?.type!=="fitCellContents")return;let{colIds:e,skipHeader:i}=t;setTimeout(()=>{e?this.autoSizeColumns({columns:e,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)})}};w([Q("expressionService")],Ti.prototype,"expressionService",2);w([Q("columnFactory")],Ti.prototype,"columnFactory",2);w([Q("displayedGroupCreator")],Ti.prototype,"displayedGroupCreator",2);w([Q("ctrlsService")],Ti.prototype,"ctrlsService",2);w([Q("autoWidthCalculator")],Ti.prototype,"autoWidthCalculator",2);w([Q("columnAnimationService")],Ti.prototype,"columnAnimationService",2);w([Q("autoGroupColService")],Ti.prototype,"autoGroupColService",2);w([Q("valueCache")],Ti.prototype,"valueCache",2);w([Q("animationFrameService")],Ti.prototype,"animationFrameService",2);w([Q("sortController")],Ti.prototype,"sortController",2);w([Q("columnDefFactory")],Ti.prototype,"columnDefFactory",2);w([_t("aggFuncService")],Ti.prototype,"aggFuncService",2);w([ke],Ti.prototype,"init",1);w([ts],Ti.prototype,"destroyColumns",1);w([lr(0,Xs("loggerFactory"))],Ti.prototype,"setBeans",1);Ti=w([Ye("columnModel")],Ti);function ba(t){return t==="gridOptionsUpdated"?"gridOptionsChanged":t}function ro(t,e,i){if(t)for(let s=0;s<t.length;s++){let r=t[s];if(r instanceof yi){let n=e?r.getDisplayedChildren():r.getChildren();ro(n,e,i)}i(r)}}var Rg=class extends Ie{createDisplayedGroups(t,e,i,s){let r=this.mapOldGroupsById(s),n=[],o=t;for(;o.length;){let a=o;o=[];let l=0,h=c=>{let d=l;l=c;let p=a[d],m=(p instanceof yi?p.getProvidedColumnGroup():p).getOriginalParent();if(m==null){for(let g=d;g<c;g++)n.push(a[g]);return}let f=this.createColumnGroup(m,e,r,i);for(let g=d;g<c;g++)f.addChild(a[g]);o.push(f)};for(let c=1;c<a.length;c++){let d=a[c],u=(d instanceof yi?d.getProvidedColumnGroup():d).getOriginalParent(),m=a[l],g=(m instanceof yi?m.getProvidedColumnGroup():m).getOriginalParent();u!==g&&h(c)}l<a.length&&h(a.length)}return this.setupParentsIntoColumns(n,null),n}createColumnGroup(t,e,i,s){let r=t.getGroupId(),n=e.getInstanceIdForKey(r),o=yi.createUniqueId(r,n),a=i[o];return a&&a.getProvidedColumnGroup()!==t&&(a=null),Me(a)?a.reset():(a=new yi(t,r,n,s),this.context.createBean(a)),a}mapOldGroupsById(t){let e={},i=s=>{s.forEach(r=>{if(r instanceof yi){let n=r;e[r.getUniqueId()]=n,i(n.getChildren())}})};return t&&i(t),e}setupParentsIntoColumns(t,e){t.forEach(i=>{if(i.setParent(e),i instanceof yi){let s=i;this.setupParentsIntoColumns(s.getChildren(),s)}})}};Rg=w([Ye("displayedGroupCreator")],Rg);var LA={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},ui=class{};ui.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];ui.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];ui.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];ui.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];ui.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"];ui.OTHER_PROPERTIES=["suppressStickyTotalRow"];ui.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];ui.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];ui.FUNCTION_PROPERTIES=[...ui.FUNCTIONAL_PROPERTIES,...ui.CALLBACK_PROPERTIES];ui.ALL_PROPERTIES=[...ui.ARRAY_PROPERTIES,...ui.OBJECT_PROPERTIES,...ui.STRING_PROPERTIES,...ui.NUMBER_PROPERTIES,...ui.FUNCTION_PROPERTIES,...ui.BOOLEAN_PROPERTIES,...ui.OTHER_PROPERTIES];var Sh=ui,Li=class Md{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(e,i){typeof e!="object"&&(e={});let s=Qe({},e);return Md.getGridOptionKeys().forEach(n=>{let o=i[n];typeof o<"u"&&o!==Md.VUE_OMITTED_PROPERTY&&(s[n]=o)}),s}static processOnChange(e,i,s){if(!e)return;let r={},n=!1;if(Object.keys(e).filter(a=>Md.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{r[a]=e[a],n=!0}),!n)return;i.__internalUpdateGridOptions(r,!0);let o={type:V.EVENT_COMPONENT_STATE_CHANGED};Ui(r,(a,l)=>{o[a]=l}),i.dispatchEvent(o)}};Li.EVENTS=lo(V);Li.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Li.EXCLUDED_INTERNAL_EVENTS=[V.EVENT_SCROLLBAR_WIDTH_CHANGED,V.EVENT_CHECKBOX_CHANGED,V.EVENT_HEIGHT_SCALE_CHANGED,V.EVENT_BODY_HEIGHT_CHANGED,V.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,V.EVENT_SCROLL_VISIBILITY_CHANGED,V.EVENT_COLUMN_HOVER_CHANGED,V.EVENT_FLASH_CELLS,V.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,V.EVENT_DISPLAYED_ROWS_CHANGED,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,V.EVENT_STORE_UPDATED,V.EVENT_COLUMN_PANEL_ITEM_DRAG_START,V.EVENT_COLUMN_PANEL_ITEM_DRAG_END,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,V.EVENT_FULL_WIDTH_ROW_FOCUSED,V.EVENT_HEADER_HEIGHT_CHANGED,V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,V.EVENT_CELL_FOCUS_CLEARED,V.EVENT_GRID_STYLES_CHANGED,V.EVENT_FILTER_DESTROYED,V.EVENT_ROW_DATA_UPDATE_STARTED,V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,V.EVENT_DATA_TYPES_INFERRED,V.EVENT_FIELD_VALUE_CHANGED,V.EVENT_FIELD_PICKER_VALUE_SELECTED,V.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,V.EVENT_SUPPRESS_MENU_HIDE_CHANGED,V.EVENT_SUPPRESS_FIELD_DOT_NOTATION,V.EVENT_ROW_COUNT_READY,V.EVENT_SIDE_BAR_UPDATED];Li.PUBLIC_EVENTS=Li.EVENTS.filter(t=>!Ls(Li.EXCLUDED_INTERNAL_EVENTS,t));Li.EVENT_CALLBACKS=Li.EVENTS.map(t=>Li.getCallbackForEvent(t));Li.BOOLEAN_PROPERTIES=Sh.BOOLEAN_PROPERTIES;Li.ALL_PROPERTIES=Sh.ALL_PROPERTIES;Li.ALL_PROPERTIES_AND_CALLBACKS=[...Li.ALL_PROPERTIES,...Li.EVENT_CALLBACKS];Li.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Li.ALL_PROPERTIES_AND_CALLBACKS);var jh=Li,Dg=class extends Ie{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(t){t&&t.forEach(e=>this.addComponent(e))}addComponent(t){let i=t.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=t.componentClass}getComponentClass(t){return this.componentsMappedByName[t]}};Dg=w([Ye("agStackComponentsRegistry")],Dg);var Ny={};Ai(Ny,{getAriaCheckboxStateName:()=>hu,getAriaLabel:()=>Hy,getAriaLevel:()=>kA,getAriaPosInSet:()=>By,getAriaSortState:()=>Vy,removeAriaExpanded:()=>jy,removeAriaSort:()=>Zy,setAriaActiveDescendant:()=>rm,setAriaAtomic:()=>Wy,setAriaChecked:()=>GA,setAriaColCount:()=>Xy,setAriaColIndex:()=>om,setAriaColSpan:()=>Yy,setAriaControls:()=>am,setAriaDescribedBy:()=>NA,setAriaDisabled:()=>sm,setAriaExpanded:()=>$r,setAriaHidden:()=>$h,setAriaLabel:()=>ks,setAriaLabelledBy:()=>Pa,setAriaLevel:()=>zy,setAriaLive:()=>im,setAriaMultiSelectable:()=>$y,setAriaPosInSet:()=>lu,setAriaRelevant:()=>Uy,setAriaRole:()=>qt,setAriaRowCount:()=>Ky,setAriaRowIndex:()=>nm,setAriaSelected:()=>Ma,setAriaSetSize:()=>au,setAriaSort:()=>qy});function Js(t,e,i){i==null||typeof i=="string"&&i==""?tm(t,e):er(t,e,i)}function er(t,e,i){t.setAttribute(Gy(e),i.toString())}function tm(t,e){t.removeAttribute(Gy(e))}function Gy(t){return`aria-${t}`}function qt(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function Vy(t){let e;return t==="asc"?e="ascending":t==="desc"?e="descending":t==="mixed"?e="other":e="none",e}function kA(t){return parseInt(t.getAttribute("aria-level"),10)}function By(t){return parseInt(t.getAttribute("aria-posinset"),10)}function Hy(t){return t.getAttribute("aria-label")}function ks(t,e){Js(t,"label",e)}function Pa(t,e){Js(t,"labelledby",e)}function NA(t,e){Js(t,"describedby",e)}function im(t,e){Js(t,"live",e)}function Wy(t,e){Js(t,"atomic",e)}function Uy(t,e){Js(t,"relevant",e)}function zy(t,e){Js(t,"level",e)}function sm(t,e){Js(t,"disabled",e)}function $h(t,e){Js(t,"hidden",e)}function rm(t,e){Js(t,"activedescendant",e)}function $r(t,e){er(t,"expanded",e)}function jy(t){tm(t,"expanded")}function au(t,e){er(t,"setsize",e)}function lu(t,e){er(t,"posinset",e)}function $y(t,e){er(t,"multiselectable",e)}function Ky(t,e){er(t,"rowcount",e)}function nm(t,e){er(t,"rowindex",e)}function Xy(t,e){er(t,"colcount",e)}function om(t,e){er(t,"colindex",e)}function Yy(t,e){er(t,"colspan",e)}function qy(t,e){er(t,"sort",e)}function Zy(t){tm(t,"sort")}function Ma(t,e){Js(t,"selected",e)}function GA(t,e){er(t,"checked",e===void 0?"mixed":e)}function am(t,e){Js(t,"controls",e.id),Pa(e,t.id)}function hu(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var Qy={};Ai(Qy,{browserSupportsPreventScroll:()=>dm,getBodyHeight:()=>tw,getBodyWidth:()=>ew,getMaxDivHeight:()=>Jy,getSafariVersion:()=>lm,getScrollbarWidth:()=>iw,getTabIndex:()=>Ud,isBrowserChrome:()=>cu,isBrowserFirefox:()=>hm,isBrowserSafari:()=>Pr,isIOSUserAgent:()=>Yr,isInvisibleScrollbar:()=>um,isMacOsUserAgent:()=>cm});var lg,Rd,hg,cg,dg,ug,Fg,Pg;function Pr(){return lg===void 0&&(lg=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),lg}function lm(){if(Rd===void 0)if(Pr()){let t=navigator.userAgent.match(/version\/(\d+)/i);t&&(Rd=t[1]!=null?parseFloat(t[1]):0)}else Rd=0;return Rd}function cu(){if(hg===void 0){let t=window;hg=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return hg}function hm(){return cg===void 0&&(cg=/(firefox)/i.test(navigator.userAgent)),cg}function cm(){return dg===void 0&&(dg=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),dg}function Yr(){return ug===void 0&&(ug=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),ug}function dm(){return!Pr()||lm()>=15}function Ud(t){if(!t)return null;let e=t.tabIndex,i=t.getAttribute("tabIndex");return e===-1&&(i===null||i===""&&!hm())?null:e.toString()}function Jy(){if(!document.body)return-1;let t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){let s=t*2;if(i.style.height=s+"px",s>e||i.clientHeight!==s)break;t=s}return document.body.removeChild(i),t}function ew(){var t,e,i;return(i=(t=document.body)==null?void 0:t.clientWidth)!=null?i:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientWidth)||-1}function tw(){var t,e,i;return(i=(t=document.body)==null?void 0:t.clientHeight)!=null?i:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientHeight)||-1}function iw(){return Pg==null&&sw(),Pg}function sw(){let t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let i=e.offsetWidth-e.clientWidth;i===0&&e.clientWidth===0&&(i=null),e.parentNode&&e.parentNode.removeChild(e),i!=null&&(Pg=i,Fg=i===0)}function um(){return Fg==null&&sw(),Fg}var rw={};Ai(rw,{dateToFormattedString:()=>Ra,parseDateTimeFromString:()=>gs,serialiseDate:()=>Ys});var nw={};Ai(nw,{cleanNumber:()=>VA,createArrayOfNumbers:()=>ow,decToHex:()=>BA,formatNumberCommas:()=>pm,formatNumberTwoDecimalPlacesAndCommas:()=>HA,padStartWidthZeros:()=>Aa,sum:()=>WA});function Aa(t,e){return t.toString().padStart(e,"0")}function ow(t,e){let i=[];for(let s=t;s<=e;s++)i.push(s);return i}function VA(t){return typeof t=="string"&&(t=parseInt(t,10)),typeof t=="number"?Math.floor(t):null}function BA(t,e){let i="";for(let s=0;s<e;s++)i+=String.fromCharCode(t&255),t>>>=8;return i}function HA(t,e,i){return typeof t!="number"?"":pm(Math.round(t*100)/100,e,i)}function pm(t,e,i){return typeof t!="number"?"":t.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function WA(t){return t==null?null:t.reduce((e,i)=>e+i,0)}function Ys(t,e=!0,i="-"){if(!t)return null;let s=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(r=>Aa(r,2)).join(i);return e&&(s+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(r=>Aa(r,2)).join(":")),s}var pg=t=>{if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Ra(t,e="YYYY-MM-DD"){let i=Aa(t.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${t.getFullYear()}`,MMMM:()=>s[t.getMonth()],MMM:()=>s[t.getMonth()].slice(0,3),MM:()=>Aa(t.getMonth()+1,2),Mo:()=>`${t.getMonth()+1}${pg(t.getMonth()+1)}`,M:()=>`${t.getMonth()+1}`,Do:()=>`${t.getDate()}${pg(t.getDate())}`,DD:()=>Aa(t.getDate(),2),D:()=>`${t.getDate()}`,dddd:()=>r[t.getDay()],ddd:()=>r[t.getDay()].slice(0,3),dd:()=>r[t.getDay()].slice(0,2),do:()=>`${t.getDay()}${pg(t.getDay())}`,d:()=>`${t.getDay()}`},o=new RegExp(Object.keys(n).join("|"),"g");return e.replace(o,a=>a in n?n[a]():a)}function gs(t){if(!t)return null;let[e,i]=t.split(" ");if(!e)return null;let s=e.split("-").map(d=>parseInt(d,10));if(s.filter(d=>!isNaN(d)).length!==3)return null;let[r,n,o]=s,a=new Date(r,n-1,o);if(a.getFullYear()!==r||a.getMonth()!==n-1||a.getDate()!==o)return null;if(!i||i==="00:00:00")return a;let[l,h,c]=i.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),h>=0&&h<60&&a.setMinutes(h),c>=0&&c<60&&a.setSeconds(c),a}var aw={};Ai(aw,{FOCUSABLE_EXCLUDE:()=>fm,FOCUSABLE_SELECTOR:()=>lw,addOrRemoveAttribute:()=>Fr,addStylesToElement:()=>xm,bindCellRendererToHtmlElement:()=>Em,clearElement:()=>ti,copyNodeList:()=>pw,ensureDomOrder:()=>ym,formatSize:()=>du,getAbsoluteHeight:()=>mm,getAbsoluteWidth:()=>Eh,getElementRectWithOffset:()=>vm,getElementSize:()=>Rn,getInnerHeight:()=>Kh,getInnerWidth:()=>Ao,getScrollLeft:()=>_h,insertWithDomOrder:()=>cw,isElementChildOfClass:()=>ho,isFocusableFormField:()=>gm,isHorizontalScrollShowing:()=>dw,isInDOM:()=>Cm,isNodeOrElement:()=>Xh,isRtlNegativeScroll:()=>bh,isVerticalScrollShowing:()=>uw,isVisible:()=>ys,iterateNamedNodeMap:()=>fw,loadTemplate:()=>ms,nodeListForEach:()=>Sm,radioCssClass:()=>Mg,removeFromParent:()=>hr,setDisabled:()=>Ia,setDisplayed:()=>vt,setDomChildOrder:()=>wm,setElementHeight:()=>UA,setElementWidth:()=>Ah,setFixedHeight:()=>co,setFixedWidth:()=>qs,setScrollLeft:()=>Th,setVisible:()=>hw});var Dd;function Mg(t,e,i){let s=t.parentElement,r=s&&s.firstChild;for(;r;)e&&r.classList.toggle(e,r===t),i&&r.classList.toggle(i,r!==t),r=r.nextSibling}var lw="[tabindex], input, select, button, textarea, [href]",fm="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function gm(t){let e=Element.prototype.matches||Element.prototype.msMatchesSelector,s=e.call(t,"input, select, button, textarea"),r=e.call(t,fm),n=ys(t);return s&&!r&&n}function vt(t,e,i={}){let{skipAriaHidden:s}=i;t.classList.toggle("ag-hidden",!e),s||$h(t,!e)}function hw(t,e,i={}){let{skipAriaHidden:s}=i;t.classList.toggle("ag-invisible",!e),s||$h(t,!e)}function Ia(t,e){let i="disabled",s=e?r=>r.setAttribute(i,""):r=>r.removeAttribute(i);s(t),Sm(t.querySelectorAll("input"),r=>s(r))}function ho(t,e,i){let s=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof i=="number"){if(++s>i)break}else if(t===i)break}return!1}function Rn(t){let{height:e,width:i,borderTopWidth:s,borderRightWidth:r,borderBottomWidth:n,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:h,paddingLeft:c,marginTop:d,marginRight:p,marginBottom:u,marginLeft:m,boxSizing:f}=window.getComputedStyle(t);return{height:parseFloat(e||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(n||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(h||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(p||"0"),marginBottom:parseFloat(u||"0"),marginLeft:parseFloat(m||"0"),boxSizing:f}}function Kh(t){let e=Rn(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function Ao(t){let e=Rn(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function mm(t){let e=Rn(t),i=e.marginBottom+e.marginTop;return Math.ceil(t.offsetHeight+i)}function Eh(t){let e=Rn(t),i=e.marginLeft+e.marginRight;return Math.ceil(t.offsetWidth+i)}function vm(t){let e=t.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:r,borderBottomWidth:n}=Rn(t);return{top:e.top+(i||0),left:e.left+(s||0),right:e.right+(r||0),bottom:e.bottom+(n||0)}}function bh(){if(typeof Dd=="boolean")return Dd;let t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(t),t.scrollLeft=1,Dd=Math.floor(t.scrollLeft)===0,document.body.removeChild(t),Dd}function _h(t,e){let i=t.scrollLeft;return e&&(i=Math.abs(i),cu()&&!bh()&&(i=t.scrollWidth-t.clientWidth-i)),i}function Th(t,e,i){i&&(bh()?e*=-1:(Pr()||cu())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function ti(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function hr(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Cm(t){return!!t.offsetParent}function ys(t){let e=t;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!Cm(t)||window.getComputedStyle(t).visibility!=="visible")}function ms(t){let e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function ym(t,e,i){i&&i.nextSibling===e||(i?i.nextSibling?t.insertBefore(e,i.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e))}function wm(t,e){for(let i=0;i<e.length;i++){let s=e[i],r=t.children[i];r!==s&&t.insertBefore(s,r)}}function cw(t,e,i){i?i.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function xm(t,e){if(e)for(let[i,s]of Object.entries(e)){if(!i||!i.length||s==null)continue;let r=Ly(i),n=s.toString(),o=n.replace(/\s*!important/g,""),a=o.length!=n.length?"important":void 0;t.style.setProperty(r,o,a)}}function dw(t){return t.clientWidth<t.scrollWidth}function uw(t){return t.clientHeight<t.scrollHeight}function Ah(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):qs(t,e)}function qs(t,e){e=du(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function UA(t,e){e==="flex"?(t.style.removeProperty("height"),t.style.removeProperty("minHeight"),t.style.removeProperty("maxHeight"),t.style.flex="1 1 auto"):co(t,e)}function co(t,e){e=du(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function du(t){return typeof t=="number"?`${t}px`:t}function Xh(t){return t instanceof Node||t instanceof HTMLElement}function pw(t){if(t==null)return[];let e=[];return Sm(t,i=>e.push(i)),e}function fw(t,e){if(t)for(let i=0;i<t.length;i++){let s=t[i];e(s.name,s.value)}}function Fr(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i.toString())}function Sm(t,e){if(t!=null)for(let i=0;i<t.length;i++)e(t[i])}function Em(t,e){t.then(i=>{let s=i.getGui();s!=null&&(typeof s=="object"?e.appendChild(s):e.innerHTML=s)})}var gw={};Ai(gw,{fuzzyCheckStrings:()=>mw,fuzzySuggestions:()=>Yh});function mw(t,e,i){let s={},r=t.filter(n=>!e.some(o=>o===n));return r.length>0&&r.forEach(n=>s[n]=Yh(n,i).values),s}function Yh(t,e,i,s){let r=e.map((a,l)=>({value:a,relevance:zA(t.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(r.sort((a,l)=>l.relevance-a.relevance),i&&(r=r.filter(a=>a.relevance!==0)),r.length>0&&s&&s>0){let l=r[0].relevance*s;r=r.filter(h=>l-h.relevance<0)}let n=[],o=[];for(let a of r)n.push(a.value),o.push(a.idx);return{values:n,indices:o}}function zA(t,e){let i=t.replace(/\s/g,""),s=e.replace(/\s/g,""),r=0,n=-1;for(let o=0;o<i.length;o++){let a=s.indexOf(i[o],n+1);a!==-1&&(n=a,r+=100-n*100/1e4*100)}return r}var vw={};Ai(vw,{createIcon:()=>$s,createIconNoSpan:()=>Kt,iconNameClassMap:()=>Cw});var Cw={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function $s(t,e,i){let s=Kt(t,e,i);if(s){let{className:n}=s;if(typeof n=="string"&&n.indexOf("ag-icon")>-1||typeof n=="object"&&n["ag-icon"])return s}let r=document.createElement("span");return r.appendChild(s),r}function Kt(t,e,i,s){let r=null,n=i&&i.getColDef().icons;if(n&&(r=n[t]),e&&!r){let o=e.get("icons");o&&(r=o[t])}if(r){let o;if(typeof r=="function")o=r();else if(typeof r=="string")o=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return ms(o);if(Xh(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{let o=document.createElement("span"),a=Cw[t];return a||(s?a=t:(console.warn(`AG Grid: Did not find icon ${t}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),qt(o,"presentation"),o}}var yw={};Ai(yw,{isDeleteKey:()=>Sw,isEventFromPrintableCharacter:()=>uu,isUserSuppressingHeaderKeyboardEvent:()=>ww,isUserSuppressingKeyboardEvent:()=>zd,normaliseQwertyAzerty:()=>xw});var Ce=class{};Ce.BACKSPACE="Backspace";Ce.TAB="Tab";Ce.ENTER="Enter";Ce.ESCAPE="Escape";Ce.SPACE=" ";Ce.LEFT="ArrowLeft";Ce.UP="ArrowUp";Ce.RIGHT="ArrowRight";Ce.DOWN="ArrowDown";Ce.DELETE="Delete";Ce.F2="F2";Ce.PAGE_UP="PageUp";Ce.PAGE_DOWN="PageDown";Ce.PAGE_HOME="Home";Ce.PAGE_END="End";Ce.A="KeyA";Ce.C="KeyC";Ce.D="KeyD";Ce.V="KeyV";Ce.X="KeyX";Ce.Y="KeyY";Ce.Z="KeyZ";var jA=65,$A=67,KA=86,XA=68,YA=90,qA=89;function uu(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key.length===1}function zd(t,e,i,s,r){let n=s?s.getColDef().suppressKeyboardEvent:void 0;if(!n)return!1;let o=t.addGridCommonParams({event:e,editing:r,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(n&&n(o))}function ww(t,e,i,s){let r=s.getDefinition(),n=r&&r.suppressHeaderKeyboardEvent;if(!Me(n))return!1;let o=t.addGridCommonParams({colDef:r,column:s,headerRowIndex:i,event:e});return!!n(o)}function xw(t){let{keyCode:e}=t,i;switch(e){case jA:i=Ce.A;break;case $A:i=Ce.C;break;case KA:i=Ce.V;break;case XA:i=Ce.D;break;case YA:i=Ce.Z;break;case qA:i=Ce.Y;break;default:i=t.code}return i}function Sw(t,e=!1){return t===Ce.DELETE?!0:!e&&t===Ce.BACKSPACE?cm():!1}var Ew={};Ai(Ew,{areEventsNear:()=>bm});function bm(t,e,i){if(i===0)return!1;let s=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(s,r)<=i}var bw={};Ai(bw,{sortRowNodesByOrder:()=>ZA});function ZA(t,e){if(!t)return!1;let i=(o,a)=>{let l=e[o.id],h=e[a.id],c=l!==void 0,d=h!==void 0,p=c&&d,u=!c&&!d;return p?l-h:u?o.__objectId-a.__objectId:c?1:-1},s,r,n=!1;for(let o=0;o<t.length-1;o++)if(s=t[o],r=t[o+1],i(s,r)>0){n=!0;break}return n?(t.sort(i),!0):!1}var _w={};Ai(_w,{convertToSet:()=>_m});function _m(t){let e=new Set;return t.forEach(i=>e.add(i)),e}var QA=Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe(Qe({},Ny),xy),Qy),rw),aw),wy),uy),gw),hy),vw),yw),ky),Ew),nw),cy),bw),_w),Iy),dt=QA,Oa=class{constructor(t=0,e=1){this.nextValue=t,this.step=e}next(){let t=this.nextValue;return this.nextValue+=this.step,t}peek(){return this.nextValue}skip(t){this.nextValue+=t}};var Cs=class Id{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(i=>this.onDone(i),i=>this.onReject(i))}static all(e){return new Id(i=>{let s=e.length,r=new Array(s);e.forEach((n,o)=>{n.then(a=>{r[o]=a,s--,s===0&&i(r)})})})}static resolve(e=null){return new Id(i=>i(e))}then(e){return new Id(i=>{this.status===1?i(e(this.resolution)):this.waiters.push(s=>i(e(s)))})}resolveNow(e,i){return this.status===1?i(this.resolution):e}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(i=>i(e))}onReject(e){console.warn("TBI")}};var JA=class{constructor(t){this.cssClassStates={},this.getGui=t}addCssClass(t){let e=(t||"").split(" ");if(e.length>1){e.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[t]!==!0&&t.length){let s=this.getGui();s&&s.classList.add(t),this.cssClassStates[t]=!0}}removeCssClass(t){let e=(t||"").split(" ");if(e.length>1){e.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[t]!==!1&&t.length){let s=this.getGui();s&&s.classList.remove(t),this.cssClassStates[t]=!1}}containsCssClass(t){let e=this.getGui();return e?e.classList.contains(t):!1}addOrRemoveCssClass(t,e){if(!t)return;if(t.indexOf(" ")>=0){let s=(t||"").split(" ");if(s.length>1){s.forEach(r=>this.addOrRemoveCssClass(r,e));return}}if(this.cssClassStates[t]!==e&&t.length){let s=this.getGui();s&&s.classList.toggle(t,e),this.cssClassStates[t]=e}}},qh=class no extends Ie{constructor(e,i,s,r){super(),this.parentComp=e,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=r,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let e=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){let i=this.gos.get(e);return i<0&&et(`${e} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(e){var i,s;return e==="show"?(i=this.tooltipShowDelayOverride)!=null?i:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(s=this.tooltipHideDelayOverride)!=null?s:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Yr()&&(no.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var i;let s=e.relatedTarget,r=this.parentComp.getGui(),n=(i=this.tooltipComp)==null?void 0:i.getGui();this.isInteractingWithTooltip||r.contains(s)||this.interactionEnabled&&n?.contains(s)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||no.isLocked)return;let i=0;e&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){let e=new Date().getTime(),i=no.lastTooltipHideTime;return e-i<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=Qe({},this.parentComp.getTooltipParams());if(!Me(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(i)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),no.lastTooltipHideTime=new Date().getTime());let i={type:V.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.state=0}newTooltipComponentCallback(e,i){if(this.state!==2||this.tooltipInstanceCount!==e){this.getContext().destroyBean(i);return}let r=i.getGui();this.tooltipComp=i,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");let n=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:r,ariaLabel:n("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(r,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(r,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(r,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(r,"focusout",this.onTooltipFocusOut.bind(this))||null));let a={type:V.EVENT_TOOLTIP_SHOW,tooltipGui:r,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var i;let s=this.parentComp.getGui(),r=(i=this.tooltipComp)==null?void 0:i.getGui(),n=e.relatedTarget;r?.contains(n)||(this.isInteractingWithTooltip=!1,s.contains(n)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(zt(Qe({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(zt(Qe({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){no.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){no.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};qh.isLocked=!1;w([Q("popupService")],qh.prototype,"popupService",2);w([Q("userComponentFactory")],qh.prototype,"userComponentFactory",2);w([ke],qh.prototype,"postConstruct",1);var eR=qh,qr=class extends Ie{constructor(t,e){super(),this.ctrl=t,e&&(this.beans=e)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(t){let e="title",i=this.ctrl.getGui();i&&(t!=null&&t!=""?i.setAttribute(e,t):i.removeAttribute(e))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,e,i,s;if(this.tooltipManager!=null)return;let r={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new eR(r,(e=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:e.call(t),(s=(i=this.ctrl).getTooltipHideDelayOverride)==null?void 0:s.call(i),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let t=this.ctrl,e=t.getColumn?t.getColumn():void 0,i=t.getColDef?t.getColDef():void 0,s=t.getRowNode?t.getRowNode():void 0;return{location:t.getLocation(),colDef:i,column:e,rowIndex:t.getRowIndex?t.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:t.getValueFormatted?t.getValueFormatted():void 0,hideTooltipCallback:()=>{var r;return(r=this.tooltipManager)==null?void 0:r.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};w([Q("beans")],qr.prototype,"beans",2);w([ke],qr.prototype,"postConstruct",1);var tR=new Oa,Zh=class Ig extends Ie{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=tR.next(),this.cssClassManager=new JA(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){let{newTooltipText:i,showDelayOverride:s,hideDelayOverride:r,location:n,shouldDisplayTooltip:o}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);let a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new qr({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>n??"UNKNOWN",getColDef:e?.getColDef,getColumn:e?.getColumn,getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:o})))}createChildComponentsFromTags(e,i){pw(e.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;let n=this.createComponentFromElement(r,o=>{o.getGui()&&this.copyAttributesFromNode(r,o.getGui())},i);if(n){if(n.addItems&&r.children.length){this.createChildComponentsFromTags(r,i);let o=Array.prototype.slice.call(r.children);n.addItems(o)}this.swapComponentForNode(n,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,i)})}createComponentFromElement(e,i,s){let r=e.nodeName,n=s?s[e.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(r);if(o){Ig.elementGettingCreated=e;let a=new o(n);return a.setParentComponent(this),this.createBean(a,null,i),a}return null}copyAttributesFromNode(e,i){fw(e.attributes,(s,r)=>i.setAttribute(s,r))}swapComponentForNode(e,i,s){let r=e.getGui();i.replaceChild(r,s),i.insertBefore(document.createComment(s.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,s)}swapInComponentForQuerySelectors(e,i){let s=this;this.iterateOverQuerySelectors(r=>{s[r.attributeName]===i&&(s[r.attributeName]=e)})}iterateOverQuerySelectors(e){let i=Object.getPrototypeOf(this);for(;i!=null;){let s=i.__agComponentMetaData,r=iu(i.constructor);s&&s[r]&&s[r].querySelectors&&s[r].querySelectors.forEach(n=>e(n)),i=Object.getPrototypeOf(i)}}activateTabIndex(e){let i=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(e,i){let s=ms(e);this.setTemplateFromElement(s,i)}setTemplateFromElement(e,i){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),i)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;let e=this;this.iterateOverQuerySelectors(i=>{let s=n=>e[i.attributeName]=n;if(i.refSelector&&this.getAttribute("ref")===i.refSelector)s(this.eGui);else{let n=this.eGui.querySelector(i.querySelector);n&&s(n.__agComponent||n)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,i){if(e!=null)if(i||(i=this.eGui),Xh(e))i.appendChild(e);else{let s=e;i.appendChild(s.getGui())}}isDisplayed(){return this.displayed}setVisible(e,i={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:s}=i;hw(this.eGui,e,{skipAriaHidden:s})}}setDisplayed(e,i={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:s}=i;vt(this.eGui,e,{skipAriaHidden:s});let r={type:Ig.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,i,s){this.eGui.addEventListener(e,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,i))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,i){this.cssClassManager.addOrRemoveCssClass(e,i)}getAttribute(e){let{eGui:i}=this;return i?i.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}};Zh.EVENT_DISPLAYED_CHANGED="displayedChanged";w([Q("agStackComponentsRegistry")],Zh.prototype,"agStackComponentsRegistry",2);w([my],Zh.prototype,"preConstructOnComponent",1);w([my],Zh.prototype,"createChildComponentsPreConstruct",1);var nt=Zh;function Be(t){return iR.bind(this,`[ref=${t}]`,t)}function iR(t,e,i,s,r){if(t===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof r=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}sR(i,"querySelectors",{attributeName:s,querySelector:t,refSelector:e})}function sR(t,e,i){let s=rR(t,iu(t.constructor));s[e]||(s[e]=[]),s[e].push(i)}function rR(t,e){return t.__agComponentMetaData||(t.__agComponentMetaData={}),t.__agComponentMetaData[e]||(t.__agComponentMetaData[e]={}),t.__agComponentMetaData[e]}var Tm=class extends nt{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t;let e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(t){if(t==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(e=>{if(e.getModelAsString){let i=e.getModelAsString(t);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(t){this.refresh(t)}refresh(t){this.init(t)}};w([Be("eFloatingFilterText")],Tm.prototype,"eFloatingFilterText",2);w([Q("columnModel")],Tm.prototype,"columnModel",2);var Tw=class{constructor(t,e,i,s,r){this.alive=!0,this.context=t,this.eParent=s,e.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){t.destroyBean(a);return}this.dateComp=a,a&&(s.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),r?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t}setDisabled(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t}setDisplayed(t){vt(this.eParent,t)}setInputPlaceholder(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)}setInputAriaLabel(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)}afterGuiAttached(t){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(t)}updateParams(t){var e,i;let s=!1;(e=this.dateComp)!=null&&e.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(t)!==null&&(s=!0),!s&&((i=this.dateComp)!=null&&i.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(t)!==null&&et("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(t){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(t)}},Aw=class{constructor(){this.customFilterOptions={}}init(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(t=>{if(typeof t=="string")return;let e=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(r=>t[r]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!e.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){let e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(t){return this.customFilterOptions[t]}},Rw={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},pu=class Dw extends Ie{constructor(e,i={}){super(),this.eFocusableElement=e,this.callbacks=i,this.callbacks=Qe({shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;let r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);r&&(r.focus(),s.preventDefault())}},i)}postConstruct(){this.eFocusableElement.classList.add(Dw.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",i=>{if(!(i.defaultPrevented||dr(i))){if(this.callbacks.shouldStopEventPropagation(i)){pr(i);return}i.key===Ce.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}})}};pu.FOCUS_MANAGED_CLASS="ag-focus-managed";w([Q("focusService")],pu.prototype,"focusService",2);w([ke],pu.prototype,"postConstruct",1);var Dn=pu,Fw="ag-resizer-wrapper",nR=`<div class="${Fw}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,za=class extends Ie{constructor(t,e){super(),this.element=t,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},e)}center(){let{clientHeight:t,clientWidth:e}=this.offsetParent,i=e/2-this.getWidth()/2,s=t/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:e,minWidth:i,width:s,minHeight:r,height:n,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,h=0,c=ys(this.element);if(c){let d=this.findBoundaryElement(),p=window.getComputedStyle(d);if(p.minWidth!=null){let u=d.offsetWidth-this.element.offsetWidth;h=parseInt(p.minWidth,10)-u}if(p.minHeight!=null){let u=d.offsetHeight-this.element.offsetHeight;l=parseInt(p.minHeight,10)-u}}if(this.minHeight=r||l,this.minWidth=i||h,s&&this.setWidth(s),n&&this.setHeight(n),(!s||!n)&&this.refreshSize(),t)this.center();else if(o||a)this.offsetElement(o,a);else if(c&&e){let d=this.boundaryEl,p=!0;if(d||(d=this.findBoundaryElement(),p=!1),d){let u=parseFloat(d.style.top),m=parseFloat(d.style.left);p?this.offsetElement(isNaN(m)?0:m,isNaN(u)?0:u):this.setPosition(m,u)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(t,e){if(!this.config.popup||t===this.movable)return;this.movable=t;let i=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(t){if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),typeof t=="boolean"){if(t===!1)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(e=>{let s=!!t[e],r=this.getResizerElement(e),n={dragStartPixels:0,eElement:r,onDragStart:o=>this.onResizeStart(o,e),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,e)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(n),this.resizeListeners.push(n),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[e]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:t,width:e}=this.lastSize;e!==-1&&(this.element.style.width=`${e}px`),t!==-1&&(this.element.style.height=`${t}px`)}getHeight(){return this.element.offsetHeight}setHeight(t){let{popup:e}=this.config,i=this.element,s=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)co(i,t),t=mm(i),s=!0;else if(t=Math.max(this.minHeight,t),this.positioned){let r=this.getAvailableHeight();r&&t>r&&(t=r)}this.getHeight()!==t&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):e?co(i,t):(i.style.height=`${t}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof t=="number"?t:parseFloat(t)))}getAvailableHeight(){let{popup:t,forcePopupParentAsOffsetParent:e}=this.config;this.positioned||this.initialisePosition();let{clientHeight:i}=this.offsetParent;if(!i)return null;let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),n=t?this.position.y:s.top,o=t?0:r.top,a=0;if(e){let h=this.element.parentElement;if(h){let{bottom:c}=h.getBoundingClientRect();a=c-s.bottom}}return i+o-n-a}getWidth(){return this.element.offsetWidth}setWidth(t){let e=this.element,{popup:i}=this.config,s=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)qs(e,t),t=Eh(e),s=!0;else if(this.positioned){t=Math.max(this.minWidth,t);let{clientWidth:r}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;r&&t+n>r&&(t=r-n)}this.getWidth()!==t&&(s?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?qs(e,t):(e.style.width=`${t}px`,e.style.flex=" unset",this.lastSize.width=typeof t=="number"?t:parseFloat(t)))}offsetElement(t=0,e=0){let{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:e})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(t){if(!this.config.forcePopupParentAsOffsetParent)return;let e=()=>{let i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};t?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),e):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(t,e){this.position.x=t,this.position.y=e}updateDragStartPosition(t,e){this.dragStartPosition={x:t,y:e}}calculateMouseMovement(t){let{e,isLeft:i,isTop:s,anywhereWithin:r,topBuffer:n}=t,o=e.clientX-this.dragStartPosition.x,a=e.clientY-this.dragStartPosition.y,l=this.shouldSkipX(e,!!i,!!r,o)?0:o,h=this.shouldSkipY(e,!!s,n,a)?0:a;return{movementX:l,movementY:h}}shouldSkipX(t,e,i,s){let r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left,l=a<=0&&n.left>=t.clientX||n.right<=t.clientX&&n.right<=o.right;return l?!0:(e?l=s<0&&t.clientX>a+n.left||s>0&&t.clientX<a+n.left:i?l=s<0&&t.clientX>o.right||s>0&&t.clientX<a+n.left:l=s<0&&t.clientX>o.right||s>0&&t.clientX<o.right,l)}shouldSkipY(t,e,i=0,s){let r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top,l=a<=0&&n.top>=t.clientY||n.bottom<=t.clientY&&n.bottom<=o.bottom;return l?!0:(e?l=s<0&&t.clientY>a+n.top+i||s>0&&t.clientY<a+n.top:l=s<0&&t.clientY>o.bottom||s>0&&t.clientY<o.bottom,l)}createResizeMap(){let t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[ref=eTopLeftResizer]")},top:{element:t.querySelector("[ref=eTopResizer]")},topRight:{element:t.querySelector("[ref=eTopRightResizer]")},right:{element:t.querySelector("[ref=eRightResizer]")},bottomRight:{element:t.querySelector("[ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[ref=eBottomLeftResizer]")},left:{element:t.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let t=this.element;if(!t)return;let i=new DOMParser().parseFromString(nR,"text/html").body;t.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let t=this.element.querySelector(`.${Fw}`);t&&this.element.removeChild(t),this.resizersAdded=!1}getResizerElement(t){return this.resizerMap[t].element}onResizeStart(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");let{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)}getSiblings(){let e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let t=this.getSiblings()||[],e=0,i=0;for(let s=0;s<t.length;s++){let r=t[s],n=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(n){let l=window.getComputedStyle(r);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=r.offsetHeight,a=r.offsetWidth;e+=o,i+=a}return{height:e,width:i}}applySizeToSiblings(t){let e=null,i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){let r=i[s];r!==e&&(t?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(e=i[s+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(t=>t)}onResize(t){if(!this.isResizing||!this.currentResizer)return;let{popup:e,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:r,isBottom:n,isLeft:o}=this.currentResizer,a=r||o,l=n||s,{movementX:h,movementY:c}=this.calculateMouseMovement({e:t,isLeft:o,isTop:s}),d=this.position.x,p=this.position.y,u=0,m=0;if(a&&h){let f=o?-1:1,g=this.getWidth(),y=g+h*f,x=!1;o&&(u=g-y,(d+u<=0||y<=this.minWidth)&&(x=!0,u=0)),x||this.setWidth(y)}if(l&&c){let f=s?-1:1,g=this.getHeight(),y=g+c*f,x=!1;s?(m=g-y,(p+m<=0||y<=this.minHeight)&&(x=!0,m=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&g<y&&this.getMinSizeOfSiblings().height+y>this.element.parentElement.offsetHeight&&(x=!0),x||this.setHeight(y)}this.updateDragStartPosition(t.clientX,t.clientY),((e||i)&&u||m)&&this.offsetElement(d+u,p+m)}onResizeEnd(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;let i={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchEvent(i)}refreshSize(){let t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))}onMoveStart(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)}onMove(t){if(!this.isMoving)return;let{x:e,y:i}=this.position,s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());let{movementX:r,movementY:n}=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(e+r,i+n),this.updateDragStartPosition(t.clientX,t.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let t=this.element;for(;t;){if(window.getComputedStyle(t).position!=="static")return t;t=t.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};w([Q("popupService")],za.prototype,"popupService",2);w([Q("resizeObserverService")],za.prototype,"resizeObserverService",2);w([Q("dragService")],za.prototype,"dragService",2);var fu=class dh extends nt{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new Dn(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new za(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);let s=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(s,e),i=this.getGui(),i&&i.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=dh.isUseApplyButton(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=dh.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){let{buttons:e}=this.providedFilterParams,i=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(ti(this.eButtonsPanel),this.buttonListeners.forEach(n=>n?.()),this.buttonListeners=[]):i&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!i){this.eButtonsPanel&&hr(this.eButtonsPanel);return}let s=document.createDocumentFragment(),r=n=>{let o,a;switch(n){case"apply":o=this.translate("applyFilter"),a=c=>this.onBtApply(!1,!1,c);break;case"clear":o=this.translate("clearFilter"),a=()=>this.onBtClear();break;case"reset":o=this.translate("resetFilter"),a=()=>this.onBtReset();break;case"cancel":o=this.translate("cancelFilter"),a=c=>{this.onBtCancel(c)};break;default:console.warn("AG Grid: Unknown button type specified");return}let h=ms(`<button
                    type="${n==="apply"?"submit":"button"}"
                    ref="${n}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${o}
                </button>`);this.buttonListeners.push(this.addManagedListener(h,"click",a)),s.append(h)};_m(e).forEach(n=>r(n)),this.eButtonsPanel.append(s),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=dh.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),i=Qi(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,i()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,i){let s=()=>{this.onUiChanged(!1,"prevent"),i?.()};e!=null?this.setModelIntoUi(e).then(s):this.resetUiToDefaults().then(s)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let i=this.getModelFromUi();if(!this.isModelValid(i))return!1;let s=this.appliedModel;return this.appliedModel=i,!this.areModelsEqual(s,i)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,i=!1,s){s&&s.preventDefault(),this.applyModel(i?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:i,source:"columnFilter"});let{closeOnApply:r}=this.providedFilterParams;r&&this.applyActive&&!e&&!i&&this.close(s)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let i=e,s=i&&i.key,r;(s==="Enter"||s==="Space")&&(r={keyboardEvent:i}),this.hidePopup(r),this.hidePopup=null}onUiChanged(e=!1,i){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let s=this.isModelValid(this.getModelFromUi()),r=this.getRefElement("applyFilterButton");r&&Ia(r,!s)}e&&!i||i==="immediately"?this.onBtApply(e):(!this.applyActive&&!i||i==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let i=e==="floatingFilter"||e==="columnFilter",{positionableFeature:s,gos:r}=this;i?(s.restoreLastSize(),s.setResizable(r.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,i){return dh.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:i}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Rw[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}};w([Q("rowModel")],fu.prototype,"rowModel",2);w([Be("eFilterBody")],fu.prototype,"eFilterBody",2);w([ke],fu.prototype,"postConstruct",1);var jd=fu,Am=class extends nt{constructor(t,e){super(e),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=t||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:t,label:e,labelWidth:i,labelAlignment:s,disabled:r}=this.config;r!=null&&this.setDisabled(r),t!=null&&this.setLabelSeparator(t),e!=null&&this.setLabel(e),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){ti(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(vt(this.eLabel,!1),qt(this.eLabel,"presentation")):(vt(this.eLabel,!0),qt(this.eLabel,null))}setLabelSeparator(t){return this.labelSeparator===t?this:(this.labelSeparator=t,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)}setLabelAlignment(t){let i=this.getGui().classList;return i.toggle("ag-label-align-left",t==="left"),i.toggle("ag-label-align-right",t==="right"),i.toggle("ag-label-align-top",t==="top"),this}setLabelEllipsis(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this}setLabelWidth(t){return this.label==null?this:(Ah(this.eLabel,t),this)}setDisabled(t){t=!!t;let e=this.getGui();return Ia(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this}isDisabled(){return!!this.disabled}};w([ke],Am.prototype,"postConstruct",1);var Pw=class extends Am{constructor(t,e,i){super(t,e),this.className=i}postConstruct(){super.postConstruct();let{width:t,value:e,onValueChange:i}=this.config;t!=null&&this.setWidth(t),e!=null&&this.setValue(e),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){let t=this.getAriaElement(),e=this.getLabelId();Hy(t)!==null?Pa(t,""):Pa(t,e??"")}setAriaLabel(t){return ks(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this}onValueChange(t){return this.addManagedListener(this,V.EVENT_FIELD_VALUE_CHANGED,()=>t(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(t){return qs(this.getGui(),t),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchEvent({type:V.EVENT_FIELD_VALUE_CHANGED}),this)}},oR=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Ro=class extends Pw{constructor(t){if(super(t,t?.template||oR,t?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=t?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!t)return;let{pickerGap:e,maxPickerHeight:i,variableWidth:s,minPickerWidth:r,maxPickerWidth:n}=t;e!=null&&(this.pickerGap=e),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),r!=null&&this.setPickerMinWidth(r),n!=null&&this.setPickerMaxWidth(n)}postConstruct(){super.postConstruct(),this.setupAria();let t=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",t);let e=this.getAriaElement();this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));let{pickerIcon:i,inputWidth:s}=this.config;if(i){let r=Kt(i,this.gos);r&&this.eIcon.appendChild(r)}s!=null&&this.setInputWidth(s)}setupAria(){let t=this.getAriaElement();t.setAttribute("tabindex",this.gos.get("tabIndex").toString()),$r(t,!1),this.ariaRole&&qt(t,this.ariaRole)}onLabelOrWrapperMouseDown(t){if(t){let e=this.getFocusableElement();if(e!==this.eWrapper&&t?.target===e)return;t.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(t){switch(t.key){case Ce.UP:case Ce.DOWN:case Ce.ENTER:case Ce.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Ce.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let t=this.gos.getDocument(),e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));let i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:s,pickerAriaLabelValue:r,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{let u=this.gos.getActiveDomElement(),m=!u||u===t.body;this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(s,r)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:h,maxPickerWidth:c,variableWidth:d}=this;d?(h&&(e.style.minWidth=h),e.style.width=du(Eh(this.eWrapper)),c&&(e.style.maxWidth=c)):Ah(e,c??Eh(this.eWrapper));let p=l??`${Kh(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",p),e.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:t}=this.config,{pickerGap:e}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:t,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(t){if(!this.isAlive())return;let e=this.getAriaElement();$r(e,t),this.eWrapper.classList.toggle("ag-picker-expanded",t),this.eWrapper.classList.toggle("ag-picker-collapsed",!t)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(t){var e;(e=this.pickerComponent)!=null&&e.getGui().contains(t.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(t){return Ah(this.eWrapper,t),this}getFocusableElement(){return this.eWrapper}setPickerGap(t){return this.pickerGap=t,this}setPickerMinWidth(t){return typeof t=="number"&&(t=`${t}px`),this.minPickerWidth=t??void 0,this}setPickerMaxWidth(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerWidth=t??void 0,this}setPickerMaxHeight(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerHeight=t??void 0,this}destroy(){this.hidePicker(),super.destroy()}};w([Q("popupService")],Ro.prototype,"popupService",2);w([Be("eLabel")],Ro.prototype,"eLabel",2);w([Be("eWrapper")],Ro.prototype,"eWrapper",2);w([Be("eDisplayField")],Ro.prototype,"eDisplayField",2);w([Be("eIcon")],Ro.prototype,"eIcon",2);var gu=class Od extends nt{constructor(e="default",i=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=i,this.options=[],this.itemEls=[]}init(){let e=this.getGui();this.addManagedListener(e,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(e,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){let i=e.key;switch(i){case Ce.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let s=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(s)}break;case Ce.DOWN:case Ce.UP:e.preventDefault(),this.navigate(i);break;case Ce.PAGE_DOWN:case Ce.PAGE_UP:case Ce.PAGE_HOME:case Ce.PAGE_END:e.preventDefault(),this.navigateToPage(i);break}}navigate(e){let i=e===Ce.DOWN,s;if(!this.highlightedEl)s=this.itemEls[i?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),s=this.itemEls[n]}this.highlightItem(s)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let i=this.itemEls.indexOf(this.highlightedEl),s=this.options.length-1,r=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/r),o=-1;e===Ce.PAGE_HOME?o=0:e===Ce.PAGE_END?o=s:e===Ce.PAGE_DOWN?o=Math.min(i+n,s):e===Ce.PAGE_UP&&(o=Math.max(i-n,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){let{value:i,text:s}=e,r=s||i;return this.options.push({value:i,text:r}),this.renderOption(i,r),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{hr(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((i,s)=>{lu(i,s+1),au(i,e.length)})}renderOption(e,i){let s=this.gos.getDocument(),r=s.createElement("div");qt(r,"option"),r.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let n=s.createElement("span");r.appendChild(n),n.textContent=i,this.unFocusable||(r.tabIndex=-1),this.itemEls.push(r),this.addManagedListener(r,"mousemove",()=>this.highlightItem(r)),this.addManagedListener(r,"mousedown",o=>{o.preventDefault(),this.setValue(e)}),this.createManagedBean(new qr({getTooltipValue:()=>i,getGui:()=>r,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(r)}setValue(e,i){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(i),this;let s=this.options.findIndex(r=>r.value===e);if(s!==-1){let r=this.options[s];this.value=r.value,this.displayValue=r.text,this.highlightItem(this.itemEls[s]),i||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(i=>i.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!ys(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(Od.ACTIVE_CLASS),Ma(this.highlightedEl,!0);let i=this.getGui(),{scrollTop:s,clientHeight:r}=i,{offsetTop:n,offsetHeight:o}=e;(n+o>s+r||n<s)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!ys(this.highlightedEl)||(this.highlightedEl.classList.remove(Od.ACTIVE_CLASS),Ma(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:V.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Od.EVENT_ITEM_SELECTED})}};gu.EVENT_ITEM_SELECTED="selectedItem";gu.ACTIVE_CLASS="ag-active-item";w([ke],gu.prototype,"init",1);var WC=gu,Mw=class Iw extends Ro{constructor(e){super(Qe({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:i,placeholder:s}=this.config;e!=null&&this.addOptions(e),i!=null&&this.setValue(i,!0),s&&i==null&&(this.eDisplayField.textContent=s),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new WC("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),i=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",i),am(this.getAriaElement(),e),this.listComponent.addManagedListener(this.listComponent,WC.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:Iw.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,V.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;let{key:s}=e;switch(s===Ce.TAB&&this.hidePicker(),s){case Ce.ENTER:case Ce.UP:case Ce.DOWN:case Ce.PAGE_UP:case Ce.PAGE_DOWN:case Ce.PAGE_HOME:case Ce.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case Ce.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,i,s){if(this.value===e||!this.listComponent)return this;if(s||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,i)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};Mw.EVENT_ITEM_SELECTED="selectedItem";var mu=Mw,cr=class extends Pw{constructor(t,e,i="text",s="input"){super(t,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,e),this.inputType=i,this.displayFieldTag=s}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:t,inputWidth:e}=this.config;t!=null&&this.setInputName(t),e!=null&&this.setInputWidth(e),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>this.setValue(t.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(t){return Ah(this.eWrapper,t),this}setInputName(t){return this.getInputElement().setAttribute("name",t),this}getFocusableElement(){return this.eInput}setMaxLength(t){let e=this.eInput;return e.maxLength=t,this}setInputPlaceholder(t){return Fr(this.eInput,"placeholder",t),this}setInputAriaLabel(t){return ks(this.eInput,t),this.refreshAriaLabelledBy(),this}setDisabled(t){return Ia(this.eInput,t),super.setDisabled(t)}setAutoComplete(t){if(t===!0)Fr(this.eInput,"autocomplete",null);else{let e=typeof t=="string"?t:"off";Fr(this.eInput,"autocomplete",e)}return this}};w([Be("eLabel")],cr.prototype,"eLabel",2);w([Be("eWrapper")],cr.prototype,"eWrapper",2);w([Be("eInput")],cr.prototype,"eInput",2);var vu=class extends cr{constructor(t,e="ag-checkbox",i="checkbox"){super(t,e,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:t,passive:e}=this.config;typeof t=="boolean"&&this.setReadOnly(t),typeof e=="boolean"&&this.setPassive(e)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t}setDisabled(t){return this.eWrapper.classList.toggle("ag-disabled",t),super.setDisabled(t)}toggle(){if(this.eInput.disabled)return;let t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}getValue(){return this.isSelected()}setValue(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this}setName(t){let e=this.getInputElement();return e.name=t,this}isSelected(){return this.selected}setSelected(t,e){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected=typeof t=="boolean"?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=t===void 0,e||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(t,e,i){this.dispatchEvent({type:V.EVENT_FIELD_VALUE_CHANGED,selected:t,previousValue:e,event:i});let s=this.getInputElement(),r={type:V.EVENT_CHECKBOX_CHANGED,id:s.id,name:s.name,selected:t,previousValue:e};this.eventService.dispatchEvent(r)}onCheckboxClick(t){if(this.passive||this.eInput.disabled)return;let e=this.isSelected(),i=this.selected=t.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,e,t)}refreshSelectedClass(t){this.eWrapper.classList.toggle("ag-checked",t===!0),this.eWrapper.classList.toggle("ag-indeterminate",t==null)}},Ow=class extends vu{constructor(t){super(t,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,V.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)}},Rm=class{constructor(t,e,i){this.localeService=t,this.optionsFactory=e,this.valueFormatter=i}getModelAsString(t){if(!t)return null;let e=t.operator!=null,i=this.localeService.getLocaleTextFunc();if(e){let s=t,{conditions:r}=s;if(!r){let{condition1:a,condition2:l}=s;r=[a,l]}let n=r.map(a=>this.getModelAsString(a)),o=s.operator==="AND"?"andCondition":"orCondition";return n.join(` ${i(o,Rw[o])} `)}else{if(t.type===Yt.BLANK||t.type===Yt.NOT_BLANK)return i(t.type,t.type);{let s=t,r=this.optionsFactory.getCustomOption(s.type),{displayKey:n,displayName:o,numberOfInputs:a}=r||{};return n&&o&&a===0?(i(n,o),o):this.conditionToString(s,r)}}}updateParams(t){this.optionsFactory=t.optionsFactory}formatValue(t){var e;return this.valueFormatter?(e=this.valueFormatter(t??null))!=null?e:"":String(t)}},is=class wa extends jd{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let i=this.optionsFactory.getCustomOption(e);if(i){let{numberOfInputs:r}=i;return r??1}let s=[wa.EMPTY,wa.NOT_BLANK,wa.BLANK];return e&&s.indexOf(e)>=0?0:e===wa.IN_RANGE?2:1}onFloatingFilterChanged(e,i){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((i,s)=>{s===0?i.setValue(e,!0):i.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,i){if(!e&&!i)return!0;if(!e&&i||e&&!i)return!1;let s=!e.operator,r=!i.operator;if(!s&&r||s&&!r)return!1;let o;if(s){let a=e,l=i;o=this.areSimpleModelsEqual(a,l)}else{let a=e,l=i;o=a.operator===l.operator&&Rr(a.conditions,l.conditions,(h,c)=>this.areSimpleModelsEqual(h,c))}return o}shouldRefresh(e){var i,s,r;let n=this.getModel(),o=n?(i=n.conditions)!=null?i:[n]:null,a=(r=(s=e.filterOptions)==null?void 0:s.map(h=>typeof h=="string"?h:h.displayKey))!=null?r:this.getDefaultFilterOptions();return!(!(!o||o.every(h=>a.find(c=>c===h.type)!==void 0))||typeof e.maxNumConditions=="number"&&o&&o.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let s=e;s.conditions||(s.conditions=[s.condition1,s.condition2]);let r=this.validateAndUpdateConditions(s.conditions),n=this.getNumConditions();if(r<n)this.removeConditionsAndOperators(r);else if(r>n)for(let a=n;a<r;a++)this.createJoinOperatorPanel(),this.createOption();let o=s.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),s.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let s=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(s.type,!0),this.setConditionIntoUi(s,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Cs.resolve()}validateAndUpdateConditions(e){let i=e.length;return i>this.maxNumConditions&&(e.splice(this.maxNumConditions),et('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),i=this.maxNumConditions),i}doesFilterPass(e){var i;let s=this.getModel();if(s==null)return!0;let{operator:r}=s,n=[];if(r){let a=s;n.push(...(i=a.conditions)!=null?i:[])}else n.push(s);return n[r&&r==="OR"?"some":"every"](a=>this.individualConditionPasses(e,a))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Aw,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var i,s;e.suppressAndOrCondition!=null&&et('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),e.alwaysShowBothConditions!=null&&et('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(i=e.maxNumConditions)!=null?i:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(et('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(s=e.numAlwaysVisibleConditions)!=null?s:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(et('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(et('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new mu);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(e),this.resetType(e);let s=this.getNumConditions()-1;this.forEachPositionInput(s,r=>this.resetInput(r)),this.addChangedListeners(e,s)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let i=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),s=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let r=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(i,r,n),this.resetJoinOperatorOr(s,r,n),this.isReadOnly()||(i.onValueChange(this.listener),s.onValueChange(this.listener))}createJoinOperator(e,i,s){let r=this.createManagedBean(new Ow);return e.push(r),r.addCssClass("ag-filter-condition-operator"),r.addCssClass(`ag-filter-condition-operator-${s}`),i.appendChild(r.getGui()),r}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(i=>typeof i=="string"?this.createBoilerplateListOption(i):this.createCustomListOption(i))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(i=>{e.addOption(i)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:i}=e,s=this.optionsFactory.getCustomOption(e.displayKey);return{value:i,text:s?this.localeService.getLocaleTextFunc()(s.displayKey,s.displayName):this.translate(i)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let i=-1,s=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?i=r:s=!1;if(this.shouldAddNewConditionAtEnd(s))this.createJoinOperatorPanel(),this.createOption();else{let r=(e=this.lastUiCompletePosition)!=null?e:this.getNumConditions()-2;if(i<r){this.removeConditionsAndOperators(r+1);let n=i+1,o=r-n;o>0&&this.removeConditionsAndOperators(n,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=i}updateConditionStatusesAndValues(e,i){this.eTypes.forEach((r,n)=>{let o=this.isConditionDisabled(n,e);r.setDisabled(o||this.filterListOptions.length<=1),n===1&&(Ia(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((r,n)=>{vt(r,this.isConditionBodyVisible(n))});let s=(i??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((r,n)=>{r.setValue(!s,!0)}),this.eJoinOperatorsOr.forEach((r,n)=>{r.setValue(s,!0)}),this.forEachInput((r,n,o,a)=>{this.setElementDisplayed(r,n<a),this.setElementDisabled(r,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,i){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,i),this.removeElements(this.eConditionBodies,e,i),this.removeValueElements(e,i);let s=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,s,i),this.removeComponents(this.eJoinOperatorsAnd,s,i),this.removeComponents(this.eJoinOperatorsOr,s,i)}removeElements(e,i,s){this.removeItems(e,i,s).forEach(n=>hr(n))}removeComponents(e,i,s){this.removeItems(e,i,s).forEach(n=>{hr(n.getGui()),this.destroyBean(n)})}removeItems(e,i,s){return s==null?e.splice(i):e.splice(i,s)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let i=this.getInputs(0)[0];if(!i)return;i instanceof cr&&i.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let i=-1,s=-1,r=!1,n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))i===-1&&(i=a,s=a);else{let l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),h=a<i;(l||h)&&(this.removeConditionsAndOperators(a,1),r=!0,h&&s--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(s===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(s,n),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=s}getPlaceholderText(e,i){let s=this.translate(e);if(su(this.filterPlaceholder)){let r=this.filterPlaceholder,n=this.eTypes[i].getValue(),o=this.translate(n);s=r({filterOptionKey:n,filterOption:o,placeholder:s})}else typeof this.filterPlaceholder=="string"&&(s=this.filterPlaceholder);return s}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((i,s,r,n)=>{if(!(i instanceof cr))return;let o=s===0&&n>1?"inRangeStart":s===0?"filterOoo":"inRangeEnd",a=s===0&&n>1?e("ariaFilterFromValue","Filter from value"):s===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(this.getPlaceholderText(o,r)),i.setInputAriaLabel(a)})}setElementValue(e,i,s){e instanceof cr&&e.setValue(i!=null?String(i):null,!0)}setElementDisplayed(e,i){e instanceof nt&&vt(e.getGui(),i)}setElementDisabled(e,i){e instanceof nt&&Ia(e.getGui(),i)}attachElementOnChange(e,i){e instanceof cr&&e.onValueChange(i)}forEachInput(e){this.getConditionTypes().forEach((i,s)=>{this.forEachPositionTypeInput(s,i,e)})}forEachPositionInput(e,i){let s=this.getConditionType(e);this.forEachPositionTypeInput(e,s,i)}forEachPositionTypeInput(e,i,s){let r=this.getNumberOfInputs(i),n=this.getInputs(e);for(let o=0;o<n.length;o++){let a=n[o];a!=null&&s(a,o,e,r)}}isConditionDisabled(e,i){return this.isReadOnly()?!0:e===0?!1:e>i+1}isConditionBodyVisible(e){let i=this.getConditionType(e);return this.getNumberOfInputs(i)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===wa.EMPTY||this.getValues(e).some(s=>s==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&e.push(this.createCondition(i));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(i=>this.resetType(i)),this.eJoinOperatorsAnd.forEach((i,s)=>this.resetJoinOperatorAnd(i,s,this.joinOperatorId+s)),this.eJoinOperatorsOr.forEach((i,s)=>this.resetJoinOperatorOr(i,s,this.joinOperatorId+s)),this.joinOperatorId++,this.forEachInput(i=>this.resetInput(i)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Cs.resolve()}resetType(e){let s=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(s).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,i,s){this.resetJoinOperator(e,i,this.isDefaultOperator("AND"),this.translate("andCondition"),s)}resetJoinOperatorOr(e,i,s){this.resetJoinOperator(e,i,this.isDefaultOperator("OR"),this.translate("orCondition"),s)}resetJoinOperator(e,i,s,r,n){this.updateJoinOperatorDisabled(e.setValue(s,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(r),i)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i)),this.eJoinOperatorsOr.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i))}updateJoinOperatorDisabled(e,i){e.setDisabled(this.isReadOnly()||i>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,i){let s=this.mapValuesFromModel(e);this.forEachInput((r,n,o,a)=>{o===i&&this.setElementValue(r,s[n]!=null?s[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((i,s,r,n)=>{this.setElementValue(i,s===0&&r===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,i){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(i,s=>{this.attachElementOnChange(s,this.listener)}))}individualConditionPasses(e,i){let s=this.getCellValue(e.node),r=this.mapValuesFromModel(i),n=this.optionsFactory.getCustomOption(i.type),o=this.evaluateCustomFilter(n,r,s);return o??(s==null?this.evaluateNullValue(i.type):this.evaluateNonNullValue(r,s,i,e))}evaluateCustomFilter(e,i,s){if(e==null)return;let{predicate:r}=e;if(r!=null&&!i.some(n=>n==null))return r(i,s)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}};is.EMPTY="empty";is.BLANK="blank";is.NOT_BLANK="notBlank";is.EQUALS="equals";is.NOT_EQUAL="notEqual";is.LESS_THAN="lessThan";is.LESS_THAN_OR_EQUAL="lessThanOrEqual";is.GREATER_THAN="greaterThan";is.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";is.IN_RANGE="inRange";is.CONTAINS="contains";is.NOT_CONTAINS="notContains";is.STARTS_WITH="startsWith";is.ENDS_WITH="endsWith";var Yt=is,di=class Ci extends Yt{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case Ci.EQUALS:case Ci.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case Ci.GREATER_THAN:case Ci.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case Ci.LESS_THAN:case Ci.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case Ci.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case Ci.BLANK:return!0;case Ci.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,i,s){let r=this.comparator(),n=e[0]!=null?r(e[0],i):0;switch(s.type){case Ci.EQUALS:return n===0;case Ci.NOT_EQUAL:return n!==0;case Ci.GREATER_THAN:return n>0;case Ci.GREATER_THAN_OR_EQUAL:return n>=0;case Ci.LESS_THAN:return n<0;case Ci.LESS_THAN_OR_EQUAL:return n<=0;case Ci.IN_RANGE:{let o=r(e[1],i);return this.scalarFilterParams.inRangeInclusive?n>=0&&o<=0:n>0&&o<0}case Ci.BLANK:return this.isBlank(i);case Ci.NOT_BLANK:return!this.isBlank(i);default:return console.warn('AG Grid: Unexpected type of filter "'+s.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},UC=1e3,zC=1/0,Lw=class extends Rm{constructor(t,e,i){super(e,i),this.dateFilterParams=t}conditionToString(t,e){let{type:i}=t,{numberOfInputs:s}=e||{},r=i==Yt.IN_RANGE||s===2,n=gs(t.dateFrom),o=gs(t.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){let l=n!==null?Ra(n,a):"null",h=o!==null?Ra(o,a):"null";return`${l}-${h}`}return n!=null?Ra(n,a):`${i}`}updateParams(t){super.updateParams(t),this.dateFilterParams=t.dateFilterParams}},Dm=class kw extends di{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=UC,this.maxValidYear=zC,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:i,dateTo:s,type:r}=e||{};return[i&&gs(i)||null,s&&gs(s)||null].slice(0,this.getNumberOfInputs(r))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,i){let s=i;return i==null||s<e?-1:s>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let i=(s,r)=>{if(e[s]!=null)if(isNaN(e[s]))console.warn(`AG Grid: DateFilter ${s} is not a number`);else return e[s]==null?r:Number(e[s]);return r};this.minValidYear=i("minValidYear",UC),this.maxValidYear=i("maxValidYear",zC),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:gs(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:gs(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Lw(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let i=new Tw(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>i.destroy()),i}setElementValue(e,i){e.setDate(i)}setElementDisplayed(e,i){e.setDisplayed(i)}setElementDisabled(e,i){e.setDisabled(i)}getDefaultFilterOptions(){return kw.DEFAULT_FILTER_OPTIONS}createValueElement(){let i=this.gos.getDocument().createElement("div");return i.classList.add("ag-filter-body"),this.createFromToElement(i,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(i,this.eConditionPanelsTo,this.dateConditionToComps,"to"),i}createFromToElement(e,i,s,r){let o=this.gos.getDocument().createElement("div");o.classList.add(`ag-filter-${r}`),o.classList.add(`ag-filter-date-${r}`),i.push(o),e.appendChild(o),s.push(this.createDateCompWrapper(o))}removeValueElements(e,i){this.removeDateComps(this.dateConditionFromComps,e,i),this.removeDateComps(this.dateConditionToComps,e,i),this.removeItems(this.eConditionPanelsFrom,e,i),this.removeItems(this.eConditionPanelsTo,e,i)}removeDateComps(e,i,s){this.removeItems(e,i,s).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let i=!0;return this.forEachInput((s,r,n,o)=>{n!==e||!i||r>=o||(i=i&&this.isValidDateValue(s.getDate()))}),i}areSimpleModelsEqual(e,i){return e.dateFrom===i.dateFrom&&e.dateTo===i.dateTo&&e.type===i.type}getFilterType(){return"date"}createCondition(e){let i=this.getConditionType(e),s={},r=this.getValues(e);return r.length>0&&(s.dateFrom=Ys(r[0])),r.length>1&&(s.dateTo=Ys(r[1])),Qe({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:i},s)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),i=this.translate("dateFormatOoo"),s=e("ariaFilterValue","Filter Value");this.forEachInput(r=>{r.setInputPlaceholder(i),r.setInputAriaLabel(s)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let i=[];return this.forEachPositionInput(e,(s,r,n,o)=>{r<o&&i.push(s.getDate())}),i}translate(e){return e===di.LESS_THAN?super.translate("before"):e===di.GREATER_THAN?super.translate("after"):super.translate(e)}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}};Dm.DEFAULT_FILTER_OPTIONS=[di.EQUALS,di.NOT_EQUAL,di.LESS_THAN,di.GREATER_THAN,di.IN_RANGE,di.BLANK,di.NOT_BLANK];w([Q("userComponentFactory")],Dm.prototype,"userComponentFactory",2);var Nw=Dm,Fm=class extends nt{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(t){return t&&t.afterFloatingFilter}isEventFromDataChange(t){return t?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(t){if(!t){this.lastType=this.optionsFactory.getDefaultOption();return}let e=t.operator,i;e?i=t.conditions[0]:i=t,this.lastType=i.type}canWeEditAfterModelFromParentFilter(t){if(!t)return this.isTypeEditable(this.lastType);if(t.operator)return!1;let i=t;return this.isTypeEditable(i.type)}init(t){this.setSimpleParams(t,!1)}setSimpleParams(t,e=!0){this.optionsFactory=new Aw,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),e||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!t.filterParams.readOnly;let i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.setSimpleParams(t)}doesFilterHaveSingleInput(t){let e=this.optionsFactory.getCustomOption(t),{numberOfInputs:i}=e||{};return i==null||i==1}isTypeEditable(t){let e=[Yt.IN_RANGE,Yt.EMPTY,Yt.BLANK,Yt.NOT_BLANK];return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&e.indexOf(t)<0}getAriaLabel(t){let e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${e} ${i("ariaFilterInput","Filter Input")}`}};w([Q("columnModel")],Fm.prototype,"columnModel",2);var Cu=class extends Fm{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return Nw.DEFAULT_FILTER_OPTIONS}init(t){super.init(t),this.params=t,this.filterParams=t.filterParams,this.createDateComponent(),this.filterModelFormatter=new Lw(this.filterParams,this.localeService,this.optionsFactory);let e=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(e("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.params=t,this.filterParams=t.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(t.currentParentModel())}updateCompOnModelChange(t){let e=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(t);if(this.setEditable(e),e){if(t){let i=t;this.dateComp.setDate(gs(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(t)),this.dateComp.setDate(null)}setEditable(t){vt(this.eDateWrapper,t),vt(this.eReadOnlyText.getGui(),!t)}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(super.setLastTypeFromModel(t),this.updateCompOnModelChange(t))}onDateChanged(){let t=this.dateComp.getDate(),e=Ys(t);this.params.parentFilterInstance(i=>{if(i){let s=gs(e);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){let t=jd.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Qi(this.onDateChanged.bind(this),t),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Tw(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,t=>{t.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let t=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(t)}getFilterModelFormatter(){return this.filterModelFormatter}};w([Q("userComponentFactory")],Cu.prototype,"userComponentFactory",2);w([Be("eReadOnlyText")],Cu.prototype,"eReadOnlyText",2);w([Be("eDateWrapper")],Cu.prototype,"eDateWrapper",2);var Gw=class extends nt{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t,this.setParams(t);let e=this.eDateInput.getInputElement();this.addManagedListener(e,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||e.focus()}),this.addManagedListener(e,"input",i=>{i.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(t){let e=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=i&&Pr(),e.type=i?"date":"text";let{minValidYear:s,maxValidYear:r,minValidDate:n,maxValidDate:o}=t.filterParams||{};if(n&&s&&et("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&r&&et("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),n&&o){let[a,l]=[n,o].map(h=>h instanceof Date?h:gs(h));a&&l&&a.getTime()>l.getTime()&&et("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}n?n instanceof Date?e.min=Ra(n):e.min=n:s&&(e.min=`${s}-01-01`),o?o instanceof Date?e.max=Ra(o):e.max=o:r&&(e.max=`${r}-12-31`)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams(t)}getDate(){return gs(this.eDateInput.getValue())}setDate(t){this.eDateInput.setValue(Ys(t,!1))}setInputPlaceholder(t){this.eDateInput.setInputPlaceholder(t)}setInputAriaLabel(t){this.eDateInput.setAriaLabel(t)}setDisabled(t){this.eDateInput.setDisabled(t)}afterGuiAttached(t){(!t||!t.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(t){return t.filterParams&&t.filterParams.browserDatePicker!=null?t.filterParams.browserDatePicker:cu()||hm()||Pr()&&lm()>=14.1}};w([Be("eDateInput")],Gw.prototype,"eDateInput",2);var Do=class extends cr{constructor(t,e="ag-text-field",i="text"){super(t,e,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(t,e){return this.eInput.value!==t&&(this.eInput.value=Me(t)?t:""),super.setValue(t,e)}setStartValue(t){this.setValue(t,!0)}preventDisallowedCharacters(){let t=new RegExp(`[${this.config.allowedCharPattern}]`),e=i=>{uu(i)&&i.key&&!t.test(i.key)&&i.preventDefault()};this.addManagedListener(this.eInput,"keydown",e),this.addManagedListener(this.eInput,"paste",i=>{var s;let r=(s=i.clipboardData)==null?void 0:s.getData("text");r&&r.split("").some(n=>!t.test(n))&&i.preventDefault()})}},Pm=class extends Do{constructor(t){super(t,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{let r=parseFloat(this.eInput.value),n=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==n&&this.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";let{precision:t,min:e,max:i,step:s}=this.config;typeof t=="number"&&this.setPrecision(t),typeof e=="number"&&this.setMin(e),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}normalizeValue(t){if(t==="")return"";this.precision!=null&&(t=this.adjustPrecision(t));let e=parseFloat(t);return this.min!=null&&e<this.min?t=this.min.toString():this.max!=null&&e>this.max&&(t=this.max.toString()),t}adjustPrecision(t,e){if(this.precision==null)return t;if(e){let s=parseFloat(t).toFixed(this.precision);return parseFloat(s).toString()}let i=String(t).split(".");if(i.length>1){if(i[1].length<=this.precision)return t;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(t){return this.min===t?this:(this.min=t,Fr(this.eInput,"min",t),this)}setMax(t){return this.max===t?this:(this.max=t,Fr(this.eInput,"max",t),this)}setPrecision(t){return this.precision=t,this}setStep(t){return this.step===t?this:(this.step=t,Fr(this.eInput,"step",t),this)}setValue(t,e){return this.setValueOrInputValue(i=>super.setValue(i,e),()=>this,t)}setStartValue(t){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},t)}setValueOrInputValue(t,e,i){if(Me(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return t(i);if(!s){i=this.adjustPrecision(i);let r=this.normalizeValue(i);s=i!=r}if(s)return e(i)}return t(i)}getValue(){if(!this.eInput.validity.valid)return;let t=this.eInput.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(t){return typeof t=="string"&&t.includes("e")}},Vw=class extends Rm{conditionToString(t,e){let{numberOfInputs:i}=e||{};return t.type==Yt.IN_RANGE||i===2?`${this.formatValue(t.filter)}-${this.formatValue(t.filterTo)}`:t.filter!=null?this.formatValue(t.filter):`${t.type}`}};function Og(t){let{allowedCharPattern:e}=t??{};return e??null}var Bw=class Hw extends di{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:i,filterTo:s,type:r}=e||{};return[this.processValue(i),this.processValue(s)].slice(0,this.getNumberOfInputs(r))}getDefaultDebounceMs(){return 500}comparator(){return(e,i)=>e===i?0:e<i?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new Vw(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return Hw.DEFAULT_FILTER_OPTIONS}setElementValue(e,i,s){let r=!s&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(i??null):i;super.setElementValue(e,r)}createValueElement(){let e=Og(this.numberFilterParams),i=document.createElement("div");return i.classList.add("ag-filter-body"),qt(i,"presentation"),this.createFromToElement(i,this.eValuesFrom,"from",e),this.createFromToElement(i,this.eValuesTo,"to",e),i}createFromToElement(e,i,s,r){let n=this.createManagedBean(r?new Do({allowedCharPattern:r}):new Pm);n.addCssClass(`ag-filter-${s}`),n.addCssClass("ag-filter-filter"),i.push(n),e.appendChild(n.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}getValues(e){let i=[];return this.forEachPositionInput(e,(s,r,n,o)=>{r<o&&i.push(this.processValue(this.stringToFloat(s.getValue())))}),i}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let i=Dr(e);return i!=null&&i.trim()===""&&(i=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(i):i==null||i.trim()==="-"?null:parseFloat(i)}createCondition(e){let i=this.getConditionType(e),s={filterType:this.getFilterType(),type:i},r=this.getValues(e);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}hasInvalidInputs(){let e=!1;return this.forEachInput(i=>{if(!i.getInputElement().validity.valid){e=!0;return}}),e}};Bw.DEFAULT_FILTER_OPTIONS=[di.EQUALS,di.NOT_EQUAL,di.GREATER_THAN,di.GREATER_THAN_OR_EQUAL,di.LESS_THAN,di.LESS_THAN_OR_EQUAL,di.IN_RANGE,di.BLANK,di.NOT_BLANK];var Ww=Bw,Uw=class extends Rm{conditionToString(t,e){let{numberOfInputs:i}=e||{};return t.type==Yt.IN_RANGE||i===2?`${t.filter}-${t.filterTo}`:t.filter!=null?`${t.filter}`:`${t.type}`}},ar=class xa extends Yt{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){let i=e&&e.trim();return i===""?e:i}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?xa.DEFAULT_FORMATTER:xa.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new Uw(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(dt.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:i,value:s,filterText:r})=>e(i,s,r)):this.textFilterParams.textMatcher||xa.DEFAULT_MATCHER}createCondition(e){let i=this.getConditionType(e),s={filterType:this.getFilterType(),type:i},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(s.filter=r[0]),r.length>1&&(s.filterTo=r[1]),s}getFilterType(){return"text"}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,i){let s=[];return this.forEachPositionInput(e,(r,n,o,a)=>{var l;if(n<a){let h=Dr(r.getValue());i&&this.textFilterParams.trimInput&&(h=(l=xa.trimInput(h))!=null?l:null,r.setValue(h,!0)),s.push(h)}}),s}getDefaultFilterOptions(){return xa.DEFAULT_FILTER_OPTIONS}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),qt(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,i,s){let r=this.createManagedBean(new Do);r.addCssClass(`ag-filter-${s}`),r.addCssClass("ag-filter-filter"),i.push(r),e.appendChild(r.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}mapValuesFromModel(e){let{filter:i,filterTo:s,type:r}=e||{};return[i||null,s||null].slice(0,this.getNumberOfInputs(r))}evaluateNullValue(e){let i=[Yt.NOT_EQUAL,Yt.NOT_CONTAINS,Yt.BLANK];return e?i.indexOf(e)>=0:!1}evaluateNonNullValue(e,i,s,r){let n=e.map(m=>this.formatter(m))||[],o=this.formatter(i),{api:a,colDef:l,column:h,columnApi:c,context:d,textFormatter:p}=this.textFilterParams;if(s.type===Yt.BLANK)return this.isBlank(i);if(s.type===Yt.NOT_BLANK)return!this.isBlank(i);let u={api:a,colDef:l,column:h,columnApi:c,context:d,node:r.node,data:r.data,filterOption:s.type,value:o,textFormatter:p};return n.some(m=>this.matcher(zt(Qe({},u),{filterText:m})))}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}};ar.DEFAULT_FILTER_OPTIONS=[Yt.CONTAINS,Yt.NOT_CONTAINS,Yt.EQUALS,Yt.NOT_EQUAL,Yt.STARTS_WITH,Yt.ENDS_WITH,Yt.BLANK,Yt.NOT_BLANK];ar.DEFAULT_FORMATTER=t=>t;ar.DEFAULT_LOWERCASE_FORMATTER=t=>t==null?null:t.toString().toLowerCase();ar.DEFAULT_MATCHER=({filterOption:t,value:e,filterText:i})=>{if(i==null)return!1;switch(t){case ar.CONTAINS:return e.indexOf(i)>=0;case ar.NOT_CONTAINS:return e.indexOf(i)<0;case ar.EQUALS:return e===i;case ar.NOT_EQUAL:return e!=i;case ar.STARTS_WITH:return e.indexOf(i)===0;case ar.ENDS_WITH:let s=e.lastIndexOf(i);return s>=0&&s===e.length-i.length;default:return!1}};var Mm=ar,zw=class extends Ie{constructor(t){super(),this.params=t,this.valueChangedListener=()=>{}}setupGui(t){var e;this.eFloatingFilterTextInput=this.createManagedBean(new Do((e=this.params)==null?void 0:e.config));let i=this.eFloatingFilterTextInput.getGui();t.appendChild(i),this.addManagedListener(i,"input",s=>this.valueChangedListener(s)),this.addManagedListener(i,"keydown",s=>this.valueChangedListener(s))}setEditable(t){this.eFloatingFilterTextInput.setDisabled(!t)}setAutoComplete(t){this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(t,e){this.eFloatingFilterTextInput.setValue(t,e)}setValueChangedListener(t){this.valueChangedListener=t}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterTextInput.setInputAriaLabel(t)}},yu=class extends Fm{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(t)))}init(t){this.setupFloatingFilterInputService(t),super.init(t),this.setTextInputParams(t)}setupFloatingFilterInputService(t){this.floatingFilterInputService=this.createFloatingFilterInputService(t),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(t){var e;this.params=t;let i=(e=t.browserAutoComplete)!=null?e:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:i}),this.applyActive=jd.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){let s=jd.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),r=Qi(this.syncUpWithParentFilter.bind(this),s);this.floatingFilterInputService.setValueChangedListener(r)}}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.setTextInputParams(t)}recreateFloatingFilterInputService(t){let e=this.floatingFilterInputService.getValue();ti(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(t),this.floatingFilterInputService.setValue(e,!0)}syncUpWithParentFilter(t){let e=t.key===Ce.ENTER;if(this.applyActive&&!e)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Mm.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(t){this.floatingFilterInputService.setEditable(t)}};w([Be("eFloatingFilterInputContainer")],yu.prototype,"eFloatingFilterInputContainer",2);w([ke],yu.prototype,"postConstruct",1);var aR=class extends Ie{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(t){this.eFloatingFilterNumberInput=this.createManagedBean(new Pm),this.eFloatingFilterTextInput=this.createManagedBean(new Do),this.eFloatingFilterTextInput.setDisabled(!0);let e=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();t.appendChild(e),t.appendChild(i),this.setupListeners(e,s=>this.valueChangedListener(s)),this.setupListeners(i,s=>this.valueChangedListener(s))}setEditable(t){this.numberInputActive=t,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(t){this.eFloatingFilterNumberInput.setAutoComplete(t),this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.getActiveInputElement().getValue()}setValue(t,e){this.getActiveInputElement().setValue(t,e)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(t){this.valueChangedListener=t}setupListeners(t,e){this.addManagedListener(t,"input",e),this.addManagedListener(t,"keydown",e)}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterNumberInput.setInputAriaLabel(t),this.eFloatingFilterTextInput.setInputAriaLabel(t)}},lR=class extends yu{init(t){var e;super.init(t),this.filterModelFormatter=new Vw(this.localeService,this.optionsFactory,(e=t.filterParams)==null?void 0:e.numberFormatter)}onParamsUpdated(t){this.refresh(t)}refresh(t){Og(t.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(t),super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Ww.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(t){return this.allowedCharPattern=Og(t.filterParams),this.allowedCharPattern?this.createManagedBean(new zw({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new aR)}},hR=class extends yu{init(t){super.init(t),this.filterModelFormatter=new Uw(this.localeService,this.optionsFactory)}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Mm.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new zw)}},Qh=class uh{constructor(e,i=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new ur,this.eElement=e,this.preventMouseClick=i;let s=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",s,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",s,{passive:!0}),this.eElement.removeEventListener("touchmove",r,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let i=0;i<e.length;i++)if(e[i].identifier===this.touchStart.identifier)return e[i];return null}addEventListener(e,i){this.eventService.addEventListener(e,i)}removeEventListener(e,i){this.eventService.removeEventListener(e,i)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let i=this.touchStart;window.setTimeout(()=>{let s=this.touchStart===i;if(this.touching&&s&&!this.moved){this.moved=!0;let r={type:uh.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(r)}},500)}onTouchMove(e){if(!this.touching)return;let i=this.getActiveTouch(e.touches);if(!i)return;!bm(i,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let i={type:uh.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>uh.DOUBLE_TAP_MILLIS){let s={type:uh.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(s),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};Qh.EVENT_TAP="tap";Qh.EVENT_DOUBLE_TAP="doubleTap";Qh.EVENT_LONG_TAP="longTap";Qh.DOUBLE_TAP_MILLIS=500;var _i=Qh,Zr=class jw extends nt{constructor(e){super(),e||this.setTemplate(jw.TEMPLATE)}attachCustomElements(e,i,s,r,n){this.eSortOrder=e,this.eSortAsc=i,this.eSortDesc=s,this.eSortMixed=r,this.eSortNone=n}setupSort(e,i=!1){this.column=e,this.suppressOrder=i,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,i,s){if(i==null)return;let r=Kt(e,this.gos,s);r&&i.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let i=e==="asc";vt(this.eSortAsc,i,{skipAriaHidden:!0})}if(this.eSortDesc){let i=e==="desc";vt(this.eSortDesc,i,{skipAriaHidden:!0})}if(this.eSortNone){let i=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),s=e==null;vt(this.eSortNone,!i&&s,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";vt(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;let i=this.sortController.getColumnsWithSortingOrdered(),s=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?e:-1,r=i.some(o=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(o))!=null?a:!1}),n=s>=0&&r;vt(this.eSortOrder,n,{skipAriaHidden:!0}),s>=0?this.eSortOrder.textContent=(s+1).toString():ti(this.eSortOrder)}};Zr.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;w([Be("eSortOrder")],Zr.prototype,"eSortOrder",2);w([Be("eSortAsc")],Zr.prototype,"eSortAsc",2);w([Be("eSortDesc")],Zr.prototype,"eSortDesc",2);w([Be("eSortMixed")],Zr.prototype,"eSortMixed",2);w([Be("eSortNone")],Zr.prototype,"eSortNone",2);w([Q("columnModel")],Zr.prototype,"columnModel",2);w([Q("sortController")],Zr.prototype,"sortController",2);var Im=Zr,ji=class $w extends nt{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){let i=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||i.enableFilterButton!=e.enableFilterButton||i.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){var e;let i=(e=this.params.template)!=null?e:$w.TEMPLATE;return i=i&&i.trim?i.trim():i,i}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let i=oi(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=i)}}addInIcon(e,i,s){if(i==null)return;let r=Kt(e,this.gos,s);r&&i.appendChild(r)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let i=new _i(this.getGui(),!0),s=this.shouldSuppressMenuHide(),r=s&&Me(this.eMenu),n=r?new _i(this.eMenu,!0):i;if(this.params.enableMenu){let o=r?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>this.params.showColumnMenuAfterMouseClick(l.touchStart);this.addManagedListener(n,_i[o],a)}if(this.params.enableSorting){let o=a=>{var l,h;let c=a.touchStart.target;s&&((l=this.eMenu)!=null&&l.contains(c)||(h=this.eFilterButton)!=null&&h.contains(c))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(i,_i.EVENT_TAP,o)}if(this.params.enableFilterButton){let o=new _i(this.eFilterButton,!0);this.addManagedListener(o,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>i.destroy()),r&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){hr(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var i,s,r,n;let{column:o}=this.params,a=this.menuService.isLegacyMenuEnabled();if(e&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(o))return this.params.showFilter((s=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?s:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((n=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?n:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new Im(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,Pt.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",i=>{let s=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(s||n)){let l=this.gos.get("multiSortKey")==="ctrl"?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(l)}});let e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){let i=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),r=!i?.every(n=>this.params.column.getSort()==n.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(e,i,s){if(!e)return hr(i),!1;let{column:r}=this.params;return this.addInIcon("filter",i,r),this.addManagedListener(r,Pt.EVENT_FILTER_CHANGED,s),s(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();vt(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var i,s,r,n;return e?(s=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?s:this.getGui():(n=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?n:this.getGui()}};ji.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;w([Q("sortController")],ji.prototype,"sortController",2);w([Q("menuService")],ji.prototype,"menuService",2);w([Q("columnModel")],ji.prototype,"columnModel",2);w([Be("eFilter")],ji.prototype,"eFilter",2);w([Be("eFilterButton")],ji.prototype,"eFilterButton",2);w([Be("eSortIndicator")],ji.prototype,"eSortIndicator",2);w([Be("eMenu")],ji.prototype,"eMenu",2);w([Be("eLabel")],ji.prototype,"eLabel",2);w([Be("eText")],ji.prototype,"eText",2);w([Be("eSortOrder")],ji.prototype,"eSortOrder",2);w([Be("eSortAsc")],ji.prototype,"eSortAsc",2);w([Be("eSortDesc")],ji.prototype,"eSortDesc",2);w([Be("eSortMixed")],ji.prototype,"eSortMixed",2);w([Be("eSortNone")],ji.prototype,"eSortNone",2);var Lg=ji,Jh=class Kw extends nt{constructor(){super(Kw.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&et("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");let e=r=>{if(dr(r))return;let n=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),n,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);let i=r=>{pr(r)};this.addManagedListener(this.eCloseIcon,"dblclick",i),this.addManagedListener(this.eOpenIcon,"dblclick",i),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();let s=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(s,ni.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(s,ni.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,i){let s=new _i(e,!0);this.addManagedListener(s,_i.EVENT_TAP,i),this.addDestroyFunc(()=>s.destroy()),this.addManagedListener(e,"click",i)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let i=this.params.columnGroup.isExpanded();vt(this.eOpenIcon,i),vt(this.eCloseIcon,!i)}else vt(this.eOpenIcon,!1),vt(this.eCloseIcon,!1)}addInIcon(e,i){let s=Kt(e,this.gos,null);s&&this.getRefElement(i).appendChild(s)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){vt(this.eOpenIcon,!1),vt(this.eCloseIcon,!1);return}}setupLabel(){var e;let{displayName:i,columnGroup:s}=this.params;if(Me(i)){let r=oi(i,!0);this.getRefElement("agLabel").textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!((e=s.getColGroupDef())!=null&&e.suppressStickyLabel))}};Jh.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;w([Q("columnModel")],Jh.prototype,"columnModel",2);w([Be("agOpened")],Jh.prototype,"eOpenIcon",2);w([Be("agClosed")],Jh.prototype,"eCloseIcon",2);var cR=Jh,Fo=class extends nt{isPopup(){return!0}setParentComponent(t){t.addCssClass("ag-has-popup"),super.setParentComponent(t)}destroy(){let t=this.parentComponent;t&&t.isAlive()&&t.getGui().classList.remove("ag-has-popup"),super.destroy()}},Om=class Xw extends Fo{constructor(){super(Xw.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Me(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let i=e.key;(i===Ce.LEFT||i===Ce.UP||i===Ce.RIGHT||i===Ce.DOWN||e.shiftKey&&i===Ce.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!Me(e)&&!Me(this.params.value)?this.params.value:this.params.parseValue(e)}};Om.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;w([Be("eTextArea")],Om.prototype,"eTextArea",2);var dR=Om,Lm=class extends Fo{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(t){this.focusAfterAttached=t.cellStartedEdit;let{eSelect:e,valueService:i,gos:s}=this,{values:r,value:n,eventKey:o}=t;if(rt(r)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=o!=null?o===Ce.ENTER:!1;let a=!1;r.forEach(d=>{let p={value:d},u=i.formatValue(t.column,null,d),m=u!=null;p.text=m?u:d,e.addOption(p),a=a||n===d}),a?e.setValue(t.value,!0):t.values.length&&e.setValue(t.values[0],!0);let{valueListGap:l,valueListMaxWidth:h,valueListMaxHeight:c}=t;l!=null&&e.setPickerGap(l),c!=null&&e.setPickerMaxHeight(c),h!=null&&e.setPickerMaxWidth(h),s.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,mu.EVENT_ITEM_SELECTED,()=>t.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};w([Q("valueService")],Lm.prototype,"valueService",2);w([Be("eSelect")],Lm.prototype,"eSelect",2);var ec=class extends Fo{constructor(t){super(`
            <div class="ag-cell-edit-wrapper">
                ${t.getTemplate()}
            </div>`),this.cellEditorInput=t}init(t){this.params=t;let e=this.eInput;this.cellEditorInput.init(e,t);let i;if(t.cellStartedEdit){this.focusAfterAttached=!0;let s=t.eventKey;s===Ce.BACKSPACE||t.eventKey===Ce.DELETE?i="":s&&s.length===1?i=s:(i=this.cellEditorInput.getStartValue(),s!==Ce.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&e.setStartValue(i),this.addManagedListener(e.getGui(),"keydown",s=>{let{key:r}=s;(r===Ce.PAGE_UP||r===Ce.PAGE_DOWN)&&s.preventDefault()})}afterGuiAttached(){var t,e;let i=this.localeService.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Pr()||s.getFocusableElement().focus();let r=s.getInputElement();this.highlightAllOnFocus?r.select():(e=(t=this.cellEditorInput).setCaret)==null||e.call(t)}focusIn(){let t=this.eInput,e=t.getFocusableElement(),i=t.getInputElement();e.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};w([Be("eInput")],ec.prototype,"eInput",2);var uR=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(t,e){this.eInput=t,this.params=e,e.maxLength!=null&&t.setMaxLength(e.maxLength)}getValue(){let t=this.eInput.getValue();return!Me(t)&&!Me(this.params.value)?this.params.value:this.params.parseValue(t)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let t=this.eInput.getValue(),e=Me(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)}},jC=class extends ec{constructor(){super(new uR)}},pR="\u2191",fR="\u2193",Yw=class extends nt{constructor(){super(),this.refreshCount=0;let t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-change-delta");let i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),t.appendChild(e),t.appendChild(i),this.setTemplateFromElement(t)}init(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t,!0)}showDelta(t,e){let i=Math.abs(e),s=t.formatValue(i),r=Me(s)?s:i,n=e>=0;n?this.eDelta.textContent=pR+r:this.eDelta.textContent=fR+r,this.eDelta.classList.toggle("ag-value-change-delta-up",n),this.eDelta.classList.toggle("ag-value-change-delta-down",!n)}setTimerToRemoveDelta(){this.refreshCount++;let t=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),ti(this.eDelta)}refresh(t,e=!1){let i=t.value;if(i===this.lastValue||(Me(t.valueFormatted)?this.eValue.textContent=t.valueFormatted:Me(t.value)?this.eValue.textContent=i:ti(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){let s=i-this.lastValue;this.showDelta(t,s)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),e||this.setTimerToRemoveDelta(),this.lastValue=i,!0}};w([Q("filterManager")],Yw.prototype,"filterManager",2);var qw=class extends nt{constructor(){super(),this.refreshCount=0;let t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-slide-current"),t.appendChild(e),this.setTemplateFromElement(t),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(t){this.refresh(t,!0)}addSlideAnimation(){this.refreshCount++;let t=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let e=document.createElement("span");e.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=e,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{t===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(t,e=!1){let i=t.value;return rt(i)&&(i=""),i===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(e||this.addSlideAnimation(),this.lastValue=i,Me(t.valueFormatted)?this.eCurrent.textContent=t.valueFormatted:Me(t.value)?this.eCurrent.textContent=i:ti(this.eCurrent),!0)}};w([Q("filterManager")],qw.prototype,"filterManager",2);var jt=class Ht{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Ht.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,i){let s=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let r=this.createDataChangedEvent(e,s,i);this.dispatchLocalEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,i,s){return{type:Ht.EVENT_DATA_CHANGED,node:this,oldData:i,newData:e,update:s}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let e=new Ht(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,i){let s=Me(this.id)?this.createDaemonNode():null,r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);let n=this.createDataChangedEvent(e,r,!1);this.dispatchLocalEvent(n)}checkRowSelectable(){let e=this.beans.gos.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e,i){if(this.selectable!==e){if(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_SELECTABLE_CHANGED)),i)return;if(this.beans.gos.get("groupSelectsChildren")){let r=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:r??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(e){let i=this.beans.gos.getCallback("getRowId");if(i)if(this.data){let s=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(Ht.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${Ht.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){let i=[],s=this;for(e&&(s=s.parent);s&&s.level>=0;)i.push(s.key),s=s.parent;return i.reverse(),i}isPixelInRange(e){return!Me(this.rowTop)||!Me(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_GROUP_CHANGED)))}setRowHeight(e,i=!1){this.rowHeight=e,this.rowHeightEstimated=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Qi(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,i=!0,s=0,r=this.__autoHeights;if(r==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=r[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let h=[];switch(a.getPinned()){case"left":h=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":h=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:h=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(h.includes(a)){e=!0;return}l=-1}else{e=!0;return}else i=!1;l>s&&(s=l)}),e)||((i||s<10)&&(s=this.beans.gos.getRowHeightForNode(this).height),s==this.rowHeight))return;this.setRowHeight(s);let o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,i,s){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_EXPANDED_CHANGED));let r=Object.assign({},this.createGlobalRowEvent(V.EVENT_ROW_GROUP_OPENED),{expanded:e,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(r,s),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,i,s){let n=(()=>{var l;return typeof e!="string"?e:(l=this.beans.columnModel.getGridColumn(e))!=null?l:this.beans.columnModel.getPrimaryColumn(e)})(),o=this.getValueFromValueService(n);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(n,o,i,s),!1;let a=this.beans.valueService.setValue(this,n,i,s);return this.dispatchCellChangedEvent(n,i,o),this.checkRowSelectable(),a}getValueFromValueService(e){var i,s;let r=this.leafGroup&&this.beans.columnModel.isPivotMode(),n=this.group&&this.expanded&&!this.footer&&!r,o=!1,a=(i=this.beans.gos.get("groupTotalRow"))!=null?i:this.beans.gos.get("groupIncludeFooter");typeof a!="function"?o=!!a:o=!!((s=this.beans.gos.getCallback("groupTotalRow"))!=null?s:this.beans.gos.getCallback("groupIncludeFooter"))({node:this});let l=this.beans.gos.get("groupSuppressBlankHeader"),h=n&&o&&!l;return this.beans.valueService.getValue(e,this,!1,h)}dispatchEventForSaveValueReadOnly(e,i,s,r){let n=this.beans.gos.addGridCommonParams({type:V.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:i,newValue:s,value:s,source:r});this.beans.eventService.dispatchEvent(n)}setGroupValue(e,i){let s=this.beans.columnModel.getGridColumn(e);rt(this.groupData)&&(this.groupData={});let r=s.getColId(),n=this.groupData[r];n!==i&&(this.groupData[r]=i,this.dispatchCellChangedEvent(s,i,n))}setAggData(e){let i=this.aggData;if(this.aggData=e,this.eventService){let s=r=>{let n=this.aggData?this.aggData[r]:void 0,o=i?i[r]:void 0;if(n===o)return;let a=this.beans.columnModel.lookupGridColumn(r);a&&this.dispatchCellChangedEvent(a,n,o)};for(let r in this.aggData)s(r);for(let r in e)r in this.aggData||s(r)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){let s=this.beans.gos.get("treeData"),r=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(s?!!r&&r(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ht.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Ks(this.childrenAfterGroup)}dispatchCellChangedEvent(e,i,s){let r={type:Ht.EVENT_CELL_CHANGED,node:this,column:e,newValue:i,oldValue:s};this.dispatchLocalEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let i=!1,s=!1,r=!1;if(!((e=this.childrenAfterGroup)!=null&&e.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){let o=this.childrenAfterGroup[n],a=o.isSelected();if(!o.selectable){let l=o.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:i=!0;break;case!1:s=!0;break;default:r=!0;break}}if(!(r||i&&s))return i?!0:s?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,i,s="api"){let r=!this.selectable&&e,n=this.selected===e;if(r||n)return!1;this.selected=e,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(Ht.EVENT_ROW_SELECTED));let o=this.sibling;o&&o.footer&&o.eventService&&o.dispatchLocalEvent(o.createLocalRowEvent(Ht.EVENT_ROW_SELECTED));let a=zt(Qe({},this.createGlobalRowEvent(V.EVENT_ROW_SELECTED)),{event:i||null,source:s});return this.beans.eventService.dispatchEvent(a),!0}setSelected(e,i=!1,s="api"){if(typeof s=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:i,rangeSelect:!1,source:s})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(zt(Qe({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let i=this.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}addEventListener(e,i){var s,r;this.eventService||(this.eventService=new ur),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Qg(this.beans.frameworkOverrides));let n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))!=null?r:i;this.eventService.addEventListener(e,n)}removeEventListener(e,i){var s,r;if(!this.eventService)return;let n=(r=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))!=null?r:i;this.eventService.removeEventListener(e,n),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(Ht.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(Ht.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let i=this,s=!0,r=!1,n=null;for(;s&&!r;){let o=i.parent;Me(o)&&i.firstChild?o.rowGroupColumn===e&&(r=!0,n=o):s=!1,i=o}return r?n:null}isFullWidthCell(){if(this.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;let e=[],i=this;for(;i.key!=null;)e.push(i.key),i=i.parent;return e.reverse()}createFooter(){if(this.sibling)return;let e=new Set(["eventService","__objectId","sticky"]),i=new Ht(this.beans);Object.keys(this).forEach(s=>{e.has(s)||(i[s]=this[s])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};jt.ID_PREFIX_ROW_GROUP="row-group-";jt.ID_PREFIX_TOP_PINNED="t-";jt.ID_PREFIX_BOTTOM_PINNED="b-";jt.OBJECT_ID_SEQUENCE=0;jt.EVENT_ROW_SELECTED="rowSelected";jt.EVENT_DATA_CHANGED="dataChanged";jt.EVENT_CELL_CHANGED="cellChanged";jt.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";jt.EVENT_MASTER_CHANGED="masterChanged";jt.EVENT_GROUP_CHANGED="groupChanged";jt.EVENT_MOUSE_ENTER="mouseEnter";jt.EVENT_MOUSE_LEAVE="mouseLeave";jt.EVENT_HEIGHT_CHANGED="heightChanged";jt.EVENT_TOP_CHANGED="topChanged";jt.EVENT_DISPLAYED_CHANGED="displayedChanged";jt.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";jt.EVENT_LAST_CHILD_CHANGED="lastChildChanged";jt.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";jt.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";jt.EVENT_EXPANDED_CHANGED="expandedChanged";jt.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";jt.EVENT_SELECTABLE_CHANGED="selectableChanged";jt.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";jt.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";jt.EVENT_DRAGGING_CHANGED="draggingChanged";var ct=jt,wu=class extends nt{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let t=this.localeService.getLocaleTextFunc(),e=this.rowNode.isSelected(),i=hu(t,e),[s,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],n=t(s,r);this.eCheckbox.setValue(e,!0),this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}onClicked(t,e,i){return this.rowNode.setSelectedParams({newValue:t,rangeSelect:i.shiftKey,groupSelectsFiltered:e,event:i,source:"checkboxSelected"})}init(t){if(this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",s=>{pr(s)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",s=>{pr(s);let r=this.gos.get("groupSelectsFiltered"),n=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(n,r)?this.onClicked(!0,r,s||{})===0&&this.onClicked(!1,r,s):n?this.onClicked(!1,r,s):this.onClicked(!0,r,s||{})}),this.addManagedListener(this.rowNode,ct.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,ct.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,ct.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(t,e){return e&&(this.eCheckbox.getPreviousValue()===void 0||t===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var t,e,i;let s=this.rowNode.selectable,r=this.getIsVisible();if(s)if(typeof r=="function"){let o=(t=this.overrides)==null?void 0:t.callbackParams;if(!this.column)s=r(zt(Qe({},o),{node:this.rowNode,data:this.rowNode.data}));else{let a=this.column.createColumnFunctionCallbackParams(this.rowNode);s=r(Qe(Qe({},o),a))}}else s=r??!1;if((e=this.column)==null?void 0:e.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if((i=this.overrides)!=null&&i.removeHidden){this.setDisplayed(s);return}this.setVisible(s)}getIsVisible(){var t,e;return this.overrides?this.overrides.isVisible:(e=(t=this.column)==null?void 0:t.getColDef())==null?void 0:e.checkboxSelection}};w([Be("eCheckbox")],wu.prototype,"eCheckbox",2);w([ke],wu.prototype,"postConstruct",1);var Zw=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(Zw||{});var at=class extends Ie{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=$s("columnMovePin",this.gos,null),this.eHideIcon=$s("columnMoveHide",this.gos,null),this.eMoveIcon=$s("columnMoveMove",this.gos,null),this.eLeftIcon=$s("columnMoveLeft",this.gos,null),this.eRightIcon=$s("columnMoveRight",this.gos,null),this.eGroupIcon=$s("columnMoveGroup",this.gos,null),this.eAggregateIcon=$s("columnMoveValue",this.gos,null),this.ePivotIcon=$s("columnMovePivot",this.gos,null),this.eDropNotAllowedIcon=$s("dropNotAllowed",this.gos,null)}addDragSource(t,e=!1){let i={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:i,dragSource:t}),this.dragService.addDragSource(i)}removeDragSource(t){let e=this.dragSourceAndParamsList.find(i=>i.dragSource===t);e&&(this.dragService.removeDragSource(e.params),ps(this.dragSourceAndParamsList,e))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(t=>this.dragService.removeDragSource(t.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=void 0,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let e=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(t,e){var i,s,r,n;let o=this.getHorizontalDirection(t),a=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);let l=this.dropTargets.filter(c=>this.isMouseOnDropTarget(t,c)),h=this.findCurrentDropTarget(t,l);if(h!==this.lastDropTarget)this.leaveLastTargetIfExists(t,o,a,e),this.lastDropTarget!==null&&h===null&&((s=(i=this.dragSource).onGridExit)==null||s.call(i,this.dragItem)),this.lastDropTarget===null&&h!==null&&((n=(r=this.dragSource).onGridEnter)==null||n.call(r,this.dragItem)),this.enterDragTargetIfExists(h,t,o,a,e),this.lastDropTarget=h;else if(h&&h.onDragging){let c=this.createDropTargetEvent(h,t,o,a,e);h.onDragging(c)}}getAllContainersFromDropTarget(t){let e=t.getSecondaryContainers?t.getSecondaryContainers():null,i=[[t.getContainer()]];return e?i.concat(e):i}allContainersIntersect(t,e){for(let i of e){let s=i.getBoundingClientRect();if(s.width===0||s.height===0)return!1;let r=t.clientX>=s.left&&t.clientX<s.right,n=t.clientY>=s.top&&t.clientY<s.bottom;if(!r||!n)return!1}return!0}isMouseOnDropTarget(t,e){let i=this.getAllContainersFromDropTarget(e),s=!1;for(let r of i)if(this.allContainersIntersect(t,r)){s=!0;break}return e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement)?!1:s&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(t,e){let i=e.length;if(i===0)return null;if(i===1)return e[0];let r=this.gos.getRootNode().elementsFromPoint(t.clientX,t.clientY);for(let n of r)for(let o of e)if(Ty(this.getAllContainersFromDropTarget(o)).indexOf(n)!==-1)return o;return null}enterDragTargetIfExists(t,e,i,s,r){if(t){if(t.onDragEnter){let n=this.createDropTargetEvent(t,e,i,s,r);t.onDragEnter(n)}this.setGhostIcon(t.getIconName?t.getIconName():null)}}leaveLastTargetIfExists(t,e,i,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let r=this.createDropTargetEvent(this.lastDropTarget,t,e,i,s);this.lastDropTarget.onDragLeave(r)}this.setGhostIcon(null)}}addDropTarget(t){this.dropTargets.push(t)}removeDropTarget(t){this.dropTargets=this.dropTargets.filter(e=>e.getContainer()!==t.getContainer())}hasExternalDropZones(){return this.dropTargets.some(t=>t.external)}findExternalZone(t){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===t.getContainer())||null}getHorizontalDirection(t){let e=this.eventLastTime&&this.eventLastTime.clientX,i=t.clientX;return e===i?null:e>i?0:1}getVerticalDirection(t){let e=this.eventLastTime&&this.eventLastTime.clientY,i=t.clientY;return e===i?null:e>i?0:1}createDropTargetEvent(t,e,i,s,r){let n=t.getContainer(),o=n.getBoundingClientRect(),{gridApi:a,columnApi:l,dragItem:h,dragSource:c}=this,d=e.clientX-o.left,p=e.clientY-o.top;return{event:e,x:d,y:p,vDirection:s,hDirection:i,dragSource:c,fromNudge:r,dragItem:h,api:a,columnApi:l,dropZoneTarget:n}}positionGhost(t){let e=this.eGhost;if(!e)return;let s=e.getBoundingClientRect().height,r=ew()-2,n=tw()-2,o=vm(e.offsetParent),{clientY:a,clientX:l}=t,h=a-o.top-s/2,c=l-o.left-10,d=this.gos.getDocument(),p=d.defaultView||window,u=p.pageYOffset||d.documentElement.scrollTop,m=p.pageXOffset||d.documentElement.scrollLeft;r>0&&c+e.clientWidth>r+m&&(c=r+m-e.clientWidth),c<0&&(c=0),n>0&&h+e.clientHeight>n+u&&(h=n+u-e.clientHeight),h<0&&(h=0),e.style.left=`${c}px`,e.style.top=`${h}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=ms(at.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);let{theme:t}=this.environment.getTheme();t&&this.eGhost.classList.add(t),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let e=this.eGhost.querySelector(".ag-dnd-ghost-label"),i=this.dragSource.dragItemName;su(i)&&(i=i()),e.innerHTML=oi(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let s=this.gos.getDocument(),r=null,n=null;try{r=s.fullscreenElement}catch{}finally{r||(r=this.gos.getRootNode());let o=r.querySelector("body");o?n=o:r instanceof ShadowRoot?n=r:r instanceof Document?n=r?.documentElement:n=r}this.eGhostParent=n,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(t,e=!1){ti(this.eGhostIcon);let i=null;switch(t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():at.ICON_NOT_ALLOWED),t){case at.ICON_PINNED:i=this.ePinnedIcon;break;case at.ICON_MOVE:i=this.eMoveIcon;break;case at.ICON_LEFT:i=this.eLeftIcon;break;case at.ICON_RIGHT:i=this.eRightIcon;break;case at.ICON_GROUP:i=this.eGroupIcon;break;case at.ICON_AGGREGATE:i=this.eAggregateIcon;break;case at.ICON_PIVOT:i=this.ePivotIcon;break;case at.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case at.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),!(i===this.eHideIcon&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};at.ICON_PINNED="pinned";at.ICON_MOVE="move";at.ICON_LEFT="left";at.ICON_RIGHT="right";at.ICON_GROUP="group";at.ICON_AGGREGATE="aggregate";at.ICON_PIVOT="pivot";at.ICON_NOT_ALLOWED="notAllowed";at.ICON_HIDE="hide";at.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;w([Q("dragService")],at.prototype,"dragService",2);w([Q("mouseEventService")],at.prototype,"mouseEventService",2);w([Q("columnApi")],at.prototype,"columnApi",2);w([Q("gridApi")],at.prototype,"gridApi",2);w([ke],at.prototype,"init",1);w([ts],at.prototype,"clearDragSourceParamsList",1);at=w([Ye("dragAndDropService")],at);var mo=class extends nt{constructor(t,e,i,s,r,n){super(),this.cellValueFn=t,this.rowNode=e,this.column=i,this.customGui=s,this.dragStartPixels=r,this.suppressVisibilityChange=n,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Kt("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let t=this.gos.get("rowDragManaged")?new ex(this,this.beans,this.rowNode,this.column):new Jw(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}}setDragElement(t,e){this.setTemplateFromElement(t),this.addDragSource(e)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let e=this.beans.selectionService.getSelectedNodes();return e.indexOf(this.rowNode)!==-1?e:[this.rowNode]}checkCompatibility(){let t=this.gos.get("rowDragManaged");this.gos.get("treeData")&&t&&et("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(t){if(t){let e=t.getColDef();if(e.rowDragText)return e.rowDragText}return this.gos.get("rowDragText")}addDragSource(t=4){this.dragSource&&this.removeDragSource();let e=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var i;let s=this.getDragItem(),r=((i=s.rowNodes)==null?void 0:i.length)||1,n=this.getRowDragText(this.column);return n?n(s,r):r===1?this.cellValueFn():`${r} ${e("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:t,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};w([Q("beans")],mo.prototype,"beans",2);w([ke],mo.prototype,"postConstruct",1);w([ts],mo.prototype,"removeDragSource",1);var Qw=class extends Ie{constructor(t,e,i){super(),this.parent=t,this.rowNode=e,this.column=i}setDisplayedOrVisible(t){let e={skipAriaHidden:!0};if(t)this.parent.setDisplayed(!1,e);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=su(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,e),this.parent.setVisible(i,e)):(this.parent.setDisplayed(i,e),this.parent.setVisible(!0,e))}}},Jw=class extends Qw{constructor(t,e,i,s){super(t,i,s),this.beans=e}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(t)}};w([ke],Jw.prototype,"postConstruct",1);var ex=class extends Qw{constructor(t,e,i,s){super(t,i,s),this.beans=e}postConstruct(){this.addManagedListener(this.beans.eventService,V.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=e&&e.shouldPreventRowMove(),s=this.gos.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones(),n=i&&!r||s;this.setDisplayedOrVisible(n)}};w([ke],ex.prototype,"postConstruct",1);var ja=class extends Ie{init(t,e,i,s,r,n,o){var a,l,h,c;this.params=o,this.eGui=e,this.eCheckbox=i,this.eExpanded=s,this.eContracted=r,this.comp=t,this.compClass=n;let{node:d,value:p,colDef:u}=o,m=this.isTopLevelFooter();if(!m){if(this.isEmbeddedRowMismatch())return;if(d.footer&&this.gos.get("groupHideOpenParents")){let g=u&&u.showRowGroup,y=d.rowGroupColumn&&d.rowGroupColumn.getColId();if(g!==y)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!m){let f=o.node.footer&&o.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(M=>{var B;return M.getColId()===((B=o.colDef)==null?void 0:B.showRowGroup)}),y=this.gos.get("groupDisplayType")!="multipleColumns"||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!o.node.footer&&(!o.node.group||o.node.rowGroupIndex!=null&&o.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(M=>{var B;return M.getColId()===((B=o.colDef)==null?void 0:B.showRowGroup)})),x=!d.group&&(((a=this.params.colDef)==null?void 0:a.field)||((l=this.params.colDef)==null?void 0:l.valueGetter)),T=this.isExpandable(),A=this.columnModel.isPivotMode()&&d.leafGroup&&((h=d.rowGroupColumn)==null?void 0:h.getColId())===((c=o.column)==null?void 0:c.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!T&&!x&&!y&&!f&&!A)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var t,e;let i=(t=this.params.colDef)==null?void 0:t.cellAriaRole,s=(e=this.params.column)==null?void 0:e.getColDef().cellAriaRole;return i||s||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){let{node:t,eGridCell:e}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){jy(e);return}let i=()=>{$r(e,!!t.expanded)};this.expandListener=this.addManagedListener(t,ct.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow()||this.params.value!=null||this.params.node.level!=-1)return!1;let e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;let s=this.columnModel.getRowGroupColumns();return!s||s.length===0?!0:s[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;let t=this.params.pinned==="left",e=this.params.pinned==="right",i=!t&&!e;return this.gos.get("enableRtl")?this.columnModel.isPinningLeft()?!e:!i:this.columnModel.isPinningLeft()?!t:!i}findDisplayedGroupNode(){let t=this.params.column,e=this.params.node;if(this.showingValueForOpenedParent){let i=e.parent;for(;i!=null;){if(i.rowGroupColumn&&t.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}rt(this.displayedGroupNode)&&(this.displayedGroupNode=e)}setupShowingValueForOpenedParent(){let t=this.params.node,e=this.params.column;if(!this.gos.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!t.groupData){this.showingValueForOpenedParent=!1;return}if(t.rowGroupColumn!=null){let r=t.rowGroupColumn.getId();if(e.isRowGroupDisplayed(r)){this.showingValueForOpenedParent=!1;return}}let s=t.groupData[e.getId()]!=null;this.showingValueForOpenedParent=s}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var t;let e=this.adjustParamsWithDetailsFromRelatedColumn(),i=this.getInnerCompDetails(e),{valueFormatted:s,value:r}=e,n=s;if(n==null){let o=this.displayedGroupNode.rowGroupColumn&&((t=this.params.column)==null?void 0:t.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&o?n=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):n=r??null}this.comp.setInnerRenderer(i,n)}adjustParamsWithDetailsFromRelatedColumn(){let t=this.displayedGroupNode.rowGroupColumn,e=this.params.column;if(!t)return this.params;if(e!=null&&!e.isRowGroupDisplayed(t.getId()))return this.params;let s=this.params,{value:r,node:n}=this.params,o=this.valueService.formatValue(t,n,r);return zt(Qe({},s),{valueFormatted:o})}addFooterValue(){let t=this.params.totalValueGetter;if(!t){let s=this.params.footerValueGetter;s&&(t=s,et("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let e="";if(t){let s=qg(this.params);s.value=this.params.value,typeof t=="function"?e=t(s):typeof t=="string"?e=this.expressionService.evaluate(t,s):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else e=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");let i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,e)}getInnerCompDetails(t){if(t.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),t);let e=this.userComponentFactory.getInnerRendererDetails(t,t),i=o=>o&&o.componentClass==this.compClass;if(e&&!i(e))return e;let s=this.displayedGroupNode.rowGroupColumn,r=s?s.getColDef():void 0;if(!r)return;let n=this.userComponentFactory.getCellRendererDetails(r,t);if(n&&!i(n))return n;if(i(n)&&r.cellRendererParams&&r.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(r.cellRendererParams,t)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,ct.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){let t=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow()&&t!=null&&t>=0?`(${t})`:"";this.comp.setChildCount(s)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;let t=this.displayedGroupNode.rowGroupColumn;if(!t)return!1;let e=this.params.column;return e==null||e.isRowGroupDisplayed(t.getId())}addExpandAndContract(){var t;let e=this.params,i=Kt("groupExpanded",this.gos,null),s=Kt("groupContracted",this.gos,null);i&&this.eExpanded.appendChild(i),s&&this.eContracted.appendChild(s);let r=e.eGridCell;!(((t=this.params.column)==null?void 0:t.isCellEditable(e.node))&&this.gos.get("enableGroupEdit"))&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(r,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(r,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,ct.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();let o=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,ct.EVENT_ALL_CHILDREN_COUNT_CHANGED,o),this.addManagedListener(this.displayedGroupNode,ct.EVENT_MASTER_CHANGED,o),this.addManagedListener(this.displayedGroupNode,ct.EVENT_GROUP_CHANGED,o),this.addManagedListener(this.displayedGroupNode,ct.EVENT_HAS_CHILDREN_CHANGED,o)}onExpandClicked(t){dr(t)||(pr(t),this.onExpandOrContract(t))}onExpandOrContract(t){let e=this.displayedGroupNode,i=!e.expanded;!i&&e.sticky&&this.scrollToStickyNode(e),e.setExpanded(i,t)}scrollToStickyNode(t){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;let t=this.displayedGroupNode,e=this.columnModel.isPivotMode()&&t.leafGroup;if(!(t.isExpandable()&&!t.footer&&!e))return!1;let s=this.params.column;return s!=null&&typeof s.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){let{params:t,displayedGroupNode:e,columnModel:i}=this,{node:s}=t,r=this.isExpandable();if(r){let h=this.showingValueForOpenedParent?!0:s.expanded;this.comp.setExpandedDisplayed(h),this.comp.setContractedDisplayed(!h)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);let n=i.isPivotMode(),o=n&&e.leafGroup,a=r&&!o,l=s.footer&&s.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),n?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",o):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){let t=this.params.node;this.params.suppressPadding||(this.addManagedListener(t,ct.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;let t=this.params,e=t.node,i=!!t.colDef,s=this.gos.get("treeData"),n=!i||s||t.colDef.showRowGroup===!0?e.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+n,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;let t=new mo(()=>this.params.value,this.params.node);this.createManagedBean(t,this.context),this.eGui.insertAdjacentElement("afterbegin",t.getGui())}isUserWantsSelected(){let t=this.params.checkbox;return typeof t=="function"||t===!0}addCheckboxIfNeeded(){let t=this.displayedGroupNode,e=this.isUserWantsSelected()&&!t.footer&&!t.rowPinned&&!t.detail;if(e){let i=new wu;this.getContext().createBean(i),i.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(e)}onKeyDown(t){!(t.key===Ce.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(t)}onCellDblClicked(t){if(dr(t))return;Wd(this.eExpanded,t)||Wd(this.eContracted,t)||this.onExpandOrContract(t)}};w([Q("expressionService")],ja.prototype,"expressionService",2);w([Q("valueService")],ja.prototype,"valueService",2);w([Q("columnModel")],ja.prototype,"columnModel",2);w([Q("userComponentFactory")],ja.prototype,"userComponentFactory",2);w([Q("ctrlsService")],ja.prototype,"ctrlsService",2);var Po=class tx extends nt{constructor(){super(tx.TEMPLATE)}init(e){let i={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.textContent=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>vt(this.eContracted,o),setExpandedDisplayed:o=>vt(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},s=this.createManagedBean(new ja),r=!e.colDef,n=this.getGui();s.init(i,n,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),r&&qt(n,s.getCellAriaRole())}setRenderDetails(e,i){if(e){let s=e.newAgStackInstance();if(!s)return;s.then(r=>{if(!r)return;let n=()=>this.context.destroyBean(r);this.isAlive()?(this.eValue.appendChild(r.getGui()),this.addDestroyFunc(n)):n()})}else this.eValue.innerText=i}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};Po.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;w([Be("eExpanded")],Po.prototype,"eExpanded",2);w([Be("eContracted")],Po.prototype,"eContracted",2);w([Be("eCheckbox")],Po.prototype,"eCheckbox",2);w([Be("eValue")],Po.prototype,"eValue",2);w([Be("eChildCount")],Po.prototype,"eChildCount",2);var $C=Po,xu=class ix extends nt{constructor(){super(ix.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=Kt("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let i=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};xu.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;w([Be("eLoadingIcon")],xu.prototype,"eLoadingIcon",2);w([Be("eLoadingText")],xu.prototype,"eLoadingText",2);var gR=xu,sx=class rx extends nt{constructor(){super(rx.TEMPLATE)}init(e){let i=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",i),this.addDestroyFunc(()=>Pa(e.eParentOfValue)),Pa(e.eParentOfValue,i),e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let i=e("ariaSkeletonCellLoadingFailed","Row failed to load");ks(this.getGui(),i)}setupLoading(){let i=this.gos.getDocument().createElement("div");i.classList.add("ag-skeleton-effect"),this.getGui().appendChild(i);let r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");ks(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}};sx.TEMPLATE='<div class="ag-skeleton-container"></div>';var mR=sx,nx=class ox extends nt{constructor(){super()}destroy(){super.destroy()}init(e){let i=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(i??ox.DEFAULT_LOADING_OVERLAY_TEMPLATE),!i){let s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("loadingOoo","Loading...")})}}};nx.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var vR=nx,ax=class lx extends nt{constructor(){super()}destroy(){super.destroy()}init(e){let i=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(i??lx.DEFAULT_NO_ROWS_TEMPLATE),!i){let s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("noRowsToShow","No Rows To Show")})}}};ax.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var CR=ax,yR=class extends Fo{constructor(){super('<div class="ag-tooltip"></div>')}init(t){let{value:e}=t;this.getGui().textContent=oi(e,!0)}},wR=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(t,e){this.eInput=t,this.params=e,e.max!=null&&t.setMax(e.max),e.min!=null&&t.setMin(e.min),e.precision!=null&&t.setPrecision(e.precision),e.step!=null&&t.setStep(e.step);let i=t.getInputElement();e.preventStepping?t.addManagedListener(i,"keydown",this.preventStepping):e.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(t){(t.key===Ce.UP||t.key===Ce.DOWN)&&t.preventDefault()}getValue(){let t=this.eInput.getValue();if(!Me(t)&&!Me(this.params.value))return this.params.value;let e=this.params.parseValue(t);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e}getStartValue(){return this.params.value}},xR=class extends ec{constructor(){super(new wR)}},SR=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){let t=this.eInput.getDate();return!Me(t)&&!Me(this.params.value)?this.params.value:t??null}getStartValue(){let{value:t}=this.params;if(t instanceof Date)return Ys(t,!1)}},ER=class extends ec{constructor(){super(new SR)}},bR=class{constructor(t){this.getDataTypeService=t}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){let t=this.formatDate(this.eInput.getDate());return!Me(t)&&!Me(this.params.value)?this.params.value:this.params.parseValue(t??"")}getStartValue(){var t,e;return Ys((e=this.parseDate((t=this.params.value)!=null?t:void 0))!=null?e:null,!1)}parseDate(t){return this.getDataTypeService().getDateParserFunction(this.params.column)(t)}formatDate(t){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(t)}},hx=class extends ec{constructor(){super(new bR(()=>this.dataTypeService))}};w([Q("dataTypeService")],hx.prototype,"dataTypeService",2);var km=class cx extends nt{constructor(){super(cx.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);let i=this.eCheckbox.getInputElement();i.setAttribute("tabindex","-1"),im(i,"polite"),this.addManagedListener(i,"click",s=>{if(pr(s),this.eCheckbox.isDisabled())return;let r=this.eCheckbox.getValue();this.onCheckboxChanged(r)}),this.addManagedListener(i,"dblclick",s=>{pr(s)}),this.addManagedListener(this.params.eGridCell,"keydown",s=>{if(s.key===Ce.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();let r=this.eCheckbox.getValue();this.onCheckboxChanged(r),s.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var i,s,r;let n,o=!0;if(e.node.group&&e.column){let d=e.column.getColId();d.startsWith(Fa)?n=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[d]!==void 0?n=(i=e.value)!=null?i:void 0:o=!1}else n=(s=e.value)!=null?s:void 0;if(!o){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(n);let a=e.disabled!=null?e.disabled:!((r=e.column)!=null&&r.isCellEditable(e.node));this.eCheckbox.setDisabled(a);let l=this.localeService.getLocaleTextFunc(),h=hu(l,n),c=a?h:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${h})`;this.eCheckbox.setInputAriaLabel(c)}onCheckboxChanged(e){let{column:i,node:s,rowIndex:r,value:n}=this.params,o={type:V.EVENT_CELL_EDITING_STARTED,column:i,colDef:i?.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:n};this.eventService.dispatchEvent(o);let a=this.params.node.setDataValue(this.params.column,e,"edit"),l={type:V.EVENT_CELL_EDITING_STOPPED,column:i,colDef:i?.getColDef(),data:s.data,node:s,rowIndex:r,rowPinned:s.rowPinned,value:n,oldValue:n,newValue:e,valueChanged:a};this.eventService.dispatchEvent(l)}};km.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;w([Be("eCheckbox")],km.prototype,"eCheckbox",2);var _R=km,dx=class extends Fo{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(t){var e;this.params=t;let i=(e=t.value)!=null?e:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,V.EVENT_FIELD_VALUE_CHANGED,r=>this.setAriaLabel(r.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(t){let e=this.localeService.getLocaleTextFunc(),i=hu(e,t),s=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}};w([Be("eCheckbox")],dx.prototype,"eCheckbox",2);var TR=class extends nt{constructor(){super(),this.setTemplate("<div></div>")}init(t){var e;this.params=t,this.cssClassPrefix=(e=this.params.cssClassPrefix)!=null?e:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;let t=ms(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?t.appendChild(Kt("check",this.gos)):this.params.icon&&(Xh(this.params.icon)?t.appendChild(this.params.icon):typeof this.params.icon=="string"?t.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(t)}addName(){let t=ms(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(t)}addShortcut(){if(this.params.isCompact)return;let t=ms(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(t)}addSubMenu(){let t=ms(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),e=this.getGui();if(this.params.subMenu){let i=this.gos.get("enableRtl")?"smallLeft":"smallRight";$r(e,!1),t.appendChild(Kt(i,this.gos))}e.appendChild(t)}getClassName(t){return`${this.cssClassPrefix}-${t}`}destroy(){super.destroy()}},$d=class extends Ie{constructor(){super(...arguments),this.agGridDefaults={agDateInput:Gw,agColumnHeader:Lg,agColumnGroupHeader:cR,agSortIndicator:Im,agTextColumnFloatingFilter:hR,agNumberColumnFloatingFilter:lR,agDateColumnFloatingFilter:Cu,agReadOnlyFloatingFilter:Tm,agAnimateShowChangeCellRenderer:Yw,agAnimateSlideCellRenderer:qw,agGroupCellRenderer:$C,agGroupRowRenderer:$C,agLoadingCellRenderer:gR,agSkeletonCellRenderer:mR,agCheckboxCellRenderer:_R,agCellEditor:jC,agTextCellEditor:jC,agNumberCellEditor:xR,agDateCellEditor:ER,agDateStringCellEditor:hx,agSelectCellEditor:Lm,agLargeTextCellEditor:dR,agCheckboxCellEditor:dx,agTextColumnFilter:Mm,agNumberColumnFilter:Ww,agDateColumnFilter:Nw,agLoadingOverlay:vR,agNoRowsOverlay:CR,agTooltipComponent:yR,agMenuItem:TR},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){let t=this.gos.get("components");t!=null&&Ui(t,(e,i)=>this.registerJsComponent(e,i))}registerDefaultComponent(t,e){if(this.agGridDefaults[t]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[t]=e}registerJsComponent(t,e){this.jsComps[t]=e}retrieve(t,e){let i=(a,l)=>({componentFromFramework:l,component:a}),s=this.getFrameworkOverrides().frameworkComponent(e,this.gos.get("components"));if(s!=null)return i(s,!0);let r=this.jsComps[e];if(r){let a=this.getFrameworkOverrides().isFrameworkComponent(r);return i(r,a)}let n=this.agGridDefaults[e];if(n)return i(n,!1);let o=this.enterpriseAgDefaultCompsModule[e];return o?bt.__assertRegistered(o,`AG Grid '${t}' component: ${e}`,this.context.getGridId()):Da(()=>{this.warnAboutMissingComponent(t,e)},"MissingComp"+e),null}warnAboutMissingComponent(t,e){let i=[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],s=Yh(e,i,!0,.8).values;console.warn(`AG Grid: Could not find '${e}' component. It was configured as "${t}: '${e}'" but it wasn't found in the list of registered components.`),s.length>0&&console.warn(`         Did you mean: [${s.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};w([ke],$d.prototype,"init",1);$d=w([Ye("userComponentRegistry")],$d);var AR={propertyName:"dateComponent",cellRenderer:!1},RR={propertyName:"headerComponent",cellRenderer:!1},DR={propertyName:"headerGroupComponent",cellRenderer:!1},KC={propertyName:"cellRenderer",cellRenderer:!0},FR={propertyName:"loadingCellRenderer",cellRenderer:!0},PR={propertyName:"cellEditor",cellRenderer:!1},XC={propertyName:"innerRenderer",cellRenderer:!0},MR={propertyName:"loadingOverlayComponent",cellRenderer:!1},IR={propertyName:"noRowsOverlayComponent",cellRenderer:!1},OR={propertyName:"tooltipComponent",cellRenderer:!1},kg={propertyName:"filter",cellRenderer:!1},LR={propertyName:"floatingFilterComponent",cellRenderer:!1},kR={propertyName:"toolPanel",cellRenderer:!1},NR={propertyName:"statusPanel",cellRenderer:!1},GR={propertyName:"fullWidthCellRenderer",cellRenderer:!0},VR={propertyName:"loadingCellRenderer",cellRenderer:!0},BR={propertyName:"groupRowRenderer",cellRenderer:!0},HR={propertyName:"detailCellRenderer",cellRenderer:!0},WR={propertyName:"menuItem",cellRenderer:!1},ux=class{static getFloatingFilterType(t){return this.filterToFloatingFilterMapping[t]}};ux.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var En=class extends Ie{getHeaderCompDetails(t,e){return this.getCompDetails(t,RR,"agColumnHeader",e)}getHeaderGroupCompDetails(t){let e=t.columnGroup.getColGroupDef();return this.getCompDetails(e,DR,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,GR,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,VR,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,BR,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,HR,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,e){return this.getCompDetails(t,XC,null,e)}getFullWidthGroupRowInnerCellRenderer(t,e){return this.getCompDetails(t,XC,null,e)}getCellRendererDetails(t,e){return this.getCompDetails(t,KC,null,e)}getLoadingCellRendererDetails(t,e){return this.getCompDetails(t,FR,"agSkeletonCellRenderer",e,!0)}getCellEditorDetails(t,e){return this.getCompDetails(t,PR,"agCellEditor",e,!0)}getFilterDetails(t,e,i){return this.getCompDetails(t,kg,i,e,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,AR,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,MR,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,IR,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,OR,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,e){return this.getCompDetails(t,KC,null,e)}getFloatingFilterCompDetails(t,e,i){return this.getCompDetails(t,LR,i,e)}getToolPanelCompDetails(t,e){return this.getCompDetails(t,kR,null,e,!0)}getStatusPanelCompDetails(t,e){return this.getCompDetails(t,NR,null,e,!0)}getMenuItemCompDetails(t,e){return this.getCompDetails(t,WR,"agMenuItem",e,!0)}getCompDetails(t,e,i,s,r=!1){let{propertyName:n,cellRenderer:o}=e,{compName:a,jsComp:l,fwComp:h,paramsFromSelector:c,popupFromSelector:d,popupPositionFromSelector:p}=this.getCompKeys(t,e,s),u=y=>{let x=this.userComponentRegistry.retrieve(n,y);x&&(l=x.componentFromFramework?void 0:x.component,h=x.componentFromFramework?x.component:void 0)};if(a!=null&&u(a),l==null&&h==null&&i!=null&&u(i),l&&o&&!this.agComponentUtils.doesImplementIComponent(l)&&(l=this.agComponentUtils.adaptFunction(n,l)),!l&&!h){r&&console.error(`AG Grid: Could not find component ${a}, did you forget to configure this component?`);return}let m=this.mergeParamsWithApplicationProvidedParams(t,e,s,c),f=l==null,g=l||h;return{componentFromFramework:f,componentClass:g,params:m,type:e,popupFromSelector:d,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(g,f,m,e)}}getCompKeys(t,e,i){let{propertyName:s}=e,r,n,o,a,l,h;if(t){let c=t,d=c[s+"Selector"],p=d?d(i):null,u=m=>{typeof m=="string"?r=m:m!=null&&m!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(m)?o=m:n=m)};p?(u(p.component),a=p.params,l=p.popup,h=p.popupPosition):u(c[s])}return{compName:r,jsComp:n,fwComp:o,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:h}}newAgStackInstance(t,e,i,s){let r=s.propertyName,n=!e,o;if(n)o=new t;else{let l=this.componentMetadataProvider.retrieve(r);o=this.frameworkComponentWrapper.wrap(t,l.mandatoryMethodList,l.optionalMethodList,s)}let a=this.initComponent(o,i);return a==null?Cs.resolve(o):a.then(()=>o)}mergeParamsWithApplicationProvidedParams(t,e,i,s=null){let r=this.gos.getGridCommonParams();fs(r,i);let n=t,o=n&&n[e.propertyName+"Params"];if(typeof o=="function"){let a=o(i);fs(r,a)}else typeof o=="object"&&fs(r,o);return fs(r,s),r}initComponent(t,e){if(this.context.createBean(t),t.init!=null)return t.init(e)}getDefaultFloatingFilterType(t,e){if(t==null)return null;let i=null,{compName:s,jsComp:r,fwComp:n}=this.getCompKeys(t,kg);return s?i=ux.getFloatingFilterType(s):r==null&&n==null&&t.filter===!0&&(i=e()),i}};w([Q("gridOptions")],En.prototype,"gridOptions",2);w([Q("agComponentUtils")],En.prototype,"agComponentUtils",2);w([Q("componentMetadataProvider")],En.prototype,"componentMetadataProvider",2);w([Q("userComponentRegistry")],En.prototype,"userComponentRegistry",2);w([_t("frameworkComponentWrapper")],En.prototype,"frameworkComponentWrapper",2);En=w([Ye("userComponentFactory")],En);var px=class{constructor(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=t.scrollAxis.indexOf("x")!==-1,this.scrollVertically=t.scrollAxis.indexOf("y")!==-1,this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||(()=>!1)}check(t,e=!1){let i=e||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;let s=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=t.clientX<s.left+r,this.tickRight=t.clientX>s.right-r,this.tickUp=t.clientY<s.top+r&&!i,this.tickDown=t.clientY>s.bottom-r&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let t;if(t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){let e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){let e=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(e-t),this.tickRight&&this.setHorizontalPosition(e+t)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Gs=class extends Ie{constructor(t){super(),this.eContainer=t}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(t=>{let e=t.gridBodyCtrl;this.autoScrollService=new px({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>e.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(t){return t===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?at.ICON_NOT_ALLOWED:at.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(t){if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];let e=t.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let s=[...this.selectionService.getSelectedNodes()].sort((r,n)=>r.rowIndex==null||n.rowIndex==null?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(n));if(s.indexOf(e)!==-1)return s}return[e]}onDragEnter(t){t.dragItem.rowNodes=this.getRowNodes(t),this.dispatchGridEvent(V.EVENT_ROW_DRAG_ENTER,t),this.getRowNodes(t).forEach(e=>{e.setDragging(!0)}),this.onEnterOrDragging(t)}onDragging(t){this.onEnterOrDragging(t)}isFromThisGrid(t){let{dragSourceDomDataKey:e}=t.dragSource;return e===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(t){let i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=t;return!i.contains(s)}onEnterOrDragging(t){this.dispatchGridEvent(V.EVENT_ROW_DRAG_MOVE,t),this.lastDraggingEvent=t;let e=this.mouseEventService.getNormalisedPosition(t).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(t,e),this.autoScrollService.check(t.event)}doManagedDrag(t,e){let i=this.isFromThisGrid(t),s=this.gos.get("rowDragManaged"),r=t.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(r[0],e):this.moveRows(r,e))}getRowIndexNumber(t){return parseInt(St(t.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(t){let e=this.clientSideRowModel.getLastHighlightedRowNode(),i=e&&e.highlighted===1,s=this.mouseEventService.getNormalisedPosition(t).y,r=t.dragItem.rowNodes,n=i?1:0;if(this.isFromThisGrid(t))r.forEach(o=>{o.rowTop<s&&(n-=1)}),this.moveRows(r,s,n);else{let o=this.gos.getCallback("getRowId"),a=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&a--,this.clientSideRowModel.updateRowData({add:r.map(l=>l.data).filter(l=>!this.clientSideRowModel.getRowNode(o?o({data:l,level:0}):l.id)),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(t,e,i=0){var s;this.clientSideRowModel.ensureRowsAtPixel(t,e,i)&&(this.focusService.clearFocusedCell(),(s=this.rangeService)==null||s.removeAllCellRanges())}addRowDropZone(t){if(!t.getContainer()){et("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(t)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let e={getContainer:t.getContainer};t.fromGrid?e=t:(t.onDragEnter&&(e.onDragEnter=i=>{t.onDragEnter(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_ENTER,i))}),t.onDragLeave&&(e.onDragLeave=i=>{t.onDragLeave(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_LEAVE,i))}),t.onDragging&&(e.onDragging=i=>{t.onDragging(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_MOVE,i))}),t.onDragStop&&(e.onDragStop=i=>{t.onDragStop(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(Qe({isInterestedIn:i=>i===2,getIconName:()=>at.ICON_MOVE,external:!0},e))}getRowDropZone(t){let e=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),r=this.onDragging.bind(this),n=this.onDragStop.bind(this);return t?{getContainer:e,onDragEnter:t.onDragEnter?o=>{i(o),t.onDragEnter(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_ENTER,o))}:i,onDragLeave:t.onDragLeave?o=>{s(o),t.onDragLeave(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_LEAVE,o))}:s,onDragging:t.onDragging?o=>{r(o),t.onDragging(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_MOVE,o))}:r,onDragStop:t.onDragStop?o=>{n(o),t.onDragStop(this.draggingToRowDragEvent(V.EVENT_ROW_DRAG_END,o))}:n,fromGrid:!0}:{getContainer:e,onDragEnter:i,onDragLeave:s,onDragging:r,onDragStop:n,fromGrid:!0}}draggingToRowDragEvent(t,e){let i=this.mouseEventService.getNormalisedPosition(e).y,s=i>this.paginationProxy.getCurrentPageHeight(),r=-1,n;s||(r=this.rowModel.getRowIndexAtPixel(i),n=this.rowModel.getRow(r));let o;switch(e.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:t,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:r,overNode:n,y:i,vDirection:o})}dispatchGridEvent(t,e){let i=this.draggingToRowDragEvent(t,e);this.eventService.dispatchEvent(i)}onDragLeave(t){this.dispatchGridEvent(V.EVENT_ROW_DRAG_LEAVE,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(t){this.dispatchGridEvent(V.EVENT_ROW_DRAG_END,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(t))&&!this.isDropZoneWithinThisGrid(t)&&this.moveRowAndClearHighlight(t)}stopDragging(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach(e=>{e.setDragging(!1)})}};w([Q("dragAndDropService")],Gs.prototype,"dragAndDropService",2);w([Q("rowModel")],Gs.prototype,"rowModel",2);w([Q("paginationProxy")],Gs.prototype,"paginationProxy",2);w([Q("columnModel")],Gs.prototype,"columnModel",2);w([Q("focusService")],Gs.prototype,"focusService",2);w([Q("sortController")],Gs.prototype,"sortController",2);w([Q("filterManager")],Gs.prototype,"filterManager",2);w([Q("selectionService")],Gs.prototype,"selectionService",2);w([Q("mouseEventService")],Gs.prototype,"mouseEventService",2);w([Q("ctrlsService")],Gs.prototype,"ctrlsService",2);w([_t("rangeService")],Gs.prototype,"rangeService",2);w([ke],Gs.prototype,"postConstruct",1);var Rh=class extends Ie{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(t){let e=t.dragSource.eElement,i=t.mouseDownListener;if(e.removeEventListener("mousedown",i),t.touchEnabled){let s=t.touchStartListener;e.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(t){let e=this.dragSources.find(i=>i.dragSource===t);e&&(this.removeListener(e),ps(this.dragSources,e))}isDragging(){return this.dragging}addDragSource(t){let e=this.onMouseDown.bind(this,t),{eElement:i,includeTouch:s,stopPropagationForTouch:r}=t;i.addEventListener("mousedown",e);let n=null,o=this.gos.get("suppressTouch");s&&!o&&(n=a=>{gm(a.target)||(a.cancelable&&(a.preventDefault(),r&&a.stopPropagation()),this.onTouchStart(t,a))},i.addEventListener("touchstart",n,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:e,touchStartListener:n,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(t,e){this.currentDragParams=t,this.dragging=!1;let i=e.touches[0];this.touchLastTime=i,this.touchStart=i;let s=l=>this.onTouchMove(l,t.eElement),r=l=>this.onTouchUp(l,t.eElement),n=l=>{l.cancelable&&l.preventDefault()},o=e.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:n,options:{passive:!1}},{target:o,type:"touchmove",listener:s,options:{passive:!0}},{target:o,type:"touchend",listener:r,options:{passive:!0}},{target:o,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,t.eElement)}onMouseDown(t,e){let i=e;if(t.skipMouseEvent&&t.skipMouseEvent(e)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,e.button!==0))return;this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;let s=l=>this.onMouseMove(l,t.eElement),r=l=>this.onMouseUp(l,t.eElement),n=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:s},{target:o,type:"mouseup",listener:r},{target:o,type:"contextmenu",listener:n}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onMouseMove(e,t.eElement)}addTemporaryEvents(t){t.forEach(e=>{let{target:i,type:s,listener:r,options:n}=e;i.addEventListener(s,r,n)}),this.dragEndFunctions.push(()=>{t.forEach(e=>{let{target:i,type:s,listener:r,options:n}=e;i.removeEventListener(s,r,n)})})}isEventNearStartEvent(t,e){let{dragStartPixels:i}=this.currentDragParams,s=Me(i)?i:4;return bm(t,e,s)}getFirstActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}onCommonMove(t,e,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,e))return;this.dragging=!0;let s={type:V.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(s),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(t)}onTouchMove(t,e){let i=this.getFirstActiveTouch(t.touches);i&&this.onCommonMove(i,this.touchStart,e)}onMouseMove(t,e){var i;Pr()&&((i=this.gos.getDocument().getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)}shouldPreventMouseEvent(t){let e=this.gos.get("enableCellTextSelection"),i=t.type==="mousemove";return e&&i&&t.cancelable&&this.mouseEventService.isEventFromThisGrid(t)&&!this.isOverFormFieldElement(t)}isOverFormFieldElement(t){let e=t.target,i=e?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(t,e){let i=this.getFirstActiveTouch(t.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,e)}onMouseUp(t,e){this.onUpCommon(t,e)}onUpCommon(t,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(t);let i={type:V.EVENT_DRAG_STOPPED,target:e};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};w([Q("mouseEventService")],Rh.prototype,"mouseEventService",2);w([ts],Rh.prototype,"removeAllListeners",1);Rh=w([Ye("dragService")],Rh);var fg="ag-list-item-hovered",fx=class extends Ie{constructor(t,e,i){super(),this.comp=t,this.virtualList=e,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(t){this.currentDragValue=this.params.getCurrentDragValue(t),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){let t={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?at.ICON_PINNED:at.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(t)}createAutoScrollService(){let t=this.virtualList.getGui();this.autoScrollService=new px({scrollContainer:t,scrollAxis:"y",getVerticalPosition:()=>t.scrollTop,setVerticalPosition:e=>t.scrollTop=e})}onDragging(t){if(!this.currentDragValue||this.moveBlocked)return;let e=this.getListDragItem(t),i=this.virtualList.getComponentAt(e.rowIndex);if(!i)return;let s=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===e.rowIndex&&this.lastHoveredListItem.position===e.position||(this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredListItem=e,Mg(s,fg),Mg(s,`ag-item-highlight-${e.position}`))}getListDragItem(t){let e=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(e).paddingTop),s=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),n=Math.max(0,(t.y-i+r)/s),o=this.params.getNumRows(this.comp)-1,a=Math.min(o,n)|0;return{rowIndex:a,position:Math.round(n)>n||n>o?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${fg}`).forEach(e=>{[fg,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(i=>{e.classList.remove(i)})}),this.lastHoveredListItem=null}};w([Q("dragAndDropService")],fx.prototype,"dragAndDropService",2);w([ke],fx.prototype,"postConstruct",1);function ao(t){let e=t;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}var gt=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}__getAlignedGridService(){return this.alignedGridsService}getGridId(){return this.context.getGridId()}addDetailGridInfo(t,e){this.detailGridInfoMap[t]=e}removeDetailGridInfo(t){delete this.detailGridInfoMap[t]}getDetailGridInfo(t){return this.detailGridInfoMap[t]}forEachDetailGridInfo(t){let e=0;Ui(this.detailGridInfoMap,(i,s)=>{Me(s)&&(t(s,e),e++)})}getDataAsCsv(t){if(bt.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)}exportDataAsCsv(t){bt.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCsv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)}assertNotExcelMultiSheet(t,e){return bt.__assertRegistered("@ag-grid-enterprise/excel-export","api."+t,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)}exportDataAsExcel(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)}getSheetDataForExcel(t){if(bt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(t)}getMultipleSheetsAsExcel(t){if(bt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)}exportMultipleSheetsAsExcel(t){bt.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(t)}setGridAriaProperty(t,e){if(!t)return;let i=this.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${t}`;e===null?i.removeAttribute(s):i.setAttribute(s,e)}logMissingRowModel(t,...e){console.error(`AG Grid: api.${t} can only be called when gridOptions.rowModelType is ${e.join(" or ")}`)}logDeprecation(t,e,i,s){et(`Since ${t} api.${e} is deprecated. Please use ${i} instead. ${s??""}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(t){return this.pinnedRowModel.getPinnedTopRow(t)}getPinnedBottomRow(t){return this.pinnedRowModel.getPinnedBottomRow(t)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(t={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(t))}flashCells(t={}){let e=i=>et(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);Me(t.fadeDelay)&&e("fade"),Me(t.flashDelay)&&e("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(t))}redrawRows(t={}){let e=t?t.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(e))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return et("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(t,e,i,s){this.expansionService.setRowNodeExpanded(t,e,i,s)}onGroupExpandedOrCollapsed(){if(rt(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(t){if(rt(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(t)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(t){return this.rowModel.getRowNode(t)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(t,e,i){this.rowRenderer.addRenderedRowListener(t,e,i)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return bt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(t){this.filterManager.setAdvancedFilterModel(t)}showAdvancedFilterBuilder(){bt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(t){if(!t.nodes.every(o=>o.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):o.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:s,newValue:r}=t,n=i;this.selectionService.setNodesSelected({nodes:n,source:s??"api",newValue:r})}selectAll(t="apiSelectAll"){this.selectionService.selectAllRowNodes({source:t})}deselectAll(t="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:t})}selectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}deselectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}getServerSideSelectionState(){return rt(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(t){if(rt(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(t,"api")}selectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}deselectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(rt(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(t,e="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e),"ensureVisible")}ensureIndexVisible(t,e){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e),"ensureVisible")}ensureNodeVisible(t,e=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e),"ensureVisible")}forEachLeafNode(t){if(rt(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(t)}forEachNode(t,e){this.rowModel.forEachNode(t,e)}forEachNodeAfterFilter(t){if(rt(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(t)}forEachNodeAfterFilterAndSort(t){if(rt(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)}getFilterInstance(t,e){return et("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(t,e)}getColumnFilterInstance(t){return this.filterManager.getColumnFilterInstance(t)}destroyFilter(t){let e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")}getStatusPanel(t){if(!bt.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;let e=this.statusBarService.getStatusPanel(t);return ao(e)}getColumnDef(t){let e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(t="api"){this.filterManager.onFilterChanged({source:t})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(t){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(t))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(t){return this.filterManager.getColumnFilterModel(t)}setColumnFilterModel(t,e){return this.filterManager.setColumnFilterModel(t,e)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(t,e,i){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:i,forceBrowserFocus:!0})}addRowDropZone(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)}removeRowDropZone(t){let e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)}getRowDropZoneParams(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)}assertSideBarLoaded(t){return bt.__assertRegistered("@ag-grid-enterprise/side-bar","api."+t,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(t)}setSideBarPosition(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(t)}openToolPanel(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(t,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(t){if(this.assertSideBarLoaded("getToolPanelInstance")){let e=this.sideBarService.getSideBarComp().getToolPanelInstance(t);return ao(e)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(Me(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(t,e){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(t,e);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(t,e);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(t,e){return this.logDeprecation("31.3","getValue","getCellValue"),this.getCellValue({colKey:t,rowNode:e})}getCellValue(t){var e;let{colKey:i,rowNode:s,useFormatter:r}=t,n=(e=this.columnModel.getPrimaryColumn(i))!=null?e:this.columnModel.getGridColumn(i);if(rt(n))return null;let o=this.valueService.getValue(n,s);if(r){let a=this.valueService.formatValue(n,s,o);return a??oi(o,!0)}return o}addEventListener(t,e){this.apiEventService.addEventListener(t,e)}addGlobalListener(t){this.apiEventService.addGlobalListener(t)}removeEventListener(t,e){this.apiEventService.removeEventListener(t,e)}removeGlobalListener(t){this.apiEventService.removeGlobalListener(t)}dispatchEvent(t){this.eventService.dispatchEvent(t)}destroy(){var t;let e=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;let i={type:V.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(i),this.destroyCalled=!0,(t=this.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.context.destroy(),this.detailGridInfoMap={},dy(this,["isDestroyed"],e)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(bt.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(t){if(this.rangeService){this.rangeService.addCellRange(t);return}bt.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),bt.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(t,e){if(bt.__assertRegistered("@ag-grid-enterprise/charts","api."+t,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>e())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(t){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(t))}getChartImageDataURL(t){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(t))}downloadChart(t){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(t))}openChartToolPanel(t){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(t))}closeChartToolPanel(t){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(t.chartId))}createRangeChart(t){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(t))}createPivotChart(t){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(t))}createCrossFilterChart(t){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(t))}updateChart(t){return this.assertChart("updateChart",()=>this.chartService.updateChart(t))}restoreChart(t,e){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(t,e))}assertClipboard(t,e){bt.__assertRegistered("@ag-grid-enterprise/clipboard","api"+t,this.context.getGridId())&&e()}copyToClipboard(t){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(t))}cutToClipboard(t){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(t))}copySelectedRowsToClipboard(t){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(t))}copySelectedRangeToClipboard(t){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(t))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(t,e){et("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");let i=this.columnModel.getGridColumn(t);this.menuService.showColumnMenu({column:i,buttonElement:e,positionBy:"button"})}showColumnMenuAfterMouseClick(t,e){et("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let i=this.columnModel.getGridColumn(t);if(i||(i=this.columnModel.getPrimaryColumn(t)),!i){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:i,mouseEvent:e,positionBy:"mouse"})}showContextMenu(t){let{rowNode:e,column:i,value:s,x:r,y:n}=t||{},{x:o,y:a}=this.menuService.getContextMenuPosition(e,i);r!=null&&(o=r),n!=null&&(a=n),this.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:o,clientY:a}),rowNode:e,column:i,value:s})}showColumnChooser(t){this.menuService.showColumnChooser({chooserParams:t})}showColumnFilter(t){let e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showFilterMenu({column:e,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(t){let e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:e,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(t){return this.navigationService.tabToNextCell(!1,t)}tabToPreviousCell(t){return this.navigationService.tabToNextCell(!0,t)}getCellRendererInstances(t={}){return this.rowRenderer.getCellRendererInstances(t).map(ao)}getCellEditorInstances(t={}){return this.rowRenderer.getCellEditorInstances(t).map(ao)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(t=!1){this.rowRenderer.stopEditing(t)}startEditingCell(t){let e=this.columnModel.getGridColumn(t.colKey);if(!e){console.warn(`AG Grid: no column found for ${t.colKey}`);return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e};t.rowPinned==null&&this.ensureIndexVisible(t.rowIndex),this.ensureColumnVisible(t.colKey);let r=this.navigationService.getCellByPosition(i);r&&(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),r.startRowOrCellEdit(t.key))}addAggFunc(t,e){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:e})}addAggFuncs(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(t)}applyServerSideTransactionAsync(t,e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(t,e)}applyServerSideRowData(t){var e,i;let s=(e=t.startRow)!=null?e:0,r=(i=t.route)!=null?i:[];if(s<0){console.warn(`AG Grid: invalid value ${t.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,s,r):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(t))}applyTransactionAsync(t,e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(t,e))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(t){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(t)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(t){return this.rowModel.getRow(t)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(t){this.paginationProxy.goToPage(t)}sizeColumnsToFit(t){typeof t=="number"?this.columnModel.sizeColumnsToFit(t,"api"):this.gridBodyCtrl.sizeColumnsToFit(t)}setColumnGroupOpened(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")}getColumnGroup(t,e){return this.columnModel.getColumnGroup(t,e)}getProvidedColumnGroup(t){return this.columnModel.getProvidedColumnGroup(t)}getDisplayNameForColumn(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""}getDisplayNameForColumnGroup(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""}getColumn(t){return this.columnModel.getPrimaryColumn(t)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(t){return this.columnModel.applyColumnState(t,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(t){this.columnModel.setColumnGroupState(t,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(t){return this.columnModel.getDisplayedColAfter(t)}getDisplayedColBefore(t){return this.columnModel.getDisplayedColBefore(t)}setColumnVisible(t,e){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([t],e,"api")}setColumnsVisible(t,e){this.columnModel.setColumnsVisible(t,e,"api")}setColumnPinned(t,e){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([t],e,"api")}setColumnsPinned(t,e){this.columnModel.setColumnsPinned(t,e,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(t,e){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([t],e,"api")}moveColumnByIndex(t,e){this.columnModel.moveColumnByIndex(t,e,"api")}moveColumns(t,e){this.columnModel.moveColumns(t,e,"api")}moveRowGroupColumn(t,e){this.columnModel.moveRowGroupColumn(t,e,"api")}setColumnAggFunc(t,e){this.columnModel.setColumnAggFunc(t,e,"api")}setColumnWidth(t,e,i=!0,s="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,i,s)}setColumnWidths(t,e=!0,i="api"){this.columnModel.setColumnWidths(t,!1,e,i)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)}setValueColumns(t){this.columnModel.setValueColumns(t,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(t){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([t],"api")}removeValueColumns(t){this.columnModel.removeValueColumns(t,"api")}addValueColumn(t){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([t],"api")}addValueColumns(t){this.columnModel.addValueColumns(t,"api")}setRowGroupColumns(t){this.columnModel.setRowGroupColumns(t,"api")}removeRowGroupColumn(t){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([t],"api")}removeRowGroupColumns(t){this.columnModel.removeRowGroupColumns(t,"api")}addRowGroupColumn(t){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([t],"api")}addRowGroupColumns(t){this.columnModel.addRowGroupColumns(t,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(t){this.columnModel.setPivotColumns(t,"api")}removePivotColumn(t){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([t],"api")}removePivotColumns(t){this.columnModel.removePivotColumns(t,"api")}addPivotColumn(t){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([t],"api")}addPivotColumns(t){this.columnModel.addPivotColumns(t,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(t,e){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[t],skipHeader:e,source:"api"})}autoSizeColumns(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e,source:"api"})}autoSizeAllColumns(t){this.columnModel.autoSizeAllColumns("api",t)}setPivotResultColumns(t){this.columnModel.setSecondaryColumns(t,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(t){return this.gos.get(t)}setGridOption(t,e){this.updateGridOptions({[t]:e})}updateGridOptions(t){this.gos.updateGridOptions({options:t})}__internalUpdateGridOptions(t,e){this.gos.updateGridOptions({options:t,force:e,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(t,e){et(`set${t.charAt(0).toUpperCase()}${t.slice(1,t.length)} is deprecated. Please use 'api.setGridOption('${t}', newValue)' or 'api.updateGridOptions({ ${t}: newValue })' instead.`),this.setGridOption(t,e)}setPivotMode(t){this.deprecatedUpdateGridOption("pivotMode",t)}setPinnedTopRowData(t){this.deprecatedUpdateGridOption("pinnedTopRowData",t)}setPinnedBottomRowData(t){this.deprecatedUpdateGridOption("pinnedBottomRowData",t)}setPopupParent(t){this.deprecatedUpdateGridOption("popupParent",t)}setSuppressModelUpdateAfterUpdateTransaction(t){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",t)}setDataTypeDefinitions(t){this.deprecatedUpdateGridOption("dataTypeDefinitions",t)}setPagination(t){this.deprecatedUpdateGridOption("pagination",t)}paginationSetPageSize(t){this.deprecatedUpdateGridOption("paginationPageSize",t)}setSideBar(t){this.deprecatedUpdateGridOption("sideBar",t)}setSuppressClipboardPaste(t){this.deprecatedUpdateGridOption("suppressClipboardPaste",t)}setGroupRemoveSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",t)}setGroupRemoveLowestSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",t)}setGroupDisplayType(t){this.deprecatedUpdateGridOption("groupDisplayType",t)}setGroupIncludeFooter(t){this.deprecatedUpdateGridOption("groupIncludeFooter",t)}setGroupIncludeTotalFooter(t){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",t)}setRowClass(t){this.deprecatedUpdateGridOption("rowClass",t)}setDeltaSort(t){this.deprecatedUpdateGridOption("deltaSort",t)}setSuppressRowDrag(t){this.deprecatedUpdateGridOption("suppressRowDrag",t)}setSuppressMoveWhenRowDragging(t){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",t)}setSuppressRowClickSelection(t){this.deprecatedUpdateGridOption("suppressRowClickSelection",t)}setEnableAdvancedFilter(t){this.deprecatedUpdateGridOption("enableAdvancedFilter",t)}setIncludeHiddenColumnsInAdvancedFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",t)}setAdvancedFilterParent(t){this.deprecatedUpdateGridOption("advancedFilterParent",t)}setAdvancedFilterBuilderParams(t){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",t)}setQuickFilter(t){et("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:t}})}setExcludeHiddenColumnsFromQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!t)}setIncludeHiddenColumnsInQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",t)}setQuickFilterParser(t){this.deprecatedUpdateGridOption("quickFilterParser",t)}setQuickFilterMatcher(t){this.deprecatedUpdateGridOption("quickFilterMatcher",t)}setAlwaysShowHorizontalScroll(t){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",t)}setAlwaysShowVerticalScroll(t){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",t)}setFunctionsReadOnly(t){this.deprecatedUpdateGridOption("functionsReadOnly",t)}setColumnDefs(t,e="api"){et("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:t},source:e})}setAutoGroupColumnDef(t,e="api"){et("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:t},source:e})}setDefaultColDef(t,e="api"){et("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:t},source:e})}setColumnTypes(t,e="api"){et("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:t},source:e})}setTreeData(t){this.deprecatedUpdateGridOption("treeData",t)}setServerSideDatasource(t){this.deprecatedUpdateGridOption("serverSideDatasource",t)}setCacheBlockSize(t){this.deprecatedUpdateGridOption("cacheBlockSize",t)}setDatasource(t){this.deprecatedUpdateGridOption("datasource",t)}setViewportDatasource(t){this.deprecatedUpdateGridOption("viewportDatasource",t)}setRowData(t){this.deprecatedUpdateGridOption("rowData",t)}setEnableCellTextSelection(t){this.deprecatedUpdateGridOption("enableCellTextSelection",t)}setHeaderHeight(t){this.deprecatedUpdateGridOption("headerHeight",t)}setDomLayout(t){this.deprecatedUpdateGridOption("domLayout",t)}setFillHandleDirection(t){this.deprecatedUpdateGridOption("fillHandleDirection",t)}setGroupHeaderHeight(t){this.deprecatedUpdateGridOption("groupHeaderHeight",t)}setFloatingFiltersHeight(t){this.deprecatedUpdateGridOption("floatingFiltersHeight",t)}setPivotHeaderHeight(t){this.deprecatedUpdateGridOption("pivotHeaderHeight",t)}setPivotGroupHeaderHeight(t){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",t)}setAnimateRows(t){this.deprecatedUpdateGridOption("animateRows",t)}setIsExternalFilterPresent(t){this.deprecatedUpdateGridOption("isExternalFilterPresent",t)}setDoesExternalFilterPass(t){this.deprecatedUpdateGridOption("doesExternalFilterPass",t)}setNavigateToNextCell(t){this.deprecatedUpdateGridOption("navigateToNextCell",t)}setTabToNextCell(t){this.deprecatedUpdateGridOption("tabToNextCell",t)}setTabToNextHeader(t){this.deprecatedUpdateGridOption("tabToNextHeader",t)}setNavigateToNextHeader(t){this.deprecatedUpdateGridOption("navigateToNextHeader",t)}setRowGroupPanelShow(t){this.deprecatedUpdateGridOption("rowGroupPanelShow",t)}setGetGroupRowAgg(t){this.deprecatedUpdateGridOption("getGroupRowAgg",t)}setGetBusinessKeyForNode(t){this.deprecatedUpdateGridOption("getBusinessKeyForNode",t)}setGetChildCount(t){this.deprecatedUpdateGridOption("getChildCount",t)}setProcessRowPostCreate(t){this.deprecatedUpdateGridOption("processRowPostCreate",t)}setGetRowId(t){et("getRowId is a static property and can no longer be updated.")}setGetRowClass(t){this.deprecatedUpdateGridOption("getRowClass",t)}setIsFullWidthRow(t){this.deprecatedUpdateGridOption("isFullWidthRow",t)}setIsRowSelectable(t){this.deprecatedUpdateGridOption("isRowSelectable",t)}setIsRowMaster(t){this.deprecatedUpdateGridOption("isRowMaster",t)}setPostSortRows(t){this.deprecatedUpdateGridOption("postSortRows",t)}setGetDocument(t){this.deprecatedUpdateGridOption("getDocument",t)}setGetContextMenuItems(t){this.deprecatedUpdateGridOption("getContextMenuItems",t)}setGetMainMenuItems(t){this.deprecatedUpdateGridOption("getMainMenuItems",t)}setProcessCellForClipboard(t){this.deprecatedUpdateGridOption("processCellForClipboard",t)}setSendToClipboard(t){this.deprecatedUpdateGridOption("sendToClipboard",t)}setProcessCellFromClipboard(t){this.deprecatedUpdateGridOption("processCellFromClipboard",t)}setProcessPivotResultColDef(t){this.deprecatedUpdateGridOption("processPivotResultColDef",t)}setProcessPivotResultColGroupDef(t){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",t)}setPostProcessPopup(t){this.deprecatedUpdateGridOption("postProcessPopup",t)}setInitialGroupOrderComparator(t){this.deprecatedUpdateGridOption("initialGroupOrderComparator",t)}setGetChartToolbarItems(t){this.deprecatedUpdateGridOption("getChartToolbarItems",t)}setPaginationNumberFormatter(t){this.deprecatedUpdateGridOption("paginationNumberFormatter",t)}setGetServerSideGroupLevelParams(t){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",t)}setIsServerSideGroupOpenByDefault(t){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",t)}setIsApplyServerSideTransaction(t){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",t)}setIsServerSideGroup(t){this.deprecatedUpdateGridOption("isServerSideGroup",t)}setGetServerSideGroupKey(t){this.deprecatedUpdateGridOption("getServerSideGroupKey",t)}setGetRowStyle(t){this.deprecatedUpdateGridOption("getRowStyle",t)}setGetRowHeight(t){this.deprecatedUpdateGridOption("getRowHeight",t)}};w([Q("rowRenderer")],gt.prototype,"rowRenderer",2);w([Q("navigationService")],gt.prototype,"navigationService",2);w([Q("filterManager")],gt.prototype,"filterManager",2);w([Q("columnModel")],gt.prototype,"columnModel",2);w([Q("selectionService")],gt.prototype,"selectionService",2);w([Q("gridOptionsService")],gt.prototype,"gos",2);w([Q("valueService")],gt.prototype,"valueService",2);w([Q("alignedGridsService")],gt.prototype,"alignedGridsService",2);w([Q("eventService")],gt.prototype,"eventService",2);w([Q("pinnedRowModel")],gt.prototype,"pinnedRowModel",2);w([Q("context")],gt.prototype,"context",2);w([Q("rowModel")],gt.prototype,"rowModel",2);w([Q("sortController")],gt.prototype,"sortController",2);w([Q("paginationProxy")],gt.prototype,"paginationProxy",2);w([Q("focusService")],gt.prototype,"focusService",2);w([Q("dragAndDropService")],gt.prototype,"dragAndDropService",2);w([Q("menuService")],gt.prototype,"menuService",2);w([Q("valueCache")],gt.prototype,"valueCache",2);w([Q("animationFrameService")],gt.prototype,"animationFrameService",2);w([Q("ctrlsService")],gt.prototype,"ctrlsService",2);w([Q("overlayService")],gt.prototype,"overlayService",2);w([Q("stateService")],gt.prototype,"stateService",2);w([Q("expansionService")],gt.prototype,"expansionService",2);w([Q("apiEventService")],gt.prototype,"apiEventService",2);w([Q("frameworkOverrides")],gt.prototype,"frameworkOverrides",2);w([Q("undoRedoService")],gt.prototype,"undoRedoService",2);w([Q("rowNodeBlockLoader")],gt.prototype,"rowNodeBlockLoader",2);w([_t("csvCreator")],gt.prototype,"csvCreator",2);w([_t("excelCreator")],gt.prototype,"excelCreator",2);w([_t("rangeService")],gt.prototype,"rangeService",2);w([_t("clipboardService")],gt.prototype,"clipboardService",2);w([_t("aggFuncService")],gt.prototype,"aggFuncService",2);w([_t("statusBarService")],gt.prototype,"statusBarService",2);w([_t("chartService")],gt.prototype,"chartService",2);w([_t("ssrmTransactionManager")],gt.prototype,"serverSideTransactionManager",2);w([_t("sideBarService")],gt.prototype,"sideBarService",2);w([ke],gt.prototype,"init",1);gt=w([Ye("gridApi")],gt);var vs=class extends Ie{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(t){let e=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(e,t):this.quickFilterParts.every(i=>e?this.doesRowPassQuickFilterCache(t,i):this.doesRowPassQuickFilterNoCache(t,i))}resetQuickFilterCache(){this.rowModel.forEachNode(t=>t.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:t,parser:e}=this;t?this.quickFilterParts=e?e(t):t.split(" "):this.quickFilterParts=null}parseQuickFilter(t){return Me(t)?this.gos.isRowModelType("clientSide")?t.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(t){if(t!=null&&typeof t!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof t}`);return}let e=this.parseQuickFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchEvent({type:vs.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){let t=this.gos.get("quickFilterParser"),e=this.gos.get("quickFilterMatcher"),i=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,i&&(this.setQuickFilterParts(),this.dispatchEvent({type:vs.EVENT_QUICK_FILTER_CHANGED}))}onQuickFilterColumnConfigChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:vs.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(t,e){return this.columnModel.getAllColumnsForQuickFilter().some(s=>{let r=this.getQuickFilterTextForColumn(s,t);return Me(r)&&r.indexOf(e)>=0})}doesRowPassQuickFilterCache(t,e){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(e)>=0}doesRowPassQuickFilterMatcher(t,e){let i;t?(this.checkGenerateQuickFilterAggregateText(e),i=e.quickFilterAggregateText):i=this.getQuickFilterAggregateText(e);let{quickFilterParts:s,matcher:r}=this;return r(s,i)}checkGenerateQuickFilterAggregateText(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))}getQuickFilterTextForColumn(t,e){let i=this.valueService.getValue(t,e,!0),s=t.getColDef();if(s.getQuickFilterText){let r=this.gos.addGridCommonParams({value:i,node:e,data:e.data,column:t,colDef:s});i=s.getQuickFilterText(r)}return Me(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(t){let e=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(s=>{let r=this.getQuickFilterTextForColumn(s,t);Me(r)&&e.push(r)}),e.join(vs.QUICK_FILTER_SEPARATOR)}};vs.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";vs.QUICK_FILTER_SEPARATOR=`
`;w([Q("valueService")],vs.prototype,"valueService",2);w([Q("columnModel")],vs.prototype,"columnModel",2);w([Q("rowModel")],vs.prototype,"rowModel",2);w([ke],vs.prototype,"postConstruct",1);vs=w([Ye("quickFilterService")],vs);var Zs=class extends Ie{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var t,e,i;this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,V.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",s=>this.setAdvancedFilterModel(s.currentValue)),this.addManagedListener(this.eventService,V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:s})=>this.onAdvancedFilterEnabledChanged(s)),this.addManagedListener(this.eventService,V.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,vs.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=Qe({},(i=(e=(t=this.gos.get("initialState"))==null?void 0:t.filter)==null?void 0:e.filterModel)!=null?i:{})}isExternalFilterPresentCallback(){let t=this.gos.getCallback("isExternalFilterPresent");return typeof t=="function"?t({}):!1}doesExternalFilterPass(t){let e=this.gos.get("doesExternalFilterPass");return typeof e=="function"?e(t):!1}setFilterModel(t,e="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:t,source:e});return}let i=[],s=this.getFilterModel();if(t){let r=_m(Object.keys(t));this.allColumnFilters.forEach((n,o)=>{let a=t[o];i.push(this.setModelOnFilterWrapper(n.filterPromise,a)),r.delete(o)}),r.forEach(n=>{let o=this.columnModel.getPrimaryColumn(n)||this.columnModel.getGridColumn(n);if(!o){console.warn("AG Grid: setFilterModel() - no column found for colId: "+n);return}if(!o.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+n);return}let a=this.getOrCreateFilterWrapper(o,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+n);return}i.push(this.setModelOnFilterWrapper(a.filterPromise,t[n]))})}else this.allColumnFilters.forEach(r=>{i.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Cs.all(i).then(()=>{let r=this.getFilterModel(),n=[];this.allColumnFilters.forEach((o,a)=>{let l=s?s[a]:null,h=r?r[a]:null;dt.jsonEquals(l,h)||n.push(o.column)}),n.length>0&&this.onFilterChanged({columns:n,source:e})})}setModelOnFilterWrapper(t,e){return new Cs(i=>{t.then(s=>{typeof s.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(e)||Cs.resolve()).then(()=>i())})})}getFilterModel(){let t={};return this.allColumnFilters.forEach((e,i)=>{let s=this.getModelFromFilterWrapper(e);Me(s)&&(t[i]=s)}),t}getModelFromFilterWrapper(t){var e;let s=t.filterPromise.resolveNow(null,r=>r);return s==null?(e=this.initialFilterModel[t.column.getColId()])!=null?e:null:typeof s.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):s.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(t){var e;t?this.allColumnFilters.size&&(this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(e=this.advancedFilterService)!=null&&e.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var t;return!!((t=this.advancedFilterService)!=null&&t.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(t,e){return this.doColumnFiltersPass(t,e,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;let t=s=>s?s.isFilterActive?s.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,e=!!this.gos.getGroupAggFiltering(),i=s=>{if(!s.isPrimary())return!0;let n=!this.columnModel.isPivotActive();return!s.isValueActive()||!n?!1:this.columnModel.isPivotMode()?!0:e};this.allColumnFilters.forEach(s=>{if(s.filterPromise.resolveNow(!1,t)){let r=s.filterPromise.resolveNow(null,n=>n);i(s.column)?this.activeAggregateFilters.push(r):this.activeColumnFilters.push(r)}})}updateFilterFlagInColumns(t,e){this.allColumnFilters.forEach(i=>{let s=i.filterPromise.resolveNow(!1,r=>r.isFilterActive());i.column.setFilterActive(s,t,e)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(t,e,i){let{data:s,aggData:r}=t,n=i?this.activeAggregateFilters:this.activeColumnFilters,o=i?r:s;for(let a=0;a<n.length;a++){let l=n[a];if(!(l==null||l===e)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:t,data:o}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(t){let e=()=>this.onFilterChanged(t);this.rowRenderer.isRefreshInProgress()?setTimeout(e,0):e()}onFilterChanged(t={}){let{source:e,filterInstance:i,additionalEventAttributes:s,columns:r}=t;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",s),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(o=>{o.filterPromise&&o.filterPromise.then(a=>{a&&a!==i&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});let n={source:e,type:V.EVENT_FILTER_CHANGED,columns:r||[]};s&&fs(n,s),this.processingFilterChange=!0,this.eventService.dispatchEvent(n),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var t;return!((t=this.gos.get("allowShowChangeAfterFilter"))!=null?t:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(t,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:t})}doesRowPassAggregateFilters(t){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(t.rowNode,t.filterInstanceToSkip))}doesRowPassFilter(t){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(t.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(t.rowNode,t.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(t.rowNode))}onNewRowsLoaded(t){this.allColumnFilters.forEach(e=>{e.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(t,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(t){return({node:e})=>this.valueService.getValue(t,e,!0)}createGetValue(t){return(e,i)=>{let s=i?this.columnModel.getGridColumn(i):t;return s?this.valueService.getValue(s,e,!0):void 0}}getFilterComponent(t,e,i=!0){var s;if(i)return((s=this.getOrCreateFilterWrapper(t,e))==null?void 0:s.filterPromise)||null;let r=this.cachedFilter(t);return r?r.filterPromise:null}isFilterActive(t){let e=this.cachedFilter(t);return!!e&&e.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(t,e){if(!t.isFilterAllowed())return null;let i=this.cachedFilter(t);return i||(i=this.createFilterWrapper(t,e),this.setColumnFilterWrapper(t,i)),i}cachedFilter(t){return this.allColumnFilters.get(t.getColId())}getDefaultFilter(t){let e;if(bt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFilter";else{let i=this.dataTypeService.getBaseDataType(t);i==="number"?e="agNumberColumnFilter":i==="date"||i==="dateString"?e="agDateColumnFilter":e="agTextColumnFilter"}return e}getDefaultFloatingFilter(t){let e;if(bt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFloatingFilter";else{let i=this.dataTypeService.getBaseDataType(t);i==="number"?e="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?e="agDateColumnFloatingFilter":e="agTextColumnFloatingFilter"}return e}createFilterInstance(t){let e=this.getDefaultFilter(t),i=t.getColDef(),s,r=zt(Qe({},this.createFilterParams(t,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,t)(),filterChangedCallback:o=>this.filterChangedCallbackFactory(s,t)(o),doesRowPassOtherFilter:o=>this.doesRowPassOtherFilters(s,o)}),n=this.userComponentFactory.getFilterDetails(i,r,e);return n?{filterPromise:()=>{let o=n.newAgStackInstance();return o&&o.then(a=>s=a),o},compDetails:n}:{filterPromise:null,compDetails:null}}createFilterParams(t,e){return this.gos.addGridCommonParams({column:t,colDef:qg(e),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(t),getValue:this.createGetValue(t),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(t,e){var i;let s={column:t,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:r,compDetails:n}=this.createFilterInstance(t);return s.filterPromise=(i=r?.())!=null?i:null,s.compDetails=n,s}onColumnsChanged(){let t=[];this.allColumnFilters.forEach((e,i)=>{let s;e.column.isPrimary()?s=this.columnModel.getPrimaryColumn(i):s=this.columnModel.getGridColumn(i),!(s&&s===e.column)&&(t.push(e.column),this.disposeFilterWrapper(e,"columnChanged"),this.disposeColumnListener(i))}),t.length>0?this.onFilterChanged({columns:t,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){let t=this.columnModel.getGroupAutoColumns();t?.forEach(e=>{e.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(e,"NO_UI")})}isFilterAllowed(t){var e,i;if(this.isAdvancedFilterEnabled()||!t.isFilterAllowed())return!1;let r=this.allColumnFilters.get(t.getColId());return(i=(e=r?.filterPromise)==null?void 0:e.resolveNow(!0,n=>typeof n?.isFilterAllowed=="function"?n?.isFilterAllowed():!0))!=null?i:!0}getFloatingFilterCompDetails(t,e){let i=l=>{let h=this.getFilterComponent(t,"NO_UI");h?.then(c=>{l(ao(c))})},s=t.getColDef(),r=zt(Qe({},this.createFilterParams(t,s)),{filterChangedCallback:()=>i(l=>this.filterChangedCallbackFactory(l,t)())}),n=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,kg,r),o=this.userComponentFactory.getDefaultFloatingFilterType(s,()=>this.getDefaultFloatingFilter(t));o==null&&(o="agReadOnlyFloatingFilter");let a={column:t,filterParams:n,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(t),parentFilterInstance:i,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,o)}getCurrentFloatingFilterParentModel(t){let e=this.getFilterComponent(t,"NO_UI",!1);return e?e.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(t,e="api"){let i=t.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,e),this.onFilterChanged({columns:[t],source:"api"}))}disposeColumnListener(t){let e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())}disposeFilterWrapper(t,e){t.filterPromise.then(i=>{this.getContext().destroyBean(i),t.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(t.column.getColId());let s={type:V.EVENT_FILTER_DESTROYED,source:e,column:t.column};this.eventService.dispatchEvent(s)})}filterModifiedCallbackFactory(t,e){return()=>{let i={type:V.EVENT_FILTER_MODIFIED,column:e,filterInstance:t};this.eventService.dispatchEvent(i)}}filterChangedCallbackFactory(t,e){return i=>{var s;let r=(s=i?.source)!=null?s:"api",n={filter:t,additionalEventAttributes:i,columns:[e],source:r};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(t){let e=this.allColumnFilters.get(t);if(!e)return;let i=e.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(e.compDetails,s)){this.destroyFilter(i,"paramsUpdated");return}let r=i.getColDef().filterParams;if(!e.filterPromise){this.destroyFilter(i,"paramsUpdated");return}e.filterPromise.then(n=>{(n?.refresh?n.refresh(Qe(zt(Qe({},this.createFilterParams(i,i.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(n,i),filterChangedCallback:this.filterChangedCallbackFactory(n,i),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(n,a)}),r)):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(t,e){let i=t.getColId();this.allColumnFilters.set(i,e),this.allColumnListeners.set(i,this.addManagedListener(t,Pt.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(i)))}areFilterCompsDifferent(t,e){if(!e||!t)return!0;let{componentClass:i}=t,{componentClass:s}=e;return!(i===s||i?.render&&s?.render&&i.render===s.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(t){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(t);return}this.advancedFilterService.setModel(t??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(e=>e.getColDef().floatingFilter)}getFilterInstance(t,e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}let i=this.getFilterInstanceImpl(t,r=>{if(!e)return;let n=ao(r);e(n)});return ao(i)}getColumnFilterInstance(t){return new Promise(e=>{this.getFilterInstance(t,i=>{e(i)})})}getFilterInstanceImpl(t,e){let i=this.columnModel.getPrimaryColumn(t);if(!i)return;let s=this.getFilterComponent(i,"NO_UI"),r=s&&s.resolveNow(null,n=>n);return r?setTimeout(e,0,r):s&&s.then(n=>{e(n)}),r}warnAdvancedFilters(){et("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(t){var e;(e=this.advancedFilterService)==null||e.getCtrl().setupHeaderComp(t)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:t,source:e})=>this.setFilterModel(t,e)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:t,model:e,resolve:i})=>{this.setColumnFilterModel(t,e).then(()=>i())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(t=>this.setAdvancedFilterModel(t)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(t){let e=this.getFilterWrapper(t);return e?this.getModelFromFilterWrapper(e):null}setColumnFilterModel(t,e){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let n=()=>{},o=new Promise(a=>{n=a});return this.columnFilterModelUpdateQueue.push({key:t,model:e,resolve:n}),o}let i=this.columnModel.getPrimaryColumn(t),s=i?this.getOrCreateFilterWrapper(i,"NO_UI"):null;return s?(n=>new Promise(o=>{n.then(a=>o(a))}))(this.setModelOnFilterWrapper(s.filterPromise,e)):Promise.resolve()}getFilterWrapper(t){var e;let i=this.columnModel.getPrimaryColumn(t);return i&&(e=this.cachedFilter(i))!=null?e:null}destroy(){super.destroy(),this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"gridDestroyed")),this.allColumnListeners.clear()}};w([Q("valueService")],Zs.prototype,"valueService",2);w([Q("columnModel")],Zs.prototype,"columnModel",2);w([Q("rowModel")],Zs.prototype,"rowModel",2);w([Q("userComponentFactory")],Zs.prototype,"userComponentFactory",2);w([Q("rowRenderer")],Zs.prototype,"rowRenderer",2);w([Q("dataTypeService")],Zs.prototype,"dataTypeService",2);w([Q("quickFilterService")],Zs.prototype,"quickFilterService",2);w([_t("advancedFilterService")],Zs.prototype,"advancedFilterService",2);w([ke],Zs.prototype,"init",1);Zs=w([Ye("filterManager")],Zs);var Su=class extends nt{constructor(t,e){super('<div class="ag-filter"></div>'),this.column=t,this.source=e,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedListener(this.eventService,V.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}hasFilter(){return!!this.filterWrapper}getFilter(){var t,e;return(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)!=null?e:null}afterInit(){var t,e,i;return(i=(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null?void 0:e.then(()=>{}))!=null?i:Cs.resolve()}afterGuiAttached(t){var e,i;(i=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||i.then(s=>{var r;(r=s?.afterGuiAttached)==null||r.call(s,t)})}afterGuiDetached(){var t,e;(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||e.then(i=>{var s;(s=i?.afterGuiDetached)==null||s.call(i)})}createFilter(t){var e;let{column:i,source:s}=this;this.filterWrapper=this.filterManager.getOrCreateFilterWrapper(i,s),(e=this.filterWrapper)!=null&&e.filterPromise&&this.filterWrapper.filterPromise.then(r=>{let n=r.getGui();if(Me(n)||console.warn(`AG Grid: getGui method from filter returned ${n}, it should be a DOM element or an HTML template string.`),typeof n=="string"&&(n=ms(n)),this.appendChild(n),t){let o={type:V.EVENT_FILTER_OPENED,column:i,source:s,eGui:this.getGui()};this.eventService.dispatchEvent(o)}})}onFilterDestroyed(t){(t.source==="api"||t.source==="paramsUpdated")&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(ti(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}};w([Q("filterManager")],Su.prototype,"filterManager",2);w([Q("columnModel")],Su.prototype,"columnModel",2);w([ke],Su.prototype,"postConstruct",1);var Nm=class extends nt{constructor(t,e){super(t),this.ctrl=e}getCtrl(){return this.ctrl}},Mo=class gx extends Nm{constructor(e){super(gx.TEMPLATE,e)}postConstruct(){let e=this.getGui(),i={addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),addOrRemoveBodyCssClass:(s,r)=>this.eFloatingFilterBody.classList.toggle(s,r),setButtonWrapperDisplayed:s=>vt(this.eButtonWrapper,s),setCompDetails:s=>this.setCompDetails(s),getFloatingFilterComp:()=>this.compPromise,setWidth:s=>e.style.width=s,setMenuIcon:s=>this.eButtonShowMainFilter.appendChild(s)};this.ctrl.setComp(i,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(i=>this.afterCompCreated(i))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};Mo.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;w([Be("eFloatingFilterBody")],Mo.prototype,"eFloatingFilterBody",2);w([Be("eButtonWrapper")],Mo.prototype,"eButtonWrapper",2);w([Be("eButtonShowMainFilter")],Mo.prototype,"eButtonShowMainFilter",2);w([ke],Mo.prototype,"postConstruct",1);w([ts],Mo.prototype,"destroyFloatingFilterComp",1);var UR=Mo;var Eu=class extends Ie{constructor(t){super(),this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let t=this.getDomLayout(),e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"},i=e.autoHeight?"ag-layout-auto-height":e.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,e)}getDomLayout(){var t;let e=(t=this.gos.get("domLayout"))!=null?t:"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(et(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}};w([ke],Eu.prototype,"postConstruct",1);var Qr=class extends Ie{constructor(t){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=t,this.resetLastHScrollDebounced=Qi(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Qi(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let{fakeHScrollComp:t,fakeVScrollComp:e}=this.ctrlsService.getParams();this.addManagedListener(this.centerRowsCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),t.onScrollCallback(this.onFakeHScroll.bind(this));let i=this.gos.get("debounceVerticalScrollbar"),s=i?Qi(this.onVScroll.bind(this),100):this.onVScroll.bind(this),r=i?Qi(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s),e.onScrollCallback(r)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(t){if(this.centerRowsCtrl==null)return;t===void 0&&(t=this.centerRowsCtrl.getCenterViewportScrollLeft());let i=this.enableRtl?t:-t,{topCenter:s,stickyTopCenter:r,stickyBottomCenter:n,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-i),a.setContainerTranslateX(i),s.setContainerTranslateX(i),r.setContainerTranslateX(i),n.setContainerTranslateX(i);let h=this.centerRowsCtrl.getViewportElement(),c=this.lastScrollSource[1]===0;t=Math.abs(t),c?l.setScrollPosition(t):Th(h,t,this.enableRtl)}isControllingScroll(t,e){return this.lastScrollSource[e]==null?(this.lastScrollSource[e]=t,!0):this.lastScrollSource[e]===t}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(t){let e=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=e;if(this.shouldBlockScrollUpdate(1,i,!0))return;let s;t===0?s=_h(e,this.enableRtl):s=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(s)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(t){let e;t===0?e=this.eBodyViewport.scrollTop:e=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,e,!0)&&(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,t===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(t){let e=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(t){let e={type:V.EVENT_BODY_SCROLL,direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let i=zt(Qe({},e),{type:V.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(t,e,i=!1){return i&&!Yr()?!1:t===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){let e=Kh(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return t<0||t+e>i}shouldBlockHorizontalScroll(t){let e=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&bh()){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(t,e=!1){let s=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,t)&&(this.enableRtl&&bh()?t=t>0?0:s:t=Math.min(Math.max(t,0),s)),Th(this.centerRowsCtrl.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.eBodyViewport.scrollTop=t}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(t){let e=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowsCtrl.getViewportElement().scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){let i=this.rowModel.getRowCount(),s=-1;for(let r=0;r<i;r++){let n=this.rowModel.getRow(r);if(typeof t=="function"){if(n&&t(n)){s=r;break}}else if(t===n||t===n.data){s=r;break}}s>=0&&this.ensureIndexVisible(s,e)}ensureIndexVisible(t,e){if(this.gos.isDomLayout("print"))return;let i=this.paginationProxy.getRowCount();if(typeof t!="number"||t<0||t>=i){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+t);return}let r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationProxy.goToPageWithIndex(t);let n=this.ctrlsService.getGridBodyCtrl(),o=n.getStickyTopHeight(),a=n.getStickyBottomHeight(),l=this.paginationProxy.getRow(t),h;do{let c=l.rowTop,d=l.rowHeight,p=this.paginationProxy.getPixelOffset(),u=l.rowTop-p,m=u+l.rowHeight,f=this.getVScrollPosition(),g=this.heightScaler.getDivStretchOffset(),y=f.top+g,x=f.bottom+g,T=x-y,A=this.heightScaler.getScrollPositionForPixel(u),S=this.heightScaler.getScrollPositionForPixel(m-T),M=Math.min((A+S)/2,u),B=y+o>u,j=x-a<m,O=null;e==="top"?O=A:e==="bottom"?O=S:e==="middle"?O=M:B?O=A-o:j&&(O=S+a),O!==null&&(this.setVerticalScrollPosition(O),this.rowRenderer.redraw({afterScroll:!0})),h=c!==l.rowTop||d!==l.rowHeight}while(h);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(t,e="auto"){let i=this.columnModel.getGridColumn(t);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;let s=this.getPositionedHorizontalScroll(i,e);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(t,e){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(e),this.setVerticalScrollPosition(t),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(t,e){let{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(t),r=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth(),n=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,a=(o?i:s)||r,l=o?s:i;e!=="auto"&&(a=e==="start",l=e==="end");let h=e==="middle";if(a||l||h){let{colLeft:c,colMiddle:d,colRight:p}=this.getColumnBounds(t);return h?d-n/2:a?o?p:c:o?c-n:p-n}return null}isColumnOutsideViewport(t){let{start:e,end:i}=this.getViewportBounds(),{colLeft:s,colRight:r}=this.getColumnBounds(t),n=this.enableRtl,o=n?e>r:i<r,a=n?i<s:e>s;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(t){let e=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),s=t.getActualWidth(),r=t.getLeft(),n=e?-1:1,o=e?i-r:r,a=o+s*n,l=o+s/2*n;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){let t=this.centerRowsCtrl.getCenterWidth(),e=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=e,s=t+e;return{start:i,end:s,width:t}}};w([Q("ctrlsService")],Qr.prototype,"ctrlsService",2);w([Q("animationFrameService")],Qr.prototype,"animationFrameService",2);w([Q("paginationProxy")],Qr.prototype,"paginationProxy",2);w([Q("rowModel")],Qr.prototype,"rowModel",2);w([Q("rowContainerHeightService")],Qr.prototype,"heightScaler",2);w([Q("rowRenderer")],Qr.prototype,"rowRenderer",2);w([Q("columnModel")],Qr.prototype,"columnModel",2);w([ke],Qr.prototype,"postConstruct",1);var mx="ag-force-vertical-scroll",zR="ag-selectable",jR="ag-column-moving",ss=class extends Ie{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(t,e,i,s,r,n,o){this.comp=t,this.eGridBody=e,this.eBodyViewport=i,this.eTop=s,this.eBottom=r,this.eStickyTop=n,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new Eu(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Qr(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,r,n,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(t){t.forEach(e=>{this.addManagedListener(e,"focusin",i=>{let{target:s}=i,r=ho(s,"ag-root",e);e.classList.toggle("ag-has-focus",!r)}),this.addManagedListener(e,"focusout",i=>{let{target:s,relatedTarget:r}=i,n=e.contains(r),o=ho(r,"ag-root",e);ho(s,"ag-root",e)||(!n||o)&&e.classList.remove("ag-has-focus")})})}setColumnMovingCss(t){this.comp.setColumnMovingCss(jR,t)}setCellTextSelection(t=!1){this.comp.setCellSelectableCss(zR,t)}onScrollVisibilityChanged(){let t=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let e=t&&this.gos.getScrollbarWidth()||0,i=um()?16:0,s=`calc(100% + ${e+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s))}onGridColumnsChanged(){let t=this.columnModel.getAllGridColumns();this.comp.setColumnCount(t.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",t=>{if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let t=i=>{let s=i.relatedTarget;if(Ud(s)===null){this.rowRenderer.stopEditing();return}let r=e.some(n=>n.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!r){let n=this.popupService;r=n.getActivePopups().some(o=>o.contains(s))||n.isElementWithinCustomPopup(s)}r||this.rowRenderer.stopEditing()},e=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];e.forEach(i=>this.addManagedListener(i,"focusout",t))}updateRowCount(){let t=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=e===-1?-1:t+e;this.comp.setRowCount(i)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){let e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){let t=this.gos.get("alwaysShowVerticalScroll"),e=t?mx:null,i=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||i&&uw(this.eBodyViewport)}setupRowAnimationCssClass(){let t=()=>{let e=this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=e?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,e)};t(),this.addManagedListener(this.eventService,V.EVENT_HEIGHT_SCALE_CHANGED,t),this.addManagedPropertyListener("animateRows",t)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let t=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",t),this.mockContextMenuForIPad(t),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyWheel.bind(this)),this.addManagedListener(this.eStickyBottom,"wheel",this.onStickyWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let t=this.eBodyViewport.querySelector(".ag-full-width-container"),e=this.eBodyViewport.querySelector(".ag-center-cols-viewport");t&&e&&this.addManagedListener(t,"wheel",i=>this.onFullWidthContainerWheel(i,e))}onFullWidthContainerWheel(t,e){!t.deltaX||Math.abs(t.deltaY)>Math.abs(t.deltaX)||!this.mouseEventService.isEventFromThisGrid(t)||(t.preventDefault(),e.scrollBy({left:t.deltaX}))}onBodyViewportContextMenu(t,e,i){if(!t&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(t||i).preventDefault();let{target:s}=t||e;(s===this.eBodyViewport||s===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:t,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(t){if(!Yr())return;let e=new _i(this.eBodyViewport),i=s=>{t(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(e,_i.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>e.destroy())}onBodyViewportWheel(t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&t.preventDefault()}onStickyWheel(t){t.preventDefault(),t.offsetY&&this.scrollVertically(t.deltaY)}getGui(){return this.eGridBody}scrollVertically(t){let e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Gs(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){let{pinnedRowModel:t}=this,e=t.getPinnedTopTotalHeight(),i=t.getPinnedBottomTotalHeight();this.comp.setTopHeight(e),this.comp.setBottomHeight(i),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`),this.stickyTopHeight=t}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`),this.stickyBottomHeight=t}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(t){if(!t)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let e=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight(),s=0;e>0&&(s+=e),i>0&&(s+=i),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){let t=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,s=t+i;this.comp.setStickyBottomBottom(`${s}px`)}sizeColumnsToFit(t,e){let s=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,n=Ao(this.eGridBody)-s;if(n>0){this.columnModel.sizeColumnsToFit(n,"sizeColumnsToFit",!1,t);return}e===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(t,100)},0):e===100?window.setTimeout(()=>{this.sizeColumnsToFit(t,500)},100):e===500?window.setTimeout(()=>{this.sizeColumnsToFit(t,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(t){this.eBodyViewport.addEventListener("scroll",t,{passive:!0})}removeScrollEventListener(t){this.eBodyViewport.removeEventListener("scroll",t)}};w([Q("animationFrameService")],ss.prototype,"animationFrameService",2);w([Q("rowContainerHeightService")],ss.prototype,"rowContainerHeightService",2);w([Q("ctrlsService")],ss.prototype,"ctrlsService",2);w([Q("columnModel")],ss.prototype,"columnModel",2);w([Q("scrollVisibleService")],ss.prototype,"scrollVisibleService",2);w([Q("menuService")],ss.prototype,"menuService",2);w([Q("headerNavigationService")],ss.prototype,"headerNavigationService",2);w([Q("dragAndDropService")],ss.prototype,"dragAndDropService",2);w([Q("pinnedRowModel")],ss.prototype,"pinnedRowModel",2);w([Q("rowRenderer")],ss.prototype,"rowRenderer",2);w([Q("popupService")],ss.prototype,"popupService",2);w([Q("mouseEventService")],ss.prototype,"mouseEventService",2);w([Q("rowModel")],ss.prototype,"rowModel",2);w([Q("filterManager")],ss.prototype,"filterManager",2);var hh="ag-cell-range-selected",$R="ag-cell-range-chart",KR="ag-cell-range-single-cell",XR="ag-cell-range-chart-category",YR="ag-cell-range-handle",qR="ag-cell-range-top",ZR="ag-cell-range-right",QR="ag-cell-range-bottom",JR="ag-cell-range-left",eD=class{constructor(t,e){this.beans=t,this.rangeService=t.rangeService,this.selectionHandleFactory=t.selectionHandleFactory,this.cellCtrl=e}setComp(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(hh,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${hh}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${hh}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${hh}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${hh}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass($R,this.hasChartRange),Ma(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(KR,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let t=this.getRangeBorders(),e=this.isSingleCell(),i=!e&&t.top,s=!e&&t.right,r=!e&&t.bottom,n=!e&&t.left;this.cellComp.addOrRemoveCssClass(qR,i),this.cellComp.addOrRemoveCssClass(ZR,s),this.cellComp.addOrRemoveCssClass(QR,r),this.cellComp.addOrRemoveCssClass(JR,n)}isSingleCell(){let{rangeService:t}=this.beans;return this.rangeCount===1&&!!t&&!t.isMoreThanOneCell()}getHasChartRange(){let{rangeService:t}=this.beans;if(!this.rangeCount||!t)return!1;let e=t.getCellRanges();return e.length>0&&e.every(i=>Ls([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let t=this.beans.gos.get("enableRtl"),e=!1,i=!1,s=!1,r=!1,n=this.cellCtrl.getCellPosition().column,o=this.beans.columnModel,a,l;t?(a=o.getDisplayedColAfter(n),l=o.getDisplayedColBefore(n)):(a=o.getDisplayedColBefore(n),l=o.getDisplayedColAfter(n));let h=this.rangeService.getCellRanges().filter(c=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),c));a||(r=!0),l||(i=!0);for(let c=0;c<h.length&&!(e&&i&&s&&r);c++){let d=h[c],p=this.rangeService.getRangeStartRow(d),u=this.rangeService.getRangeEndRow(d);!e&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(e=!0),!s&&this.beans.rowPositionUtils.sameRow(u,this.cellCtrl.getCellPosition())&&(s=!0),!r&&a&&d.columns.indexOf(a)<0&&(r=!0),!i&&l&&d.columns.indexOf(l)<0&&(i=!0)}return{top:e,right:i,bottom:s,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;let t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(YR,!!this.selectionHandle)}shouldHaveSelectionHandle(){let t=this.beans.gos,e=this.rangeService.getCellRanges(),i=e.length;if(this.rangeCount<1||i<1)return!1;let s=St(e),r=this.cellCtrl.getCellPosition(),n=t.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=t.get("enableRangeHandle"),a=i===1&&!this.cellCtrl.isEditing()&&(n||o);if(this.hasChartRange){let h=e[0].type===1&&this.rangeService.isCellInSpecificRange(r,e[0]);this.cellComp.addOrRemoveCssClass(XR,h),a=s.type===0}return a&&s.endRow!=null&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,r)}addSelectionHandle(){let t=this.beans.gos,e=St(this.rangeService.getCellRanges()).type,s=t.get("enableFillHandle")&&rt(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},tD=class extends Ie{constructor(t,e){super(),this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,V.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(t){this.eGui=t,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let t=this.getColSpanningList();Rr(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;let t=this.getCellWidth();this.eGui.style.width=`${t}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((t,e)=>t+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let t=this.column.getColSpan(this.rowNode),e=[];if(t===1)e.push(this.column);else{let i=this.column,s=this.column.getPinned();for(let r=0;i&&r<t&&(e.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!(!i||rt(i)||s!==i.getPinned()));r++);}return e}onLeftChanged(){if(!this.eGui)return;let t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=t+"px"}getCellLeft(){let t;return this.beans.gos.get("enableRtl")&&this.colsSpanning?t=St(this.colsSpanning):t=this.column,t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return t;let e=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){let i=this.beans.columnModel.getBodyContainerWidth();return e+i+(t||0)}return e+(t||0)}applyRowSpan(t){if(this.rowSpan===1&&!t)return;let i=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},iD=class extends Ie{constructor(t,e){super(),this.staticClasses=[],this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setComp(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let t=this.column.getColDef(),{cellClassRules:e}=t,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:t,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(e===this.cellClassRules?void 0:this.cellClassRules,e,i,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=e}applyUserStyles(){let t=this.column.getColDef();if(!t.cellStyle)return;let e;if(typeof t.cellStyle=="function"){let i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=t.cellStyle;e=s(i)}else e=t.cellStyle;e&&this.cellComp.setUserStyles(e)}applyClassesFromColDef(){let t=this.column.getColDef(),e=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:t,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(t,e),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},lt=class{postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gos.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};w([Q("resizeObserverService")],lt.prototype,"resizeObserverService",2);w([Q("paginationProxy")],lt.prototype,"paginationProxy",2);w([Q("context")],lt.prototype,"context",2);w([Q("gridOptionsService")],lt.prototype,"gos",2);w([Q("environment")],lt.prototype,"environment",2);w([Q("rowRenderer")],lt.prototype,"rowRenderer",2);w([Q("valueService")],lt.prototype,"valueService",2);w([Q("eventService")],lt.prototype,"eventService",2);w([Q("columnModel")],lt.prototype,"columnModel",2);w([Q("headerNavigationService")],lt.prototype,"headerNavigationService",2);w([Q("navigationService")],lt.prototype,"navigationService",2);w([Q("columnAnimationService")],lt.prototype,"columnAnimationService",2);w([Q("focusService")],lt.prototype,"focusService",2);w([Q("popupService")],lt.prototype,"popupService",2);w([Q("stylingService")],lt.prototype,"stylingService",2);w([Q("columnHoverService")],lt.prototype,"columnHoverService",2);w([Q("userComponentFactory")],lt.prototype,"userComponentFactory",2);w([Q("userComponentRegistry")],lt.prototype,"userComponentRegistry",2);w([Q("animationFrameService")],lt.prototype,"animationFrameService",2);w([Q("dragService")],lt.prototype,"dragService",2);w([Q("dragAndDropService")],lt.prototype,"dragAndDropService",2);w([Q("sortController")],lt.prototype,"sortController",2);w([Q("filterManager")],lt.prototype,"filterManager",2);w([Q("rowContainerHeightService")],lt.prototype,"rowContainerHeightService",2);w([Q("frameworkOverrides")],lt.prototype,"frameworkOverrides",2);w([Q("cellPositionUtils")],lt.prototype,"cellPositionUtils",2);w([Q("rowPositionUtils")],lt.prototype,"rowPositionUtils",2);w([Q("selectionService")],lt.prototype,"selectionService",2);w([Q("rowCssClassCalculator")],lt.prototype,"rowCssClassCalculator",2);w([Q("rowModel")],lt.prototype,"rowModel",2);w([Q("ctrlsService")],lt.prototype,"ctrlsService",2);w([Q("ctrlsFactory")],lt.prototype,"ctrlsFactory",2);w([Q("agStackComponentsRegistry")],lt.prototype,"agStackComponentsRegistry",2);w([Q("valueCache")],lt.prototype,"valueCache",2);w([Q("rowNodeEventThrottle")],lt.prototype,"rowNodeEventThrottle",2);w([Q("localeService")],lt.prototype,"localeService",2);w([Q("syncService")],lt.prototype,"syncService",2);w([Q("ariaAnnouncementService")],lt.prototype,"ariaAnnouncementService",2);w([_t("rangeService")],lt.prototype,"rangeService",2);w([_t("selectionHandleFactory")],lt.prototype,"selectionHandleFactory",2);w([ke],lt.prototype,"postConstruct",1);lt=w([Ye("beans")],lt);var sD=class extends lt{constructor(t,e,i){super(),this.cellCtrl=t,this.beans=e,this.column=i}onMouseEvent(t,e){if(!dr(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(t),t.preventDefault();return}let{eventService:e,rangeService:i,gos:s}=this.beans,r=t.ctrlKey||t.metaKey;i&&r&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);let n=this.cellCtrl.createEvent(t,V.EVENT_CELL_CLICKED);e.dispatchEvent(n);let o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(n)})},0),(s.get("singleClickEdit")||o.singleClickEdit)&&!s.get("suppressClickEdit")&&!(t.shiftKey&&i?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Yr()||em("dblclick"))return!1;let t=new Date().getTime(),e=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,e}onCellDoubleClicked(t){let e=this.column.getColDef(),i=this.cellCtrl.createEvent(t,V.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),typeof e.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{e.onCellDoubleClicked(i)})},0),!this.beans.gos.get("singleClickEdit")&&!this.beans.gos.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,t)}onMouseDown(t){let{ctrlKey:e,metaKey:i,shiftKey:s}=t,r=t.target,{cellCtrl:n,beans:o}=this,{eventService:a,rangeService:l,focusService:h}=o;if(this.isRightClickInExistingRange(t))return;let c=l&&l.getCellRanges().length!=0;if(!s||!c){let d=Pr()&&!n.isEditing()&&!gm(r);n.focusCell(d)}if(s&&c&&!h.isCellFocused(n.getCellPosition())){t.preventDefault();let d=h.getFocusedCell();if(d){let{column:p,rowIndex:u,rowPinned:m}=d,f=o.rowRenderer.getRowByPosition({rowIndex:u,rowPinned:m}),g=f?.getCellCtrl(p);g?.isEditing()&&g.stopEditing(),h.setFocusedCell({column:p,rowIndex:u,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){let d=this.cellCtrl.getCellPosition();if(s)l.extendLatestRangeToCell(d);else{let p=e||i;l.setRangeToCell(d,p)}}a.dispatchEvent(this.cellCtrl.createEvent(t,V.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(t){let{rangeService:e}=this.beans;if(e){let i=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=t.button===2||t.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(t){return ho(t,"ag-selection-checkbox",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t))return;let e=this.cellCtrl.createEvent(t,V.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t))return;let e=this.cellCtrl.createEvent(t,V.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget)return!1;let e=this.cellCtrl.getGui(),i=e.contains(t.target),s=e.contains(t.relatedTarget);return i&&s}destroy(){}},rD=class extends Ie{constructor(t,e,i,s,r){super(),this.cellCtrl=t,this.beans=e,this.rowNode=s,this.rowCtrl=r}setComp(t){this.eGui=t}onKeyDown(t){let e=t.key;switch(e){case Ce.ENTER:this.onEnterKeyDown(t);break;case Ce.F2:this.onF2KeyDown(t);break;case Ce.ESCAPE:this.onEscapeKeyDown(t);break;case Ce.TAB:this.onTabKeyDown(t);break;case Ce.BACKSPACE:case Ce.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case Ce.DOWN:case Ce.UP:case Ce.RIGHT:case Ce.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(t):this.beans.navigationService.navigateToNextCell(t,e,this.cellCtrl.getCellPosition(),!0),t.preventDefault())}onShiftRangeSelect(t){if(!this.beans.rangeService)return;let e=this.beans.rangeService.extendLatestRangeInDirection(t);e&&this.beans.navigationService.ensureCellVisible(e)}onTabKeyDown(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){var i;let{cellCtrl:s,beans:r,rowNode:n}=this,{gos:o,rangeService:a,eventService:l}=r;if(!s.isEditing()){if(l.dispatchEvent({type:V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),Sw(t,o.get("enableCellEditingOnBackspace"))){if(a&&o.get("enableRangeSelection"))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(s.isCellEditable()){let h=s.getColumn(),c=(i=this.beans.valueService.parseValue(h,n,"",n.getValueFromValueService(h)))!=null?i:null;n.setDataValue(h,c,"cellClear")}}else s.startRowOrCellEdit(t,e);l.dispatchEvent({type:V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}}onEnterKeyDown(t){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,t.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let e=t.shiftKey?Ce.UP:Ce.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(Ce.ENTER,t),this.cellCtrl.isEditing()&&t.preventDefault()}onF2KeyDown(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Ce.F2,t)}onEscapeKeyDown(t){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(t){if(t.target!==this.eGui||this.cellCtrl.isEditing())return;let s=t.key;s===" "?this.onSpaceKeyDown(t):(this.cellCtrl.startRowOrCellEdit(s,t),t.preventDefault())}onSpaceKeyDown(t){let{gos:e}=this.beans;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){let i=this.rowNode.isSelected(),s=!i;if(s||!e.get("suppressRowDeselection")){let r=this.beans.gos.get("groupSelectsFiltered"),n=this.rowNode.setSelectedParams({newValue:s,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"});i===void 0&&n===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"})}}t.preventDefault()}destroy(){super.destroy()}},vx=class extends nt{constructor(t,e,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=t,this.column=e,this.eCell=i}postConstruct(){this.getGui().appendChild(Kt("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(t){let e=this.column.getColDef().dndSourceOnRowDrag;t.dataTransfer.setDragImage(this.eCell,0,0);let i=()=>{try{let s=JSON.stringify(this.rowNode.data);t.dataTransfer.setData("application/json",s),t.dataTransfer.setData("text/plain",s)}catch{}};if(e){let s=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:t});e(s)}else i()}checkVisibility(){let t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)}};w([ke],vx.prototype,"postConstruct",1);var nD="ag-column-first",oD="ag-column-last",bu=class{static getHeaderClassesFromColDef(t,e,i,s){return rt(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,i,s)}static getToolPanelClassesFromColDef(t,e,i,s){return rt(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,i,s)}static refreshFirstAndLastStyles(t,e,i){t.addOrRemoveCssClass(nD,i.isColumnAtEdge(e,"first")),t.addOrRemoveCssClass(oD,i.isColumnAtEdge(e,"last"))}static getClassParams(t,e,i,s){return e.addGridCommonParams({colDef:t,column:i,columnGroup:s})}static getColumnClassesFromCollDef(t,e,i,s,r){if(rt(t))return[];let n;if(typeof t=="function"){let o=this.getClassParams(e,i,s,r);n=t(o)}else n=t;return typeof n=="string"?[n]:Array.isArray(n)?[...n]:[]}},aD="ag-cell",lD="ag-cell-auto-height",hD="ag-cell-normal-height",cD="ag-cell-focus",dD="ag-cell-first-right-pinned",uD="ag-cell-last-left-pinned",pD="ag-cell-not-inline-editing",fD="ag-column-hover",gD="ag-cell-wrap-text",mD=0,Cx=class Ng extends Ie{constructor(e,i,s,r){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=i,this.beans=s,this.rowCtrl=r,this.instanceId=e.getId()+"-"+mD++,this.colIdSanitised=oi(this.column.getId()),s.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new tD(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellPositionFeature)==null||i.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new iD(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellCustomStyleFeature)==null||i.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new sD(this,this.beans,this.column),this.addDestroyFunc(()=>{var i;(i=this.cellMouseListenerFeature)==null||i.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new rD(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var i;(i=this.cellKeyboardListenerFeature)==null||i.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new eD(this.beans,this),this.addDestroyFunc(()=>{var i;(i=this.cellRangeFeature)==null||i.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(e,i){let s=()=>{let o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&Me(a))return Ta(a,o.tooltipField,this.column.isTooltipFieldContainsDots());let l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},r=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&r&&!this.isCellRenderer()&&(i=()=>{let o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:e!=null?()=>e:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new qr(n,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,i,s,r,n){var o,a,l,h;this.cellComp=e,this.eGui=i,this.printLayout=r,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(o=this.cellPositionFeature)==null||o.setComp(i),(a=this.cellCustomStyleFeature)==null||a.setComp(e),(l=this.tooltipFeature)==null||l.refreshToolTip(),(h=this.cellKeyboardListenerFeature)==null||h.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,i),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(c=>c()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;let i=e.parentElement,s=this.beans.gos.getRowHeightForNode(this.rowNode).height,r=a=>{if(this.editing||!this.isAlive())return;let{paddingTop:l,paddingBottom:h,borderBottomWidth:c,borderTopWidth:d}=Rn(i),p=l+h+c+d,m=e.offsetHeight+p;if(a<5){let g=this.beans.gos.getDocument(),y=!g||!g.contains(e),x=m==0;if(y||x){window.setTimeout(()=>r(a+1),0);return}}let f=Math.max(m,s);this.rowNode.setRowAutoHeight(f,this.column)},n=()=>r(0);n();let o=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var e;return(e=this.column.getColDef().cellAriaRole)!=null?e:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){let e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){var e;return(e=this.valueFormatted)!=null?e:this.value}showValue(e=!1){var i;let s=this.getValueToDisplay(),r;if(this.rowNode.stub){let n=this.createCellRendererParams();r=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),n)}else if(this.isCellRenderer()){let n=this.createCellRendererParams();r=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),n)}this.cellComp.setRenderDetails(r,s,e),(i=this.cellRangeFeature)==null||i.refreshHandle()}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){let e=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),s=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return i||s||r||n}startEditing(e=null,i=!1,s=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,i,s)});return}let r=this.createCellEditorParams(e,i),n=this.column.getColDef(),o=this.beans.userComponentFactory.getCellEditorDetails(n,r);this.editCompDetails=o;let a=o?.popupFromSelector!=null?o.popupFromSelector:!!n.cellEditorPopup,l=o?.popupPositionFromSelector!=null?o.popupPositionFromSelector:n.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(o,a,l,this.beans.gos.get("reactiveCustomComponents"));let h=this.createEvent(s,V.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(h)}setEditing(e){var i;this.editing!==e&&(this.editing=e,(i=this.cellRangeFeature)==null||i.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){let i={newValueExists:!1};if(e)return i;let s=this.cellComp.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,i){if(i===e)return!1;this.suppressRefreshCell=!0;let s=this.rowNode.setDataValue(this.column,i,"edit");return this.suppressRefreshCell=!1,s}stopEditing(e=!1){if(!this.editing)return!1;let{newValue:i,newValueExists:s}=this.takeValueFromCellEditor(e),r=this.rowNode.getValueFromValueService(this.column),n=!1;return s&&(n=this.saveNewValue(r,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(r,i,!e&&!!n),n}dispatchEditingStoppedEvent(e,i,s){let r=zt(Qe({},this.createEvent(null,V.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:i,valueChanged:s});this.beans.eventService.dispatchEvent(r)}createCellEditorParams(e,i){return this.beans.gos.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:i,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,s,r,n)=>this.registerRowDragger(i,s,n),setTooltip:(i,s)=>{var r;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,s),(r=this.tooltipFeature)==null||r.refreshToolTip()}})}parseValue(e){return this.beans.valueService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;let e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;let e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(e)}refreshCell(e){var i,s,r,n;if(this.suppressRefreshCell||this.editing)return;let o=this.column.getColDef(),a=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!o.suppressCellFlash,h=o.field==null&&o.valueGetter==null&&o.showRowGroup==null,c=e&&e.forceRefresh||h||a,d=!!this.cellComp,p=this.updateAndFormatValue(d),u=c||p;if(d){if(u){this.showValue(a);let m=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!m&&(this.beans.gos.get("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),(i=this.cellCustomStyleFeature)==null||i.applyUserStyles(),(s=this.cellCustomStyleFeature)==null||s.applyClassesFromColDef()}(r=this.tooltipFeature)==null||r.refreshToolTip(),(n=this.cellCustomStyleFeature)==null||n.applyCellClassRules()}}stopEditingAndFocus(e=!1,i=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(i)}navigateAfterEdit(e){if(this.beans.gos.get("enterNavigatesVerticallyAfterEdit")){let s=e?Ce.UP:Ce.DOWN;this.beans.navigationService.navigateToNextCell(null,s,this.getCellPosition(),!1)}}flashCell(e){var i,s;let r=(i=e?.flashDuration)!=null?i:e?.flashDelay,n=(s=e?.fadeDuration)!=null?s:e?.fadeDelay;this.animateCell("data-changed",r,n)}animateCell(e,i,s){if(!this.cellComp)return;let r=`ag-cell-${e}`,n=`ag-cell-${e}-animation`,{gos:o}=this.beans;i||(i=o.get("cellFlashDuration")),Me(s)||(s=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(n,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(n,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(n,!1),this.eGui.style.transition="")},s))},i)})}onFlashCells(e){if(!this.cellComp)return;let i=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var i;return(i=this.callValueFormatter(e))!=null?i:e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let i=this.value,s=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(e,i){let s=this.column.getColDef();return s.equals?s.equals(e,i):e===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){let e=this.getGui();this.beans.gos.setDomData(e,Ng.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(e,Ng.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(e)}onKeyDown(e){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(e)}onMouseEvent(e,i){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(e,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:e,column:i,beans:s}=this;bu.refreshFirstAndLastStyles(e,i,s.columnModel)}refreshAriaColIndex(){let e=this.beans.columnModel.getAriaColumnIndex(this.column);om(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)==null?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,i=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,i)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,i)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(dD,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(uD,e)}onCellFocused(e){if(this.beans.gos.get("suppressCellFocus"))return;let i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&e?.forceBrowserFocus&&(this.focusEventToRestore=e);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(cD,i),i&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});let s=this.beans.gos.get("editType")==="fullRow";!i&&!s&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Dr(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(aD,!0),this.cellComp.addOrRemoveCssClass(pD,!0);let e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(lD,e),this.cellComp.addOrRemoveCssClass(hD,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(fD,e)}onColDefChanged(){if(!this.cellComp)return;if(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{let i=this.getCellEditor();if(i?.refresh){let{eventKey:s,cellStartedEdit:r}=this.editCompDetails.params,n=this.createCellEditorParams(s,r),o=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(o,n);i.refresh(a.params)}}}setWrapText(){let e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(gD,e)}dispatchCellContextMenuEvent(e){let i=this.column.getColDef(),s=this.createEvent(e,V.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(s),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let e=new wu;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=new vx(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,i,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,i);return}let r=this.createRowDragComp(e,i,s);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,i,s){let r=this.beans.gos.get("pagination"),n=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(n){if(!o){et("managed row dragging is only allowed in the Client Side Row Model");return}if(r){et("managed row dragging is not possible when doing pagination");return}}let a=new mo(()=>this.value,this.rowNode,this.column,e,i,s);return this.beans.context.createBean(a),a}};Cx.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var uo=Cx,vD=0,yx=class Gg extends Ie{constructor(e,i,s,r,n){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=e,this.paginationPage=i.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=r,this.printLayout=n,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+vD++,this.rowId=oi(e.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=oi(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}setComp(e,i,s){let r={rowComp:e,element:i,containerType:s};this.allRowGuis.push(r),s==="left"?this.leftGui=r:s==="right"?this.rightGui=r:s==="fullWidth"?this.fullWidthGui=r:this.centerGui=r,this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){switch(this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==e),e){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break;default:}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){let i=e?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=i)}initialiseRowComp(e){let i=this.gos;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let s=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(n=>s.addOrRemoveCssClass(n,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&$r(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),i.setDomData(e.element,Gg.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>i.setDomData(e.element,Gg.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=oi(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){let{containerType:i}=e;this.slideInAnimation[i]&&(Eg(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(Eg(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(e){if(this.gos.get("enableRangeSelection")){et("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}let i=this.beans.localeService.getLocaleTextFunc(),s=new mo(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0),r=this.createBean(s,this.beans.context);this.rowDragComps.push(r)}setupFullWidth(e){let i=this.getPinnedForContainer(e.containerType);if(this.rowType=="FullWidthDetail"&&!bt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let s=this.createFullWidthCompDetails(e.element,i);e.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var r;return(r=s?.rowComp)==null?void 0:r.getFullWidthCellRenderer()}):[(i=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(e){let i=this.getCellCtrl(e);return i?i.getGui():null}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;let i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(i)}areAllContainersReady(){let e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),i=!!this.centerGui,s=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&i&&s}setRowType(){let e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),i=this.rowNode.isFullWidthCell(),s=this.gos.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(r);e?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,i=!1){if(this.isFullWidth())return;if(e||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,i,s=null){let r={list:[],map:{}},n=(o,a)=>{r.list.push(a),r.map[o]=a};return i.forEach(o=>{let a=o.getInstanceId(),l=e.map[a];l||(l=new uo(o,this.rowNode,this.beans,this)),n(a,l)}),e.list.forEach(o=>{if(r.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,s)){n(o.getColumn().getInstanceId(),o);return}o.destroy()}),r}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(i=>{let s=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(s,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:let i=e;throw new Error(`Unhandled case: ${i}`)}}createAllCellCtrls(){let e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let s=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");let r=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,i){if(e.getColumn().getPinned()!=i)return!0;let o=e.isEditing(),a=this.beans.focusService.isCellFocused(e.getCellPosition());if(o||a){let h=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(h)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(e){let i=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)}setAnimateFlags(e){if(this.isSticky()||!e)return;let i=Me(this.rowNode.oldRowTop),s=this.beans.columnModel.isPinningLeft(),r=this.beans.columnModel.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let e=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,i=e(this.fullWidthGui,null),s=e(this.centerGui,null),r=e(this.leftGui,"left"),n=e(this.rightGui,"right");return i&&s&&r&&n}addListeners(){this.addManagedListener(this.rowNode,ct.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,ct.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,ct.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,ct.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,ct.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));let e=this.beans.eventService;this.addManagedListener(e,V.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,V.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,V.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,V.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,V.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,V.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,V.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,V.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(s=>{this.addRowDraggerToRow(s)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,ct.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,ct.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{let s=e===0,r=e===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){let e=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){let e=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",e),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&i),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!i),$r(s.element,e&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Dr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let i=this.allRowGuis.find(l=>l.element.contains(e.target));if(!((i?i.element:null)===e.target))return;let n=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||dr(e))return;let i=this.allRowGuis.find(o=>o.element.contains(e.target)),s=i?i.element:null,r=s===e.target,n=null;r||(n=this.beans.focusService.findNextFocusableElement(s,!1,e.shiftKey)),(this.isFullWidth()&&r||!n)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;let i=(e=this.allRowGuis.find(s=>ys(s.element)))==null?void 0:e.element;return i?i.getBoundingClientRect().top:0}onFullWidthRowFocused(e){var i;let s=this.rowNode,r=e?this.isFullWidth()&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(i=this.centerGui)==null?void 0:i.element;n&&(n.classList.toggle("ag-full-width-focus",r),r&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,i){let s={list:[],map:{}};return e.list.forEach(r=>{r!==i&&(s.list.push(r),s.map[r.getColumn().getInstanceId()]=r)}),s}onMouseEvent(e,i){switch(e){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(e,i){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(e,i){let s=this.createRowEvent(e,i);return s.source=this,s}onRowDblClick(e){if(dr(e))return;let i=this.createRowEventWithSource(V.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(i)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=ho(e.target,"ag-row-drag",3),!this.isFullWidth())return;let i=this.rowNode,s=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:s.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(dr(e)||this.lastMouseDownOnDragger)return;let s=this.createRowEventWithSource(V.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(s);let r=e.ctrlKey||e.metaKey,n=e.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;let a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),h="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:e,source:h}):r?l&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:h}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!n,rangeSelect:n,event:e,source:h});else{let c=a?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:c,rangeSelect:n,event:e,source:h})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(e){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let i=()=>{let r=e.clientHeight;if(r!=null&&r>0){let n=()=>{this.rowNode.setRowHeight(r),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(n,0)}},s=this.beans.resizeObserverService.observeResize(e,i);this.addDestroyFunc(s),i()}createFullWidthCompDetails(e,i){let s=this.gos.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:e,eParentOfValue:e,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,n,o,a)=>this.addFullWidthRowDragging(r,n,o,a),setTooltip:(r,n)=>this.refreshRowTooltip(r,n)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(s);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(s);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(s);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(s)}}refreshRowTooltip(e,i){if(!this.fullWidthGui)return;let s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new qr(s,this.beans))}addFullWidthRowDragging(e,i,s="",r){if(!this.isFullWidth())return;let n=new mo(()=>s,this.rowNode,void 0,e,i,r);this.createBean(n,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(n,this.beans.context)})}onUiLevelChanged(){let e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){let i="ag-row-level-"+e,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(i,!0),r.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;let i=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;let r=!1;for(let n of i){let o=n.stopEditing(e);s&&!e&&!r&&o&&(r=!0)}if(r){let n=this.createRowEvent(V.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(n)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",e));let i=e?this.createRowEvent(V.EVENT_ROW_EDITING_STARTED):this.createRowEvent(V.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)}startRowEditing(e=null,i=null,s=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((n,o)=>{let a=o===i;return a?o.startEditing(e,a,s):o.startEditing(null,a,s),n?!0:o.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(i=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,i){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"?"left":e==="right"?"right":null}getInitialRowClasses(e){let i=this.getPinnedForContainer(e),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){let e=this.gos.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let i=this.gos.getCallback("getRowStyle"),s;if(i){let r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=i(r)}return s||e?Object.assign({},e,s):this.emptyStyle}onRowSelected(e){let i=!!this.rowNode.isSelected();this.forEachGui(e,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",i),Ma(s.element,i),s.element.contains(this.beans.gos.getActiveDomElement())&&(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let e=this.rowNode.isSelected();if(e&&this.beans.gos.get("suppressRowDeselection"))return;let s=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s)}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,ct.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gos.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,ct.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){let i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,r=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,e),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,i){e?i(e):this.allRowGuis.forEach(i)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;let i=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),n=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=n?`${Math.min(s,n)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${i}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(e,i){super.addEventListener(e,i)}removeEventListener(e,i){super.removeEventListener(e,i)}destroyFirstPass(e=!1){if(this.active=!1,!e&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){let r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let i=this.createRowEvent(V.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let e=i=>(i.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;let s=this.beans.paginationProxy.getPixelOffset();return e+s*(i?1:-1)}setRowTop(e){if(!this.printLayout&&Me(e)){let i=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let i;if(this.isSticky())i=this.rowNode.stickyRowTop;else{let s=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,r=this.applyPaginationOffset(s);i=this.rowNode.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(e):i.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let i=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==e&&(i=s)}),i!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(e)>=0&&(i=s)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){let i=this.rowNode.getRowIndexString(),s=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),r=this.rowNode.rowIndex%2===0,n=s+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(i),o.rowComp.addOrRemoveCssClass("ag-row-even",r),o.rowComp.addOrRemoveCssClass("ag-row-odd",!r),nm(o.element,n)})}};yx.DOM_DATA_KEY_ROW_CTRL="renderedRow";var po=yx,ws=class extends Ie{constructor(t){super(),this.element=t}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedListener(this.element,t,e)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",em("touchstart")?"touchstart":"mousedown"].forEach(i=>{let s=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,s)})}processMouseEvent(t,e){if(!this.mouseEventService.isEventFromThisGrid(e)||dr(e))return;let i=this.getRowForEvent(e),s=this.mouseEventService.getRenderedCellForEvent(e);t==="contextmenu"?this.handleContextMenuMouseEvent(e,void 0,i,s):(s&&s.onMouseEvent(t,e),i&&i.onMouseEvent(t,e))}mockContextMenuForIPad(){if(!Yr())return;let t=new _i(this.element),e=i=>{let s=this.getRowForEvent(i.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,s,r)};this.addManagedListener(t,_i.EVENT_LONG_TAP,e),this.addDestroyFunc(()=>t.destroy())}getRowForEvent(t){let e=t.target;for(;e;){let i=this.gos.getDomData(e,po.DOM_DATA_KEY_ROW_CTRL);if(i)return i;e=e.parentElement}return null}handleContextMenuMouseEvent(t,e,i,s){let r=i?i.getRowNode():null,n=s?s.getColumn():null,o=null;if(n){let h=t||e;s.dispatchCellContextMenuEvent(h??null),o=this.valueService.getValue(n,r)}let a=this.ctrlsService.getGridBodyCtrl(),l=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:t,touchEvent:e,rowNode:r,column:n,value:o,anchorToElement:l})}getControlsForEventTarget(t){return{cellCtrl:Hd(this.gos,t,uo.DOM_DATA_KEY_CELL_CTRL),rowCtrl:Hd(this.gos,t,po.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(t,e){let{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(i?this.processCellKeyboardEvent(i,t,e):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,t,e))}processCellKeyboardEvent(t,e,i){let s=t.getRowNode(),r=t.getColumn(),n=t.isEditing();if(!zd(this.gos,i,s,r,n)&&e==="keydown"&&(!n&&this.navigationService.handlePageScrollingKey(i)||t.onKeyDown(i),this.doGridOperations(i,t.isEditing()),uu(i)&&t.processCharacter(i)),e==="keydown"){let a=t.createEvent(i,V.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(t,e,i){let s=t.getRowNode(),r=this.focusService.getFocusedCell(),n=r&&r.column;if(!zd(this.gos,i,s,n,!1)){let a=i.key;if(e==="keydown")switch(a){case Ce.PAGE_HOME:case Ce.PAGE_END:case Ce.PAGE_UP:case Ce.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case Ce.UP:case Ce.DOWN:t.onKeyboardNavigate(i);break;case Ce.TAB:t.onTabKeyDown(i);break;default:}}if(e==="keydown"){let a=t.createRowEvent(V.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(a)}}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey||e||!this.mouseEventService.isEventFromThisGrid(t))return;let i=xw(t);if(i===Ce.A)return this.onCtrlAndA(t);if(i===Ce.C)return this.onCtrlAndC(t);if(i===Ce.D)return this.onCtrlAndD(t);if(i===Ce.V)return this.onCtrlAndV(t);if(i===Ce.X)return this.onCtrlAndX(t);if(i===Ce.Y)return this.onCtrlAndY();if(i===Ce.Z)return this.onCtrlAndZ(t)}onCtrlAndA(t){let{pinnedRowModel:e,paginationProxy:i,rangeService:s}=this;if(s&&i.isRowsToRender()){let[r,n]=[e.isEmpty("top"),e.isEmpty("bottom")],o=r?null:"top",a,l;n?(a=null,l=this.paginationProxy.getRowCount()-1):(a="bottom",l=e.getPinnedBottomRowData().length-1);let h=this.columnModel.getAllDisplayedColumns();if(Ks(h))return;s.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:h[0],columnEnd:St(h)})}t.preventDefault()}onCtrlAndC(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e?.isEditing()||i?.isEditing()||(t.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e?.isEditing()||i?.isEditing()||(t.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(t){let{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(t){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),t.preventDefault()}onCtrlAndZ(t){this.gos.get("undoRedoCellEditing")&&(t.preventDefault(),t.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};w([Q("mouseEventService")],ws.prototype,"mouseEventService",2);w([Q("valueService")],ws.prototype,"valueService",2);w([Q("menuService")],ws.prototype,"menuService",2);w([Q("ctrlsService")],ws.prototype,"ctrlsService",2);w([Q("navigationService")],ws.prototype,"navigationService",2);w([Q("focusService")],ws.prototype,"focusService",2);w([Q("undoRedoService")],ws.prototype,"undoRedoService",2);w([Q("columnModel")],ws.prototype,"columnModel",2);w([Q("paginationProxy")],ws.prototype,"paginationProxy",2);w([Q("pinnedRowModel")],ws.prototype,"pinnedRowModel",2);w([_t("rangeService")],ws.prototype,"rangeService",2);w([_t("clipboardService")],ws.prototype,"clipboardService",2);w([ke],ws.prototype,"postConstruct",1);var $a=class extends Ie{constructor(t){super(),this.centerContainerCtrl=t}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.listenForResize()}),this.addManagedListener(this.eventService,V.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let t=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(t),this.gridBodyCtrl.registerBodyViewportResizeListener(t)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let t=this.centerContainerCtrl.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let t=this.gridBodyCtrl.getBodyViewportElement(),e=Ao(t);if(e<=50)return;let i=this.getPinnedColumnsOverflowingViewport(e-50),s=this.gos.getCallback("processUnpinnedColumns");i.length&&(s&&(i=s({columns:i,viewportWidth:e})),this.columnModel.setColumnsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(t){let e=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),s=e+i;if(s<t)return[];let r=[...this.columnModel.getDisplayedLeftColumns()],n=[...this.columnModel.getDisplayedRightColumns()],o=0,a=0,l=0,h=[],c=s-l-t;for(;(a<r.length||o<n.length)&&c>0;){if(o<n.length){let d=n[o++];c-=d.getActualWidth(),h.push(d)}if(a<r.length&&c>0){let d=r[a++];c-=d.getActualWidth(),h.push(d)}}return h}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let t=this.gridBodyCtrl.getBodyViewportElement(),e=Kh(t);if(this.bodyHeight!==e){this.bodyHeight=e;let i={type:V.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(t,e)}};w([Q("ctrlsService")],$a.prototype,"ctrlsService",2);w([Q("pinnedWidthService")],$a.prototype,"pinnedWidthService",2);w([Q("columnModel")],$a.prototype,"columnModel",2);w([Q("scrollVisibleService")],$a.prototype,"scrollVisibleService",2);w([ke],$a.prototype,"postConstruct",1);var Gm=class extends Ie{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){let t=this.pinnedWidthService.getPinnedLeftWidth(),e=t>0;vt(this.element,e),qs(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};w([Q("pinnedWidthService")],Gm.prototype,"pinnedWidthService",2);w([ke],Gm.prototype,"postConstruct",1);var Vm=class extends Ie{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){let t=this.pinnedWidthService.getPinnedRightWidth(),e=t>0;vt(this.element,e),qs(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};w([Q("pinnedWidthService")],Vm.prototype,"pinnedWidthService",2);w([ke],Vm.prototype,"postConstruct",1);var _u=class extends Ie{constructor(t,e){super(),this.eContainer=t,this.eViewport=e}postConstruct(){this.addManagedListener(this.eventService,V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){let t=this.maxDivHeightScaler.getUiContainerHeight(),e=t!=null?`${t}px`:"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)}};w([Q("rowContainerHeightService")],_u.prototype,"maxDivHeightScaler",2);w([ke],_u.prototype,"postConstruct",1);var Tu=class extends Ie{constructor(t){super(),this.eContainer=t}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",e=>{if(e.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};w([Q("dragService")],Tu.prototype,"dragService",2);w([_t("rangeService")],Tu.prototype,"rangeService",2);w([ke],Tu.prototype,"postConstruct",1);var Ka=class extends Ie{constructor(t,e=!1){super(),this.callback=t,this.addSpacer=e}postConstruct(){let t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedListener(this.eventService,V.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,t),this.addSpacer&&(this.addManagedListener(this.eventService,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_SCROLLBAR_WIDTH_CHANGED,t)),this.setWidth()}setWidth(){let{columnModel:t}=this,e=this.gos.isDomLayout("print"),i=t.getBodyContainerWidth(),s=t.getDisplayedColumnsLeftWidth(),r=t.getDisplayedColumnsRightWidth(),n;e?n=i+s+r:(n=i,this.addSpacer&&(this.gos.get("enableRtl")?s:r)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.gos.getScrollbarWidth())),this.callback(n)}};w([Q("columnModel")],Ka.prototype,"columnModel",2);w([Q("scrollVisibleService")],Ka.prototype,"scrollVisibleService",2);w([ke],Ka.prototype,"postConstruct",1);function CD(t){switch(t){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":case"stickyBottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":case"stickyBottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":case"stickyBottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var yD=wn([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["stickyBottomCenter","ag-sticky-bottom-container"],["stickyBottomLeft","ag-pinned-left-sticky-bottom"],["stickyBottomRight","ag-pinned-right-sticky-bottom"],["stickyBottomFullWidth","ag-sticky-bottom-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),wD=wn([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"],["stickyBottomCenter","ag-sticky-bottom-viewport"]]),Io=class wx extends Ie{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="stickyBottomFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(e){let i=yD.get(e),s=wD.get(e);return{container:i,viewport:s}}static getPinned(e){switch(e){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"stickyBottomLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"stickyBottomRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new $a(this)))}registerWithCtrlsService(){switch(this.name){case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return;default:this.ctrlsService.register(this.name,this)}}forContainers(e,i){e.indexOf(this.name)>=0&&i()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,i,s){this.comp=e,this.eContainer=i,this.eViewport=s,this.createManagedBean(new ws(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();let r=["topCenter","topLeft","topRight"],n=["stickyTopCenter","stickyTopLeft","stickyTopRight"],o=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],a=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],h=[...r,...a,...l,...n,...o],c=["center","left","right","fullWidth"],d=["center","topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],p=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],u=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"];this.forContainers(p,()=>{this.pinnedWidthFeature=this.createManagedBean(new Gm(this.eContainer)),this.addManagedListener(this.eventService,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(u,()=>{this.pinnedWidthFeature=this.createManagedBean(new Vm(this.eContainer)),this.addManagedListener(this.eventService,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(c,()=>this.createManagedBean(new _u(this.eContainer,this.name==="center"?s:void 0))),this.forContainers(h,()=>this.createManagedBean(new Tu(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new Ka(m=>this.comp.setContainerWidth(`${m}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth","stickyBottomCenter","stickyBottomLeft","stickyBottomRight","stickyBottomFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let s=()=>{let r=this.gos.get("ensureDomOrder"),n=this.gos.isDomLayout("print");this.comp.setDomOrder(r||n)};this.addManagedPropertyListener("domLayout",s),s()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{let e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=i=>{this.dragService.isDragging()&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let i=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(i,s,e)}getCenterWidth(){return Ao(this.eViewport)}getCenterViewportScrollLeft(){return _h(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let i=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>i())}isViewportInTheDOMTree(){return Cm(this.eViewport)}getViewportScrollLeft(){return _h(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||dw(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Th(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!wx.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let i=this.getRowCtrls();if(!this.visible||i.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let s=this.gos.isDomLayout("print"),n=this.gos.get("embedFullWidthRows")||s,o=i.filter(a=>{let l=a.isFullWidth();return this.isFullWithContainer?!n&&l:n||!l});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"stickyBottomCenter":case"stickyBottomLeft":case"stickyBottomRight":case"stickyBottomFullWidth":return this.rowRenderer.getStickyBottomRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};w([Q("dragService")],Io.prototype,"dragService",2);w([Q("ctrlsService")],Io.prototype,"ctrlsService",2);w([Q("columnModel")],Io.prototype,"columnModel",2);w([Q("resizeObserverService")],Io.prototype,"resizeObserverService",2);w([Q("rowRenderer")],Io.prototype,"rowRenderer",2);w([ke],Io.prototype,"postConstruct",1);var xx=Io,xD=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-sticky-bottom" ref="eStickyBottom" role="presentation">
            <ag-row-container ref="stickyBottomLeftContainer" name="stickyBottomLeft"></ag-row-container>
            <ag-row-container ref="stickyBottomCenterContainer" name="stickyBottomCenter"></ag-row-container>
            <ag-row-container ref="stickyBottomRightContainer" name="stickyBottomRight"></ag-row-container>
            <ag-row-container ref="stickyBottomFullWidthContainer" name="stickyBottomFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,fr=class extends nt{constructor(){super(xD)}init(){let t=(i,s)=>{let r=`${i}px`;s.style.minHeight=r,s.style.height=r},e={setRowAnimationCssOnBodyViewport:(i,s)=>this.setRowAnimationCssOnBodyViewport(i,s),setColumnCount:i=>Xy(this.getGui(),i),setRowCount:i=>Ky(this.getGui(),i),setTopHeight:i=>t(i,this.eTop),setBottomHeight:i=>t(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setStickyBottomHeight:i=>this.eStickyBottom.style.height=i,setStickyBottomBottom:i=>this.eStickyBottom.style.bottom=i,setStickyBottomWidth:i=>this.eStickyBottom.style.width=i,setColumnMovingCss:(i,s)=>this.addOrRemoveCssClass(i,s),updateLayoutClasses:(i,s)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(n=>{n.toggle("ag-layout-auto-height",s.autoHeight),n.toggle("ag-layout-normal",s.normal),n.toggle("ag-layout-print",s.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",s.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",s.normal),this.addOrRemoveCssClass("ag-layout-print",s.print)},setAlwaysVerticalScrollClass:(i,s)=>this.eBodyViewport.classList.toggle(mx,s),registerBodyViewportResizeListener:i=>{let s=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>s())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,s)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(i,s))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new ss),this.ctrl.setComp(e,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&$y(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(t,e){let i=this.eBodyViewport.classList;i.toggle("ag-row-animation",e),i.toggle("ag-row-no-animation",!e)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};w([Q("resizeObserverService")],fr.prototype,"resizeObserverService",2);w([_t("rangeService")],fr.prototype,"rangeService",2);w([Be("eBodyViewport")],fr.prototype,"eBodyViewport",2);w([Be("eStickyTop")],fr.prototype,"eStickyTop",2);w([Be("eStickyBottom")],fr.prototype,"eStickyBottom",2);w([Be("eTop")],fr.prototype,"eTop",2);w([Be("eBottom")],fr.prototype,"eBottom",2);w([Be("gridHeader")],fr.prototype,"headerRootComp",2);w([Be("eBody")],fr.prototype,"eBody",2);w([ke],fr.prototype,"init",1);var La=class extends Ie{postConstruct(){this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){let t=this.ctrlsService.get("center");if(!t||this.columnAnimationService.isActive())return;let e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}setScrollsVisible(t){if(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing){this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing;let i={type:V.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};w([Q("ctrlsService")],La.prototype,"ctrlsService",2);w([Q("columnAnimationService")],La.prototype,"columnAnimationService",2);w([ke],La.prototype,"postConstruct",1);La=w([Ye("scrollVisibleService")],La);var jr=class extends Ie{constructor(){super(...arguments),this.gridInstanceId=jr.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(t){t[jr.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(t){return Hd(this.gos,t.target,uo.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let e=t;for(;e;){let i=e[jr.GRID_DOM_KEY];if(Me(i))return i===this.gridInstanceId;e=e.parentElement}return!1}getCellPositionForEvent(t){let e=this.getRenderedCellForEvent(t);return e?e.getCellPosition():null}getNormalisedPosition(t){let e=this.gos.isDomLayout("normal"),i=t,s,r;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,r=i.clientY):(s=i.x,r=i.y),e){let n=this.ctrlsService.getGridBodyCtrl(),o=n.getScrollFeature().getVScrollPosition(),a=n.getScrollFeature().getHScrollPosition();s+=a.left,r+=o.top}return{x:s,y:r}}};jr.gridInstanceSequence=new Oa;jr.GRID_DOM_KEY="__ag_grid_instance";w([Q("ctrlsService")],jr.prototype,"ctrlsService",2);jr=w([Ye("mouseEventService")],jr);var zi=class extends Ie{constructor(){super(),this.onPageDown=bg(this.onPageDown,100),this.onPageUp=bg(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}handlePageScrollingKey(t,e=!1){let i=t.key,s=t.altKey,r=t.ctrlKey||t.metaKey,n=!!this.rangeService&&t.shiftKey,o=this.mouseEventService.getCellPositionForEvent(t),a=!1;switch(i){case Ce.PAGE_HOME:case Ce.PAGE_END:!r&&!s&&(this.onHomeOrEndKey(i),a=!0);break;case Ce.LEFT:case Ce.RIGHT:case Ce.UP:case Ce.DOWN:if(!o)return!1;r&&!s&&!n&&(this.onCtrlUpDownLeftRight(i,o),a=!0);break;case Ce.PAGE_DOWN:case Ce.PAGE_UP:!r&&!s&&(a=this.handlePageUpDown(i,o,e));break}return a&&t.preventDefault(),a}handlePageUpDown(t,e,i){return i&&(e=this.focusService.getFocusedCell()),e?(t===Ce.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo(t){var e;let{scrollIndex:i,scrollType:s,scrollColumn:r,focusIndex:n,focusColumn:o}=t;Me(r)&&!r.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(r),Me(i)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,s),t.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(t){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),r=this.paginationProxy.getPixelOffset(),n=i.top+s,o=this.paginationProxy.getRowIndexAtPixel(n+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,o):this.navigateToNextPage(t,o)}onPageUp(t){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.paginationProxy.getPixelOffset(),r=i.top,n=this.paginationProxy.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,n,!0):this.navigateToNextPage(t,n,!0)}navigateToNextPage(t,e,i=!1){let s=this.getViewportHeight(),r=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow(),o=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(t.rowIndex),l=i?a?.rowHeight-s-o:s-o,h=a?.rowTop+l,c=this.paginationProxy.getRowIndexAtPixel(h+o);if(c===t.rowIndex){let p=i?-1:1;e=c=t.rowIndex+p}let d;i?(d="bottom",c<r&&(c=r),e<r&&(e=r)):(d="top",c>n&&(c=n),e>n&&(e=n)),this.isRowTallerThanView(c)&&(e=c,d="top"),this.navigateTo({scrollIndex:e,scrollType:d,scrollColumn:null,focusIndex:c,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,i=!1){this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(()=>{let s=this.getNextFocusIndexForAutoHeight(t,i);this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:t.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(t,e=!1){var i;let s=e?-1:1,r=this.getViewportHeight(),n=this.paginationProxy.getPageLastRow(),o=0,a=t.rowIndex;for(;a>=0&&a<=n;){let l=this.paginationProxy.getRow(a);if(l){let h=(i=l.rowHeight)!=null?i:0;if(o+h>r)break;o+=h}a+=s}return Math.max(0,Math.min(a,n))}getViewportHeight(){let{gridBodyCtrl:t,center:e}=this.ctrlsService.getParams(),i=t.getScrollFeature().getVScrollPosition(),s=this.gos.getScrollbarWidth(),r=i.bottom-i.top;return e.isHorizontalScrollShowing()&&(r-=s),r}isRowTallerThanView(t){let e=this.paginationProxy.getRow(t);if(!e)return!1;let i=e.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){let i=this.cellNavigationService.getNextCellToFocus(t,e,!0),{rowIndex:s,column:r}=i;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:r,focusIndex:s,focusColumn:r})}onHomeOrEndKey(t){let e=t===Ce.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),s=e?i[0]:St(i),r=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:s,focusIndex:r,focusColumn:s})}onTabKeyDown(t,e){let i=e.shiftKey,s=this.tabToNextCellCommon(t,i,e);if(s!==!1){s&&e.preventDefault();return}if(i){let{rowIndex:r,rowPinned:n}=t.getRowPosition();(n?r===0:r===this.paginationProxy.getPageFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else t instanceof uo&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&e.preventDefault()}tabToNextCell(t,e){let i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:!!this.tabToNextCellCommon(s,t,e)}tabToNextCellCommon(t,e,i){let s=t.isEditing();if(!s&&t instanceof uo){let o=t.getRowCtrl();o&&(s=o.isEditing())}let r;return s?this.gos.get("editType")==="fullRow"?r=this.moveToNextEditingRow(t,e,i):r=this.moveToNextEditingCell(t,e,i):r=this.moveToNextCellNotEditing(t,e),r===null?r:r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(t,e,i=null){let s=t.getCellPosition();t.getGui().focus(),t.stopEditing();let r=this.findNextCellToFocusOn(s,e,!0);return r===!1?null:r==null?!1:(r.startEditing(null,!0,i),r.focusCell(!1),!0)}moveToNextEditingRow(t,e,i=null){let s=t.getCellPosition(),r=this.findNextCellToFocusOn(s,e,!0);if(r===!1)return null;if(r==null)return!1;let n=r.getCellPosition(),o=this.isCellEditable(s),a=this.isCellEditable(n),l=n&&s.rowIndex===n.rowIndex&&s.rowPinned===n.rowPinned;return o&&t.setFocusOutOnEditor(),l||(t.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(t,e){let i=this.columnModel.getAllDisplayedColumns(),s;t instanceof po?s=zt(Qe({},t.getRowPosition()),{column:e?i[0]:St(i)}):s=t.getCellPosition();let r=this.findNextCellToFocusOn(s,e,!1);if(r===!1)return null;if(r instanceof uo)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),e);return Me(r)}findNextCellToFocusOn(t,e,i){var s;let r=t;for(;;){t!==r&&(t=r),e||(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextTabbedCell(r,e);let n=this.gos.getCallback("tabToNextCell");if(Me(n)){let h=n({backwards:e,editing:i,previousCellPosition:t,nextCellPosition:r||null});if(h===!0||h===null)h===null&&et("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),r=t;else{if(h===!1)return!1;h.floating&&(et("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),h.rowPinned=h.floating),r={rowIndex:h.rowIndex,column:h.column,rowPinned:h.rowPinned}}}if(!r)return null;if(r.rowIndex<0){let l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+r.rowIndex,column:r.column},fromCell:!0}),null}let o=this.gos.get("editType")==="fullRow";if(i&&!o&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);let a=this.getCellByPosition(r);if(!a){let l=this.rowRenderer.getRowByPosition(r);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return(s=this.rangeService)==null||s.setRangeToCell(r),a}}isCellEditable(t){let e=this.lookupRowNodeForCell(t);return e?t.column.isCellEditable(e):!1}getCellByPosition(t){let e=this.rowRenderer.getRowByPosition(t);return e?e.getCellCtrl(t.column):null}lookupRowNodeForCell(t){return t.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):t.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.paginationProxy.getRow(t.rowIndex)}navigateToNextCell(t,e,i,s){let r=i,n=!1;for(;r&&(r===i||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?e===Ce.LEFT&&(r=this.getLastCellOfColSpan(r)):e===Ce.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(e,r),n=rt(r);if(n&&t&&t.key===Ce.UP&&(r={rowIndex:-1,rowPinned:null,column:i.column}),s){let a=this.gos.getCallback("navigateToNextCell");if(Me(a)){let h=a({key:e,previousCellPosition:i,nextCellPosition:r||null,event:t});Me(h)?(h.floating&&(et("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),h.rowPinned=h.floating),r={rowPinned:h.rowPinned,rowIndex:h.rowIndex,column:h.column}):r=null}}if(!r)return;if(r.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+r.rowIndex,column:i.column},event:t||void 0,fromCell:!0});return}let o=this.getNormalisedPosition(r);o?this.focusPosition(o):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(t){this.ensureCellVisible(t);let e=this.getCellByPosition(t);return e?(t=e.getCellPosition(),this.ensureCellVisible(t),t):null}tryToFocusFullWidthRow(t,e=!1){let i=this.columnModel.getAllDisplayedColumns(),s=this.rowRenderer.getRowByPosition(t);if(!s||!s.isFullWidth())return!1;let r=this.focusService.getFocusedCell(),n={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?St(i):i[0])};this.focusPosition(n);let o=r!=null?this.rowPositionUtils.before(n,r):!1,a={type:V.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:n.column,isFullWidthCell:!0,floating:n.rowPinned,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(t){var e;this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell(t)}isValidNavigateCell(t){return!!this.rowPositionUtils.getRowNode(t)}getLastCellOfColSpan(t){let e=this.getCellByPosition(t);if(!e)return t;let i=e.getColSpanningList();return i.length===1?t:{rowIndex:t.rowIndex,column:St(i),rowPinned:t.rowPinned}}ensureCellVisible(t){let e=this.gos.isGroupRowsSticky(),i=this.rowModel.getRow(t.rowIndex);!(e&&i?.sticky)&&rt(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column)}};w([Q("mouseEventService")],zi.prototype,"mouseEventService",2);w([Q("paginationProxy")],zi.prototype,"paginationProxy",2);w([Q("focusService")],zi.prototype,"focusService",2);w([Q("columnModel")],zi.prototype,"columnModel",2);w([Q("rowModel")],zi.prototype,"rowModel",2);w([Q("ctrlsService")],zi.prototype,"ctrlsService",2);w([Q("rowRenderer")],zi.prototype,"rowRenderer",2);w([Q("headerNavigationService")],zi.prototype,"headerNavigationService",2);w([Q("rowPositionUtils")],zi.prototype,"rowPositionUtils",2);w([Q("cellNavigationService")],zi.prototype,"cellNavigationService",2);w([Q("pinnedRowModel")],zi.prototype,"pinnedRowModel",2);w([_t("rangeService")],zi.prototype,"rangeService",2);w([ke],zi.prototype,"postConstruct",1);zi=w([Ye("navigationService")],zi);var Bm=class Sx extends Fo{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),Sx.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),i=this.params,s=r=>{zd(this.gos,r,i.node,i.column,!0)||i.onKeyDown(r)};this.addManagedListener(e,"keydown",s)}};Bm.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";w([ke],Bm.prototype,"postConstruct",1);var SD=Bm,ED=class extends nt{constructor(t,e,i,s,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.rowCtrl=e.getRowCtrl(),this.eRow=s,this.cellCtrl=e;let n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(n);let o=this.getGui();this.forceWrapper=e.isForceWrapper(),this.refreshWrapper(!1);let a=(c,d)=>{d!=null&&d!=""?o.setAttribute(c,d):o.removeAttribute(c)};qt(o,e.getCellAriaRole()),a("col-id",e.getColumnIdSanitised());let l=e.getTabIndex();l!==void 0&&a("tabindex",l.toString());let h={addOrRemoveCssClass:(c,d)=>this.addOrRemoveCssClass(c,d),setUserStyles:c=>xm(o,c),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:c=>this.includeSelection=c,setIncludeRowDrag:c=>this.includeRowDrag=c,setIncludeDndSource:c=>this.includeDndSource=c,setRenderDetails:(c,d,p)=>this.setRenderDetails(c,d,p),setEditDetails:(c,d,p)=>this.setEditDetails(c,d,p),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};e.setComp(h,this.getGui(),this.eCellWrapper,i,r)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(t,e,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),t?!(i||r)&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(e))}setEditDetails(t,e,i){t?this.createCellEditorInstance(t,e,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(t){let e=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=e||this.forceWrapper,s=i&&this.eCellWrapper==null;if(s){let h=document.createElement("div");h.setAttribute("role","presentation"),h.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=h,this.getGui().appendChild(this.eCellWrapper)}let r=!i&&this.eCellWrapper!=null;r&&(hr(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);let n=!t&&i,o=n&&this.eCellValue==null;if(o){let h=document.createElement("span");h.setAttribute("role","presentation"),h.setAttribute("class","ag-cell-value"),this.eCellValue=h,this.eCellWrapper.appendChild(this.eCellValue)}let a=!n&&this.eCellValue!=null;a&&(hr(this.eCellValue),this.eCellValue=void 0);let l=s||r||o||a;return l&&this.removeControls(),t||e&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(t,e,i){let s=this.editorVersion,r=t.newAgStackInstance();if(!r)return;let{params:n}=t;r.then(a=>this.afterCellEditorCreated(s,a,n,e,i)),rt(this.cellEditor)&&n.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(t){let e=this.getParentOfValue();ti(e);let i=t!=null?oi(t,!0):null;i!=null&&(e.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:t}=this.beans;this.cellRenderer=t.destroyBean(this.cellRenderer),hr(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:t}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),hr(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(t){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==t.componentClass)return!1;let e=this.cellRenderer.refresh(t.params);return e===!0||e===void 0}createCellRendererInstance(t){let i=!this.beans.gos.get("suppressAnimationFrame"),s=this.rendererVersion,{componentClass:r}=t,n=()=>{if(this.rendererVersion!==s||!this.isAlive())return;let a=t.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,s,r);a&&a.then(l)};i&&this.firstRender?this.beans.animationFrameService.createTask(n,this.rowNode.rowIndex,"createTasksP2"):n()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(t,e,i){if(!this.isAlive()||t!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=e,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let r=this.getParentOfValue();ti(r),r.appendChild(this.cellRendererGui)}}afterCellEditorCreated(t,e,i,s,r){if(t!==this.editorVersion){this.beans.context.destroyBean(e);return}if(e.isCancelBeforeStart&&e.isCancelBeforeStart()){this.beans.context.destroyBean(e),this.cellCtrl.stopEditing(!0);return}if(!e.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(e);return}this.cellEditor=e,this.cellEditorGui=e.getGui();let a=s||e.isPopup!==void 0&&e.isPopup();a?this.addPopupCellEditor(i,r):this.addInCellEditor(),this.refreshEditStyles(!0,a),e.afterGuiAttached&&e.afterGuiAttached()}refreshEditStyles(t,e){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",t&&!e),this.addOrRemoveCssClass("ag-cell-popup-editing",t&&!!e),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!t||!!e),(i=this.rowCtrl)==null||i.setInlineEditingCss(t)}addInCellEditor(){let t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(t,e){this.beans.gos.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new SD(t));let s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);let r=this.beans.popupService,n=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=e??(i.getPopupPosition?i.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},h=r.positionPopupByComponent.bind(r,l),c=this.beans.localeService.getLocaleTextFunc(),d=r.addPopup({modal:n,eChild:s,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:h,ariaLabel:c("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&dm()&&t.focus({preventScroll:!0}),ti(this.getParentOfValue())}},bD=class extends nt{constructor(t,e,i){super(),this.cellComps={},this.beans=e,this.rowCtrl=t;let s=document.createElement("div");s.setAttribute("comp-id",`${this.getCompId()}`),s.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(s);let r=this.getGui(),n=r.style;this.domOrder=this.rowCtrl.getDomOrder(),qt(r,"row");let o=this.rowCtrl.getTabIndex();o!=null&&r.setAttribute("tabindex",o.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,h)=>this.addOrRemoveCssClass(l,h),setUserStyles:l=>xm(r,l),setTop:l=>n.top=l,setTransform:l=>n.transform=l,setRowIndex:l=>r.setAttribute("row-index",l),setRowId:l=>r.setAttribute("row-id",l),setRowBusinessKey:l=>r.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};t.setComp(a,this.getGui(),i),this.addDestroyFunc(()=>{t.unsetComp(i)})}getInitialStyle(t){let e=this.rowCtrl.getInitialTransform(t);return e?`transform: ${e}`:`top: ${this.rowCtrl.getInitialRowTop(t)}`}showFullWidth(t){let e=s=>{if(this.isAlive()){let r=s.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(s)}else this.beans.context.destroyBean(s)},i=t.newAgStackInstance();i&&i.then(e)}setCellCtrls(t){let e=Object.assign({},this.cellComps);t.forEach(s=>{let r=s.getInstanceId();this.cellComps[r]==null?this.newCellComp(s):e[r]=null});let i=Sn(e).filter(s=>s!=null);this.destroyCells(i),this.ensureDomOrder(t)}ensureDomOrder(t){if(!this.domOrder)return;let e=[];t.forEach(i=>{let s=this.cellComps[i.getInstanceId()];s&&e.push(s.getGui())}),wm(this.getGui(),e)}newCellComp(t){let e=new ED(this.beans,t,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=e,this.getGui().appendChild(e.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let t=Sn(this.cellComps).filter(e=>e!=null);this.destroyCells(t)}setFullWidthRowComp(t){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(t){t.forEach(e=>{if(!e)return;let i=e.getCtrl().getInstanceId();this.cellComps[i]===e&&(e.detach(),e.destroy(),this.cellComps[i]=null)})}refreshFullWidth(t){let{fullWidthCellRenderer:e}=this;if(!e||!e.refresh)return!1;let i=t();return e.refresh(i)}};function _D(){let t=nt.elementGettingCreated.getAttribute("name"),e=xx.getRowContainerCssClasses(t),i;return t==="center"||t==="topCenter"||t==="stickyTopCenter"||t==="bottomCenter"||t==="stickyBottomCenter"?i=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:i=`<div class="${e.container}" ref="eContainer"></div>`,i}var Xa=class extends nt{constructor(){super(_D()),this.rowComps={},this.name=nt.elementGettingCreated.getAttribute("name"),this.type=CD(this.name)}postConstruct(){let t={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new xx(this.name)).setComp(t,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(t){let e=Qe({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let i=s=>{let r=s.getInstanceId(),n=e[r];if(n)this.rowComps[r]=n,delete e[r],this.ensureDomOrder(n.getGui());else{if(!s.getRowNode().displayed)return;let o=new bD(s,this.beans,this.type);this.rowComps[r]=o,this.appendRow(o.getGui())}};t.forEach(i),Sn(e).forEach(s=>{this.eContainer.removeChild(s.getGui()),s.destroy()}),qt(this.eContainer,"rowgroup")}appendRow(t){this.domOrder?cw(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t}ensureDomOrder(t){this.domOrder&&(ym(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)}};w([Q("beans")],Xa.prototype,"beans",2);w([Be("eViewport")],Xa.prototype,"eViewport",2);w([Be("eContainer")],Xa.prototype,"eContainer",2);w([ke],Xa.prototype,"postConstruct",1);w([ts],Xa.prototype,"preDestroy",1);var Hm=class{constructor(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}onDragEnter(t){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let e=t.dragItem.columns;e&&e.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?at.ICON_PINNED:at.ICON_MOVE:null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};w([Q("columnModel")],Hm.prototype,"columnModel",2);w([Q("gridOptionsService")],Hm.prototype,"gos",2);var fo=class{static attemptMoveColumns(t){let{isFromHeader:e,hDirection:i,xPosition:s,fromEnter:r,fakeEvent:n,pinned:o,gos:a,columnModel:l}=t,h=i===0,c=i===1,{allMovingColumns:d}=t;if(e){let A=[];d.forEach(S=>{var M;let B=null,j=S.getParent();for(;j!=null&&j.getDisplayedLeafColumns().length===1;)B=j,j=j.getParent();B!=null?(!!((M=B.getColGroupDef())!=null&&M.marryChildren)?B.getProvidedColumnGroup().getLeafColumns():B.getLeafColumns()).forEach(P=>{A.includes(P)||A.push(P)}):A.includes(S)||A.push(S)}),d=A}let p=d.slice();l.sortColumnsLikeGridColumns(p);let u=this.calculateValidMoves({movingCols:p,draggingRight:c,xPosition:s,pinned:o,gos:a,columnModel:l}),m=this.calculateOldIndex(p,l);if(u.length===0)return;let f=u[0],g=m!==null&&!r;if(e&&(g=m!==null),g&&!n&&(h&&f>=m||c&&f<=m))return;let y=l.getAllDisplayedColumns(),x=[],T=null;for(let A=0;A<u.length;A++){let S=u[A],M=l.getProposedColumnOrder(p,S);if(!l.doesOrderPassRules(M))continue;let B=M.filter(O=>y.includes(O));if(T===null)T=B;else if(!Rr(B,T))break;let j=this.groupFragCount(M);x.push({move:S,fragCount:j})}if(x.length!==0)return x.sort((A,S)=>A.fragCount-S.fragCount),this.moveColumns(d,x[0].move,"uiColumnMoved",!1,l)}static moveColumns(t,e,i,s,r){return r.moveColumns(t,e,i,s),s?null:{columns:t,toIndex:e}}static calculateOldIndex(t,e){let i=e.getAllGridColumns(),s=Ey(t.map(l=>i.indexOf(l))),r=s[0];return St(s)-r!==s.length-1?null:r}static groupFragCount(t){function e(s){let r=[],n=s.getOriginalParent();for(;n!=null;)r.push(n),n=n.getOriginalParent();return r}let i=0;for(let s=0;s<t.length-1;s++){let r=e(t[s]),n=e(t[s+1]);[r,n]=r.length>n.length?[r,n]:[n,r],r.forEach(o=>{n.indexOf(o)===-1&&i++})}return i}static getDisplayedColumns(t,e){switch(e){case"left":return t.getDisplayedLeftColumns();case"right":return t.getDisplayedRightColumns();default:return t.getDisplayedCenterColumns()}}static calculateValidMoves(t){let{movingCols:e,draggingRight:i,xPosition:s,pinned:r,gos:n,columnModel:o}=t;if(n.get("suppressMovableColumns")||e.some(x=>x.getColDef().suppressMovable))return[];let l=this.getDisplayedColumns(o,r),h=o.getAllGridColumns(),c=l.filter(x=>Ls(e,x)),d=l.filter(x=>!Ls(e,x)),p=h.filter(x=>!Ls(e,x)),u=0,m=s;if(i){let x=0;c.forEach(T=>x+=T.getActualWidth()),m-=x}if(m>0){for(let x=0;x<d.length;x++){let T=d[x];if(m-=T.getActualWidth(),m<0)break;u++}i&&u++}let f;if(u>0){let x=d[u-1];f=p.indexOf(x)+1}else f=p.indexOf(d[0]),f===-1&&(f=0);let g=[f],y=(x,T)=>x-T;if(i){let x=f+1,T=h.length-1;for(;x<=T;)g.push(x),x++;g.sort(y)}else{let x=f,T=h.length-1,A=h[x];for(;x<=T&&l.indexOf(A)<0;)x++,g.push(x),A=h[x];x=f-1;let S=0;for(;x>=S;)g.push(x),x--;g.sort(y).reverse()}return g}static normaliseX(t,e,i,s,r){let n=r.getHeaderRowContainerCtrl(e).getViewport();return i&&(t-=n.getBoundingClientRect().left),s.get("enableRtl")&&(t=n.clientWidth-t),e==null&&(t+=r.get("center").getCenterViewportScrollLeft()),t}},Ya=class{constructor(t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.isCenterContainer=!Me(t)}init(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}getIconName(){return this.pinned?at.ICON_PINNED:at.ICON_MOVE}onDragEnter(t){let e=t.dragItem.columns;if(t.dragSource.type===0)this.setColumnsVisible(e,!0,"uiColumnDragged");else{let s=t.dragItem.visibleState,r=(e||[]).filter(n=>s[n.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(t,e,i){if(t){let s=t.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColumnsVisible(s,e,i)}}setColumnsPinned(t,e,i){if(t){let s=t.filter(r=>!r.getColDef().lockPinned);this.columnModel.setColumnsPinned(s,e,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(t){if(this.isCenterContainer){let e=this.ctrlsService.get("center"),i=e.getCenterViewportScrollLeft(),s=i+e.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=t<i+50,this.needToMoveLeft=t>s-50):(this.needToMoveLeft=t<i+50,this.needToMoveRight=t>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(t=this.lastDraggingEvent,e=!1,i=!1,s=!1){var r;if(s){if(this.lastMovedInfo){let{columns:c,toIndex:d}=this.lastMovedInfo;fo.moveColumns(c,d,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=t,rt(t.hDirection))return;let n=fo.normaliseX(t.x,this.pinned,!1,this.gos,this.ctrlsService);e||this.checkCenterForScrolling(n);let o=this.normaliseDirection(t.hDirection),a=t.dragSource.type,l=((r=t.dragSource.getDragItem().columns)==null?void 0:r.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0))||[],h=fo.attemptMoveColumns({allMovingColumns:l,isFromHeader:a===1,hDirection:o,xPosition:n,pinned:this.pinned,fromEnter:e,fakeEvent:i,gos:this.gos,columnModel:this.columnModel});h&&(this.lastMovedInfo=h)}normaliseDirection(t){if(this.gos.get("enableRtl"))switch(t){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${t}`)}else return t}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(at.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(at.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(at.ICON_MOVE))}moveInterval(){let t;this.intervalCount++,t=10+this.intervalCount*5,t>100&&(t=100);let e=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=i.scrollHorizontally(-t):this.needToMoveRight&&(e=i.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let r=this.lastDraggingEvent.dragItem.columns.filter(n=>!n.getColDef().lockPinned);if(r.length>0&&(this.dragAndDropService.setGhostIcon(at.ICON_PINNED),this.failedMoveAttempts>7)){let n=this.needToMoveLeft?"left":"right";this.setColumnsPinned(r,n,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};w([Q("columnModel")],Ya.prototype,"columnModel",2);w([Q("dragAndDropService")],Ya.prototype,"dragAndDropService",2);w([Q("gridOptionsService")],Ya.prototype,"gos",2);w([Q("ctrlsService")],Ya.prototype,"ctrlsService",2);w([ke],Ya.prototype,"init",1);var qa=class extends Ie{constructor(t,e){super(),this.pinned=t,this.eContainer=e}postConstruct(){this.ctrlsService.whenReady(t=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.left.getContainerElement()],[t.bottomLeft.getContainerElement()],[t.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.right.getContainerElement()],[t.bottomRight.getContainerElement()],[t.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.center.getViewportElement()],[t.bottomCenter.getViewportElement()],[t.topCenter.getViewportElement()]];break}})}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new Ya(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new Hm(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.columnModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}};w([Q("dragAndDropService")],qa.prototype,"dragAndDropService",2);w([Q("columnModel")],qa.prototype,"columnModel",2);w([Q("ctrlsService")],qa.prototype,"ctrlsService",2);w([ke],qa.prototype,"postConstruct",1);w([ke],qa.prototype,"init",1);var Za=class Ex extends Nm{constructor(e){super(Ex.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((n,o)=>{o!=null&&o!=""?e.setAttribute(n,o):e.removeAttribute(n)})("col-id",this.column.getColId());let s={setWidth:n=>e.style.width=n,addOrRemoveCssClass:(n,o)=>this.addOrRemoveCssClass(n,o),setAriaSort:n=>n?qy(e,n):Zy(e),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(s,this.getGui(),this.eResize,this.eHeaderCompWrapper);let r=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",r)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let i=this.headerCompVersion;e.newAgStackInstance().then(s=>this.afterCompCreated(i,s))}afterCompCreated(e,i){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(i);return}this.destroyHeaderComp(),this.headerComp=i,this.headerCompGui=i.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};Za.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;w([Be("eResize")],Za.prototype,"eResize",2);w([Be("eHeaderCompWrapper")],Za.prototype,"eHeaderCompWrapper",2);w([ke],Za.prototype,"postConstruct",1);w([ts],Za.prototype,"destroyHeaderComp",1);var TD=Za,Au=class bx extends Nm{constructor(e){super(bx.TEMPLATE,e)}postConstruct(){let e=this.getGui(),i=(r,n)=>n!=null?e.setAttribute(r,n):e.removeAttribute(r);e.setAttribute("col-id",this.ctrl.getColId());let s={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setResizableDisplayed:r=>vt(this.eResize,r),setWidth:r=>e.style.width=r,setAriaExpanded:r=>i("aria-expanded",r),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(s,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(i=>this.afterHeaderCompCreated(i))}afterHeaderCompCreated(e){let i=()=>this.destroyBean(e);if(!this.isAlive()){i();return}let s=this.getGui(),r=e.getGui();s.appendChild(r),this.addDestroyFunc(i),this.headerGroupComp=e,this.ctrl.setDragSource(s)}};Au.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;w([Be("eResize")],Au.prototype,"eResize",2);w([ke],Au.prototype,"postConstruct",1);var AD=Au;var Wm=class extends nt{constructor(t){super(),this.headerComps={},this.ctrl=t,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){nm(this.getGui(),this.ctrl.getAriaRowIndex());let t={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,i)=>this.setHeaderCtrls(e,i),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(t)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(t,e){if(!this.isAlive())return;let i=this.headerComps;if(this.headerComps={},t.forEach(s=>{let r=s.getInstanceId(),n=i[r];delete i[r],n==null&&(n=this.createHeaderComp(s),this.getGui().appendChild(n.getGui())),this.headerComps[r]=n}),Ui(i,(s,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),e){let s=Sn(this.headerComps);s.sort((n,o)=>{let a=n.getCtrl().getColumnGroupChild().getLeft(),l=o.getCtrl().getColumnGroupChild().getLeft();return a-l});let r=s.map(n=>n.getGui());wm(this.getGui(),r)}}createHeaderComp(t){let e;switch(this.ctrl.getType()){case"group":e=new AD(t);break;case"filter":e=new UR(t);break;default:e=new TD(t);break}return this.createBean(e),e.setParentComponent(this),e}};w([ke],Wm.prototype,"init",1);w([ts],Wm.prototype,"destroyHeaderCtrls",1);var RD=0,Jr=class _x extends Ie{constructor(e,i,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=s,this.beans=i,this.instanceId=e.getUniqueId()+"-"+RD++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){let{headerRowIndex:i,column:s}=this.focusService.getFocusedHeader();return ww(this.gos,e,i,s)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){let{comp:e,column:i,beans:s}=this;bu.refreshFirstAndLastStyles(e,i,s.columnModel)}refreshAriaColIndex(){let{beans:e,column:i}=this,s=e.columnModel.getAriaColumnIndex(i);om(this.eGui,s)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var i;let s=this.gos.getActiveDomElement(),r=e.key===Ce.LEFT||e.key===Ce.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),s!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||r)&&(e.preventDefault(),e.stopImmediatePropagation()),!r))return;let n=e.key===Ce.LEFT!==this.gos.get("enableRtl"),o=Zw[n?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(i=this.resizeFeature)==null||i.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(e){let i=this.getResizeDiff(e);if(this.column.getPinned()){let r=this.pinnedWidthService.getPinnedLeftWidth(),n=this.pinnedWidthService.getPinnedRightWidth(),o=Ao(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+n+i>o)if(o>r+n)i=o-r-n;else return 0}return i}getResizeDiff(e){let i=e.key===Ce.LEFT!==this.gos.get("enableRtl"),s=this.column.getPinned(),r=this.gos.get("enableRtl");return s&&r!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){let i=this.getWrapperHasFocus();switch(e.key){case Ce.PAGE_DOWN:case Ce.PAGE_UP:case Ce.PAGE_HOME:case Ce.PAGE_END:i&&e.preventDefault()}}addDomData(){let e=_x.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,i,s){let r=e??i;this.gos.get("preventDefaultOnContextMenu")&&r.preventDefault();let n=s instanceof Pt?s:void 0;this.menuService.isHeaderContextMenuEnabled(n)&&this.menuService.showHeaderContextMenu(n,e,i),this.dispatchColumnMouseEvent(V.EVENT_COLUMN_HEADER_CONTEXT_MENU,s)}dispatchColumnMouseEvent(e,i){let s={type:e,column:i};this.eventService.dispatchEvent(s)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};Jr.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";w([Q("pinnedWidthService")],Jr.prototype,"pinnedWidthService",2);w([Q("focusService")],Jr.prototype,"focusService",2);w([Q("userComponentFactory")],Jr.prototype,"userComponentFactory",2);w([Q("ctrlsService")],Jr.prototype,"ctrlsService",2);w([Q("dragAndDropService")],Jr.prototype,"dragAndDropService",2);w([Q("menuService")],Jr.prototype,"menuService",2);w([ke],Jr.prototype,"postConstruct",1);var Ru=Jr,Du=class extends Ie{constructor(t,e,i,s){super(),this.columnOrGroup=t,this.eCell=e,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(t){this.colsSpanning=t,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?St(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,Pt.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){let t=this.beans.gos.get("suppressColumnMoveAnimation"),e=Me(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&e&&!t?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let t=this.getColumnOrGroup(),e=t.getLeft(),i=t.getOldLeft(),s=this.modifyLeftForPrintLayout(t,i),r=this.modifyLeftForPrintLayout(t,e);this.setLeft(s),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){let t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){if(!this.beans.gos.isDomLayout("print")||t.getPinned()==="left")return e;let s=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(t.getPinned()==="right"){let r=this.beans.columnModel.getBodyContainerWidth();return s+r+e}return s+e}setLeft(t){Me(t)&&(this.eCell.style.left=`${t}px`);let e;if(this.columnOrGroup instanceof Pt)e=this.columnOrGroup;else{let s=this.columnOrGroup.getLeafColumns();if(!s.length)return;s.length>1&&Yy(this.ariaEl,s.length),e=s[0]}}};w([ke],Du.prototype,"postConstruct",1);var tc=class extends Ie{constructor(t,e){super(),this.columns=t,this.element=e}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};w([Q("columnHoverService")],tc.prototype,"columnHoverService",2);w([ke],tc.prototype,"postConstruct",1);var DD=class extends Ru{constructor(t,e,i){super(t,e,i),this.iconCreated=!1,this.column=t}setComp(t,e,i,s){this.comp=t,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(e),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Pt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){let t=this.column.getColDef(),e=!!t.filter,i=!!t.floatingFilter;this.active=e&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let t=Kt("filter",this.gos,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}setupFocus(){this.createManagedBean(new Dn(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let t=this.localeService.getLocaleTextFunc();ks(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(t){if(this.gos.getActiveDomElement()===this.eGui)return;let s=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),t.preventDefault(),s.focus();return}let r=this.findNextColumnWithFloatingFilter(t.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:t})&&t.preventDefault()}findNextColumnWithFloatingFilter(t){let e=this.beans.columnModel,i=this.column;do if(i=t?e.getDisplayedColBefore(i):e.getDisplayedColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();switch(t.key){case Ce.UP:case Ce.DOWN:e||t.preventDefault();case Ce.LEFT:case Ce.RIGHT:if(e)return;t.stopPropagation();case Ce.ENTER:e&&this.focusService.focusInto(this.eGui)&&t.preventDefault();break;case Ce.ESCAPE:e||this.eGui.focus()}}onFocusIn(t){if(this.eGui.contains(t.relatedTarget))return;let i=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),s=!!t.relatedTarget&&ho(t.relatedTarget,"ag-floating-filter");if(i&&s&&t.target===this.eGui){let n=this.lastFocusEvent,o=!!(n&&n.key===Ce.TAB);if(n&&o){let a=n.shiftKey;this.focusService.focusInto(this.eGui,a)}}let r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(){this.createManagedBean(new tc([this.column],this.eGui));let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,V.EVENT_COLUMN_HOVER_CHANGED,t),t()}setupLeft(){let t=new Du(this.column,this.eGui,this.beans);this.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let t=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setCompDetails(t)}showParentFilter(){let t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;let{filterManager:t}=this.beans,e=i=>{if(i?.source==="filterDestroyed"&&this.context.isDestroyed())return;let s=this.comp.getFloatingFilterComp();s&&s.then(r=>{var n;if(r){let o=t.getCurrentFloatingFilterParentModel(this.column);r.onParentModelChanged(o,i?this.gos.addGridCommonParams({columns:(n=i.columns)!=null?n:[],type:V.EVENT_FILTER_CHANGED,source:i.source==="api"?"api":"columnFilter"}):null)}})};this.destroySyncListener=this.addManagedListener(this.column,Pt.EVENT_FILTER_CHANGED,e),t.isFilterActive(this.column)&&e(null)}setupWidth(){let t=()=>{let e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};this.addManagedListener(this.column,Pt.EVENT_WIDTH_CHANGED,t),t()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Pt.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let t=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var t,e;let i=this.active;this.setupActive();let s=!i&&this.active;i&&!this.active&&((t=this.destroySyncListener)==null||t.call(this),(e=this.destroyFilterChangedListener)==null||e.call(this));let r=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!r?this.updateCompDetails(r,s):n.then(o=>{var a;!o||this.beans.filterManager.areFilterCompsDifferent((a=this.userCompDetails)!=null?a:null,r)?this.updateCompDetails(r,s):this.updateFloatingFilterParams(r)})}updateCompDetails(t,e){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(t){var e;if(!t)return;let i=t.params;(e=this.comp.getFloatingFilterComp())==null||e.then(s=>{let r=!1;s?.refresh&&typeof s.refresh=="function"&&s.refresh(i)!==null&&(r=!0),!r&&s?.onParamsUpdated&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(i)!==null&&et("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},Qa=class extends Ie{constructor(t,e,i,s,r){super(),this.pinned=t,this.column=e,this.eResize=i,this.comp=s,this.ctrl=r}postConstruct(){let t=[],e,i,s=()=>{if(vt(this.eResize,e),!e)return;let o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(t.push(o),i){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let h=new _i(this.eResize);h.addEventListener(_i.EVENT_DOUBLE_TAP,l),t.push(()=>{this.eResize.removeEventListener("dblclick",l),h.removeEventListener(_i.EVENT_DOUBLE_TAP,l),h.destroy()})}},r=()=>{t.forEach(o=>o()),t.length=0},n=()=>{let o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==e||a!==i)&&(e=o,i=a,r(),s())};n(),this.addDestroyFunc(r),this.ctrl.addRefreshFunction(n)}onResizing(t,e){let{column:i,lastResizeAmount:s,resizeStartWidth:r}=this,n=this.normaliseResizeAmount(e),o=r+n,a=[{key:i,newWidth:o}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),h=this.pinnedWidthService.getPinnedRightWidth(),c=Ao(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+h+(n-s)>c)return}this.lastResizeAmount=n,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t,i=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?i&&(e*=-1):s&&(e*=-1),e}};w([Q("horizontalResizeService")],Qa.prototype,"horizontalResizeService",2);w([Q("pinnedWidthService")],Qa.prototype,"pinnedWidthService",2);w([Q("ctrlsService")],Qa.prototype,"ctrlsService",2);w([Q("columnModel")],Qa.prototype,"columnModel",2);w([ke],Qa.prototype,"postConstruct",1);var Um=class extends Ie{constructor(t){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=t}onSpaceKeyDown(t){let e=this.cbSelectAll;e.isDisplayed()&&!e.getGui().contains(this.gos.getActiveDomElement())&&(t.preventDefault(),e.setValue(!e.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(t){this.headerCellCtrl=t,this.cbSelectAll=this.createManagedBean(new vu),this.cbSelectAll.addCssClass("ag-header-select-all"),qt(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,V.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),$h(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let t=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(t);let e=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let t=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),s=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${s} (${i})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(t){return this.gos.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${t} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(t){let e=this.rowModel.getType();return e==="clientSide"||e==="serverSide"?!0:(console.warn(`AG Grid: ${t} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${e}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let t=this.cbSelectAll.getValue(),e=this.isFilteredOnly(),i=this.isCurrentPageOnly(),s="uiSelectAll";i?s="uiSelectAllCurrentPage":e&&(s="uiSelectAllFiltered");let r={source:s,justFiltered:e,justCurrentPage:i};t?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let t=this.column.getColDef().headerCheckboxSelection;if(typeof t=="function"){let e=t,i=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});t=e(i)}return t?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};w([Q("rowModel")],Um.prototype,"rowModel",2);w([Q("selectionService")],Um.prototype,"selectionService",2);var FD=class extends Ru{constructor(t,e,i){super(t,e,i),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=t}setComp(t,e,i,s){this.comp=t,this.setGui(e),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(s),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new Qa(this.getPinned(),this.column,i,t,this)),this.createManagedBean(new tc([this.column],e)),this.createManagedBean(new Du(this.column,e,this.beans)),this.createManagedBean(new Dn(e,{shouldStopEventPropagation:r=>this.shouldStopEventPropagation(r),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,Pt.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(t,e){var i,s;if(!this.column.isResizable())return;let r=this.column.getActualWidth(),n=(i=this.column.getMinWidth())!=null?i:0,o=(s=this.column.getMaxWidth())!=null?s:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(r+t,n),o);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],e,!0,"uiColumnResized")}moveHeader(t){let{eGui:e,column:i,gos:s,ctrlsService:r}=this,n=this.getPinned(),o=e.getBoundingClientRect().left,a=i.getActualWidth(),l=s.get("enableRtl"),h=t===0!==l,c=fo.normaliseX(h?o-20:o+a+20,n,!0,s,r);fo.attemptMoveColumns({allMovingColumns:[i],isFromHeader:!0,hDirection:t,xPosition:c,pinned:n,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:this.beans.columnModel}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")}setupUserComp(){let t=this.lookupUserCompDetails();this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)}lookupUserCompDetails(){let t=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,t)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{this.beans.sortController.setSortForColumn(this.column,e,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,i)=>{this.setupTooltip(e,i)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new Um(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t),t.key===Ce.SPACE&&this.selectAllFeature.onSpaceKeyDown(t),t.key===Ce.ENTER&&this.onEnterKeyDown(t),t.key===Ce.DOWN&&t.altKey&&this.showMenuOnKeyPress(t,!1)}onEnterKeyDown(t){if(t.ctrlKey||t.metaKey)this.showMenuOnKeyPress(t,!0);else if(this.sortable){let e=t.shiftKey;this.beans.sortController.progressSort(this.column,e,"uiColumnSorted")}}showMenuOnKeyPress(t,e){let i=this.comp.getUserCompInstance();!i||!(i instanceof Lg)||i.onMenuKeyboardShortcut(e)&&t.preventDefault()}onFocusIn(t){if(!this.getGui().contains(t.relatedTarget)){let e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui,r=this.column.getColDef();!e&&i&&!r.headerComponent&&(e=()=>{let a=s.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});let n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:e},o=this.createManagedBean(new qr(n));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){let t=()=>{let e=this.column.getColDef(),i=bu.getHeaderClassesFromColDef(e,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(r=>{s.has(r)?s.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),s.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.refreshFunctions.push(t),t()}setDragSource(t){if(this.dragSourceElement=t,this.removeDragSource(),!t||!this.draggable)return;let{column:e,beans:i,displayName:s,dragAndDropService:r,gos:n}=this,{columnModel:o}=i,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>a?at.ICON_HIDE:at.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(e),dragItemName:s,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),e.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>e.setMoving(!1,"uiColumnMoved"),onGridEnter:h=>{var c;if(a){let d=((c=h?.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];o.setColumnsVisible(d,!0,"uiColumnMoved")}},onGridExit:h=>{var c;if(a){let d=((c=h?.columns)==null?void 0:c.filter(p=>!p.getColDef().lockVisible))||[];o.setColumnsVisible(d,!1,"uiColumnMoved")}}};r.addDragSource(l,!0)}createDragItem(t){let e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(t){this.refreshFunctions.push(t)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(t=>t())}refreshHeaderComp(){let t=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(t){let e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(t)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let t=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let t=()=>{let e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};this.addManagedListener(this.column,Pt.EVENT_WIDTH_CHANGED,t),t()}setupMovingCss(){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,Pt.EVENT_MOVING_CHANGED,t),t()}setupMenuClass(){let t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,Pt.EVENT_MENU_VISIBLE_CHANGED,t),t()}setupSortableClass(){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.addRefreshFunction(t),this.addManagedListener(this.eventService,Pt.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){let t=()=>{let e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListener(this.column,Pt.EVENT_FILTER_ACTIVE_CHANGED,t),t()}setupWrapTextClass(){let t=()=>{let e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};t(),this.addRefreshFunction(t)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:t,column:e,comp:i,beans:s}=this;if(!e.isSpanHeaderHeight()){t.style.removeProperty("top"),t.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:r,isSpanningTotal:n}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);let{columnModel:o}=s,a=o.getColumnHeaderRowHeight();if(r===0){i.addOrRemoveCssClass("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",`${a}px`);return}i.addOrRemoveCssClass("ag-header-span-total",n);let h=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),c=r*h;t.style.setProperty("top",`${-c}px`),t.style.setProperty("height",`${a+c}px`)}setupAutoHeight(t){let{columnModel:e,resizeObserverService:i}=this.beans,s=h=>{if(!this.isAlive())return;let{paddingTop:c,paddingBottom:d,borderBottomWidth:p,borderTopWidth:u}=Rn(this.getGui()),m=c+d+p+u,g=t.offsetHeight+m;if(h<5){let y=this.beans.gos.getDocument(),x=!y||!y.contains(t),T=g==0;if(x||T){window.setTimeout(()=>s(h+1),0);return}}e.setColumnHeaderHeight(this.column,g)},r=!1,n,o=()=>{let h=this.column.isAutoHeaderHeight();h&&!r&&a(),!h&&r&&l()},a=()=>{r=!0,s(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),n=i.observeResize(t,()=>s(0))},l=()=>{r=!1,n&&n(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),n=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListener(this.column,Pt.EVENT_WIDTH_CHANGED,()=>r&&s(0)),this.addManagedListener(this.eventService,Pt.EVENT_SORT_CHANGED,()=>{r&&window.setTimeout(()=>s(0))}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){let t=this.localeService.getLocaleTextFunc(),e=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Vy(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let t=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(t,e){e!=null?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;let t=Array.from(this.ariaDescriptionProperties.keys()).sort((e,i)=>e==="filter"?-1:i.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,V.EVENT_COLUMN_HOVER_CHANGED,t),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let t=s=>this.handleMouseOverChange(s.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(V.EVENT_COLUMN_HEADER_CLICKED,this.column),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(t){this.setActiveHeader(t);let i={type:t?V.EVENT_COLUMN_HEADER_MOUSE_OVER:V.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(i)}setActiveHeader(t){this.comp.addOrRemoveCssClass("ag-header-active",t)}getAnchorElementForMenu(t){let e=this.comp.getUserCompInstance();return e instanceof Lg?e.getAnchorElementForMenu(t):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},ic=class extends Ie{constructor(t,e,i,s){super(),this.eResize=e,this.comp=t,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let t=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(t),!this.gos.get("suppressAutoSize")){let e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let i=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||i.push(r.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(t){let e=this.getInitialValues(t);this.storeLocalValues(e),this.toggleColumnResizing(!0)}onResizing(t,e,i="uiColumnResized"){let s=this.normaliseDragChange(e),r=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(r,i,t)}getInitialValues(t){let e=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(e),s=this.getSizeRatiosOfColumns(e,i),r={columnsToResize:e,resizeStartWidth:i,resizeRatios:s},n=null;if(t&&(n=this.columnModel.getDisplayedGroupAtDirection(this.columnGroup,"After")),n){let o=n.getDisplayedLeafColumns(),a=r.groupAfterColumns=o.filter(h=>h.isResizable()),l=r.groupAfterStartWidth=this.getInitialSizeOfColumns(a);r.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(t){let{columnsToResize:e,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:r,groupAfterStartWidth:n,groupAfterRatios:o}=t;this.resizeCols=e,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=n,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(t){let e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();e>i.resizeStartWidth&&this.resizeColumns(i,e,t,!0)}resizeColumnsFromLocalValues(t,e,i=!0){var s,r,n;if(!this.resizeCols||!this.resizeRatios)return;let o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(s=this.resizeTakeFromCols)!=null?s:void 0,groupAfterStartWidth:(r=this.resizeTakeFromStartWidth)!=null?r:void 0,groupAfterRatios:(n=this.resizeTakeFromRatios)!=null?n:void 0};this.resizeColumns(o,t,e,i)}resizeColumns(t,e,i,s=!0){let{columnsToResize:r,resizeStartWidth:n,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:h}=t,c=[];if(c.push({columns:r,ratios:o,width:e}),a){let d=e-n;c.push({columns:a,ratios:h,width:l-d})}this.columnModel.resizeColumnSets({resizeSets:c,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}getInitialSizeOfColumns(t){return t.reduce((e,i)=>e+i.getActualWidth(),0)}getSizeRatiosOfColumns(t,e){return t.map(i=>i.getActualWidth()/e)}normaliseDragChange(t){let e=t;return this.gos.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.clearLocalValues()}};w([Q("horizontalResizeService")],ic.prototype,"horizontalResizeService",2);w([Q("autoWidthCalculator")],ic.prototype,"autoWidthCalculator",2);w([Q("columnModel")],ic.prototype,"columnModel",2);w([ke],ic.prototype,"postConstruct",1);var Tx=class extends Ie{constructor(t,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=t}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,yi.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(e=>{e.addEventListener("widthChanged",t),e.addEventListener("visibleChanged",t),this.removeChildListenersFuncs.push(()=>{e.removeEventListener("widthChanged",t),e.removeEventListener("visibleChanged",t)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(t=>t()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`),this.comp.addOrRemoveCssClass("ag-hidden",t===0)}};w([ke],Tx.prototype,"postConstruct",1);var PD=class extends Ru{constructor(t,e,i){super(t,e,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let s=this.getGui();this.setDragSource(s)}},this.column=t}setComp(t,e,i){this.comp=t,this.setGui(e),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();let s=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new tc(r,e)),this.createManagedBean(new Du(this.column,e,this.beans)),this.createManagedBean(new Tx(t,this.column)),this.resizeFeature=this.createManagedBean(new ic(t,i,s,this.column)),this.createManagedBean(new Dn(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(V.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(t,e){if(!this.resizeFeature)return;let i=this.resizeFeature.getInitialValues(e);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+t,"uiColumnResized",!0)}moveHeader(t){let{beans:e,eGui:i,column:s,gos:r,ctrlsService:n}=this,o=r.get("enableRtl"),a=t===0,l=this.getPinned(),h=i.getBoundingClientRect(),c=h.left,d=h.width,p=fo.normaliseX(a!==o?c-20:c+d+20,l,!0,r,n),u=s.getGroupId(),m=this.focusService.getFocusedHeader();fo.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:t,xPosition:p,pinned:l,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:e.columnModel});let f=s.getDisplayedLeafColumns(),g=a?f[0]:St(f);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(g,"auto"),!this.isAlive()&&m&&this.restoreFocus(u,s,m)}restoreFocus(t,e,i){let s=e.getLeafColumns();if(!s.length)return;let r=s[0].getParent();if(!r)return;let n=this.findGroupWidthId(r,t);n&&this.focusService.focusHeaderPosition({headerPosition:zt(Qe({},i),{column:n})})}findGroupWidthId(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}return null}resizeLeafColumnsToFit(t){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(t)}setupUserComp(){let t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,s)=>{this.setupTooltip(i,s)}}),e=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(e)}addHeaderMouseListeners(){let t=s=>this.handleMouseOverChange(s.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(V.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(t){let i={type:t?V.EVENT_COLUMN_HEADER_MOUSE_OVER:V.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(i)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.column.getColGroupDef(),s=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!e&&s&&!i?.headerGroupComponent&&(e=()=>{let o=r.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});let n={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(i&&i.headerTooltip),shouldDisplayTooltip:e};i&&(n.getColDef=()=>i),this.createBean(new qr(n))}setupExpandable(){let t=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(t,ni.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(t,ni.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){let t=this.column;this.expandable=t.isExpandable();let e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let t=this.column.getColGroupDef(),e=bu.getHeaderClassesFromColDef(t,this.gos,null,this.column);this.column.isPadding()?(e.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&e.push("ag-header-span-height")):e.push("ag-header-group-cell-with-group"),e.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){let e=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach(s=>{this.addManagedListener(s,Pt.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(t){if(!this.eGui.contains(t.relatedTarget)){let e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();if(!(!this.expandable||!e)&&t.key===Ce.ENTER){let i=this.column,s=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(t){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!t))return;let{beans:e,column:i,displayName:s,gos:r,dragAndDropService:n}=this,{columnModel:o}=e,a=i.getProvidedColumnGroup().getLeafColumns(),l=!r.get("suppressDragLeaveHidesColumns"),h=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>l?at.ICON_HIDE:at.ICON_NOT_ALLOWED,dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),a.forEach(c=>c.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(c=>c.setMoving(!1,"uiColumnDragged")),onGridEnter:c=>{var d;if(l){let p=((d=c?.columns)==null?void 0:d.filter(u=>!u.getColDef().lockVisible))||[];o.setColumnsVisible(p,!0,"uiColumnMoved")}},onGridExit:c=>{var d;if(l){let p=((d=c?.columns)==null?void 0:d.filter(u=>!u.getColDef().lockVisible))||[];o.setColumnsVisible(p,!1,"uiColumnMoved")}}};n.addDragSource(h,!0)}getDragItemForGroup(t){let e=t.getProvidedColumnGroup().getLeafColumns(),i={};e.forEach(r=>i[r.getId()]=r.isVisible());let s=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(r=>{e.indexOf(r)>=0&&(s.push(r),ps(e,r))}),e.forEach(r=>s.push(r)),{columns:s,visibleState:i}}isSuppressMoving(){let t=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(t=!0)}),t||this.gos.get("suppressMovableColumns")}},MD=0,mh=class extends Ie{constructor(t,e,i){super(),this.instanceId=MD++,this.rowIndex=t,this.pinned=e,this.type=i;let s=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(t,e=!0){this.comp=t,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,V.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_VIRTUAL_COLUMNS_CHANGED,t=>this.onVirtualColumnsChanged(t.afterScroll)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(t){if(this.headerCellCtrls)return lo(this.headerCellCtrls).find(e=>e.getColumnGroupChild()===t)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){let{columnModel:t}=this.beans;return this.isPrintLayout?this.pinned!=null?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){let{columnModel:t,filterManager:e}=this.beans,i=t.getHeaderRowCount(),s=[],r=0;e.hasFloatingFilters()&&(i++,r=1);let n=t.getColumnGroupHeaderRowHeight(),o=t.getColumnHeaderRowHeight(),a=1+r,l=i-a;for(let d=0;d<l;d++)s.push(n);s.push(o);for(let d=0;d<r;d++)s.push(t.getFloatingFiltersHeight());let h=0;for(let d=0;d<this.rowIndex;d++)h+=s[d];let c=s[this.rowIndex];return{topOffset:h,rowHeight:c}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(t=!1){let e=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,i,t)}getHeaderCtrls(){let t=this.headerCellCtrls;this.headerCellCtrls=new Map;let e=this.getColumnsInViewport();for(let r of e)this.recycleAndCreateHeaderCtrls(r,t);let i=r=>{let{focusService:n,columnModel:o}=this.beans;return n.isHeaderWrapperFocused(r)?o.isDisplayed(r.getColumnGroupChild()):!1};if(t)for(let[r,n]of t)i(n)?this.headerCellCtrls.set(r,n):this.destroyBean(n);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(t,e){if(!this.headerCellCtrls||t.isEmptyGroup())return;let i=t.getUniqueId(),s;if(e&&(s=e.get(i),e.delete(i)),s&&s.getColumnGroupChild()!=t&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":s=this.createBean(new DD(t,this.beans,this));break;case"group":s=this.createBean(new PD(t,this.beans,this));break;default:s=this.createBean(new FD(t,this.beans,this));break}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let t=[],e=this.getActualDepth(),{columnModel:i}=this.beans;return["left",null,"right"].forEach(s=>{let r=i.getVirtualHeaderGroupRow(s,e);t=t.concat(r)}),t}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(t,e){if(!this.headerCellCtrls)return!1;let s=Array.from(this.headerCellCtrls.values()).find(r=>r.getColumnGroupChild()==t);return s?s.focus(e):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}};w([Q("beans")],mh.prototype,"beans",2);w([ke],mh.prototype,"postConstruct",1);var Oo=class extends Ie{constructor(t){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=t}setComp(t,e){this.comp=t,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(t){let e=new qa(this.pinned,t);this.createManagedBean(e)}refresh(t=!1){let e=new Oa,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let h=this.createBean(new mh(e.next(),this.pinned,"group"));this.groupsRowCtrls.push(h)}},r=()=>{let a=e.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!t||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new mh(a,this.pinned,"column")))},n=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=e.next();if(this.filtersRowCtrl){let h=this.filtersRowCtrl.getRowIndex()!==l;(!t||h)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new mh(l,this.pinned,"filter")))};s(),r(),n();let o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(t){t==null||t.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:t})}getAllCtrls(){let t=[...this.groupsRowCtrls];return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let t=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Ka(t=>this.comp.setCenterWidth(`${t}px`),!0))}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}setupPinnedWidth(){if(this.pinned==null)return;let t=this.pinned==="left",e=this.pinned==="right";this.hidden=!0;let i=()=>{let s=t?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;let r=s==0,n=this.hidden!==r,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),h=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&t||!o&&e)?s+a:s;this.comp.setPinnedContainerWidth(`${h}px`),this.comp.setDisplayed(!r),n&&(this.hidden=r,this.refresh())};this.addManagedListener(this.eventService,V.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,V.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,V.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(t){if(t instanceof Pt)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(t):void 0;if(this.groupsRowCtrls.length!==0)for(let e=0;e<this.groupsRowCtrls.length;e++){let i=this.groupsRowCtrls[e].getHeaderCellCtrl(t);if(i)return i}}getHtmlElementForColumnHeader(t){let e=this.getHeaderCtrlForColumn(t);return e?e.getGui():null}getRowType(t){let i=this.getAllCtrls()[t];return i?i.getType():void 0}focusHeader(t,e,i){let r=this.getAllCtrls()[t];return r?r.focusHeader(e,i):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};w([Q("ctrlsService")],Oo.prototype,"ctrlsService",2);w([Q("scrollVisibleService")],Oo.prototype,"scrollVisibleService",2);w([Q("pinnedWidthService")],Oo.prototype,"pinnedWidthService",2);w([Q("columnModel")],Oo.prototype,"columnModel",2);w([Q("focusService")],Oo.prototype,"focusService",2);w([Q("filterManager")],Oo.prototype,"filterManager",2);var Lo=class Ld extends nt{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();let e={setDisplayed:s=>this.setDisplayed(s),setCtrls:s=>this.setCtrls(s),setCenterWidth:s=>this.eCenterContainer.style.width=s,setViewportScrollLeft:s=>this.getGui().scrollLeft=s,setPinnedContainerWidth:s=>{let r=this.getGui();r.style.width=s,r.style.maxWidth=s,r.style.minWidth=s}};this.createManagedBean(new Oo(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",i=this.pinned=="right",s=e?Ld.PINNED_LEFT_TEMPLATE:i?Ld.PINNED_RIGHT_TEMPLATE:Ld.CENTER_TEMPLATE;this.setTemplate(s),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let i=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let s,r=n=>{let o=n.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),s&&ym(this.eRowContainer,o,s),s=o};e.forEach(n=>{let o=n.getInstanceId(),a=i[o];delete i[o];let l=a||this.createBean(new Wm(n));this.headerRowComps[o]=l,this.rowCompsList.push(l),r(l)}),Sn(i).forEach(n=>this.destroyRowComp(n))}};Lo.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';Lo.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';Lo.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;w([Be("eCenterContainer")],Lo.prototype,"eCenterContainer",2);w([ke],Lo.prototype,"init",1);w([ts],Lo.prototype,"destroyRowComps",1);var gg=Lo;var vo=class extends Ie{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl});let t=this.gos.getDocument();this.addManagedListener(t,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){let t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0}navigateVertically(t,e,i){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;let{headerRowIndex:s,column:r}=e,n=this.getHeaderRowCount(),o=t===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:h}=o?this.headerPositionUtils.getColumnVisibleParent(r,s):this.headerPositionUtils.getColumnVisibleChild(r,s),c=!1;return a<0&&(a=0,l=r,c=!0),a>=n?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):h!==void 0&&(this.currentHeaderRowWithoutSpan=h),!c&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(t){this.currentHeaderRowWithoutSpan=t}navigateHorizontally(t,e=!1,i){let s=this.focusService.getFocusedHeader(),r=t===2,n=this.gos.get("enableRtl"),o,a;if(this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,r!==n?(a="Before",o=this.headerPositionUtils.findHeader(s,a)):(a="After",o=this.headerPositionUtils.findHeader(s,a)),o||!e)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:e,allowUserOverride:!0,event:i});if(e){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(t,e,i){let s=t.headerRowIndex,r=null,n;if(e==="Before"?s>0&&(n=s-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!r)return!1;let{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:e,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(t,e="After"){if(t.getPinned())return;let i;if(t instanceof yi){let s=t.getDisplayedLeafColumns();i=e==="Before"?St(s):s[0]}else i=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};w([Q("focusService")],vo.prototype,"focusService",2);w([Q("headerPositionUtils")],vo.prototype,"headerPositionUtils",2);w([Q("ctrlsService")],vo.prototype,"ctrlsService",2);w([ke],vo.prototype,"postConstruct",1);vo=w([Ye("headerNavigationService")],vo);var ko=class extends Ie{setComp(t,e,i){this.comp=t,this.eGui=e,this.createManagedBean(new Dn(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();let s=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",s),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListener("headerHeight",t),this.addManagedPropertyListener("pivotHeaderHeight",t),this.addManagedPropertyListener("groupHeaderHeight",t),this.addManagedPropertyListener("pivotGroupHeaderHeight",t),this.addManagedPropertyListener("floatingFiltersHeight",t),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,t)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:t}=this,e=0,i=t.getHeaderRowCount(),s;this.filterManager.hasFloatingFilters()&&(i++,e=1);let n=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+e,l=i-a;if(s=e*t.getFloatingFiltersHeight(),s+=l*n,s+=o,this.headerHeight===s)return;this.headerHeight=s;let h=`${s+1}px`;this.comp.setHeightAndMinHeight(h),this.eventService.dispatchEvent({type:V.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){let t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(){let e=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(t){let e=this.gos.get("enableRtl"),i=t.shiftKey!==e?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()}handleKeyDown(t){let e=null;switch(t.key){case Ce.LEFT:e=2;case Ce.RIGHT:Me(e)||(e=3),this.headerNavigationService.navigateHorizontally(e,!1,t);break;case Ce.UP:e=0;case Ce.DOWN:Me(e)||(e=1),this.headerNavigationService.navigateVertically(e,null,t)&&t.preventDefault();break;default:return}}onFocusOut(t){let{relatedTarget:e}=t;!e&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(e)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(t,e,i){if(!t&&!i||!this.menuService.isHeaderContextMenuEnabled())return;let{target:s}=t??e;(s===this.eGui||s===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,t,i)}mockContextMenuForIPad(t){if(!Yr())return;let e=new _i(this.eGui),i=s=>{t(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(e,_i.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>e.destroy())}};w([Q("headerNavigationService")],ko.prototype,"headerNavigationService",2);w([Q("focusService")],ko.prototype,"focusService",2);w([Q("columnModel")],ko.prototype,"columnModel",2);w([Q("ctrlsService")],ko.prototype,"ctrlsService",2);w([Q("filterManager")],ko.prototype,"filterManager",2);w([Q("menuService")],ko.prototype,"menuService",2);var zm=class Ax extends nt{constructor(){super(Ax.TEMPLATE)}postConstruct(){let e={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setHeightAndMinHeight:r=>{this.getGui().style.height=r,this.getGui().style.minHeight=r}};this.createManagedBean(new ko).setComp(e,this.getGui(),this.getFocusableElement());let s=r=>{this.createManagedBean(r),this.appendChild(r)};s(new gg("left")),s(new gg(null)),s(new gg("right"))}};zm.TEMPLATE='<div class="ag-header" role="presentation"/>';w([ke],zm.prototype,"postConstruct",1);var ID=zm,Dh=class extends Ie{addResizeBar(t){let e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(e),()=>this.dragService.removeDragSource(e)}onDragStart(t,e){this.dragStartX=e.clientX,this.setResizeIcons();let i=e instanceof MouseEvent&&e.shiftKey===!0;t.onResizeStart(i)}setResizeIcons(){let t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!0),t.disableUserSelect(!0)}onDragStop(t,e){t.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!1),t.disableUserSelect(!1)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)}};w([Q("dragService")],Dh.prototype,"dragService",2);w([Q("ctrlsService")],Dh.prototype,"ctrlsService",2);Dh=w([Ye("horizontalResizeService")],Dh);var bn=class extends Ie{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(t,e,i){this.showPopup(t,s=>{this.popupService.positionPopupUnderMouseEvent({column:t,type:i,mouseEvent:e,ePopup:s})},i,e.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(t,e,i){let s=-1,r="left",n=this.menuService.isLegacyMenuEnabled();!n&&this.gos.get("enableRtl")&&(s=1,r="right");let o=n?void 0:4*s,a=n?void 0:4;this.showPopup(t,l=>{this.popupService.positionPopupByComponent({type:i,eventSource:e,ePopup:l,nudgeX:o,nudgeY:a,alignSide:r,keepWithinBounds:!0,position:"under",column:t})},i,e,n)}showPopup(t,e,i,s,r){let n=t?this.createBean(new Su(t,"COLUMN_MENU")):void 0;if(this.activeMenu=n,!n?.hasFilter()||!t)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let o=document.createElement("div");qt(o,"presentation"),o.classList.add("ag-menu"),r||o.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(o,"keydown",m=>this.trapFocusWithin(m,o)),o.appendChild(n?.getGui());let a,l=()=>n?.afterGuiDetached(),h=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=m=>{t.setMenuVisible(!1,"contextMenu");let f=m instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),f&&s&&ys(s)){let g=this.focusService.findTabbableParent(s);g&&g.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,t)},d=this.localeService.getLocaleTextFunc(),p=r&&i!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),u=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:c,positionCallback:()=>e(o),anchorToElement:h,ariaLabel:p});u&&(this.hidePopup=a=u.hideFunc),n.afterInit().then(()=>{e(o),n.afterGuiAttached({container:i,hidePopup:a})}),t.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,t)}trapFocusWithin(t,e){t.key!==Ce.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(e,t.shiftKey))}dispatchVisibleChangedEvent(t,e,i){let s={type:V.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:e,column:i??null};this.eventService.dispatchEvent(s)}isMenuEnabled(t){var e;return t.isFilterAllowed()&&((e=t.getColDef().menuTabs)!=null?e:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}};w([Q("filterManager")],bn.prototype,"filterManager",2);w([Q("popupService")],bn.prototype,"popupService",2);w([Q("focusService")],bn.prototype,"focusService",2);w([Q("ctrlsService")],bn.prototype,"ctrlsService",2);w([Q("menuService")],bn.prototype,"menuService",2);bn=w([Ye("filterMenuFactory")],bn);var jm=class extends Ie{constructor(t){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;let{comp:e,eTopGuard:i,eBottomGuard:s,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:n,focusInnerElement:o,onFocusIn:a,onFocusOut:l,shouldStopEventPropagation:h,onTabKeyDown:c,handleKeyDown:d,eFocusableElement:p}=t;this.comp=e,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=o,this.eFocusableElement=p,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!n,this.providedFocusIn=a,this.providedFocusOut=l,this.providedShouldStopEventPropagation=h,this.providedOnTabKeyDown=c,this.providedHandleKeyDown=d}postConstruct(){this.createManagedBean(new Dn(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(t=>this.addManagedListener(t,"focus",this.onFocus.bind(this)))}handleKeyDown(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}let e=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}findNextElementOutsideAndFocus(t){let e=this.gos.getDocument(),i=this.focusService.findFocusableElements(e.body,null,!0),s=i.indexOf(t?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let r,n;t?(r=0,n=s):(r=s+1,n=i.length);let o=i.slice(r,n),a=this.gos.get("tabIndex");o.sort((l,h)=>{let c=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(h.getAttribute("tabindex")||"0");return d===a?1:c===a?-1:c===0?1:d===0?-1:c-d}),o[t?o.length-1:0].focus()}onFocusIn(t){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(t),this.deactivateTabGuards())}onFocusOut(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive||t.defaultPrevented)return;let e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();let i=this.getNextFocusableElement(t.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),t.preventDefault())}focusInnerElement(t=!1){let e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[t?e.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)}forceFocusOutOfContainer(t=!1){if(this.forcingFocusOut)return;let e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(t){return t===this.eTopGuard||t===this.eBottomGuard}};w([Q("focusService")],jm.prototype,"focusService",2);w([ke],jm.prototype,"postConstruct",1);var sc=class extends nt{initialiseTabGuard(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();let e=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:s=>{e.forEach(r=>s!=null?r.setAttribute("tabindex",s):r.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new jm({comp:i,focusTrapActive:!!t.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:t.onFocusIn,onFocusOut:t.onFocusOut,focusInnerElement:t.focusInnerElement,handleKeyDown:t.handleKeyDown,onTabKeyDown:t.onTabKeyDown,shouldStopEventPropagation:t.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:t.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(t){let e=document.createElement("div"),i=t==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return e.classList.add("ag-tab-guard",i),qt(e,"presentation"),e}addTabGuards(t,e){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",e)}removeAllChildrenExceptTabGuards(){let t=[this.eTopGuard,this.eBottomGuard];ti(this.getFocusableElement()),this.addTabGuards(...t)}forceFocusOutOfContainer(t=!1){this.tabGuardCtrl.forceFocusOutOfContainer(t)}appendChild(t,e){Xh(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):super.appendChild(t,e)}},Fu=class Rx extends sc{constructor(e){super(Rx.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,i,s;return(s=(i=(e=this.activeItem)==null?void 0:e.tabbedItem)==null?void 0:i.afterDetachedCallback)==null?void 0:s.call(i)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}setupHeader(){let{enableCloseButton:e,cssClass:i}=this.params,s=(r,n)=>{r.classList.add(`ag-tabs-${n}`),i&&r.classList.add(`${i}-${n}`)};e?(this.setupCloseButton(s),this.eTabHeader=this.gos.getDocument().createElement("div"),s(this.eHeader,"header-wrapper"),qt(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,qt(this.eTabHeader,"tablist"),s(this.eTabHeader,"header")}setupCloseButton(e){let i=this.gos.getDocument(),s=i.createElement("button");e(s,"close-button");let r=Kt("close",this.gos,void 0,!0);ks(s,this.params.closeButtonAriaLabel),s.appendChild(r),this.addManagedListener(s,"click",()=>{var o,a;return(a=(o=this.params).onCloseClicked)==null?void 0:a.call(o)});let n=i.createElement("div");e(n,"close-button-wrapper"),qt(n,"presentation"),n.appendChild(s),this.eHeader.appendChild(n),this.eCloseButton=s}handleKeyDown(e){switch(e.key){case Ce.RIGHT:case Ce.LEFT:if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;let i=e.key===Ce.RIGHT,s=this.gos.get("enableRtl"),r=this.items.indexOf(this.activeItem),n=i!==s?Math.min(r+1,this.items.length-1):Math.max(r-1,0);if(r===n)return;e.preventDefault();let o=this.items[n];this.showItemWrapper(o),o.eHeaderButton.focus();break;case Ce.UP:case Ce.DOWN:e.stopPropagation();break}}onTabKeyDown(e){var i,s,r,n;if(e.defaultPrevented)return;let{focusService:o,eHeader:a,eBody:l,activeItem:h,params:c}=this,{suppressTrapFocus:d,enableCloseButton:p}=c,u=this.gos.getActiveDomElement(),m=e.target,f=e.shiftKey;if(a.contains(u)){e.preventDefault(),p&&f&&!((i=this.eCloseButton)!=null&&i.contains(u))?(s=this.eCloseButton)==null||s.focus():d&&f?(r=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,m))==null||r.focus():this.focusBody(e.shiftKey);return}let g=null;if(o.isTargetUnderManagedComponent(l,m)&&(f&&(g=this.focusService.findFocusableElementBeforeTabGuard(l,m)),!g&&!d&&(g=h.eHeaderButton)),!g&&l.contains(u)&&(g=o.findNextFocusableElement(l,!1,f),!g)){e.preventDefault(),d&&!f?this.forceFocusOutOfContainer(f):p&&!f?(n=this.eCloseButton)==null||n.focus():this.focusHeader();return}g&&(e.preventDefault(),g.focus())}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){let i=document.createElement("span");qt(i,"tab"),i.setAttribute("tabindex","-1"),i.appendChild(e.title),i.classList.add("ag-tab"),this.eTabHeader.appendChild(i),ks(i,e.titleLabel);let s={tabbedItem:e,eHeaderButton:i};this.items.push(s),i.addEventListener("click",this.showItemWrapper.bind(this,s))}showItem(e){let i=this.items.find(s=>s.tabbedItem===e);i&&this.showItemWrapper(i)}showItemWrapper(e){var i,s,r,n,o,a;let{tabbedItem:l,eHeaderButton:h}=e;if((s=(i=this.params).onItemClicked)==null||s.call(i,{item:l}),this.activeItem===e){(n=(r=this.params).onActiveItemClicked)==null||n.call(r);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),ti(this.eBody),l.bodyPromise.then(c=>{this.eBody.appendChild(c);let d=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,d),l.afterAttachedCallback&&l.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){let p=l.getScrollableContainer&&l.getScrollableContainer()||c;this.lastScrollListener=this.addManagedListener(p,"scroll",()=>{this.tabbedItemScrollMap.set(l.name,p.scrollTop)});let u=this.tabbedItemScrollMap.get(l.name);u!==void 0&&setTimeout(()=>{p.scrollTop=u},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(a=(o=this.activeItem.tabbedItem).afterDetachedCallback)==null||a.call(o)),h.classList.add("ag-tab-selected"),this.activeItem=e}};w([Q("focusService")],Fu.prototype,"focusService",2);w([Be("eHeader")],Fu.prototype,"eHeader",2);w([Be("eBody")],Fu.prototype,"eBody",2);w([ke],Fu.prototype,"postConstruct",1);var OD=50,Vg=class extends Ie{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(t,e){let i=this.gos.getWindow(),s=()=>{let a=new i.ResizeObserver(e);return a.observe(t),()=>a.disconnect()},r=()=>{var a,l;let h=(a=t?.clientWidth)!=null?a:0,c=(l=t?.clientHeight)!=null?l:0,d=!0,p=()=>{var u,m;if(d){let f=(u=t?.clientWidth)!=null?u:0,g=(m=t?.clientHeight)!=null?m:0;(f!==h||g!==c)&&(h=f,c=g,e()),this.doNextPolyfillTurn(p)}};return p(),()=>d=!1},n=this.gos.get("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!n?s():this.getFrameworkOverrides().wrapIncoming(()=>r(),"resize-observer")}doNextPolyfillTurn(t){this.polyfillFunctions.push(t),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let t=()=>{let e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach(i=>i())};this.polyfillScheduled=!0,window.setTimeout(t,OD)}};Vg=w([Ye("resizeObserverService")],Vg);var ka=class extends Ie{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(t){let e=this.gos.get("pagination");if(this.scrollGoingDown=t>=this.lastScrollTop,e&&t===0){let i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=t}init(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(t){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${t} called but animation frames are off`)}createTask(t,e,i){this.verifyAnimationFrameOn(i);let s={task:t,index:e,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(t){this.cancelledTasks.add(t)}addTaskToList(t,e){t.list.push(e),t.sorted=!1}sortTaskList(t){if(t.sorted)return;let e=this.scrollGoingDown?1:-1;t.list.sort((i,s)=>i.index!==s.index?e*(s.index-i.index):s.createOrder-i.createOrder),t.sorted=!0}addDestroyTask(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()}executeFrame(t){this.verifyAnimationFrameOn("executeFrame");let e=this.createTasksP1,i=e.list,s=this.createTasksP2,r=s.list,n=this.destroyTasks,o=new Date().getTime(),a=new Date().getTime()-o,l=t<=0,h=this.ctrlsService.getGridBodyCtrl();for(;l||a<t;){if(!h.getScrollFeature().scrollGridIfNeeded()){let d;if(i.length)this.sortTaskList(e),d=i.pop().task;else if(r.length)this.sortTaskList(s),d=r.pop().task;else if(n.length)d=n.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-o}i.length||r.length||n.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let t=this.executeFrame.bind(this,60);this.requestAnimationFrame(t)}requestAnimationFrame(t){let e=this.gos.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.setTimeout(t,0)}isQueueEmpty(){return!this.ticking}debounce(t){let e=!1;return()=>{if(!this.isOn()){window.setTimeout(t,0);return}e||(e=!0,this.addDestroyTask(()=>{e=!1,t()}))}}};w([Q("ctrlsService")],ka.prototype,"ctrlsService",2);w([Q("paginationProxy")],ka.prototype,"paginationProxy",2);w([ke],ka.prototype,"init",1);ka=w([Ye("animationFrameService")],ka);var Fh=class extends Ie{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(t){if(!this.isClientSideRowModel)return;let e=new Set(t);this.rowModel.forEachNode(i=>{i.id&&e.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let t=[];return this.rowModel.forEachNode(({expanded:e,id:i})=>{e&&i&&t.push(i)}),t}expandAll(t){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(t)}setRowNodeExpanded(t,e,i,s){t&&(i&&t.parent&&t.parent.level!==-1&&this.setRowNodeExpanded(t.parent,e,i,s),t.setExpanded(e,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};w([Q("rowModel")],Fh.prototype,"rowModel",2);w([ke],Fh.prototype,"postConstruct",1);Fh=w([Ye("expansionService")],Fh);var Qs=class extends Ie{postConstruct(){var t;this.activeMenuFactory=(t=this.enterpriseMenuFactory)!=null?t:this.filterMenuFactory}showColumnMenu(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")}showFilterMenu(t){let e=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(e,t,t.containerType,!0)}showHeaderContextMenu(t,e,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(t,e,i)}getContextMenuPosition(t,e){let i=this.getRowCtrl(t),s=this.getCellGui(i,e);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};let r=s.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(t){var e,i,s;let{column:r,rowNode:n}=t,{anchorToElement:o,value:a}=t;n&&r&&a==null&&(a=n.getValueFromValueService(r)),o==null&&(o=this.getContextMenuAnchorElement(n,r)),(s=this.contextMenuFactory)==null||s.onContextMenu((e=t.mouseEvent)!=null?e:null,(i=t.touchEvent)!=null?i:null,n??null,r??null,a,o)}showColumnChooser(t){var e;(e=this.columnChooserFactory)==null||e.showColumnChooser(t)}hidePopupMenu(){var t;(t=this.contextMenuFactory)==null||t.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var t;(t=this.columnChooserFactory)==null||t.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(t){let{suppressMenu:e,suppressHeaderMenuButton:i}=t.getColDef();return!(i??e)&&this.activeMenuFactory.isMenuEnabled(t)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(t){return!t.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(t)}isHeaderContextMenuEnabled(t){return!t?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let t=!this.isSuppressMenuHide();return!(Yr()&&t)}isHeaderFilterButtonEnabled(t){return this.isFilterMenuInHeaderEnabled(t)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(t)}isFilterMenuItemEnabled(t){return this.filterManager.isFilterAllowed(t)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(t){var e;let i=t.getColDef(),s=(e=i.floatingFilterComponentParams)==null?void 0:e.suppressFilterButton;return s!=null&&et("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),i.suppressFloatingFilterButton==null?!s:!i.suppressFloatingFilterButton}getColumnMenuType(){var t;return(t=this.gos.get("columnMenu"))!=null?t:"legacy"}isFloatingFilterButtonDisplayed(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)}isSuppressMenuHide(){let t=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gos.exists("suppressMenuHide")?t:!0}showColumnMenuCommon(t,e,i,s){let{column:r,positionBy:n}=e;if(n==="button"){let{buttonElement:o}=e;t.showMenuAfterButtonClick(r,o,i,s)}else if(n==="mouse"){let{mouseEvent:o}=e;t.showMenuAfterMouseEvent(r,o,i,s)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);t.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(s),i,!0)}))}getRowCtrl(t){let{rowIndex:e,rowPinned:i}=t||{};if(e!=null)return this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:i})||void 0}getCellGui(t,e){if(!t||!e)return;let i=t.getCellCtrl(e);return i?.getGui()||void 0}getContextMenuAnchorElement(t,e){let i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(t);if(!s)return i;let r=this.getCellGui(s,e);return r||(s.isFullWidth()?s.getFullWidthElement():i)}};w([Q("filterMenuFactory")],Qs.prototype,"filterMenuFactory",2);w([Q("ctrlsService")],Qs.prototype,"ctrlsService",2);w([Q("animationFrameService")],Qs.prototype,"animationFrameService",2);w([Q("filterManager")],Qs.prototype,"filterManager",2);w([Q("rowRenderer")],Qs.prototype,"rowRenderer",2);w([_t("columnChooserFactory")],Qs.prototype,"columnChooserFactory",2);w([_t("contextMenuFactory")],Qs.prototype,"contextMenuFactory",2);w([_t("enterpriseMenuFactory")],Qs.prototype,"enterpriseMenuFactory",2);w([ke],Qs.prototype,"postConstruct",1);Qs=w([Ye("menuService")],Qs);var Co=class extends Ie{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowContainerCtrl=t.center})}getPreferredWidthForColumn(t,e){let i=this.getHeaderCellForColumn(t);if(!i)return-1;let s=this.rowRenderer.getAllCellsForColumn(t);return e||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(t){let e=this.getHeaderCellForColumn(t);return e?this.addElementsToContainerAndGetWidth([e]):-1}addElementsToContainerAndGetWidth(t){let e=document.createElement("form");e.style.position="fixed";let i=this.centerRowContainerCtrl.getContainerElement();t.forEach(n=>this.cloneItemIntoDummy(n,e)),i.appendChild(e);let s=e.offsetWidth;i.removeChild(e);let r=this.getAutoSizePadding();return s+r}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(t){let e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{let s=i.getHtmlElementForColumnHeader(t);s!=null&&(e=s)}),e}cloneItemIntoDummy(t,e){let i=t.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";let s=document.createElement("div"),r=s.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(r.add("ag-header","ag-header-row"),s.style.position="static"):r.add("ag-row");let o=t.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){let h=o.classList[l];h!="ag-row-position-absolute"&&r.add(h)}break}o=o.parentElement}s.appendChild(i),e.appendChild(s)}};w([Q("rowRenderer")],Co.prototype,"rowRenderer",2);w([Q("ctrlsService")],Co.prototype,"ctrlsService",2);w([Q("rowCssClassCalculator")],Co.prototype,"rowCssClassCalculator",2);w([ke],Co.prototype,"postConstruct",1);Co=w([Ye("autoWidthCalculator")],Co);var rc=class extends Ie{constructor(t,e){super(),this.createRowCon=t,this.destroyRowCtrls=e,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}getLastPixelOfGroup(t){return this.isClientSide?this.getClientSideLastPixelOfGroup(t):this.getServerSideLastPixelOfGroup(t)}getFirstPixelOfGroup(t){return t.footer?t.sibling.rowTop+t.sibling.rowHeight-1:t.hasChildren()?t.rowTop-1:0}getServerSideLastPixelOfGroup(t){var e,i,s,r;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(t.isExpandable()||t.footer){if(t.master)return t.detailNode.rowTop+t.detailNode.rowHeight;if(!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1){let o=(e=t.childStore)==null?void 0:e.getStoreBounds();return t.footer&&(o=(i=t.sibling.childStore)==null?void 0:i.getStoreBounds()),((s=o?.heightPx)!=null?s:0)+((r=o?.topPx)!=null?r:0)}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(t){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(t.isExpandable()||t.footer){let e=t.footer&&t.rowIndex===0,i=!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1;if(e||i){let s=t.footer?t.sibling:t;for(;s.isExpandable()&&s.expanded;)if(s.master)s=s.detailNode;else if(s.childrenAfterSort){if(s.childrenAfterSort.length===0)break;s=St(s.childrenAfterSort)}return s.rowTop+s.rowHeight}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(t){let e=t==="top",i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(t,new Set,i);let s=e?this.rowRenderer.getFirstVisibleVerticalPixel():this.rowRenderer.getLastVisibleVerticalPixel(),r=new Set,n=h=>{if(r.add(h),e){let c=this.getLastPixelOfGroup(h),d=s+i+h.rowHeight;c<d?h.stickyRowTop=i+(c-d):h.stickyRowTop=i}else{let c=this.getFirstPixelOfGroup(h),d=s-(i+h.rowHeight);c>d?h.stickyRowTop=i-(c-d):h.stickyRowTop=i}i=0,r.forEach(c=>{let d=c.stickyRowTop+c.rowHeight;i<d&&(i=d)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=h=>h.displayed?h.footer?o===!0||o==="grand"&&h.level===-1||o==="group"&&h.level>-1?!1:!r.has(h):h.isExpandable()?a===!0?!1:!r.has(h)&&h.expanded:!1:!1;for(let h=0;h<100;h++){let c=s+i;e||(c=s-i);let d=this.rowModel.getRowIndexAtPixel(c),p=this.rowModel.getRow(d);if(p==null)break;let m=this.getStickyAncestors(p).find(g=>(e?g.rowIndex<d:g.rowIndex>d)&&l(g));if(m){n(m);continue}if((e?p.rowTop<c:p.rowTop+p.rowHeight>c)&&l(p)){n(p);continue}break}return e||r.forEach(h=>{h.stickyRowTop=i-(h.stickyRowTop+h.rowHeight)}),this.refreshNodesAndContainerHeight(t,r,i)}areFooterRowsStickySuppressed(){let t=this.gos.get("suppressStickyTotalRow");if(t===!0)return!0;let e=!!this.gos.get("groupIncludeFooter")||t==="group",i=!!this.gos.get("groupIncludeTotalFooter")||t==="grand";return e&&i?!0:i?"grand":e?"group":!1}canRowsBeSticky(){let t=this.gos.isGroupRowsSticky(),e=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return t&&(!e||!i)}getStickyAncestors(t){let e=[],i=t.footer?t.sibling:t.parent;for(;i;)i.sibling&&e.push(i.sibling),e.push(i),i=i.parent;return e.reverse()}checkStickyRows(){let t=this.updateStickyRows("top"),e=this.updateStickyRows("bottom");return t||e}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(t){let e=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===t)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){let s=this.stickyTopRowCtrls[i].getRowNode();s!==t&&e.add(s)}this.refreshNodesAndContainerHeight("top",e,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){let s=this.stickyBottomRowCtrls[i].getRowNode();s!==t&&e.add(s)}this.refreshNodesAndContainerHeight("bottom",e,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(t,e,i){let s=t==="top",r=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,n={},o=[];for(let d=0;d<r.length;d++){let p=r[d].getRowNode();if(!e.has(p)){n[p.id]=r[d],p.sticky=!1;continue}o.push(r[d])}let a=new Set;for(let d=0;d<o.length;d++)a.add(o[d].getRowNode());let l=[];e.forEach(d=>{a.has(d)||(d.sticky=!0,l.push(this.createRowCon(d,!1,!1)))});let h=!!l.length||o.length!==r.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),h=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),h=!0),this.destroyRowCtrls(n,!1);let c=[...o,...l];return c.sort((d,p)=>p.getRowNode().rowIndex-d.getRowNode().rowIndex),s||c.reverse(),c.forEach(d=>d.setRowTop(d.getRowNode().stickyRowTop)),h?(s?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0):!1}};w([Q("rowModel")],rc.prototype,"rowModel",2);w([Q("rowRenderer")],rc.prototype,"rowRenderer",2);w([Q("ctrlsService")],rc.prototype,"ctrlsService",2);w([ke],rc.prototype,"postConstruct",1);var Ns=class extends Ie{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let t=()=>{this.getAllCellCtrls().forEach(n=>n.onRangeSelectionChanged())},e=()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener(V.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.addEventListener(V.EVENT_COLUMN_MOVED,e),this.eventService.addEventListener(V.EVENT_COLUMN_PINNED,e),this.eventService.addEventListener(V.EVENT_COLUMN_VISIBLE,e)},s=()=>{this.eventService.removeEventListener(V.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.removeEventListener(V.EVENT_COLUMN_MOVED,e),this.eventService.removeEventListener(V.EVENT_COLUMN_PINNED,e),this.eventService.removeEventListener(V.EVENT_COLUMN_VISIBLE,e)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListener("enableRangeSelection",n=>{n.currentValue?i():s()}),this.gos.get("enableRangeSelection")&&i()}}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,V.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,V.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){let t=this.rowModel.getType();(t==="clientSide"||t==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new rc(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let t=this.getKeepDetailRowsCount(),e=t??3;this.cachedRowCtrls=new LD(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let t=Sn(this.rowCtrlsByRowIndex),e=Sn(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];e.length>0||i.length>0?this.allRowCtrls=[...t,...e,...i]:this.allRowCtrls=t}onCellFocusChanged(t){this.getAllCellCtrls().forEach(e=>e.onCellFocused(t)),this.getFullWidthRowCtrls().forEach(e=>e.onFullWidthRowFocused(t))}registerCellEventListeners(){this.addManagedListener(this.eventService,V.EVENT_CELL_FOCUSED,t=>{this.onCellFocusChanged(t)}),this.addManagedListener(this.eventService,V.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,V.EVENT_FLASH_CELLS,t=>{this.getAllCellCtrls().forEach(e=>e.onFlashCells(t))}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())}),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,V.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(t=>t()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(e=>{let i=l=>{this.getAllCellCtrls().forEach(h=>{h.getColumn()===e&&l(h)})},s=()=>{i(l=>l.onLeftChanged())},r=()=>{i(l=>l.onWidthChanged())},n=()=>{i(l=>l.onFirstRightPinnedChanged())},o=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};e.addEventListener("leftChanged",s),e.addEventListener("widthChanged",r),e.addEventListener("firstRightPinnedChanged",n),e.addEventListener("lastLeftPinnedChanged",o),e.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{e.removeEventListener("leftChanged",s),e.removeEventListener("widthChanged",r),e.removeEventListener("firstRightPinnedChanged",n),e.removeEventListener("lastLeftPinnedChanged",o),e.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let t=this.gos.isDomLayout("print"),e=t||this.gos.get("embedFullWidthRows"),i=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){let e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsForColumn(t){let e=[];return this.getAllRowCtrls().forEach(i=>{let s=i.getCellElement(t);s&&e.push(s)}),e}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(t,e){t.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),t.length=0,e&&e.forEach(i=>{let s=new po(i,this.beans,!1,!1,this.printLayout);t.push(s)})}onPinnedRowDataChanged(){let t={recycleRows:!0};this.redrawAfterModelUpdate(t)}redrawRow(t,e=!1){var i;if(t.sticky)this.stickyRowFeature.refreshStickyNode(t);else if((i=this.cachedRowCtrls)!=null&&i.has(t)){this.cachedRowCtrls.removeRow(t);return}else{let s=r=>{let n=r[t.rowIndex];n&&n.getRowNode()===t&&(n.destroyFirstPass(),n.destroySecondPass(),r[t.rowIndex]=this.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(t){if(t!=null){t?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(t){let e=t?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(e==null)return null;let i=this.gos.getActiveDomElement(),s=this.gos.getDomData(i,uo.DOM_DATA_KEY_CELL_CTRL),r=this.gos.getDomData(i,po.DOM_DATA_KEY_ROW_CTRL);return s||r?e:null}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();let e=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);let i=!t.domLayoutChanged&&!!t.recycleRows,s=t.animate&&this.gos.isAnimateRows(),r=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(r,s),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(t){let e=t.newData||t.newPage,i=this.gos.get("suppressScrollOnNewData");e&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.paginationProxy.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){t&&(this.focusService.setRestoreFocusedCell(t),this.onCellFocusChanged(this.beans.gos.addGridCommonParams({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(t=!1){this.getAllRowCtrls().forEach(e=>{e.stopEditing(t)})}getAllCellCtrls(){let t=[],e=this.getAllRowCtrls(),i=e.length;for(let s=0;s<i;s++){let r=e[s].getAllCellCtrls(),n=r.length;for(let o=0;o<n;o++)t.push(r[o])}return t}getAllRowCtrls(){let t=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],e=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...t,...e];for(let s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(t,e,i){let s=this.rowCtrlsByRowIndex[e];s&&s.addEventListener(t,i)}flashCells(t={}){this.getCellCtrls(t.rowNodes,t.columns).forEach(e=>e.flashCell(t))}refreshCells(t={}){let e={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};this.getCellCtrls(t.rowNodes,t.columns).forEach(i=>i.refreshOrDestroyCell(e)),t.rowNodes&&(this.getRowCtrls(t.rowNodes).forEach(i=>{if(!i.isFullWidth())return;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(t){var e;let i=this.getCellCtrls(t.rowNodes,t.columns).map(n=>n.getCellRenderer()).filter(n=>n!=null);if((e=t.columns)!=null&&e.length)return i;let s=[],r=this.mapRowNodes(t.rowNodes);return this.getAllRowCtrls().forEach(n=>{if(r&&!this.isRowInMap(n.getRowNode(),r)||!n.isFullWidth())return;let o=n.getFullWidthCellRenderers();for(let a=0;a<o.length;a++){let l=o[a];l!=null&&s.push(l)}}),[...s,...i]}getCellEditorInstances(t){let e=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach(i=>{let s=i.getCellEditor();s&&e.push(s)}),e}getEditingCells(){let t=[];return this.getAllCellCtrls().forEach(e=>{if(e.isEditing()){let i=e.getCellPosition();t.push(i)}}),t}mapRowNodes(t){if(!t)return;let e={top:{},bottom:{},normal:{}};return t.forEach(i=>{let s=i.id;switch(i.rowPinned){case"top":e.top[s]=i;break;case"bottom":e.bottom[s]=i;break;default:e.normal[s]=i;break}}),e}isRowInMap(t,e){let i=t.id;switch(t.rowPinned){case"top":return e.top[i]!=null;case"bottom":return e.bottom[i]!=null;default:return e.normal[i]!=null}}getRowCtrls(t){let e=this.mapRowNodes(t),i=this.getAllRowCtrls();return!t||!e?i:i.filter(s=>{let r=s.getRowNode();return this.isRowInMap(r,e)})}getCellCtrls(t,e){let i;Me(e)&&(i={},e.forEach(r=>{let n=this.columnModel.getGridColumn(r);Me(n)&&(i[n.getId()]=!0)}));let s=[];return this.getRowCtrls(t).forEach(r=>{r.getAllCellCtrls().forEach(n=>{let o=n.getColumn().getId();i&&!i[o]||s.push(n)})}),s}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let t=[];Ui(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&t.push(i)}),this.removeRowCtrls(t);let e={};return Ui(this.rowCtrlsByRowIndex,(i,s)=>{let r=s.getRowNode();e[r.id]=s}),this.rowCtrlsByRowIndex={},e}removeRowCtrls(t,e=!1){t.forEach(i=>{let s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(e),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(t){t.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(t={}){let{afterScroll:e}=t,i;this.stickyRowFeature&&dm()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);let s=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let n=!1;this.stickyRowFeature&&(n=this.stickyRowFeature.checkStickyRows());let o=this.firstRenderedRow!==s||this.lastRenderedRow!==r;if(!(e&&!n&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,e),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(e&&!n),i!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(t,e){let i={};t.forEach(n=>i[n]=!0);let r=Object.keys(this.rowCtrlsByRowIndex).filter(n=>!i[n]);this.removeRowCtrls(r,e)}calculateIndexesToDraw(t){let e=ow(this.firstRenderedRow,this.lastRenderedRow),i=(r,n)=>{let o=n.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(n)&&e.push(o)};Ui(this.rowCtrlsByRowIndex,i),Ui(t,i),e.sort((r,n)=>r-n);let s=[];for(let r=0;r<e.length;r++){let n=e[r],o=this.paginationProxy.getRow(n);o&&!o.sticky&&s.push(n)}return s}recycleRows(t,e=!1,i=!1){let s=this.calculateIndexesToDraw(t);(this.printLayout||i)&&(e=!1),this.removeRowCompsNotToDraw(s,!e);let r=[];s.forEach(n=>{let o=this.createOrUpdateRowCtrl(n,t,e,i);Me(o)&&r.push(o)}),t&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(t,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=!1){let e={type:V.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){let t=this.columnModel.isPinningLeft(),e=this.columnModel.isPinningRight();(this.pinningLeft!==t||e!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let t=[];this.getFullWidthRowCtrls().forEach(e=>{let i=e.getRowNode().rowIndex;t.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(t){let e=this.mapRowNodes(t);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;let s=i.getRowNode();return!(e!=null&&!this.isRowInMap(s,e))})}createOrUpdateRowCtrl(t,e,i,s){let r,n=this.rowCtrlsByRowIndex[t];if(n||(r=this.paginationProxy.getRow(t),Me(r)&&Me(e)&&e[r.id]&&r.alreadyRendered&&(n=e[r.id],e[r.id]=null)),!n)if(r||(r=this.paginationProxy.getRow(t)),Me(r))n=this.createRowCon(r,i,s);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=n,n}destroyRowCtrls(t,e){let i=[];Ui(t,(s,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);return}r.destroyFirstPass(!e),e?(this.zombieRowCtrls[r.getInstanceId()]=r,i.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[r.getInstanceId()]})):r.destroySecondPass()}}),e&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),py(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let t=this.getRowBuffer(),e=this.gos.getRowHeightAsNumber();return t*e}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let t,e;if(!this.paginationProxy.isRowsToRender())t=0,e=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),t=this.paginationProxy.getPageFirstRow(),e=this.paginationProxy.getPageLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),h=this.gos.get("suppressRowVirtualisation"),c=!1,d,p;do{let y=this.paginationProxy.getPixelOffset(),{pageFirstPixel:x,pageLastPixel:T}=this.paginationProxy.getCurrentPagePixelRange(),A=this.rowContainerHeightService.getDivStretchOffset(),S=l.getScrollFeature().getVScrollPosition(),M=S.top,B=S.bottom;h?(d=x+A,p=T+A):(d=Math.max(M+y-a,x)+A,p=Math.min(B+y+a,T)+A),this.firstVisibleVPixel=Math.max(M+y,x)+A,this.lastVisibleVPixel=Math.min(B+y,T)+A,c=this.ensureAllRowsInRangeHaveHeightsCalculated(d,p)}while(c);let u=this.paginationProxy.getRowIndexAtPixel(d),m=this.paginationProxy.getRowIndexAtPixel(p),f=this.paginationProxy.getPageFirstRow(),g=this.paginationProxy.getPageLastRow();u<f&&(u=f),m>g&&(m=g),t=u,e=m}let i=this.gos.isDomLayout("normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);i&&!s&&e-t>r&&(e=t+r);let n=t!==this.firstRenderedRow,o=e!==this.lastRenderedRow;if(n||o){this.firstRenderedRow=t,this.lastRenderedRow=e;let a={type:V.EVENT_VIEWPORT_CHANGED,firstRow:t,lastRow:e};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let t={type:V.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(t)})}ensureAllRowsInRangeHaveHeightsCalculated(t,e){let i=this.paginationProxy.ensureRowHeightsValid(t,e,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(t){let s=t.getRowNode(),r=this.focusService.isRowNodeFocused(s),n=t.isEditing(),o=s.detail;return r||n||o?!!this.paginationProxy.isRowPresent(s):!1}createRowCon(t,e,i){let s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(s)return s;let r=this.gos.get("suppressAnimationFrame"),n=i&&!r&&!this.printLayout;return new po(t,this.beans,e,n,this.printLayout)}getRenderedNodes(){let t=this.rowCtrlsByRowIndex;return Object.values(t).map(e=>e.getRowNode())}getRowByPosition(t){let e,{rowIndex:i}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[i];break;case"bottom":e=this.bottomRowCtrls[i];break;default:e=this.rowCtrlsByRowIndex[i],e||(e=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null,e||(e=this.getStickyBottomRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null));break}return e}isRangeInRenderedViewport(t,e){if(t==null||e==null)return!1;let s=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!s}};w([Q("animationFrameService")],Ns.prototype,"animationFrameService",2);w([Q("paginationProxy")],Ns.prototype,"paginationProxy",2);w([Q("columnModel")],Ns.prototype,"columnModel",2);w([Q("pinnedRowModel")],Ns.prototype,"pinnedRowModel",2);w([Q("rowModel")],Ns.prototype,"rowModel",2);w([Q("focusService")],Ns.prototype,"focusService",2);w([Q("beans")],Ns.prototype,"beans",2);w([Q("rowContainerHeightService")],Ns.prototype,"rowContainerHeightService",2);w([Q("ctrlsService")],Ns.prototype,"ctrlsService",2);w([ke],Ns.prototype,"postConstruct",1);Ns=w([Ye("rowRenderer")],Ns);var LD=class{constructor(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}addRow(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){let e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(t){if(t==null||t.id==null)return null;let e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null}has(t){return this.entriesMap[t.id]!=null}removeRow(t){let e=t.id,i=this.entriesMap[e];delete this.entriesMap[e],ps(this.entriesList,i)}removeFromCache(t){let e=t.getRowNode().id;delete this.entriesMap[e],ps(this.entriesList,t)}getEntries(){return this.entriesList}},Ph=class extends Ie{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(t){let e=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Ks(e)}isRowsToRender(t){return!this.isEmpty(t)}getRowAtPixel(t,e){let i=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Ks(i))return 0;for(let s=0;s<i.length;s++){let r=i[s];if(r.rowTop+r.rowHeight-1>=t)return s}return i.length-1}setPinnedTopRowData(){let t=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(t,!0);let e={type:V.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}setPinnedBottomRowData(){let t=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(t,!1);let e={type:V.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}createNodesFromData(t,e){let i=[];if(t){let s=0;t.forEach((r,n)=>{let o=new ct(this.beans);o.data=r;let a=e?ct.ID_PREFIX_TOP_PINNED:ct.ID_PREFIX_BOTTOM_PINNED;o.id=a+n,o.rowPinned=e?"top":"bottom",o.setRowTop(s),o.setRowHeight(this.gos.getRowHeightForNode(o).height),o.setRowIndex(n),s+=o.rowHeight,i.push(o)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(t){return this.pinnedTopRows[t]}getPinnedBottomRow(t){return this.pinnedBottomRows[t]}forEachPinnedTopRow(t){Ks(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)}forEachPinnedBottomRow(t){Ks(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(t){if(!t||t.length===0)return 0;let e=St(t);return e.rowTop+e.rowHeight}};w([Q("beans")],Ph.prototype,"beans",2);w([ke],Ph.prototype,"init",1);Ph=w([Ye("pinnedRowModel")],Ph);var Pu=class{constructor(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(t,e){if(t.children)for(let i=0;i<t.children.length;i++)this.depthFirstSearchChangedPath(t.children[i],e);e(t.rowNode)}depthFirstSearchEverything(t,e,i){if(t.childrenAfterGroup)for(let s=0;s<t.childrenAfterGroup.length;s++){let r=t.childrenAfterGroup[s];r.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[s],e,i):i&&e(r)}e(t)}forEachChangedNodeDepthFirst(t,e=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t,i=0;for(;!this.mapToItems[e.id];){let s={rowNode:e,children:null};this.mapToItems[e.id]=s,i++,e=e.parent}return i}populateColumnsMap(t,e){if(!this.keepingColumns||!e)return;let i=t;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),e.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(t,e){let i=t;for(let s=0;s<e;s++){let r=this.mapToItems[i.id],n=this.mapToItems[i.parent.id];n.children||(n.children=[]),n.children.push(r),i=i.parent}}addParentNode(t,e){if(!t||t.isRowPinned())return;let i=this.createPathItems(t);this.linkPathItems(t,i),this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns)return e;let i=this.nodeIdsToColumns[t.id];return e.filter(r=>i[r.getId()])}getNotValueColumnsForNode(t,e){if(!this.keepingColumns)return null;let i=this.nodeIdsToColumns[t.id];return e.filter(r=>!i[r.getId()])}},Ja=class oo extends Ie{constructor(e){super(),this.state=oo.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=oo.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=oo.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=oo.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,i){this.successCommon(e,i)}pageLoaded(e,i,s){this.successCommon(e,{rowData:i,rowCount:s})}isRequestMostRecentAndLive(e){let i=e===this.version,s=this.isAlive();return i&&s}successCommon(e,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=oo.STATE_LOADED,this.processServerResult(i))}dispatchLoadCompleted(e=!0){let i={type:oo.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(i)}};Ja.EVENT_LOAD_COMPLETE="loadComplete";Ja.STATE_WAITING_TO_LOAD="needsLoading";Ja.STATE_LOADING="loading";Ja.STATE_LOADED="loaded";Ja.STATE_FAILED="failed";var Bg=Ja,Mr=class extends Ie{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let t=this.gos.get("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=dt.debounce(this.performCheckBlocksToLoad.bind(this),t))}setBeans(t){this.logger=t.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){let t=this.gos.get("maxConcurrentDatasourceRequests");if(t==null)return 2;if(!(t<=0))return t}addBlock(t){this.blocks.push(t),t.addEventListener(Bg.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(t){dt.removeFromArray(this.blocks,t)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:Mr.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:Mr.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}let t=this.getAvailableLoadingCount(),e=this.blocks.filter(i=>i.getState()===Bg.STATE_WAITING_TO_LOAD).slice(0,t);this.registerLoads(e.length),e.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let t={};return this.blocks.forEach(e=>{let{id:i,state:s}=e.getBlockStateJson();t[i]=s}),t}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(t){this.activeBlockLoadsCount+=t}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};Mr.BLOCK_LOADED_EVENT="blockLoaded";Mr.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";w([Q("rowModel")],Mr.prototype,"rowModel",2);w([ke],Mr.prototype,"postConstruct",1);w([lr(0,Xs("loggerFactory"))],Mr.prototype,"setBeans",1);Mr=w([Ye("rowNodeBlockLoader")],Mr);var Mh=class extends Ie{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(t,e,i,s){let r=this.rowModel.ensureRowHeightsValid(t,e,this.getPageFirstRow(),this.getPageLastRow());return r&&this.calculatePages(),r}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onModelUpdated(t){this.calculatePages();let e={type:V.EVENT_PAGINATION_CHANGED,animate:t?t.animate:!1,newData:t?t.newData:!1,newPage:t?t.newPage:!1,newPageSize:t?t.newPageSize:!1,keepRenderedRows:t?t.keepRenderedRows:!1};this.eventService.dispatchEvent(e)}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages();let t={type:V.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(t)}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(t){if(!this.active||this.currentPage===t||typeof this.currentPage!="number")return;this.currentPage=t,this.calculatePages();let e={type:V.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!0,newPageSize:!1,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}getPixelOffset(){return this.pixelOffset}getRow(t){return this.rowModel.getRow(t)}getRowNode(t){return this.rowModel.getRowNode(t)}getRowIndexAtPixel(t){return this.rowModel.getRowIndexAtPixel(t)}getCurrentPageHeight(){return rt(this.topRowBounds)||rt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let t=this.topRowBounds?this.topRowBounds.rowTop:0,e=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:t,pageLastPixel:e}}isRowPresent(t){return this.rowModel.isRowPresent(t)?t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(t){return this.rowModel.forEachNode(t)}forEachNodeOnPage(t){let e=this.getPageFirstRow(),i=this.getPageLastRow();for(let s=e;s<=i;s++){let r=this.getRow(s);r&&t(r)}}getType(){return this.rowModel.getType()}getRowBounds(t){let e=this.rowModel.getRowBounds(t);return e.rowIndex=t,e}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(t){return Math.floor(t/this.pageSize)}goToPageWithIndex(t){if(!this.active)return;let e=this.getPageForIndex(t);this.goToPage(e)}isRowInPage(t){return this.active?this.getPageForIndex(t.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let t=this.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(t){this.currentPage=t}get pageSize(){return Me(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:Me(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Me(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Me(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let t=this.pageSizeAutoCalculated;if(this.pageSizeAutoCalculated=void 0,this.pageSize===t)return;this.calculatePages();let e={type:V.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}setPageSize(t,e){let i=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(i!==this.pageSize){this.calculatePages();let s={type:V.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!0};this.eventService.dispatchEvent(s)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(Me(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(t){this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:V.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let e=this.pageSize*this.currentPage,i=this.pageSize*(this.currentPage+1)-1;if(i>t&&(i=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),i===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};w([Q("rowModel")],Mh.prototype,"rowModel",2);w([ke],Mh.prototype,"postConstruct",1);Mh=w([Ye("paginationProxy")],Mh);var Kd=class extends Ie{processAllCellClasses(t,e,i,s){this.processClassRules(void 0,t.cellClassRules,e,i,s),this.processStaticCellClasses(t,e,i)}processClassRules(t,e,i,s,r){if(e==null&&t==null)return;let n={},o={},a=(l,h)=>{l.split(" ").forEach(c=>{c.trim()!=""&&h(c)})};if(e){let l=Object.keys(e);for(let h=0;h<l.length;h++){let c=l[h],d=e[c],p;typeof d=="string"?p=this.expressionService.evaluate(d,i):typeof d=="function"&&(p=d(i)),a(c,u=>{p?n[u]=!0:o[u]=!0})}}t&&r&&Object.keys(t).forEach(l=>a(l,h=>{n[h]||(o[h]=!0)})),r&&Object.keys(o).forEach(r),Object.keys(n).forEach(s)}getStaticCellClasses(t,e){let{cellClass:i}=t;if(!i)return[];let s;return typeof i=="function"?s=i(e):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(t,e,i){this.getStaticCellClasses(t,e).forEach(r=>{i(r)})}};w([Q("expressionService")],Kd.prototype,"expressionService",2);Kd=w([Ye("stylingService")],Kd);var Dx=class extends vu{constructor(t){super(t,"ag-toggle-button")}setValue(t,e){return super.setValue(t,e),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},kD=class extends cr{constructor(t){super(t,"ag-text-area",null,"textarea")}setValue(t,e){let i=super.setValue(t,e);return this.eInput.value=t,i}setCols(t){return this.eInput.cols=t,this}setRows(t){return this.eInput.rows=t,this}},ND=class extends Do{constructor(t){super(t,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));let t=Pr();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||t||this.eInput.focus()}),this.eInput.step="any"}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}setMin(t){var e;let i=t instanceof Date?(e=Ys(t??null,!1))!=null?e:void 0:t;return this.min===i?this:(this.min=i,Fr(this.eInput,"min",i),this)}setMax(t){var e;let i=t instanceof Date?(e=Ys(t??null,!1))!=null?e:void 0:t;return this.max===i?this:(this.max=i,Fr(this.eInput,"max",i),this)}setStep(t){return this.step===t?this:(this.step=t,Fr(this.eInput,"step",t),this)}getDate(){var t;if(this.eInput.validity.valid)return(t=gs(this.getValue()))!=null?t:void 0}setDate(t,e){this.setValue(Ys(t??null,!1),e)}},GD=class extends cr{constructor(t){super(t,"ag-range-field","range")}postConstruct(){super.postConstruct();let{min:t,max:e,step:i}=this.config;t!=null&&this.setMinValue(t),e!=null&&this.setMaxValue(e),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>{let e=t.target.value;this.setValue(e)})}setMinValue(t){return this.min=t,this.eInput.setAttribute("min",t.toString()),this}setMaxValue(t){return this.max=t,this.eInput.setAttribute("max",t.toString()),this}setStep(t){return this.eInput.setAttribute("step",t.toString()),this}setValue(t,e){this.min!=null&&(t=Math.max(parseFloat(t),this.min).toString()),this.max!=null&&(t=Math.min(parseFloat(t),this.max).toString());let i=super.setValue(t,e);return this.eInput.value=t,i}},$m=class extends nt{constructor(t,e){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=t,this.wrapperEl=e}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(t){let e="";this.params.valueFormatter&&(e=this.params.valueFormatter(t)),this.populateWithRenderer(t,e)||this.populateWithoutRenderer(t,e),this.value=t}highlightString(t){let{parsedValue:e}=this;if(this.params.cellRenderer||!Me(e))return;let i=Me(t);if(i){let s=e?.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(s>=0){let r=s+t.length,n=oi(e.slice(0,s),!0),o=oi(e.slice(s,r),!0),a=oi(e.slice(r));this.renderValueWithoutRenderer(`${n}<span class="ag-rich-select-row-text-highlight">${o}</span>${a}`)}else i=!1}i||this.renderValueWithoutRenderer(e)}updateHighlighted(t){var e;let i=this.getGui(),s=`ag-rich-select-row-${this.getCompId()}`;if((e=i.parentElement)==null||e.setAttribute("id",s),t){let r=this.getParentComponent().getAriaElement();rm(r,s),this.wrapperEl.setAttribute("data-active-option",s)}Ma(i.parentElement,t),this.addOrRemoveCssClass("ag-rich-select-row-selected",t)}populateWithoutRenderer(t,e){let i=this.gos.getDocument(),s=this.getGui(),r=i.createElement("span");r.style.overflow="hidden",r.style.textOverflow="ellipsis";let n=oi(Me(e)?e:t,!0);this.parsedValue=Me(n)?n:null,s.appendChild(r),this.renderValueWithoutRenderer(n),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})}renderValueWithoutRenderer(t){let e=this.getGui().querySelector("span");e&&(e.innerHTML=Me(t)?t:"&nbsp;")}populateWithRenderer(t,e){let i,s;return this.params.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.params,{value:t,valueFormatted:e,setTooltip:(r,n)=>{this.setTooltip({newTooltipText:r,shouldDisplayTooltip:n})}})),s&&(i=s.newAgStackInstance()),i&&Em(i,this.getGui()),i?(i.then(r=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(r)})}),!0):!1}onClick(){let t=this.getParentComponent(),e={type:V.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};t?.dispatchEvent(e)}};w([Q("userComponentFactory")],$m.prototype,"userComponentFactory",2);w([ke],$m.prototype,"postConstruct",1);var nc=class Fx extends sc{constructor(e){super(Fx.getTemplate(e?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0;let{cssIdentifier:i="default",ariaRole:s="listbox",listName:r}=e||{};this.cssIdentifier=i,this.ariaRole=s,this.listName=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){let i=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),s=this.eContainer;qt(s,this.ariaRole),ks(s,i)}addResizeObserver(){let e=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),i=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(i)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){let i=e.target;i.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=By(i)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case Ce.UP:case Ce.DOWN:this.navigate(e.key===Ce.UP)&&e.preventDefault();break;case Ce.PAGE_HOME:case Ce.PAGE_END:case Ce.PAGE_UP:case Ce.PAGE_DOWN:this.navigateToPage(e.key)!==null&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(pr(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;let i=this.lastFocusedRowIndex+(e?-1:1);return i<0||i>=this.model.getRowCount()?!1:(this.focusRow(i),!0)}navigateToPage(e,i="focused"){let s=!1;i==="focused"&&(i=this.getLastFocusedRow(),s=!0);let r=this.model.getRowCount()-1,n=-1;return e===Ce.PAGE_HOME?n=0:e===Ce.PAGE_END?n=r:e===Ce.PAGE_DOWN?n=Math.min(i+this.pageSize,r):e===Ce.PAGE_UP&&(n=Math.max(i-this.pageSize,0)),n===-1?null:(s?this.focusRow(n):this.ensureIndexVisible(n),n)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),this.animationFrameService.requestAnimationFrame(()=>{if(this.isScrolling=!1,!this.isAlive())return;let i=this.renderedRows.get(e);i&&i.eDiv.focus()}))}getComponentAt(e){let i=this.renderedRows.get(e);return i&&i.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((i,s)=>e(i.rowComponent,s))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(e,i=!0){let s=this.model.getRowCount();if(typeof e!="number"||e<0||e>=s)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;let r=e*this.rowHeight,n=r+this.rowHeight,o=this.getGui(),a=o.scrollTop,l=o.offsetHeight,h=a+l,c=i?0:this.rowHeight,d=a>r+c,p=h<n-c;if(d)return o.scrollTop=r,!0;if(p){let u=n-l;return o.scrollTop=u,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;let i=this.model.getRowCount();this.eContainer.style.height=`${i*this.rowHeight}px`,Zg(()=>this.eContainer.clientHeight>=i*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,i)=>this.removeRow(i))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;let i=this.getGui(),s=i.scrollTop,r=s+i.offsetHeight,n=Math.floor(s/this.rowHeight),o=Math.floor(r/this.rowHeight);this.pageSize=Math.floor((r-s)/this.rowHeight),this.ensureRowsRendered(n,o,e)}ensureRowsRendered(e,i,s){this.renderedRows.forEach((r,n)=>{(n<e||n>i)&&n!==this.lastFocusedRowIndex&&this.removeRow(n)}),s&&this.refreshRows();for(let r=e;r<=i;r++)this.renderedRows.has(r)||r<this.model.getRowCount()&&this.insertRow(r)}insertRow(e){let i=this.model.getRow(e),s=document.createElement("div");s.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),qt(s,this.ariaRole==="tree"?"treeitem":"option"),au(s,this.model.getRowCount()),lu(s,e+1),s.setAttribute("tabindex","-1"),s.style.height=`${this.rowHeight}px`,s.style.top=`${this.rowHeight*e}px`;let r=this.componentCreator(i,s);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),s.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",s):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",s):this.eContainer.appendChild(s),this.renderedRows.set(e,{rowComponent:r,eDiv:s,value:i})}removeRow(e){let i=this.renderedRows.get(e);this.eContainer.removeChild(i.eDiv),this.destroyBean(i.rowComponent),this.renderedRows.delete(e)}refreshRows(){let e=this.model.getRowCount();this.renderedRows.forEach((i,s)=>{var r,n;if(s>=e)this.removeRow(s);else{let o=this.model.getRow(s);(n=(r=this.model).areRowsEqual)!=null&&n.call(r,i.value,o)?this.componentUpdater(o,i.rowComponent):this.removeRow(s)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};w([Q("resizeObserverService")],nc.prototype,"resizeObserverService",2);w([Q("animationFrameService")],nc.prototype,"animationFrameService",2);w([Be("eContainer")],nc.prototype,"eContainer",2);w([ke],nc.prototype,"postConstruct",1);var Px=nc,VD=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Mu=class extends Ro{constructor(t){var e,i;super(zt(Qe({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(e=t?.template)!=null?e:VD,modalPicker:!1},t),{maxPickerHeight:(i=t?.maxPickerHeight)!=null?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;let{cellRowHeight:s,value:r,valueList:n,searchStringCreator:o}=t||{};s!=null&&(this.cellRowHeight=s),r!==void 0&&(this.value=r),n!=null&&(this.values=n),o&&(this.searchStringCreator=o)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();let{allowTyping:t,placeholder:e}=this.config;t?(this.eInput.setAutoComplete(!1).setInputPlaceholder(e),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{searchDebounceDelay:i=300}=this.config;this.clearSearchString=Qi(this.clearSearchString,i),this.renderSelectedValue(),t&&(this.eInput.onValueChange(s=>this.searchTextFromString(s)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){let t=this.gos.getDocument(),e=this.localeService.getLocaleTextFunc(),i=t.createElement("div");i.classList.add("ag-loading-text"),i.innerText=e("loadingOoo","Loading..."),this.eLoading=i}createListComponent(){this.listComponent=this.createBean(new Px({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));let t=(a,l)=>{};this.listComponent.setComponentUpdater(t),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,V.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});let{cellRowHeight:e}=this;e&&this.listComponent.setRowHeight(e);let i=this.listComponent.getGui(),s=this.listComponent.getAriaElement();this.addManagedListener(i,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(i,"mousedown",a=>a.preventDefault()),i.classList.add("ag-rich-select-list");let r=`ag-rich-select-list-${this.listComponent.getCompId()}`;s.setAttribute("id",r);let o=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);ks(s,o),am(this.eWrapper,s)}renderSelectedValue(){let{value:t,eDisplayField:e,config:i}=this,{allowTyping:s,initialInputValue:r}=this.config,n=this.config.valueFormatter?this.config.valueFormatter(t):t;if(s){this.eInput.setValue(r??n);return}let o;i.cellRenderer&&(o=this.userComponentFactory.getCellRendererDetails(this.config,{value:t,valueFormatted:n}));let a;if(o&&(a=o.newAgStackInstance()),a)ti(e),Em(a,e),a.then(l=>{this.addDestroyFunc(()=>this.getContext().destroyBean(l))});else{if(Me(this.value))e.innerText=n,e.classList.remove("ag-display-as-placeholder");else{let{placeholder:l}=i;Me(l)?(e.innerHTML=`${oi(l)}`,e.classList.add("ag-display-as-placeholder")):ti(e)}this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){let{currentList:t,value:e}=this;if(e==null||!t)return-1;for(let i=0;i<t.length;i++)if(t[i]===e)return i;return-1}highlightFilterMatch(){var t;(t=this.listComponent)==null||t.forEachRenderedRow((e,i)=>{e.highlightString(this.searchString)})}highlightSelectedValue(t){var e;t==null&&(t=this.getCurrentValueIndex()),this.highlightedItem=t,(e=this.listComponent)==null||e.forEachRenderedRow((i,s)=>{let r=t===-1?!1:this.highlightedItem===s;i.updateHighlighted(r)})}setRowHeight(t){t!==this.cellRowHeight&&(this.cellRowHeight=t),this.listComponent&&this.listComponent.setRowHeight(t)}createPickerComponent(){let{values:t}=this;return t&&this.setValueList({valueList:t}),this.listComponent}setSearchStringCreator(t){this.searchStringCreator=t}setValueList(t){let{valueList:e,refresh:i}=t;this.listComponent&&this.currentList!==e&&(this.currentList=e,this.listComponent.setModel({getRowCount:()=>e.length,getRow:s=>e[s],areRowsEqual:(s,r)=>s===r}),i&&(this.values?this.listComponent.refresh(!0):(this.values=e,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var t,e;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(t=this.eLoading)!=null&&t.offsetParent&&((e=this.eLoading.parentElement)==null||e.removeChild(this.eLoading));let i=this.getCurrentValueIndex();i!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(i),this.listComponent.refresh(!0),this.highlightSelectedValue(i)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;let t=this.eInput.getFocusableElement();t.focus(),t.select()}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(t){let{key:e}=t;if(e===Ce.BACKSPACE)this.searchString=this.searchString.slice(0,-1),e="";else if(!uu(t))return;t.preventDefault(),this.searchTextFromCharacter(e)}searchTextFromCharacter(t){this.searchString+=t,this.runSearch(),this.clearSearchString()}searchTextFromString(t){t==null&&(t=""),this.searchString=t,this.runSearch()}buildSearchStrings(t){let{valueFormatter:e=s=>s}=this.config,i;return typeof t[0]=="number"||typeof t[0]=="string"?i=t.map(s=>e(s)):typeof t[0]=="object"&&this.searchStringCreator&&(i=this.searchStringCreator(t)),i}getSuggestionsAndFilteredValues(t,e){let i=[],s=[];if(!t.length)return{suggestions:i,filteredValues:s};let{searchType:r="fuzzy",filterList:n}=this.config;if(r==="fuzzy"){let o=Yh(this.searchString,e,!0);i=o.values;let a=o.indices;if(n&&a.length)for(let l=0;l<a.length;l++)s.push(this.values[a[l]])}else i=e.filter((o,a)=>{let l=o.toLocaleLowerCase(),h=this.searchString.toLocaleLowerCase(),c=r==="match"?l.startsWith(h):l.indexOf(h)!==-1;return n&&c&&s.push(this.values[a]),c});return{suggestions:i,filteredValues:s}}filterListModel(t){let{filterList:e}=this.config;e&&(this.setValueList({valueList:t,refresh:!0}),this.alignPickerToComponent())}runSearch(){var t,e;let{values:i}=this,s=this.buildSearchStrings(i);if(!s){this.highlightSelectedValue(-1);return}let{suggestions:r,filteredValues:n}=this.getSuggestionsAndFilteredValues(this.searchString,s),{filterList:o,highlightMatch:a,searchType:l="fuzzy"}=this.config,h=n.length,c=!!(o&&this.searchString!=="");if(this.filterListModel(c?n:i),r.length){let d=c?0:s.indexOf(r[0]);this.selectListItem(d)}else if(this.highlightSelectedValue(-1),!c||h)(t=this.listComponent)==null||t.ensureIndexVisible(0);else if(c){this.getAriaElement().removeAttribute("data-active-option");let d=(e=this.listComponent)==null?void 0:e.getAriaElement();d&&rm(d,null)}a&&l!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var t;let e=(t=this.listComponent)==null?void 0:t.getGui(),i=this.currentList?this.currentList.length===0:!1;e?.classList.toggle("ag-hidden",i)}clearSearchString(){this.searchString=""}selectListItem(t,e){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||t<0||t>=this.currentList.length)return;this.listComponent.ensureIndexVisible(t,!e)&&!e&&this.listComponent.refresh(!0),this.highlightSelectedValue(t)}setValue(t,e,i){let s=this.currentList?this.currentList.indexOf(t):-1;return s===-1?this:(this.value=t,i||this.selectListItem(s),this.renderSelectedValue(),super.setValue(t,e))}createRowComponent(t){let e=new $m(this.config,this.eWrapper);e.setParentComponent(this.listComponent),this.getContext().createBean(e),e.setState(t);let{highlightMatch:i,searchType:s="fuzzy"}=this.config;return i&&s!=="fuzzy"&&e.highlightString(this.searchString),e}getRowForMouseEvent(t){let{listComponent:e}=this;if(!e)return-1;let s=(e?.getGui()).getBoundingClientRect(),r=e.getScrollTop(),n=t.clientY-s.top+r;return Math.floor(n/e.getRowHeight())}onPickerMouseMove(t){if(!this.listComponent)return;let e=this.getRowForMouseEvent(t);e!==-1&&e!=this.lastRowHovered&&(this.lastRowHovered=e,this.selectListItem(e,!0))}onNavigationKeyDown(t,e){t.preventDefault();let i=e===Ce.DOWN;if(!this.isPickerDisplayed&&i){this.showPicker();return}let s=this.highlightedItem,n=s===-1?0:s+(i?1:-1);this.selectListItem(n)}onPageNavigation(t){var e;if(!this.isPickerDisplayed)return;let i=(e=this.listComponent)==null?void 0:e.navigateToPage(t,this.highlightedItem);i!=null&&this.animationFrameService.requestAnimationFrame(()=>{if(!this.isAlive())return null;this.highlightSelectedValue(i)})}onEnterKeyDown(t){this.isPickerDisplayed&&(t.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(t,e){this.setValue(t,!1,!0),this.dispatchPickerEvent(t,e),this.hidePicker()}dispatchPickerEvent(t,e){let i={type:V.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:e,value:t};this.dispatchEvent(i)}getFocusableElement(){let{allowTyping:t}=this.config;return t?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(t){let e=t.key,{allowTyping:i}=this.config;switch(e){case Ce.LEFT:case Ce.RIGHT:i||t.preventDefault();break;case Ce.PAGE_HOME:case Ce.PAGE_END:if(i){t.preventDefault();let s=this.eInput.getInputElement(),r=e===Ce.PAGE_HOME?0:s.value.length;s.setSelectionRange(r,r);break}case Ce.PAGE_UP:case Ce.PAGE_DOWN:t.preventDefault(),this.onPageNavigation(e);break;case Ce.DOWN:case Ce.UP:this.onNavigationKeyDown(t,e);break;case Ce.ESCAPE:this.isPickerDisplayed&&(ys(this.listComponent.getGui())&&(t.preventDefault(),pr(t)),this.hidePicker());break;case Ce.ENTER:this.onEnterKeyDown(t);break;case Ce.TAB:this.onTabKeyDown();break;default:i||this.buildSearchStringFromKeyboardEvent(t)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};w([Q("userComponentFactory")],Mu.prototype,"userComponentFactory",2);w([Q("animationFrameService")],Mu.prototype,"animationFrameService",2);w([Be("eInput")],Mu.prototype,"eInput",2);var el=class Mx extends Am{constructor(e){super(e,Mx.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");let{minValue:e,maxValue:i,textFieldWidth:s,step:r,value:n,onValueChange:o}=this.config;e!=null&&this.setMinValue(e),i!=null&&this.setMaxValue(i),s!=null&&this.setTextFieldWidth(s),r!=null&&this.setStep(r),n!=null&&this.setValue(n),o!=null&&this.onValueChange(o)}onValueChange(e){let i=V.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,i,()=>{let s=parseFloat(this.eText.getValue());this.eSlider.setValue(s.toString(),!0),e(s||0)}),this.addManagedListener(this.eSlider,i,()=>{let s=this.eSlider.getValue();this.eText.setValue(s,!0),e(parseFloat(s))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,i){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),i||this.dispatchEvent({type:V.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};el.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;w([Be("eLabel")],el.prototype,"eLabel",2);w([Be("eSlider")],el.prototype,"eSlider",2);w([Be("eText")],el.prototype,"eText",2);w([ke],el.prototype,"init",1);var BD=el,Fn=class Sa extends nt{constructor(e={}){super(Sa.getTemplate(e)),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;let{enabled:i,items:s,suppressEnabledCheckbox:r,expanded:n,suppressToggleExpandOnEnableChange:o,useToggle:a}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=i??!0,this.items=s||[],this.useToggle=a??!1,this.alignItems=e.alignItems||"center",this.expanded=n??!0,r!=null&&(this.suppressEnabledCheckbox=r),o!=null&&(this.suppressToggleExpandOnEnableChange=o)}static getTemplate(e){let i=e.cssIdentifier||"default",s=e.direction||"vertical";return`
            <div class="ag-group ag-${i}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${i}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${s} ag-${i}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){let r=this.items;this.items=[],this.addItems(r)}let e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);let{onEnableChange:i,suppressOpenCloseIcons:s}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(s??!1),this.refreshChildDisplay(),vt(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(r=>{this.setEnabled(r,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(r)}),i!=null&&this.onEnableChange(i)}refreshChildDisplay(){var e;vt(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(e=this.eTitleBar)==null||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;let i=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(i),this}toggleGroupExpand(e){var i;let s=!1;if((i=this.eTitleBar)!=null&&i.isSuppressCollapse()&&!this.useToggle)e=!0,s=!0;else if(e=e??!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),vt(this.eContainer,e),s||this.dispatchEvent({type:e?Sa.EVENT_EXPANDED:Sa.EVENT_COLLAPSED}),this}addItems(e){e.forEach(i=>this.addItem(i))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,i){let s=this.eContainer,r=e instanceof nt?e.getGui():e;r.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),i?(s.insertAdjacentElement("afterbegin",r),this.items.unshift(r)):(s.appendChild(r),this.items.push(r))}hideItem(e,i){let s=this.items[i];vt(s,!e)}getItemIndex(e){let i=e instanceof nt?e.getGui():e;return this.items.indexOf(i)}setTitle(e){var i;return(i=this.eTitleBar)==null||i.setTitle(e),this}addTitleBarWidget(e){var i;return(i=this.eTitleBar)==null||i.addWidget(e),this}addCssClassToTitleBar(e){var i;(i=this.eTitleBar)==null||i.addCssClass(e)}dispatchEnableChangeEvent(e){let i={type:Sa.EVENT_ENABLE_CHANGE,enabled:e};this.dispatchEvent(i)}setEnabled(e,i,s){var r;return this.enabled=e,this.refreshDisabledStyles(),s||this.toggleGroupExpand(e),i||(this.cbGroupEnabled.setValue(e),(r=this.eToggle)==null||r.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListener(this,Sa.EVENT_ENABLE_CHANGE,i=>e(i.enabled)),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var i;return(i=this.eTitleBar)==null||i.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;let i=!this.enabled;this.eContainer.classList.toggle("ag-disabled",i),(e=this.eTitleBar)==null||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&i),this.eContainer.classList.toggle("ag-disabled-group-container",i)}setupTitleBar(){let e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){let e=this.createManagedBean(new YC(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListener(e,YC.EVENT_EXPAND_CHANGED,i=>this.toggleGroupExpand(i.expanded)),e}createToggleTitleBar(){var e;let i=this.createManagedBean(new Dx({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:s=>{this.setEnabled(s,!0),this.dispatchEnableChangeEvent(s)}}));return i.addCssClass("ag-group-title-bar"),i.addCssClass(`ag-${(e=this.params.cssIdentifier)!=null?e:"default"}-group-title-bar ag-unselectable`),this.eToggle=i,this.toggleGroupExpand(this.enabled),i}};Fn.EVENT_EXPANDED="expanded";Fn.EVENT_COLLAPSED="collapsed";Fn.EVENT_ENABLE_CHANGE="enableChange";w([Be("eToolbar")],Fn.prototype,"eToolbar",2);w([Be("cbGroupEnabled")],Fn.prototype,"cbGroupEnabled",2);w([Be("eContainer")],Fn.prototype,"eContainer",2);w([ke],Fn.prototype,"postConstruct",1);var HD=Fn,mg="ag-disabled-group-title-bar",tl=class Hg extends nt{constructor(e={}){super(Hg.getTemplate(e)),this.suppressOpenCloseIcons=!1;let{title:i,suppressOpenCloseIcons:s}=e;i&&i.length>0&&(this.title=i),s!=null&&(this.suppressOpenCloseIcons=s)}static getTemplate(e){var i;let s=(i=e.cssIdentifier)!=null?i:"default";return`
            <div class="ag-group-title-bar ag-${s}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${s}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild($s("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild($s("columnSelectOpen",this.gos,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",e=>{switch(e.key){case Ce.ENTER:case Ce.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case Ce.RIGHT:case Ce.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===Ce.RIGHT);break}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||$r(this.getGui(),e)}refreshOpenCloseIcons(e){let i=!this.suppressOpenCloseIcons;vt(this.eGroupOpenedIcon,i&&e),vt(this.eGroupClosedIcon,i&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){let i={type:Hg.EVENT_EXPAND_CHANGED,expanded:e};this.dispatchEvent(i)}setTitle(e){let i=this.getGui(),s=!!e&&e.length>0;e=s?e:void 0,this.eTitle.textContent=e??"",vt(i,s),e!==this.title&&(this.title=e);let r=i.classList.contains(mg);return this.refreshDisabledStyles(r),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){let i=this.getGui();e?(i.classList.add(mg),i.removeAttribute("tabindex")):(i.classList.remove(mg),typeof this.title=="string"?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex"))}};tl.EVENT_EXPAND_CHANGED="expandedChanged";w([Be("eGroupOpenedIcon")],tl.prototype,"eGroupOpenedIcon",2);w([Be("eGroupClosedIcon")],tl.prototype,"eGroupClosedIcon",2);w([Be("eTitle")],tl.prototype,"eTitle",2);w([ke],tl.prototype,"postConstruct",1);var YC=tl,Km=class extends sc{constructor(t=0,e){super('<div class="ag-menu-list" role="tree"></div>'),this.level=t,this.menuItems=[],this.params=e??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.handleFocusIn(t),onFocusOut:t=>this.handleFocusOut(t)})}onTabKeyDown(t){let e=this.getParentComponent(),i=e&&e.getGui();i&&i.classList.contains("ag-focus-managed")||t.preventDefault(),t.shiftKey&&this.closeIfIsChild(t)}handleKeyDown(t){switch(t.key){case Ce.UP:case Ce.RIGHT:case Ce.DOWN:case Ce.LEFT:t.preventDefault(),this.handleNavKey(t.key);break;case Ce.ESCAPE:this.closeIfIsChild()&&pr(t);break}}handleFocusIn(t){var e,i;let s=t.relatedTarget;!this.tabGuardCtrl.isTabGuard(s)&&(this.getGui().contains(s)||(i=(e=this.activeMenuItem)==null?void 0:e.getSubMenuGui())!=null&&i.contains(s))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(t){var e;let i=t.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||(e=this.activeMenuItem.getSubMenuGui())!=null&&e.contains(i)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(t){t!=null&&Cs.all(t.map(e=>e==="separator"?Cs.resolve({eGui:this.createSeparator()}):typeof e=="string"?(console.warn(`AG Grid: unrecognised menu item ${e}`),Cs.resolve({eGui:null})):this.addItem(e))).then(e=>{e.forEach(i=>{i?.eGui&&(this.appendChild(i.eGui),i.comp&&this.menuItems.push(i.comp))})})}addItem(t){let e=this.createManagedBean(new Fd);return e.init({menuItemDef:t,isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(e.setParentComponent(this),this.addManagedListener(e,Fd.EVENT_CLOSE_MENU,i=>{this.dispatchEvent(i)}),this.addManagedListener(e,Fd.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem}),{comp:e,eGui:e.getGui()}))}activateFirstItem(){let t=this.menuItems.filter(e=>!e.isDisabled())[0];t&&t.activate()}createSeparator(){return ms(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(t){switch(t){case Ce.UP:case Ce.DOWN:let i=this.findNextItem(t===Ce.UP);i&&i!==this.activeMenuItem&&i.activate();return}let e=this.gos.get("enableRtl")?Ce.RIGHT:Ce.LEFT;t===e?this.closeIfIsChild():this.openChild()}closeIfIsChild(t){let e=this.getParentComponent();return e&&e instanceof Fd?(t&&t.preventDefault(),e.closeSubMenu(),e.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(t){let e=this.menuItems.filter(r=>!r.isDisabled());if(!e.length)return;if(!this.activeMenuItem)return t?St(e):e[0];t&&e.reverse();let i,s=!1;for(let r=0;r<e.length;r++){let n=e[r];if(!s){n===this.activeMenuItem&&(s=!0);continue}i=n;break}return s&&!i?e[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};w([Q("focusService")],Km.prototype,"focusService",2);w([ke],Km.prototype,"postConstruct",1);var Ix=class extends sc{constructor(t){super(),this.wrappedComponent=t,this.setTemplateFromElement(t.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t)})}handleKeyDown(t){t.key===Ce.ESCAPE&&this.closePanel()}onTabKeyDown(t){t.defaultPrevented||(this.closePanel(),t.preventDefault())}closePanel(){let t=this.parentComponent;t.closeSubMenu(),setTimeout(()=>t.getGui().focus(),0)}};w([ke],Ix.prototype,"postConstruct",1);var il=class Ea extends Ie{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var i,s;let{menuItemDef:r,isAnotherSubMenuOpen:n,level:o,childComponent:a,contextParams:l}=e;return this.params=e.menuItemDef,this.level=o,this.isAnotherSubMenuOpen=n,this.childComponent=a,this.contextParams=l,this.cssClassPrefix=(s=(i=this.params.menuItemParams)==null?void 0:i.cssClassPrefix)!=null?s:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,zt(Qe({},r),{level:o,isAnotherSubMenuOpen:n,openSubMenu:c=>this.openSubMenu(c),closeSubMenu:()=>this.closeSubMenu(),closeMenu:c=>this.closeMenu(c),updateTooltip:(c,d)=>this.refreshTooltip(c,d),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(c=>{var d;this.menuItemComp=c;let p=(d=c.configureDefaults)==null?void 0:d.call(c);p&&this.configureDefaults(p===!0?void 0:p)})}addListeners(e,i){i?.suppressClick||this.addManagedListener(e,"click",s=>this.onItemSelected(s)),i?.suppressKeyboardSelect||this.addManagedListener(e,"keydown",s=>{(s.key===Ce.ENTER||s.key===Ce.SPACE)&&(s.preventDefault(),this.onItemSelected(s))}),i?.suppressMouseDown||this.addManagedListener(e,"mousedown",s=>{s.stopPropagation(),s.preventDefault()}),i?.suppressMouseOver||(this.addManagedListener(e,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){var i,s;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;let r=ms('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=r;let n,o=()=>{this.subMenuIsOpening=!1};if(this.childComponent){let c=this.createBean(new Ix(this.childComponent));c.setParentComponent(this);let d=c.getGui(),p="mouseenter",u=()=>this.cancelDeactivate();d.addEventListener(p,u),n=()=>d.removeEventListener(p,u),r.appendChild(d),this.childComponent.afterGuiAttached&&(o=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){let c=this.createBean(new Km(this.level+1,this.contextParams));c.setParentComponent(this),c.addMenuItems(this.params.subMenu),r.appendChild(c.getGui()),this.addManagedListener(c,Ea.EVENT_CLOSE_MENU,d=>this.dispatchEvent(d)),c.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),n=()=>this.destroyBean(c),e&&(o=()=>{c.activateFirstItem(),this.subMenuIsOpening=!1})}let a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:r}),l=this.localeService.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:r,positionCallback:a,anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:o});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var c,d;h&&h.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),n(),(d=(c=this.menuItemComp).setExpanded)==null||d.call(c,!1),this.eSubMenuGui=void 0},(s=(i=this.menuItemComp).setExpanded)==null||s.call(i,!0)}setAriaExpanded(e){this.suppressAria||$r(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var i,s;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(s=(i=this.menuItemComp).setActive)==null||s.call(i,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,i;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(i=(e=this.menuItemComp).setActive)==null||i.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var i,s;(s=(i=this.menuItemComp).select)==null||s.call(i),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gos.addGridCommonParams(Qe({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){let i={type:Ea.EVENT_CLOSE_MENU};e&&(e instanceof MouseEvent?i.mouseEvent=e:i.keyboardEvent=e),this.dispatchEvent(i)}onItemActivated(){let e={type:Ea.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),Ea.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),Ea.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var i,s,r;if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let n=this.menuItemComp.getGui(),o=(s=(i=this.menuItemComp).getRootElement)==null?void 0:s.call(i);o&&(e?.suppressRootStyles||n.classList.add("ag-menu-option-custom"),n=o),this.eGui=n,this.suppressRootStyles=!!e?.suppressRootStyles,this.suppressRootStyles||(n.classList.add(this.cssClassPrefix),(r=this.params.cssClasses)==null||r.forEach(a=>n.classList.add(a)),this.params.disabled&&n.classList.add(`${this.cssClassPrefix}-disabled`)),e?.suppressTooltip||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!e?.suppressAria,this.suppressAria||(qt(n,"treeitem"),zy(n,this.level+1),this.params.disabled&&sm(n,!0)),e?.suppressTabIndex||n.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(n,e),this.suppressFocus=!!e?.suppressFocus}refreshTooltip(e,i){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!e||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new qr({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:i})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};il.EVENT_CLOSE_MENU="closeMenu";il.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";il.ACTIVATION_DELAY=80;w([Q("popupService")],il.prototype,"popupService",2);w([Q("userComponentFactory")],il.prototype,"userComponentFactory",2);var Fd=il,No=class Wg extends nt{constructor(e){super(Wg.getTemplate(e)),this.config=e,this.closable=!0}static getTemplate(e){let i=e.cssIdentifier||"default";return`<div class="ag-panel ag-${i}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${i}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${i}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${i}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${i}-panel-content-wrapper"></div>
        </div>`}postConstruct(){let{component:e,closable:i,hideTitleBar:s,title:r,minWidth:n=250,width:o,minHeight:a=250,height:l,centered:h,popup:c,x:d,y:p}=this.config;this.positionableFeature=new za(this.getGui(),{minWidth:n,width:o,minHeight:a,height:l,centered:h,x:d,y:p,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);let u=this.getGui();e&&this.setBodyComponent(e),s?vt(this.eTitleBar,!1):(r&&this.setTitle(r),this.setClosable(i??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",m=>{if(u.contains(m.relatedTarget)||u.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(m.target)){m.preventDefault();return}let f=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");f&&f.focus()}),!(c&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){let e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){let i=this.closeButtonComp=new nt(Wg.CLOSE_BTN_TEMPLATE);this.getContext().createBean(i);let s=i.getGui(),r=Kt("close",this.gos);r.classList.add("ag-panel-title-bar-button-icon"),s.appendChild(r),this.addTitleBarButton(i),i.addManagedListener(s,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){let i=this.closeButtonComp.getGui();i.parentElement.removeChild(i),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,i){let s=this.eTitleBarButtons,r=s.children,n=r.length;i==null&&(i=n),i=Math.max(0,Math.min(i,n)),e.addCssClass("ag-panel-title-bar-button");let o=e.getGui();i===0?s.insertAdjacentElement("afterbegin",o):i===n?s.insertAdjacentElement("beforeend",o):r[i-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return Kh(this.eContentWrapper)}getBodyWidth(){return Ao(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));let e=this.getGui();e&&ys(e)&&this.close(),super.destroy()}};No.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';w([Be("eContentWrapper")],No.prototype,"eContentWrapper",2);w([Be("eTitleBar")],No.prototype,"eTitleBar",2);w([Be("eTitleBarButtons")],No.prototype,"eTitleBarButtons",2);w([Be("eTitle")],No.prototype,"eTitle",2);w([ke],No.prototype,"postConstruct",1);var WD=No,UD=class extends WD{constructor(t){super(zt(Qe({},t),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){let t=this.getGui(),{movable:e,resizable:i,maximizable:s}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(t,"focusin",r=>{this.popupService.bringPopupToFront(t)}),e&&this.setMovable(e),s&&this.setMaximizable(s),i&&this.setResizable(i)}renderComponent(){let t=this.getGui(),{alwaysOnTop:e,modal:i,title:s,afterGuiAttached:r}=this.config,n=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:i,eChild:t,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:e,ariaLabel:s||n("ariaLabelDialog","Dialog"),afterGuiAttached:r});o&&(this.close=o.hideFunc)}onClosed(t){var e,i;this.destroy(),(i=(e=this.config).closedCallback)==null||i.call(e,t)}toggleMaximize(){let t=this.positionableFeature.getPosition();if(this.isMaximized){let{x:e,y:i,width:s,height:r}=this.lastPosition;this.setWidth(s),this.setHeight(r),this.positionableFeature.offsetElement(e,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=t.x,this.lastPosition.y=t.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){vt(this.maximizeIcon,!this.isMaximized),vt(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(t=>t()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(t){this.positionableFeature.setResizable(t)}setMovable(t){this.positionableFeature.setMovable(t,this.eTitleBar)}setMaximizable(t){if(!t){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}let e=this.eTitleBar;if(!e||t===this.isMaximizable)return;let i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(e,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){let t=this.maximizeButtonComp=this.createBean(new nt('<div class="ag-dialog-button"></span>')),e=t.getGui();return this.maximizeIcon=Kt("maximize",this.gos),e.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Kt("minimize",this.gos),e.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),t}};w([Q("popupService")],UD.prototype,"popupService",2);var zD=0,Kr=class extends Ie{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl}),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){let t=this.gos.get("popupParent");return t||this.gridCtrl.getGui()}positionPopupForMenu(t){let{eventSource:e,ePopup:i}=t,s=this.getPopupIndex(i);if(s!==-1){let u=this.popupList[s];u.alignedToElement=e}let r=e.getBoundingClientRect(),n=this.getParentRect(),o=this.keepXYWithinBounds(i,r.top-n.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;let h=n.right-n.left-a,c;this.gos.get("enableRtl")?(c=p(),c<0&&(c=d(),this.setAlignedStyles(i,"left")),c>h&&(c=0,this.setAlignedStyles(i,"right"))):(c=d(),c>h&&(c=p(),this.setAlignedStyles(i,"right")),c<0&&(c=0,this.setAlignedStyles(i,"left"))),i.style.left=`${c}px`,i.style.top=`${o}px`;function d(){return r.right-n.left-2}function p(){return r.left-n.left-a}}positionPopupUnderMouseEvent(t){let{ePopup:e,nudgeX:i,nudgeY:s,skipObserver:r}=t;this.positionPopup({ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(t.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)})}calculatePointerAlign(t){let e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}positionPopupByComponent(t){let{ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:r,eventSource:n,alignSide:o="left",position:a="over",column:l,rowNode:h,type:c}=t,d=n.getBoundingClientRect(),p=this.getParentRect(),u=this.getPopupIndex(e);if(u!==-1){let f=this.popupList[u];f.alignedToElement=n}let m=()=>{let f=d.left-p.left;o==="right"&&(f-=e.offsetWidth-d.width);let g;return a==="over"?(g=d.top-p.top,this.setAlignedStyles(e,"over")):(this.setAlignedStyles(e,"under"),this.shouldRenderUnderOrAbove(e,d,p,t.nudgeY||0)==="under"?g=d.top-p.top+d.height:g=d.top-e.offsetHeight-(s||0)*2-p.top),{x:f,y:g}};this.positionPopup({ePopup:e,nudgeX:i,nudgeY:s,keepWithinBounds:r,updatePosition:m,postProcessCallback:()=>this.callPostProcessPopup(c,e,n,null,l,h)})}shouldRenderUnderOrAbove(t,e,i,s){let r=i.bottom-e.bottom,n=e.top-i.top,o=t.offsetHeight+s;return r>o?"under":n>o||n>r?"above":"under"}setAlignedStyles(t,e){let i=this.getPopupIndex(t);if(i===-1)return;let s=this.popupList[i],{alignedToElement:r}=s;!r||(["right","left","over","above","under"].forEach(o=>{r.classList.remove(`ag-has-popup-positioned-${o}`),t.classList.remove(`ag-popup-positioned-${o}`)}),!e)||(r.classList.add(`ag-has-popup-positioned-${e}`),t.classList.add(`ag-popup-positioned-${e}`))}callPostProcessPopup(t,e,i,s,r,n){let o=this.gos.getCallback("postProcessPopup");o&&o({column:r,rowNode:n,ePopup:e,type:t,eventSource:i,mouseEvent:s})}positionPopup(t){let{ePopup:e,keepWithinBounds:i,nudgeX:s,nudgeY:r,skipObserver:n,updatePosition:o}=t,a={width:0,height:0},l=(h=!1)=>{let{x:c,y:d}=o();h&&e.clientWidth===a.width&&e.clientHeight===a.height||(a.width=e.clientWidth,a.height=e.clientHeight,s&&(c+=s),r&&(d+=r),i&&(c=this.keepXYWithinBounds(e,c,1),d=this.keepXYWithinBounds(e,d,0)),e.style.left=`${c}px`,e.style.top=`${d}px`,t.postProcessCallback&&t.postProcessCallback())};if(l(),!n){let h=this.resizeObserverService.observeResize(e,()=>l(!0));setTimeout(()=>h(),Kr.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(t=>t.element)}getPopupList(){return this.popupList}getParentRect(){let t=this.gos.getDocument(),e=this.getPopupParent();return e===t.body?e=t.documentElement:getComputedStyle(e).position==="static"&&(e=e.offsetParent),vm(e)}keepXYWithinBounds(t,e,i){let s=i===0,r=s?"clientHeight":"clientWidth",n=s?"top":"left",o=s?"offsetHeight":"offsetWidth",a=s?"scrollTop":"scrollLeft",l=this.gos.getDocument(),h=l.documentElement,c=this.getPopupParent(),d=c.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),u=c===l.body,m=t[o],g=u?(s?mm:Eh)(h)+h[a]:c[r];u&&(g-=Math.abs(p[n]-d[n]));let y=g-m;return Math.min(Math.max(e,0),Math.abs(y))}addPopup(t){let e=this.gos.getDocument(),{eChild:i,ariaLabel:s,alwaysOnTop:r,positionCallback:n,anchorToElement:o}=t;if(!e)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);let l=this.createPopupWrapper(i,s,!!r),h=this.addEventListenersToPopup(zt(Qe({},t),{wrapperEl:l}));return n&&n(),this.addPopupToPopupList(i,l,h,o),{hideFunc:h}}initialisePopupPosition(t){let i=this.getPopupParent().getBoundingClientRect();Me(t.style.top)||(t.style.top=`${i.top*-1}px`),Me(t.style.left)||(t.style.left=`${i.left*-1}px`)}createPopupWrapper(t,e,i){let s=this.getPopupParent(),r=document.createElement("div"),{allThemes:n}=this.environment.getTheme();return n.length&&r.classList.add(...n),r.classList.add("ag-popup"),t.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||qt(t,"dialog"),ks(t,e),r.appendChild(t),s.appendChild(r),i?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),r}handleThemeChange(){let{allThemes:t}=this.environment.getTheme();for(let e of this.popupList){for(let i of Array.from(e.wrapper.classList))i.startsWith("ag-theme-")&&e.wrapper.classList.remove(i);t.length&&e.wrapper.classList.add(...t)}}addEventListenersToPopup(t){let e=this.gos.getDocument(),i=this.getPopupParent(),{wrapperEl:s,eChild:r,closedCallback:n,afterGuiAttached:o,closeOnEsc:a,modal:l}=t,h=!1,c=m=>{if(!s.contains(this.gos.getActiveDomElement()))return;m.key===Ce.ESCAPE&&!dr(m)&&u({keyboardEvent:m})},d=m=>u({mouseEvent:m}),p=m=>u({touchEvent:m}),u=(m={})=>{let{mouseEvent:f,touchEvent:g,keyboardEvent:y,forceHide:x}=m;!x&&(this.isEventFromCurrentPopup({mouseEvent:f,touchEvent:g},r)||h)||(h=!0,i.removeChild(s),e.removeEventListener("keydown",c),e.removeEventListener("mousedown",d),e.removeEventListener("touchstart",p),e.removeEventListener("contextmenu",d),this.eventService.removeEventListener(V.EVENT_DRAG_STARTED,d),n&&n(f||g||y),this.removePopupFromPopupList(r))};return o&&o({hidePopup:u}),window.setTimeout(()=>{a&&e.addEventListener("keydown",c),l&&(e.addEventListener("mousedown",d),this.eventService.addEventListener(V.EVENT_DRAG_STARTED,d),e.addEventListener("touchstart",p),e.addEventListener("contextmenu",d))},0),u}addPopupToPopupList(t,e,i,s){this.popupList.push({element:t,wrapper:e,hideFunc:i,instanceId:zD++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(t,s)}getPopupIndex(t){return this.popupList.findIndex(e=>e.element===t)}setPopupPositionRelatedToElement(t,e){let i=this.getPopupIndex(t);if(i===-1)return;let s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(n=>n&&n()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!e)return;let r=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:s.hideFunc});return s.stopAnchoringPromise=r,s.isAnchored=!0,r}removePopupFromPopupList(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(e=>e.element!==t)}keepPopupPositionedRelativeTo(t){let e=this.getPopupParent(),i=e.getBoundingClientRect(),{element:s,ePopup:r}=t,n=s.getBoundingClientRect(),o=i.top-n.top,a=i.left-n.left,l=o,h=a,c=r.style.top,d=parseInt(c.substring(0,c.length-1),10),p=r.style.left,u=parseInt(p.substring(0,p.length-1),10);return new Cs(m=>{this.getFrameworkOverrides().setInterval(()=>{let f=e.getBoundingClientRect(),g=s.getBoundingClientRect();if(g.top==0&&g.left==0&&g.height==0&&g.width==0){t.hidePopup();return}let x=f.top-g.top;if(x!=l){let A=this.keepXYWithinBounds(r,d+o-x,0);r.style.top=`${A}px`}l=x;let T=f.left-g.left;if(T!=h){let A=this.keepXYWithinBounds(r,u+a-T,1);r.style.left=`${A}px`}h=T},200).then(f=>{m(()=>{f!=null&&window.clearInterval(f)})})})}hasAnchoredPopup(){return this.popupList.some(t=>t.isAnchored)}isEventFromCurrentPopup(t,e){let{mouseEvent:i,touchEvent:s}=t,r=i||s;if(!r)return!1;let n=this.getPopupIndex(e);if(n===-1)return!1;for(let o=n;o<this.popupList.length;o++){let a=this.popupList[o];if(Wd(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(t){let e=this.gos.getDocument();for(;t&&t!==e.body;){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null)return!0;t=t.parentElement}return!1}getWrapper(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null}setAlwaysOnTop(t,e){let i=this.getWrapper(t);i&&(i.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(i))}bringPopupToFront(t){let e=this.getPopupParent(),i=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),s=i.length,r=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),n=r.length,o=this.getWrapper(t);if(!o||s<=1||!e.contains(t))return;let a=i.indexOf(o),l=o.querySelectorAll("div"),h=[];for(l.forEach(c=>{c.scrollTop!==0&&h.push([c,c.scrollTop])}),n?o.classList.contains("ag-always-on-top")?a!==s-1&&St(r).insertAdjacentElement("afterend",o):a!==s-n-1&&r[0].insertAdjacentElement("beforebegin",o):a!==s-1&&St(i).insertAdjacentElement("afterend",o);h.length;){let c=h.pop();c[0].scrollTop=c[1]}}};Kr.WAIT_FOR_POPUP_CONTENT_RESIZE=200;w([Q("focusService")],Kr.prototype,"focusService",2);w([Q("ctrlsService")],Kr.prototype,"ctrlsService",2);w([Q("resizeObserverService")],Kr.prototype,"resizeObserverService",2);w([ke],Kr.prototype,"postConstruct",1);Kr=w([Ye("popupService")],Kr);var jD=class extends nt{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(t,e){this.value=t,this.render(),this.updateSelected(e)}updateSelected(t){this.addOrRemoveCssClass("ag-autocomplete-row-selected",t)}setSearchString(t){var e;let i=!1;if(Me(t)){let s=(e=this.value)==null?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(s>=0){i=!0,this.hasHighlighting=!0;let r=s+t.length,n=oi(this.value.slice(0,s)),o=oi(this.value.slice(s,r)),a=oi(this.value.slice(r));this.getGui().lastElementChild.innerHTML=`${n}<b>${o}</b>${a}`}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var t;this.getGui().lastElementChild.innerHTML=(t=oi(this.value))!=null?t:"&nbsp;"}},Iu=class Ox extends Fo{constructor(e){super(Ox.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new Px({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:i=>this.autocompleteEntries[i]});let e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",i=>i.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,i){e.preventDefault();let s=this.autocompleteEntries.indexOf(this.selectedValue),r=i===Ce.UP?s-1:s+1;this.checkSetSelectedValue(r)}setSearch(e){this.searchString=e,Me(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,i){let s,r=!1,n=e.toLocaleLowerCase(),o=i.filter(a=>{let h=a.toLocaleLowerCase().indexOf(n),c=h===0,d=h>=0;return d&&(!s||!r&&c||r===c&&a.length<s.length)&&(s=a,r=c),d});return!s&&o.length&&(s=o[0]),{topMatch:s,allMatches:o}}runSearch(){var e,i;let{autocompleteEntries:s}=this.params,r=s.map(h=>{var c;return(c=h.displayValue)!=null?c:h.key}),n,o;if(this.params.useFuzzySearch)n=Yh(this.searchString,r,!0).values,o=n.length?n[0]:void 0;else{let h=this.runContainsSearch(this.searchString,r);n=h.allMatches,o=h.topMatch}let a=s.filter(({key:h,displayValue:c})=>n.includes(c??h));if(!a.length&&this.selectedValue&&((i=(e=this.params)==null?void 0:e.forceLastSelection)!=null&&i.call(e,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!o)return;let l=n.indexOf(o);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){let i=this.autocompleteEntries[e];this.selectedValue!==i&&(this.selectedValue=i,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((s,r)=>{s.updateSelected(e===r)}))}createRowComponent(e){var i;let s=new jD;return this.getContext().createBean(s),s.setState((i=e.displayValue)!=null?i:e.key,e===this.selectedValue),s}onMouseMove(e){let i=this.virtualList.getGui().getBoundingClientRect(),s=this.virtualList.getScrollTop(),r=e.clientY-i.top+s,n=Math.floor(r/this.virtualList.getRowHeight());this.checkSetSelectedValue(n)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!=null?e:null}};Iu.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;w([Be("eList")],Iu.prototype,"eList",2);w([ke],Iu.prototype,"init",1);var $D=Iu,Pn=class ph extends nt{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){let i=Dr(e);this.updateValue(i),this.updateAutocompleteList(i)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:ph.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var i,s,r,n;let o=(s=(i=this.listGenerator)==null?void 0:i.call(this,e,this.lastPosition))!=null?s:{enabled:!1};if((!o.type||o.type!==((r=this.autocompleteListParams)==null?void 0:r.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=o,(n=this.autocompleteListParams)!=null&&n.enabled){this.isListOpen||this.openList();let{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){let i=e.key;switch(this.updateLastPosition(),i){case Ce.ENTER:this.onEnterKeyDown(e);break;case Ce.TAB:this.onTabKeyDown(e);break;case Ce.DOWN:case Ce.UP:this.onUpDownKeyDown(e,i);break;case Ce.LEFT:case Ce.RIGHT:case Ce.PAGE_HOME:case Ce.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case Ce.ESCAPE:this.onEscapeKeyDown(e);break;case Ce.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;let i=(e=this.autocompleteList)==null?void 0:e.getSelectedValue();i&&(this.closeList(),this.dispatchEvent({type:ph.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:i,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,i){var s;e.preventDefault(),this.isListOpen?(s=this.autocompleteList)==null||s.onNavigationKeyDown(e,i):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!=null?e:null)}setCaret(e,i){let s=this.gos.getDocument(),r=this.gos.getActiveDomElement();i&&(!r||r===s.body)&&this.eAutocompleteInput.getFocusableElement().focus();let n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(e,e),e===n.value.length&&(n.scrollLeft=n.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!=null?e:0}validate(e){var i;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((i=this.validationMessage)!=null?i:""),this.valid=!this.validationMessage,this.dispatchEvent({type:ph.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new $D({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));let e=this.autocompleteList.getGui(),i={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},s=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(i),ariaLabel:this.listAriaLabel});this.hidePopup=s.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:ph.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return Dr(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){let{value:i,position:s,silent:r,updateListOnlyIfOpen:n,restoreFocus:o}=e;this.eAutocompleteInput.setValue(i,!0),this.setCaret(s??this.lastPosition,o),r||this.updateValue(i),(!n||this.isListOpen)&&this.updateAutocompleteList(i)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};Pn.EVENT_VALUE_CHANGED="eventValueChanged";Pn.EVENT_VALUE_CONFIRMED="eventValueConfirmed";Pn.EVENT_OPTION_SELECTED="eventOptionSelected";Pn.EVENT_VALID_CHANGED="eventValidChanged";w([Q("popupService")],Pn.prototype,"popupService",2);w([Be("eAutocompleteInput")],Pn.prototype,"eAutocompleteInput",2);w([ke],Pn.prototype,"postConstruct",1);var KD=Pn,Mn=class kd extends nt{constructor(e,i,s,r){super(),this.dragSourceDropTarget=e,this.ghost=i,this.horizontal=s,this.template=r}init(){var e;this.setTemplate((e=this.template)!=null?e:kd.TEMPLATE);let i=this.getGui();this.addElementClasses(i),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(Kt("columnDrag",this.gos)),this.eButton.appendChild(Kt("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){let e=this.localeService.getLocaleTextFunc(),i=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(i,e),ks(this.getGui(),i.join(". "))}addAdditionalAriaInstructions(e,i){if(this.isRemovable()){let s=i("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(s)}}setupTooltip(){let e=()=>{let i=this.getTooltip();this.setTooltip({newTooltipText:i})};e(),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,e)}getDragSourceId(){}getDefaultIconName(){return at.ICON_NOT_ALLOWED}addDragSource(){let{dragAndDropService:e,eDragHandle:i}=this,s=this.createGetDragItem(),r=this.getDefaultIconName(),n={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:i,getDefaultIconName:()=>r,getDragItem:s,dragItemName:this.getDisplayName()};e.addDragSource(n,!0),this.addDestroyFunc(()=>e.removeDragSource(n))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){vt(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();let e={type:kd.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",s=>this.onKeyDown(s)),this.addManagedListener(this.eButton,"click",s=>{this.dispatchEvent(e),s.stopPropagation()});let i=new _i(this.eButton);this.addManagedListener(i,_i.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(i.destroy.bind(i))}onKeyDown(e){e.key===Ce.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchEvent({type:kd.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){let e=this.getDisplayValue(),i=oi(e);this.eText.innerHTML=i}addElementClasses(e,i){i=i?`-${i}`:"";let s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${i}`,`ag-column-drop-${s}-cell${i}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};Mn.EVENT_COLUMN_REMOVE="columnRemove";Mn.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;w([Q("dragAndDropService")],Mn.prototype,"dragAndDropService",2);w([Be("eText")],Mn.prototype,"eText",2);w([Be("eDragHandle")],Mn.prototype,"eDragHandle",2);w([Be("eButton")],Mn.prototype,"eButton",2);w([ke],Mn.prototype,"init",1);var XD=Mn,oc=class Tr extends nt{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state=Tr.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),qt(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){let{dropZoneTarget:i,dragSource:s}=e;return i.contains(s.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,ti(this.getGui()),ti(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new Dn(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new za(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),ks(this.ePillDropList,this.getAriaLabel())}handleKeyDown(e){let i=!this.horizontal,s=e.key===Ce.DOWN,r=e.key===Ce.UP;if(!i){let o=this.gos.get("enableRtl");s=!o&&e.key===Ce.RIGHT||o&&e.key===Ce.LEFT,r=!o&&e.key===Ce.LEFT||o&&e.key===Ce.RIGHT}if(!s&&!r)return;let n=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,r);n&&(e.preventDefault(),n.focus())}addElementClasses(e,i){i=i?`-${i}`:"";let s=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${i}`,`ag-column-drop-${s}${i}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){let i=this.getNewInsertIndex(e);if(i<0)return!1;let s=this.minimumAllowedNewInsertIndex(),r=Math.max(s,i),n=r!==this.insertIndex;return n&&(this.insertIndex=r),n}getNewInsertIndex(e){let i=e.event,s=this.horizontal?i.clientX:i.clientY,r=this.childPillComponents.map(o=>o.getGui().getBoundingClientRect()),n=r.findIndex(o=>this.horizontal?o.right>s&&o.left<s:o.top<s&&o.bottom>s);if(n===-1){let o=this.gos.get("enableRtl");return r.every(h=>s>(this.horizontal?h.right:h.bottom))?o&&this.horizontal?0:this.childPillComponents.length:r.every(h=>s<(this.horizontal?h.left:h.top))?o&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=n?n+1:n}checkDragStartedBySelf(e){this.state===Tr.STATE_NOT_DRAGGING&&(this.state=Tr.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){let i=this.getItems(e.dragSource.getDragItem());this.state=Tr.STATE_NEW_ITEMS_IN;let s=i.filter(n=>this.isItemDroppable(n,e)),r=s.every(n=>this.childPillComponents.map(o=>o.getItem()).indexOf(n)!==-1);if(s.length!==0){if(this.potentialDndItems=s,r){this.state=Tr.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return Sy(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state===Tr.STATE_REARRANGE_ITEMS){let i=this.getItems(e.dragSource.getDragItem());this.removeItems(i)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state=Tr.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let e=!1;this.state===Tr.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),e=!0):e=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!e)&&this.refreshGui()}this.state=Tr.STATE_NOT_DRAGGING}removeItems(e){let i=this.getExistingItems().filter(s=>!Ls(e,s));this.updateItems(i)}addItems(e){if(!e)return;let i=this.getExistingItems().slice(),s=e.filter(r=>i.indexOf(r)<0);_g(i,s,this.insertIndex),this.updateItems(i)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){let i=this.getNonGhostItems().slice();return _g(i,e,this.insertIndex),Rr(i,this.getExistingItems())?!1:(this.updateItems(i),!0)}refreshGui(){let e=this.ePillDropList.scrollTop,i=this.resizeEnabled,s=this.getFocusedItem(),r=this.focusService.findNextFocusableElement();r||(r=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),i&&this.toggleResizable(i),this.focusService.isKeyboardMode()&&this.restoreFocus(s,r)}getFocusedItem(){let e=this.getGui(),i=this.gos.getActiveDomElement();return e.contains(i)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(i):-1}restoreFocus(e,i){let s=this.getGui(),r=Array.from(s.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;r.length===0&&i.focus();let n=Math.min(r.length-1,e),o=r[n];o&&o.focus()}focusList(e){let i=e?this.childPillComponents.length-1:0;this.restoreFocus(i,this.getFocusableElement())}getNonGhostItems(){let e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(i=>!Ls(this.potentialDndItems,i)):e}addItemsToGui(){let i=this.getNonGhostItems().map(s=>this.createItemComponent(s,!1));if(this.isPotentialDndItems()){let s=this.potentialDndItems.map(r=>this.createItemComponent(r,!0));this.insertIndex>=i.length?i.push(...s):i.splice(this.insertIndex,0,...s)}this.appendChild(this.ePillDropList),i.forEach((s,r)=>{r>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(s.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((e,i)=>{let s=e.getGui();lu(s,i+1),au(s,this.childPillComponents.length)})}createItemComponent(e,i){let s=this.createPillComponent(e,this.dropTarget,i,this.horizontal);return s.addEventListener(XD.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[e])),this.context.createBean(s),this.guiDestroyFunctions.push(()=>this.destroyBean(s)),i||this.childPillComponents.push(s),s}addIconAndTitleToGui(){let{title:e,icon:i}=this.params;if(!e||!i)return;let s=document.createElement("div");if($h(s,!0),this.addElementClasses(s,"title-bar"),this.addElementClasses(i,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),s.appendChild(i),!this.horizontal){let r=document.createElement("span");this.addElementClasses(r,"title"),r.innerHTML=e,s.appendChild(r)}this.appendChild(s)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){let{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;let i=document.createElement("span");i.innerHTML=e,this.addElementClasses(i,"empty-message"),this.ePillDropList.appendChild(i)}addArrow(e){if(this.horizontal){let i=this.gos.get("enableRtl"),s=Kt(i?"smallLeft":"smallRight",this.gos);this.addElementClasses(s,"cell-separator"),e.appendChild(s)}}};oc.STATE_NOT_DRAGGING="notDragging";oc.STATE_NEW_ITEMS_IN="newItemsIn";oc.STATE_REARRANGE_ITEMS="rearrangeItems";w([Q("focusService")],oc.prototype,"focusService",2);w([Q("dragAndDropService")],oc.prototype,"dragAndDropService",2);var YD=["touchstart","touchend","touchmove","touchcancel"],Xm=class{constructor(t="javascript"){this.frameworkName=t,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(t,e){return new Cs(i=>{i(window.setInterval(t,e))})}addEventListener(t,e,i,s){let r=Ls(YD,e);t.addEventListener(e,i,{capture:!!s,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(t){return null}isFrameworkComponent(t){return!1}getDocLink(t){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${t?`/${t}`:""}`}},_n=class extends Ie{getNextCellToFocus(t,e,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){let i=t===Ce.UP,s=t===Ce.DOWN,r=t===Ce.LEFT,n,o;if(i||s)o=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),n=e.column;else{let a=this.columnModel.getAllDisplayedColumns(),l=this.gos.get("enableRtl");o=e.rowIndex,n=r!==l?a[0]:St(a)}return{rowIndex:o,rowPinned:null,column:n}}getNextCellToFocusWithoutCtrlPressed(t,e){let i=e,s=!1;for(;!s;){switch(t){case Ce.UP:i=this.getCellAbove(i);break;case Ce.DOWN:i=this.getCellBelow(i);break;case Ce.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case Ce.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+t);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(t){let e=t.column,i;switch(t.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:i=this.rowModel.getRow(t.rowIndex);break}return i?!e.isSuppressNavigable(i):!1}getCellToLeft(t){if(!t)return null;let e=this.columnModel.getDisplayedColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellToRight(t){if(!t)return null;let e=this.columnModel.getDisplayedColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getRowBelow(t){let e=t.rowIndex,i=t.rowPinned;if(this.isLastRowInContainer(t))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let s=this.rowModel.getRow(t.rowIndex),r=this.getNextStickyPosition(s);return r||{rowIndex:e+1,rowPinned:i}}getNextStickyPosition(t,e){if(!this.gos.isGroupRowsSticky()||!t||!t.sticky)return;let i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===t.rowIndex),s=[];i?s=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):s=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let r=e?-1:1,n=s.findIndex(a=>a.getRowNode().rowIndex===t.rowIndex),o=s[n+r];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(t){if(!t)return null;let e=this.getRowBelow(t);return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}isLastRowInContainer(t){let e=t.rowPinned,i=t.rowIndex;return e==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:e==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(t){let e=t.rowIndex,i=t.rowPinned;if(i?e===0:e===this.paginationProxy.getPageFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let r=this.rowModel.getRow(t.rowIndex),n=this.getNextStickyPosition(r,!0);return n||{rowIndex:e-1,rowPinned:i}}getCellAbove(t){if(!t)return null;let e=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){let e=this.columnModel.getAllDisplayedColumns(),i=t.rowIndex,s=t.rowPinned,r=this.columnModel.getDisplayedColAfter(t.column);if(!r){r=e[0];let n=this.getRowBelow(t);if(rt(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;i=n?n.rowIndex:null,s=n?n.rowPinned:null}return{rowIndex:i,column:r,rowPinned:s}}getNextTabbedCellBackwards(t){let e=this.columnModel.getAllDisplayedColumns(),i=t.rowIndex,s=t.rowPinned,r=this.columnModel.getDisplayedColBefore(t.column);if(!r){r=St(e);let n=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(rt(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;i=n?n.rowIndex:null,s=n?n.rowPinned:null}return{rowIndex:i,column:r,rowPinned:s}}};w([Q("columnModel")],_n.prototype,"columnModel",2);w([Q("rowModel")],_n.prototype,"rowModel",2);w([Q("rowRenderer")],_n.prototype,"rowRenderer",2);w([Q("pinnedRowModel")],_n.prototype,"pinnedRowModel",2);w([Q("paginationProxy")],_n.prototype,"paginationProxy",2);_n=w([Ye("cellNavigationService")],_n);var yo=class extends Ie{constructor(){super(...arguments),this.consuming=!1}setBeans(t){this.logger=t.create("AlignedGridsService")}getAlignedGridApis(){var t;let e=(t=this.gos.get("alignedGrids"))!=null?t:[],i=typeof e=="function";typeof e=="function"&&(e=e());let s=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var o;if(!n){Ar("alignedGrids contains an undefined option."),i||Ar(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Ar(s());return}if(n instanceof gt)return n;let a=n;return"current"in a?(o=a.current)==null?void 0:o.api:(a.api||Ar(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${s()}`),a.api)}).filter(n=>!!n&&!n.isDestroyed())}init(){this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(t){this.consuming||this.getAlignedGridApis().forEach(e=>{if(e.isDestroyed())return;let i=e.__getAlignedGridService();t(i)})}onEvent(t){this.consuming=!0,t(),this.consuming=!1}fireColumnEvent(t){this.fireEvent(e=>{e.onColumnEvent(t)})}fireScrollEvent(t){t.direction==="horizontal"&&this.fireEvent(e=>{e.onScrollEvent(t)})}onScrollEvent(t){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(t.left,!0)})}getMasterColumns(t){let e=[];return t.columns?t.columns.forEach(i=>{e.push(i)}):t.column&&e.push(t.column),e}getColumnIds(t){let e=[];return t.columns?t.columns.forEach(i=>{e.push(i.getColId())}):t.column&&e.push(t.column.getColId()),e}onColumnEvent(t){this.onEvent(()=>{switch(t.type){case V.EVENT_COLUMN_MOVED:case V.EVENT_COLUMN_VISIBLE:case V.EVENT_COLUMN_PINNED:case V.EVENT_COLUMN_RESIZED:let e=t;this.processColumnEvent(e);break;case V.EVENT_COLUMN_GROUP_OPENED:let i=t;this.processGroupOpenedEvent(i);break;case V.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(t){t.columnGroups.forEach(e=>{let i=null;if(e){let s=e.getGroupId();i=this.columnModel.getProvidedColumnGroup(s)}e&&!i||(this.logger.log("onColumnEvent-> processing "+t+" expanded = "+e.isExpanded()),this.columnModel.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged"))})}processColumnEvent(t){var e;let i=t.column,s=null;if(i&&(s=this.columnModel.getPrimaryColumn(i.getColId())),i&&!s)return;let r=this.getMasterColumns(t);switch(t.type){case V.EVENT_COLUMN_MOVED:{let h=t,d=t.api.getColumnState().map(p=>({colId:p.colId}));this.columnModel.applyColumnState({state:d,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} toIndex = ${h.toIndex}`)}break;case V.EVENT_COLUMN_VISIBLE:{let h=t,d=t.api.getColumnState().map(p=>({colId:p.colId,hide:p.hide}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} visible = ${h.visible}`)}break;case V.EVENT_COLUMN_PINNED:{let h=t,d=t.api.getColumnState().map(p=>({colId:p.colId,pinned:p.pinned}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} pinned = ${h.pinned}`)}break;case V.EVENT_COLUMN_RESIZED:let a=t,l={};r.forEach(h=>{this.logger.log(`onColumnEvent-> processing ${t.type} actualWidth = ${h.getActualWidth()}`),l[h.getId()]={key:h.getColId(),newWidth:h.getActualWidth()}}),(e=a.flexColumns)==null||e.forEach(h=>{l[h.getId()]&&delete l[h.getId()]}),this.columnModel.setColumnWidths(Object.values(l),!1,a.finished,"alignedGridChanged");break}let o=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(a=>{a.setGridOption("alwaysShowVerticalScroll",o)})}};w([Q("columnModel")],yo.prototype,"columnModel",2);w([Q("ctrlsService")],yo.prototype,"ctrlsService",2);w([lr(0,Xs("loggerFactory"))],yo.prototype,"setBeans",1);w([ke],yo.prototype,"init",1);yo=w([Ye("alignedGridsService")],yo);var wo=class extends Ie{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,V.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(t){var e;let{newValue:i,clearSelection:s,suppressFinishActions:r,rangeSelect:n,nodes:o,event:a,source:l="api"}=t;if(o.length===0)return 0;if(o.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;let h=this.groupSelectsChildren&&t.groupSelectsFiltered===!0,c=o.map(p=>p.footer?p.sibling:p);if(n){if(o.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let p=null;if(l==="checkboxSelected"&&i===!1&&this.lastRowNode&&(this.lastRowNode.id?p=this.lastRowNode:this.lastRowNode=null),p==null&&(p=this.getLastSelectedNode()),p){let u=c[0];if(u!==p&&this.isMultiselect())return this.selectRange(u,p,i,l)}}this.lastRowNode=i?null:c[0];let d=0;for(let p=0;p<c.length;p++){let u=c[p];h&&u.group||u.selectThisNode(i,a,l)&&d++,this.groupSelectsChildren&&((e=u.childrenAfterGroup)!=null&&e.length)&&(d+=this.selectChildren(u,i,h,l))}if(!r&&(i&&(s||!this.isMultiselect())&&(d+=this.clearOtherNodes(c[0],l)),d>0)){this.updateGroupsFromChildrenSelections(l);let u={type:V.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(u)}return d}selectRange(t,e,i=!0,s){let r=this.rowModel.getNodesInRangeForSelection(t,e),n=0;r.forEach(a=>{if(a.group&&this.groupSelectsChildren)return;a.selectThisNode(i,void 0,s)&&n++}),this.updateGroupsFromChildrenSelections(s);let o={type:V.EVENT_SELECTION_CHANGED,source:s};return this.eventService.dispatchEvent(o),n}selectChildren(t,e,i,s){let r=i?t.childrenAfterAggFilter:t.childrenAfterGroup;return rt(r)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:r})}getLastSelectedNode(){let t=Array.from(this.selectedNodes.keys());if(t.length==0)return null;let e=this.selectedNodes.get(St(t));return e||null}getSelectedNodes(){let t=[];return this.selectedNodes.forEach(e=>{e&&t.push(e)}),t}getSelectedRows(){let t=[];return this.selectedNodes.forEach(e=>{e&&e.data&&t.push(e.data)}),t}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(t){let e=new Map;this.selectedNodes.forEach((i,s)=>{i&&t(i)&&e.set(s,i)}),this.selectedNodes=e}updateGroupsFromChildrenSelections(t,e){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let s=this.rowModel.getRootNode();e||(e=new Pu(!0,s),e.setInactive());let r=!1;return e.forEachChangedNodeDepthFirst(n=>{if(n!==s){let o=n.calculateSelectedFromChildren();r=n.selectThisNode(o===null?!1:o,void 0,t)||r}}),r}clearOtherNodes(t,e){let i=new Map,s=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==t.id){let n=this.selectedNodes.get(r.id);s+=n.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),this.groupSelectsChildren&&r.parent&&i.set(r.parent.id,r.parent)}}),i.forEach(r=>{let n=r.calculateSelectedFromChildren();r.selectThisNode(n===null?!1:n,void 0,e)}),s}onRowSelected(t){let e=t.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))}syncInRowNode(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)}syncInOldRowNode(t,e){if(Me(e)&&t.id!==e.id&&e){let s=e.id;this.selectedNodes.get(s)==t&&this.selectedNodes.set(e.id,e)}}syncInNewRowNode(t){this.selectedNodes.has(t.id)?(t.setSelectedInitialValue(!0),this.selectedNodes.set(t.id,t)):t.setSelectedInitialValue(!1)}reset(t){let e=this.getSelectionCount();if(this.resetNodes(),e){let i={type:V.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(i)}}resetNodes(){var t;(t=this.selectedNodes)==null||t.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let e=this.rowModel.getTopLevelNodes();if(e===null)return;let i=[];function s(r){for(let n=0,o=r.length;n<o;n++){let a=r[n];if(a.isSelected())i.push(a);else{let l=a;l.group&&l.children&&s(l.children)}}}return s(e),i}isEmpty(){let t=0;return this.selectedNodes.forEach(e=>{e&&t++}),t===0}deselectAllRowNodes(t){let e=a=>a.selectThisNode(!1,void 0,s),i=this.rowModel.getType()==="clientSide",{source:s,justFiltered:r,justCurrentPage:n}=t;if(n||r){if(!i){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(r,n).forEach(e)}else this.selectedNodes.forEach(a=>{a&&e(a)}),this.reset(s);i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s);let o={type:V.EVENT_SELECTION_CHANGED,source:s};this.eventService.dispatchEvent(o)}getSelectedCounts(t,e){let i=0,s=0,r=n=>{this.groupSelectsChildren&&n.group||(n.isSelected()?i++:n.selectable&&s++)};return this.getNodesToSelect(t,e).forEach(r),{selectedCount:i,notSelectedCount:s}}getSelectAllState(t,e){let{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(t,e);return i===0&&s===0?!1:i>0&&s>0?null:i>0}hasNodesToSelect(t=!1,e=!1){return this.getNodesToSelect(t,e).filter(i=>i.selectable).length>0}getNodesToSelect(t=!1,e=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let i=[];if(e)return this.paginationProxy.forEachNodeOnPage(r=>{if(!r.group){i.push(r);return}if(!r.expanded){let n=o=>{var a;i.push(o),(a=o.childrenAfterFilter)!=null&&a.length&&o.childrenAfterFilter.forEach(n)};n(r);return}this.groupSelectsChildren||i.push(r)}),i;let s=this.rowModel;return t?(s.forEachNodeAfterFilter(r=>{i.push(r)}),i):(s.forEachNode(r=>{i.push(r)}),i)}selectAllRowNodes(t){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:e,justFiltered:i,justCurrentPage:s}=t,r=o=>o.selectThisNode(!0,void 0,e);this.getNodesToSelect(i,s).forEach(r),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e);let n={type:V.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(n)}getSelectionState(){let t=[];return this.selectedNodes.forEach(e=>{e?.id&&t.push(e.id)}),t.length?t:null}setSelectionState(t,e){if(!Array.isArray(t))return;let i=new Set(t),s=[];this.rowModel.forEachNode(r=>{i.has(r.id)&&s.push(r)}),this.setNodesSelected({newValue:!0,nodes:s,source:e})}};w([Q("rowModel")],wo.prototype,"rowModel",2);w([Q("paginationProxy")],wo.prototype,"paginationProxy",2);w([ke],wo.prototype,"init",1);wo=w([Ye("selectionService")],wo);var xo=class{constructor(t){this.viaApi=(e,...i)=>(et(`Since v31, 'columnApi.${e}' is deprecated and moved to 'api.${e}'.`),this.api[e](...i)),this.api=t}sizeColumnsToFit(t){this.viaApi("sizeColumnsToFit",t)}setColumnGroupOpened(t,e){this.viaApi("setColumnGroupOpened",t,e)}getColumnGroup(t,e){return this.viaApi("getColumnGroup",t,e)}getProvidedColumnGroup(t){return this.viaApi("getProvidedColumnGroup",t)}getDisplayNameForColumn(t,e){return this.viaApi("getDisplayNameForColumn",t,e)}getDisplayNameForColumnGroup(t,e){return this.viaApi("getDisplayNameForColumnGroup",t,e)}getColumn(t){return this.viaApi("getColumn",t)}getColumns(){return this.viaApi("getColumns")}applyColumnState(t){return this.viaApi("applyColumnState",t)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(t){this.viaApi("setColumnGroupState",t)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(t){return this.viaApi("getDisplayedColAfter",t)}getDisplayedColBefore(t){return this.viaApi("getDisplayedColBefore",t)}setColumnVisible(t,e){this.viaApi("setColumnVisible",t,e)}setColumnsVisible(t,e){this.viaApi("setColumnsVisible",t,e)}setColumnPinned(t,e){this.viaApi("setColumnPinned",t,e)}setColumnsPinned(t,e){this.viaApi("setColumnsPinned",t,e)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(t,e){this.viaApi("moveColumn",t,e)}moveColumnByIndex(t,e){this.viaApi("moveColumnByIndex",t,e)}moveColumns(t,e){this.viaApi("moveColumns",t,e)}moveRowGroupColumn(t,e){this.viaApi("moveRowGroupColumn",t,e)}setColumnAggFunc(t,e){this.viaApi("setColumnAggFunc",t,e)}setColumnWidth(t,e,i=!0,s){this.viaApi("setColumnWidth",t,e,i,s)}setColumnWidths(t,e=!0,i){this.viaApi("setColumnWidths",t,e,i)}setPivotMode(t){this.viaApi("setPivotMode",t)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(t,e){return this.viaApi("getPivotResultColumn",t,e)}setValueColumns(t){this.viaApi("setValueColumns",t)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(t){this.viaApi("removeValueColumn",t)}removeValueColumns(t){this.viaApi("removeValueColumns",t)}addValueColumn(t){this.viaApi("addValueColumn",t)}addValueColumns(t){this.viaApi("addValueColumns",t)}setRowGroupColumns(t){this.viaApi("setRowGroupColumns",t)}removeRowGroupColumn(t){this.viaApi("removeRowGroupColumn",t)}removeRowGroupColumns(t){this.viaApi("removeRowGroupColumns",t)}addRowGroupColumn(t){this.viaApi("addRowGroupColumn",t)}addRowGroupColumns(t){this.viaApi("addRowGroupColumns",t)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(t){this.viaApi("setPivotColumns",t)}removePivotColumn(t){this.viaApi("removePivotColumn",t)}removePivotColumns(t){this.viaApi("removePivotColumns",t)}addPivotColumn(t){this.viaApi("addPivotColumn",t)}addPivotColumns(t){this.viaApi("addPivotColumns",t)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(t,e){return this.viaApi("autoSizeColumn",t,e)}autoSizeColumns(t,e){this.viaApi("autoSizeColumns",t,e)}autoSizeAllColumns(t){this.viaApi("autoSizeAllColumns",t)}setPivotResultColumns(t){this.viaApi("setPivotResultColumns",t)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};w([Q("gridApi")],xo.prototype,"api",2);xo=w([Ye("columnApi")],xo);var Tn=class extends Ie{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let t=i=>this.callColumnCellValueChangedHandler(i),e=this.gos.useAsyncEvents();this.eventService.addEventListener(V.EVENT_CELL_VALUE_CHANGED,t,e),this.addDestroyFunc(()=>this.eventService.removeEventListener(V.EVENT_CELL_VALUE_CHANGED,t,e)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValue(t,e,i=!1,s=!1){if(this.initialised||this.init(),!e)return;let r=t.getColDef(),n=r.field,o=t.getColId(),a=e.data,l,h=e.groupData&&e.groupData[o]!==void 0,c=!s&&e.aggData&&e.aggData[o]!==void 0,d=this.isSsrm&&s&&!!t.getColDef().aggFunc,p=this.isSsrm&&e.footer&&e.field&&(t.getColDef().showRowGroup===!0||t.getColDef().showRowGroup===e.field);if(i&&r.filterValueGetter?l=this.executeFilterValueGetter(r.filterValueGetter,a,t,e):this.isTreeData&&c?l=e.aggData[o]:this.isTreeData&&r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):this.isTreeData&&n&&a?l=Ta(a,n,t.isFieldContainsDots()):h?l=e.groupData[o]:c?l=e.aggData[o]:r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):p?l=Ta(a,e.field,t.isFieldContainsDots()):n&&a&&!d&&(l=Ta(a,n,t.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let u=l.substring(1);l=this.executeValueGetter(u,a,t,e)}if(l==null){let u=this.getOpenedGroup(e,t);if(u!=null)return u}return l}parseValue(t,e,i,s){let r=t.getColDef(),n=this.gos.addGridCommonParams({node:e,data:e?.data,oldValue:s,newValue:i,colDef:r,column:t}),o=r.valueParser;return Me(o)?typeof o=="function"?o(n):this.expressionService.evaluate(o,n):i}formatValue(t,e,i,s,r=!0){let n=null,o,a=t.getColDef();if(s?o=s:r&&(o=a.valueFormatter),o){let l=this.gos.addGridCommonParams({value:i,node:e,data:e?e.data:null,colDef:a,column:t});typeof o=="function"?n=o(l):n=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[i]||"";return n==null&&Array.isArray(i)&&(n=i.join(", ")),n}getOpenedGroup(t,e){if(!this.gos.get("showOpenedGroup")||!e.getColDef().showRowGroup)return;let s=e.getColDef().showRowGroup,r=t.parent;for(;r!=null;){if(r.rowGroupColumn&&(s===!0||s===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(t,e,i,s){let r=this.columnModel.getPrimaryColumn(e);if(!t||!r)return!1;rt(t.data)&&(t.data={});let{field:n,valueSetter:o}=r.getColDef();if(rt(n)&&rt(o))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(r,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:t,data:t.data,oldValue:this.getValue(r,t),newValue:i,colDef:r.getColDef(),column:r});a.newValue=i;let l;if(Me(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(t.data,n,i,r.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(r,t);let h={type:V.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:t.data,node:t,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:s};return this.eventService.dispatchEvent(h),!0}callColumnCellValueChangedHandler(t){let e=t.colDef.onCellValueChanged;typeof e=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,columnApi:t.columnApi,context:t.context})})}setValueUsingField(t,e,i,s){if(!e)return!1;let r=!1;if(!s)r=t[e]===i,r||(t[e]=i);else{let n=e.split("."),o=t;for(;n.length>0&&o;){let a=n.shift();n.length===0?(r=o[a]===i,r||(o[a]=i)):o=o[a]}}return!r}executeFilterValueGetter(t,e,i,s){let r=this.gos.addGridCommonParams({data:e,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof t=="function"?t(r):this.expressionService.evaluate(t,r)}executeValueGetter(t,e,i,s){let r=i.getColId(),n=this.valueCache.getValue(s,r);if(n!==void 0)return n;let o=this.gos.addGridCommonParams({data:e,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)}),a;return typeof t=="function"?a=t(o):a=this.expressionService.evaluate(t,o),this.valueCache.setValue(s,r,a),a}getValueCallback(t,e){let i=this.columnModel.getPrimaryColumn(e);return i?this.getValue(i,t):null}getKeyForNode(t,e){let i=this.getValue(t,e),s=t.getColDef().keyCreator,r=i;if(s){let n=this.gos.addGridCommonParams({value:i,colDef:t.getColDef(),column:t,node:e,data:e.data});r=s(n)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&et("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}};w([Q("expressionService")],Tn.prototype,"expressionService",2);w([Q("columnModel")],Tn.prototype,"columnModel",2);w([Q("valueCache")],Tn.prototype,"valueCache",2);w([Q("dataTypeService")],Tn.prototype,"dataTypeService",2);w([ke],Tn.prototype,"init",1);Tn=w([Ye("valueService")],Tn);var Xd=class extends Ie{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(t){this.logger=t.create("ExpressionService")}evaluate(t,e){if(typeof t=="string")return this.evaluateExpression(t,e);console.error("AG Grid: value should be either a string or a function",t)}evaluateExpression(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Params =",e),console.log("Exception = "+i),null}}createExpressionFunction(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];let e=this.createFunctionBody(t),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",e);return this.expressionToFunctionCache[t]=i,i}createFunctionBody(t){return t.indexOf("return")>=0?t:"return "+t+";"}};w([lr(0,Xs("loggerFactory"))],Xd.prototype,"setBeans",1);Xd=w([Ye("expressionService")],Xd);var Yd=class extends Ie{setBeans(t){this.logging=t.get("debug")}create(t){return new Ym(t,this.isLogging.bind(this))}isLogging(){return this.logging}};w([lr(0,Xs("gridOptionsService"))],Yd.prototype,"setBeans",1);Yd=w([Ye("loggerFactory")],Yd);var Ym=class{constructor(t,e){this.name=t,this.isLoggingFunc=e}isLogging(){return this.isLoggingFunc()}log(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)}},Go=class extends Ie{setComp(t,e,i){this.view=t,this.eGridHostDiv=e,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:r=>r===1||r===0,getIconName:()=>at.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new Eu(this.view)),this.addRtlSupport();let s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),this.ctrlsService.register("gridCtrl",this)}isDetailGrid(){var t;let e=this.focusService.findTabbableParent(this.getGui());return((t=e?.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}showDropZones(){return bt.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return bt.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return bt.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return bt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){let t={type:V.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(t)}addRtlSupport(){let t=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){this.view.setCursor(t?"ew-resize":null)}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){let e=this.view.getFocusableContainers(),i=this.gos.getActiveDomElement(),r=e.findIndex(n=>n.contains(i))+(t?-1:1);return r<=0||r>=e.length?!1:this.focusService.focusInto(e[r])}focusInnerElement(t){let e=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(t){if(e.length>1)return this.focusService.focusInto(St(e),!0);let s=St(i);if(this.focusService.focusGridView(s,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(i[0]))return!0;for(let s=1;s<e.length;s++)if(this.focusService.focusInto(e[s]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(t=!1){this.view.forceFocusOutOfContainer(t)}};w([Q("focusService")],Go.prototype,"focusService",2);w([Q("resizeObserverService")],Go.prototype,"resizeObserverService",2);w([Q("columnModel")],Go.prototype,"columnModel",2);w([Q("ctrlsService")],Go.prototype,"ctrlsService",2);w([Q("mouseEventService")],Go.prototype,"mouseEventService",2);w([Q("dragAndDropService")],Go.prototype,"dragAndDropService",2);var sl=class extends sc{constructor(t){super(),this.eGridDiv=t}postConstruct(){this.logger=this.loggerFactory.create("GridComp");let t={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new Go);let e=this.createTemplate();this.setTemplate(e),this.ctrl.setComp(t,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let t=this.getGui();this.eGridDiv.appendChild(t),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(t),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(t,e){let i=this.eRootWrapperBody.classList;i.toggle("ag-layout-auto-height",e.autoHeight),i.toggle("ag-layout-normal",e.normal),i.toggle("ag-layout-print",e.print),this.addOrRemoveCssClass("ag-layout-auto-height",e.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",e.normal),this.addOrRemoveCssClass("ag-layout-print",e.print)}createTemplate(){let t=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",e=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",s=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${e}
                </div>
                ${i}
                <ag-pagination></ag-pagination>
                ${s}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){let t=[this.gridBodyComp.getGui()];return this.sideBarComp&&t.push(this.sideBarComp.getGui()),t.filter(e=>ys(e))}};w([Q("loggerFactory")],sl.prototype,"loggerFactory",2);w([Be("gridBody")],sl.prototype,"gridBodyComp",2);w([Be("sideBar")],sl.prototype,"sideBarComp",2);w([Be("rootWrapperBody")],sl.prototype,"eRootWrapperBody",2);w([ke],sl.prototype,"postConstruct",1);var So=class extends Ie{progressSort(t,e,i){let s=this.getNextSortDirection(t);this.setSortForColumn(t,s,e,i)}setSortForColumn(t,e,i,s){e!=="asc"&&e!=="desc"&&(e=null);let r=this.gos.isColumnsSortingCoupledToGroup(),n=[t];if(r&&t.getColDef().showRowGroup){let l=this.columnModel.getSourceColumnsForGroupColumn(t),h=l?.filter(c=>c.isSortable());h&&(n=[t,...h])}n.forEach(l=>l.setSort(e,s));let o=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){let l=this.clearSortBarTheseColumns(n,s);a.push(...l)}this.updateSortIndex(t),a.push(...n),this.dispatchSortChangedEvents(s,a)}updateSortIndex(t){let e=this.gos.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(t.getId()),s=e&&i||t,r=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(a=>a.setSortIndex(null));let n=r.filter(a=>e&&a.getColDef().showRowGroup?!1:a!==s);(s.getSort()?[...n,s]:n).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return e&&e.length>0}dispatchSortChangedEvents(t,e){let i={type:V.EVENT_SORT_CHANGED,source:t};e&&(i.columns=e),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(t,e){let i=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(s=>{t.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,e))}),i}getNextSortDirection(t){let e;if(t.getColDef().sortingOrder?e=t.getColDef().sortingOrder:this.gos.get("sortingOrder")?e=this.gos.get("sortingOrder"):e=So.DEFAULT_SORTING_ORDER,!Array.isArray(e)||e.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${e}`),null;let i=e.indexOf(t.getSort()),s=i<0,r=i==e.length-1,n;return s||r?n=e[0]:n=e[i+1],So.DEFAULT_SORTING_ORDER.indexOf(n)<0?(console.warn("AG Grid: invalid sort type "+n),null):n}getIndexedSortMap(){let t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(n=>!!n.getSort());if(this.columnModel.isPivotMode()){let n=this.gos.isColumnsSortingCoupledToGroup();t=t.filter(o=>{let a=!!o.getAggFunc(),l=!o.isPrimary(),h=n?this.columnModel.getGroupDisplayColumnForGroup(o.getId()):o.getColDef().showRowGroup;return a||l||h})}let e=this.columnModel.getRowGroupColumns().filter(n=>!!n.getSort()),i={};t.forEach((n,o)=>i[n.getId()]=o),t.sort((n,o)=>{let a=n.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let h=i[n.getId()],c=i[o.getId()];return h>c?1:-1}else return l==null?-1:1});let s=this.gos.isColumnsSortingCoupledToGroup()&&!!e.length;s&&(t=[...new Set(t.map(n=>{var o;return(o=this.columnModel.getGroupDisplayColumnForGroup(n.getId()))!=null?o:n}))]);let r=new Map;return t.forEach((n,o)=>r.set(n,o)),s&&e.forEach(n=>{let o=this.columnModel.getGroupDisplayColumnForGroup(n.getId());r.set(n,r.get(o))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([t,e],[i,s])=>e-s).map(([t])=>t)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),colId:t.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),column:t}))}canColumnDisplayMixedSort(t){let e=this.gos.isColumnsSortingCoupledToGroup(),i=!!t.getColDef().showRowGroup;return e&&i}getDisplaySortForColumn(t){let e=this.columnModel.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!e?.length)return t.getSort();let s=t.getColDef().field!=null||!!t.getColDef().valueGetter?[t,...e]:e,r=s[0].getSort();return s.every(o=>o.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}};So.DEFAULT_SORTING_ORDER=["asc","desc",null];w([Q("columnModel")],So.prototype,"columnModel",2);So=w([Ye("sortController")],So);var Ft=class extends Ie{static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ft.toggleKeyboardMode),t.addEventListener("mousedown",Ft.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ft.toggleKeyboardMode),t.addEventListener("mousedown",Ft.toggleKeyboardMode))}static toggleKeyboardMode(t){let e=Ft.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||e!==i&&(Ft.keyboardModeActive=i)}static unregisterGridCompController(t){Ft.removeKeyboardModeEvents(t)}init(){let t=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,t),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl})}registerKeyboardFocusEvents(){let t=this.gos.getDocument();Ft.addKeyboardModeEvents(t),Ft.instanceCount++,this.addDestroyFunc(()=>{Ft.instanceCount--,Ft.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,e=this.columnModel.getGridColumn(t.getId());t!==e&&this.clearFocusedCell()}isKeyboardMode(){return Ft.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),po.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Ru.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,e){let i=t;for(;i;){if(this.gos.getDomData(i,e))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){let{rowIndex:t,rowPinned:e,column:i}=this.focusedCellPosition,s={rowIndex:t,rowPinned:e,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:e});return r&&(s.isFullWidthCell=r.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=Qe({type:V.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){let{column:e,rowIndex:i,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:n=!1}=t,o=this.columnModel.getGridColumn(e);if(!o){this.focusedCellPosition=null;return}this.focusedCellPosition=o?{rowIndex:i,rowPinned:Dr(s),column:o}:null;let a=zt(Qe({type:V.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:n,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let e=t.getColumnGroupChild(),i=t.getRowIndex(),s=t.getPinned(),{column:r,headerRowIndex:n}=this.focusedHeaderPosition;return e===r&&i===n&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,e){this.focusedHeaderPosition={headerRowIndex:t,column:e}}focusHeaderPosition(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{direction:e,fromTab:i,allowUserOverride:s,event:r,fromCell:n,rowWithoutSpanValue:o}=t,{headerPosition:a}=t;if(n&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(s){let l=this.getFocusedHeader(),h=this.headerNavigationService.getHeaderRowCount();if(i){let c=this.gos.getCallback("tabToNextHeader");c&&(a=this.getHeaderPositionFromUserFunc({userFunc:c,direction:e,currentPosition:l,headerPosition:a,headerRowCount:h}))}else{let c=this.gos.getCallback("navigateToNextHeader");if(c&&r){let d={key:r.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:h,event:r};a=c(d)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:e,event:r,fromCell:n,rowWithoutSpanValue:o}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{userFunc:e,headerPosition:i,direction:s,event:r}=t,n=this.getFocusedHeader(),o=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:e,direction:s,currentPosition:n,headerPosition:i,headerRowCount:o});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:s,event:r})}getHeaderPositionFromUserFunc(t){let{userFunc:e,direction:i,currentPosition:s,headerPosition:r,headerRowCount:n}=t,a=e({backwards:i==="Before",previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:n});return a===!0||a===null?(a===null&&et("Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):a===!1?null:a}focusProvidedHeaderPosition(t){let{headerPosition:e,direction:i,fromCell:s,rowWithoutSpanValue:r,event:n}=t;if(e.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(e):this.focusGridView(e.column);this.headerNavigationService.scrollToColumn(e.column,i);let a=this.ctrlsService.getHeaderRowContainerCtrl(e.column.getPinned()).focusHeader(e.headerRowIndex,e.column,n);return a&&(r!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),a}focusFirstHeader(){let t=this.columnModel.getAllDisplayedColumns()[0];if(!t)return!1;t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0));let e=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})}focusLastHeader(t){let e=this.headerNavigationService.getHeaderRowCount()-1,i=St(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,e){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===Dr(e)}findFocusableElements(t,e,i=!1){let s=lw,r=fm;e&&(r+=", "+e),i&&(r+=', [tabindex="-1"]');let n=Array.prototype.slice.apply(t.querySelectorAll(s)).filter(l=>ys(l)),o=Array.prototype.slice.apply(t.querySelectorAll(r));return o.length?((l,h)=>l.filter(c=>h.indexOf(c)===-1))(n,o):n}focusInto(t,e=!1,i=!1){let s=this.findFocusableElements(t,null,i),r=e?St(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,e){if(!e)return null;let i=this.findFocusableElements(t),s=i.indexOf(e);if(s===-1)return null;let r=-1;for(let n=s-1;n>=0;n--)if(i[n].classList.contains("ag-tab-guard-top")){r=n;break}return r<=0?null:i[r-1]}findNextFocusableElement(t=this.eGridDiv,e,i){let s=this.findFocusableElements(t,e?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement(),n;e?n=s.findIndex(a=>a.contains(r)):n=s.indexOf(r);let o=n+(i?-1:1);return o<0||o>=s.length?null:s[o]}isTargetUnderManagedComponent(t,e){if(!e)return!1;let i=t.querySelectorAll(`.${Dn.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(e))return!0;return!1}findTabbableParent(t,e=5){let i=0;for(;t&&Ud(t)===null&&++i<=e;)t=t.parentElement;return Ud(t)===null?null:t}focusGridView(t,e){var i;if(this.gos.get("suppressCellFocus"))return e?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);let s=e?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!s)return!1;let{rowIndex:r,rowPinned:n}=s,o=this.getFocusedHeader();return!t&&o&&(t=o.column),r==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:r,column:t,rowPinned:n}),this.setFocusedCell({rowIndex:r,column:t,rowPinned:Dr(n),forceBrowserFocus:!0}),(i=this.rangeService)==null||i.setRangeToCell({rowIndex:r,rowPinned:n,column:t}),!0)}focusNextGridCoreContainer(t,e=!1){return!e&&this.gridCtrl.focusNextInnerContainer(t)?!0:((e||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var e,i;return this.advancedFilterFocusColumn=t?.column,(i=(e=this.advancedFilterService)==null?void 0:e.getCtrl().focusHeaderComp())!=null?i:!1}focusNextFromAdvancedFilter(t,e){var i,s;let r=(s=e?void 0:this.advancedFilterFocusColumn)!=null?s:(i=this.columnModel.getAllDisplayedColumns())==null?void 0:i[0];return t?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};Ft.keyboardModeActive=!1;Ft.instanceCount=0;w([Q("eGridDiv")],Ft.prototype,"eGridDiv",2);w([Q("columnModel")],Ft.prototype,"columnModel",2);w([Q("headerNavigationService")],Ft.prototype,"headerNavigationService",2);w([Q("headerPositionUtils")],Ft.prototype,"headerPositionUtils",2);w([Q("rowRenderer")],Ft.prototype,"rowRenderer",2);w([Q("rowPositionUtils")],Ft.prototype,"rowPositionUtils",2);w([Q("cellPositionUtils")],Ft.prototype,"cellPositionUtils",2);w([Q("navigationService")],Ft.prototype,"navigationService",2);w([Q("ctrlsService")],Ft.prototype,"ctrlsService",2);w([Q("filterManager")],Ft.prototype,"filterManager",2);w([_t("rangeService")],Ft.prototype,"rangeService",2);w([_t("advancedFilterService")],Ft.prototype,"advancedFilterService",2);w([ke],Ft.prototype,"init",1);Ft=w([Ye("focusService")],Ft);var Ug=class extends Ie{setMouseOver(t){this.selectedColumns=t;let e={type:V.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}clearMouseOver(){this.selectedColumns=null;let t={type:V.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}isHovered(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0}};Ug=w([Ye("columnHoverService")],Ug);var Ih=class extends Ie{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(t=>this.gridBodyCtrl=t.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(t){this.active?this.executeNextFuncs.push(t):t()}executeLaterVMTurn(t){this.active?this.executeLaterFuncs.push(t):t()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let t=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===t&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){t();return}let e=i=>{for(;i.length;){let s=i.pop();s&&s()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>e(this.executeNextFuncs),0),window.setTimeout(()=>{t(),e(this.executeLaterFuncs)},200)})}};w([Q("ctrlsService")],Ih.prototype,"ctrlsService",2);w([ke],Ih.prototype,"postConstruct",1);Ih=w([Ye("columnAnimationService")],Ih);var Na=class extends Ie{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.addManagedListener(this.eventService,V.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let t=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(t>0){let e=()=>{let i=this.gos.getRowHeightAsNumber(),s=Math.floor(t/i);this.paginationProxy.setPageSize(s,"autoCalculated")};this.isBodyRendered?Qi(()=>e(),50)():(e(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};w([Q("ctrlsService")],Na.prototype,"ctrlsService",2);w([Q("paginationProxy")],Na.prototype,"paginationProxy",2);w([ke],Na.prototype,"postConstruct",1);Na=w([Ye("paginationAutoPageSizeService")],Na);var qd=class extends Ie{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(t,e,i){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[e]=i)}getValue(t,e){if(!(!this.active||t.__cacheVersion!==this.cacheVersion))return t.__cacheData[e]}};w([ke],qd.prototype,"init",1);qd=w([Ye("valueCache")],qd);var qD="paste",Ga=class extends Ie{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,V.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(t){t.source!==qD&&this.doChangeDetection(t.node,t.column)}doChangeDetection(t,e){if(this.gos.get("suppressChangeDetection"))return;let i=[t];if(this.clientSideRowModel&&!t.isRowPinned()){let s=this.gos.get("aggregateOnlyChangedColumns"),r=new Pu(s,this.clientSideRowModel.getRootNode());r.addParentNode(t.parent,[e]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(n=>{i.push(n)})}this.rowRenderer.refreshCells({rowNodes:i})}};w([Q("rowModel")],Ga.prototype,"rowModel",2);w([Q("rowRenderer")],Ga.prototype,"rowRenderer",2);w([ke],Ga.prototype,"init",1);Ga=w([Ye("changeDetectionService")],Ga);var Zd=class extends Ie{adaptFunction(t,e){let i=this.componentMetadataProvider.retrieve(t);return i&&i.functionAdapter?i.functionAdapter(e):null}adaptCellRendererFunction(t){class e{refresh(s){return!1}getGui(){return this.eGui}init(s){let r=t(s),n=typeof r;if(n==="string"||n==="number"||n==="boolean"){this.eGui=ms("<span>"+r+"</span>");return}if(r==null){this.eGui=ms("<span></span>");return}this.eGui=r}}return e}doesImplementIComponent(t){return t?t.prototype&&"getGui"in t.prototype:!1}};w([Q("componentMetadataProvider")],Zd.prototype,"componentMetadataProvider",2);Zd=w([Ye("agComponentUtils")],Zd);var Oh=class extends Ie{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(t){return this.componentMetaData[t]}};w([Q("agComponentUtils")],Oh.prototype,"agComponentUtils",2);w([ke],Oh.prototype,"postConstruct",1);Oh=w([Ye("componentMetadataProvider")],Oh);var ZD=25,qC=10,vg=8,QD=4,Cg=4,yg=6,JD=16,ZC=14,wg=8,eF={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:QD*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:vg*7,headerCellMinWidth:48,listItemHeight:vg*4,rowHeight:vg*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:Cg*8,headerCellMinWidth:24,listItemHeight:Cg*6,rowHeight:Cg*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:yg*8,headerCellMinWidth:36,listItemHeight:yg*4,rowHeight:yg*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:ZC+wg*4.25,headerCellMinWidth:36,listItemHeight:JD+wg,rowHeight:ZC+wg*3.5,chartMenuPanelWidth:260}},QC={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Lh=class extends Ie{constructor(){super(...arguments),this.calculatedSizes={},this.calculatedTheme=null}postConstruct(){var t;let e=(t=this.getTheme().el)!=null?t:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.calculatedTheme=null,this.calculatedTheme=this.getTheme(),this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(e||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){let t={type:V.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(t)}getSassVariable(t){let{themeFamily:e,el:i}=this.getTheme();if(!e||e.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[e]||(this.calculatedSizes[e]={});let s=this.calculatedSizes[e][t];return s??(this.calculatedSizes[e][t]=this.calculateValueForSassProperty(t,e,i),this.calculatedSizes[e][t])}calculateValueForSassProperty(t,e,i){let s="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),r=eF[s][t],n=this.gos.getDocument();if(i||(i=this.eGridDiv),!QC[t])return r;let o=QC[t],a=n.createElement("div"),l=Array.from(i.classList);a.classList.add(e,...l),a.style.position="absolute";let h=o.reduce((d,p)=>{let u=n.createElement("div");return u.style.position="static",u.classList.add(p),d.appendChild(u),u},a),c=0;if(n.body){n.body.appendChild(a);let d=t.toLowerCase().indexOf("height")!==-1?"height":"width";c=parseInt(window.getComputedStyle(h)[d],10),n.body.removeChild(a)}return c||r}isThemeDark(){let{theme:t}=this.getTheme();return!!t&&t.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){if(this.calculatedTheme)return this.calculatedTheme;let t=/\bag-(material|(?:theme-([\w\-]*)))\b/g,e=this.eGridDiv,i=null,s=[];for(;e;)if(i=t.exec(e.className),!i)e=e.parentElement||void 0;else{let n=e.className.match(t);n&&(s=n);break}if(!i)return{allThemes:s};let r=i[0];return this.calculatedTheme={theme:r,el:e,themeFamily:r.replace(/-dark$/,""),allThemes:s},this.calculatedTheme}getFromTheme(t,e){var i;return(i=this.getSassVariable(e))!=null?i:t}getDefaultRowHeight(){return this.getFromTheme(ZD,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){let t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gos.get("rowHeight");if(e==null||isNaN(e)||!isFinite(e))return t!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let i=`${e}px`;return t!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),e):t!=""?parseFloat(t):-1}getMinColWidth(){let t=this.getFromTheme(null,"headerCellMinWidth");return Me(t)?Math.max(t,qC):qC}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};w([Q("eGridDiv")],Lh.prototype,"eGridDiv",2);w([ke],Lh.prototype,"postConstruct",1);Lh=w([Ye("environment")],Lh);var Va=class extends Ie{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(t){this.logger=t.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,V.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=Jy(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(e!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`),this.setDivStretchOffset(e)}setUiContainerHeight(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(t){let e=typeof t=="number"?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:V.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(t){this.modelHeight=t,this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0)return t;let e=this.modelHeight-this.getUiBodyHeight(),i=t/e;return this.maxScrollY*i}};w([Q("ctrlsService")],Va.prototype,"ctrlsService",2);w([lr(0,Xs("loggerFactory"))],Va.prototype,"agWire",1);w([ke],Va.prototype,"postConstruct",1);Va=w([Ye("rowContainerHeightService")],Va);var Ba=class extends Ie{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(t=!1){let e=!!this.gos.get("rowSelection"),i=this.gos.get("isRowSelectable");if(!e||!i)return;let s=this.gos.get("groupSelectsChildren"),r=this.rowModel.getType()==="clientSide"&&s,n=[],o=a=>{if(t&&!a.group)return;if(r&&a.group){let h=a.childrenAfterGroup.some(c=>c.selectable===!0);a.setRowSelectable(h,!0);return}let l=i?i(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&n.push(a)};if(r){let a=this.rowModel;new Pu(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);n.length&&this.selectionService.setNodesSelected({nodes:n,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof wo&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};w([Q("rowModel")],Ba.prototype,"rowModel",2);w([Q("selectionService")],Ba.prototype,"selectionService",2);w([ke],Ba.prototype,"init",1);Ba=w([Ye("selectableService")],Ba);var xs=class extends nt{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){let t=this.gos.get("enableRtl");this.setTemplate(this.getTemplate());let{btFirst:e,btPrevious:i,btNext:s,btLast:r,pageSizeComp:n}=this;this.activateTabIndex([e,i,s,r]),e.insertAdjacentElement("afterbegin",Kt(t?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",Kt(t?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",Kt(t?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",Kt(t?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){let e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(t=>{let{el:e,fn:i}=t;this.addManagedListener(e,"click",i),this.addManagedListener(e,"keydown",s=>{(s.key===Ce.ENTER||s.key===Ce.SPACE)&&(s.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){let t=this.paginationProxy.getTotalPages()>0,e=this.paginationProxy.getCurrentPage(),i=t?e+1:0;this.lbCurrent.textContent=this.formatNumber(i)}formatNumber(t){let e=this.gos.getCallback("paginationNumberFormatter");if(e)return e({value:t});let i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),r=i("decimalSeparator",".");return pm(t,s,r)}getTemplate(){let t=this.localeService.getLocaleTextFunc(),e=t("page","Page"),i=t("to","to"),s=t("of","of"),r=t("firstPage","First Page"),n=t("previousPage","Previous Page"),o=t("nextPage","Next Page"),a=t("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${i}</span>
                    <span id="ag-${l}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${s}</span>
                    <span id="ag-${l}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${e}</span>
                        <span id="ag-${l}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${s}</span>
                        <span id="ag-${l}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){let t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=t===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let s=this.isZeroPagesToDisplay(),r=t===i-1;this.nextButtonDisabled=r||s,this.lastButtonDisabled=!e||s||t===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(t,e){sm(t,e),t.classList.toggle("ag-disabled",e)}updateRowLabels(){let t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,r,n;if(this.isZeroPagesToDisplay()?r=n=0:(r=e*t+1,n=r+e-1,i&&n>s&&(n=s)),this.lbFirstRowOnPage.textContent=this.formatNumber(r),this.rowNodeBlockLoader.isLoading()){let o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(n)}isZeroPagesToDisplay(){let t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return t&&e===0}setTotalLabels(){let t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),i=t?this.paginationProxy.getMasterRowCount():null;if(i===1){let s=this.paginationProxy.getRow(0);if(s&&s.group&&!(s.groupData||s.aggData)){this.setTotalLabelsToZero();return}}if(t)this.lbTotal.textContent=this.formatNumber(e),this.lbRecordCount.textContent=this.formatNumber(i);else{let s=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=s,this.lbRecordCount.innerHTML=s}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};w([Q("paginationProxy")],xs.prototype,"paginationProxy",2);w([Q("rowNodeBlockLoader")],xs.prototype,"rowNodeBlockLoader",2);w([Be("btFirst")],xs.prototype,"btFirst",2);w([Be("btPrevious")],xs.prototype,"btPrevious",2);w([Be("btNext")],xs.prototype,"btNext",2);w([Be("btLast")],xs.prototype,"btLast",2);w([Be("lbRecordCount")],xs.prototype,"lbRecordCount",2);w([Be("lbFirstRowOnPage")],xs.prototype,"lbFirstRowOnPage",2);w([Be("lbLastRowOnPage")],xs.prototype,"lbLastRowOnPage",2);w([Be("lbCurrent")],xs.prototype,"lbCurrent",2);w([Be("lbTotal")],xs.prototype,"lbTotal",2);w([Be("pageSizeComp")],xs.prototype,"pageSizeComp",2);w([ke],xs.prototype,"postConstruct",1);var ac=class Lx extends nt{constructor(){super(Lx.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,i){let s=this.eOverlayWrapper.classList;s.toggle("ag-layout-auto-height",i.autoHeight),s.toggle("ag-layout-normal",i.normal),s.toggle("ag-layout-print",i.print)}postConstruct(){this.createManagedBean(new Eu(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){let i=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&i.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,i.toggle(e,!0)}showOverlay(e,i,s){this.inProgress||(this.setWrapperTypeClass(i),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(r=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,this.updateListenerDestroyFunc=s,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(e=this.updateListenerDestroyFunc)==null||e.call(this),ti(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};ac.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;w([Q("overlayService")],ac.prototype,"overlayService",2);w([Be("eOverlayWrapper")],ac.prototype,"eOverlayWrapper",2);w([ke],ac.prototype,"postConstruct",1);var tF=ac,Ha=class extends Ie{getFirstRow(){let t=0,e;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),e===void 0?null:{rowIndex:t,rowPinned:e}}getLastRow(){let t,e=null,i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(e="bottom",t=i-1):this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageLastRow()):s&&(e="top",t=s-1),t===void 0?null:{rowIndex:t,rowPinned:e}}getRowNode(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}}sameRow(t,e){return!t&&!e?!0:t&&!e||!t&&e?!1:t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned}before(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(Me(e.rowPinned))return e.rowPinned!=="top";break}return t.rowIndex<e.rowIndex}};w([Q("rowModel")],Ha.prototype,"rowModel",2);w([Q("pinnedRowModel")],Ha.prototype,"pinnedRowModel",2);w([Q("paginationProxy")],Ha.prototype,"paginationProxy",2);Ha=w([Ye("rowPositionUtils")],Ha);var zg=class extends Ie{createId(t){let{rowIndex:e,rowPinned:i,column:s}=t;return this.createIdFromValues({rowIndex:e,column:s,rowPinned:i})}createIdFromValues(t){let{rowIndex:e,rowPinned:i,column:s}=t;return`${e}.${i??"null"}.${s.getId()}`}equals(t,e){let i=t.column===e.column,s=t.rowPinned===e.rowPinned,r=t.rowIndex===e.rowIndex;return i&&s&&r}};zg=w([Ye("cellPositionUtils")],zg);var fh=class{constructor(t){this.cellValueChanges=t}},xg=class extends fh{constructor(t,e,i,s){super(t),this.initialRange=e,this.finalRange=i,this.ranges=s}},kx=class Nx{constructor(e){this.actionStack=[],this.maxStackSize=e||Nx.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};kx.DEFAULT_STACK_SIZE=10;var JC=kx,Ir=class extends Ie{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=t=>{let e={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,e),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,e);if(!(i||s||this.isPasting||this.isRangeInAction))return;let{rowPinned:n,rowIndex:o,column:a,oldValue:l,value:h}=t,c={rowPinned:n,rowIndex:o,columnId:a.getColId(),newValue:h,oldValue:l};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gos.get("undoRedoCellEditing"))return;let t=this.gos.get("undoRedoCellEditingLimit");t<=0||(this.undoStack=new JC(t),this.redoStack=new JC(t),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,V.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,V.EVENT_MODEL_UPDATED,e=>{e.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,V.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(t){let e={type:V.EVENT_UNDO_STARTED,source:t};this.eventService.dispatchEvent(e);let i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),s={type:V.EVENT_UNDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(s)}redo(t){let e={type:V.EVENT_REDO_STARTED,source:t};this.eventService.dispatchEvent(e);let i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),s={type:V.EVENT_REDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(s)}undoRedo(t,e,i,s,r){if(!t)return!1;let n=t.pop();return!n||!n.cellValueChanges?!1:(this.processAction(n,o=>o[s],r),n instanceof xg?this.processRange(this.rangeService,n.ranges||[n[i]]):this.processCell(n.cellValueChanges),e.push(n),!0)}processAction(t,e,i){t.cellValueChanges.forEach(s=>{let{rowIndex:r,rowPinned:n,columnId:o}=s,a={rowIndex:r,rowPinned:n},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,e(s),i)})}processRange(t,e){let i;t.removeAllCellRanges(!0),e.forEach((s,r)=>{if(!s)return;let n=s.startRow,o=s.endRow;r===e.length-1&&(i={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));let a={rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:s.startColumn,columns:s.columns};t.addCellRange(a)})}processCell(t){let e=t[0],{rowIndex:i,rowPinned:s}=e,r={rowIndex:i,rowPinned:s},n=this.rowPositionUtils.getRowNode(r),o={rowPinned:e.rowPinned,rowIndex:n.rowIndex,columnId:e.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(t,e){let{rowIndex:i,columnId:s,rowPinned:r}=t,n=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getGridColumn(s);if(!o)return;n.ensureIndexVisible(i),n.ensureColumnVisible(o);let a={rowIndex:i,column:o,rowPinned:r};this.focusService.setFocusedCell(zt(Qe({},a),{forceBrowserFocus:!0})),e?.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,V.EVENT_ROW_EDITING_STARTED,t=>{this.activeRowEdit={rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,V.EVENT_ROW_EDITING_STOPPED,()=>{let t=new fh(this.cellValueChanges);this.pushActionsToUndoStack(t),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,V.EVENT_CELL_EDITING_STARTED,t=>{this.activeCellEdit={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,V.EVENT_CELL_EDITING_STOPPED,t=>{if(this.activeCellEdit=null,t.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let i=new fh(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,V.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,V.EVENT_PASTE_END,()=>{let t=new fh(this.cellValueChanges);this.pushActionsToUndoStack(t),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,V.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,V.EVENT_FILL_END,t=>{let e=new xg(this.cellValueChanges,t.initialRange,t.finalRange);this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,V.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let t;this.rangeService&&this.gos.get("enableRangeSelection")?t=new xg(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):t=new fh(this.cellValueChanges),this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}pushActionsToUndoStack(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()}};w([Q("focusService")],Ir.prototype,"focusService",2);w([Q("ctrlsService")],Ir.prototype,"ctrlsService",2);w([Q("cellPositionUtils")],Ir.prototype,"cellPositionUtils",2);w([Q("rowPositionUtils")],Ir.prototype,"rowPositionUtils",2);w([Q("columnModel")],Ir.prototype,"columnModel",2);w([_t("rangeService")],Ir.prototype,"rangeService",2);w([ke],Ir.prototype,"init",1);Ir=w([Ye("undoRedoService")],Ir);var kh=class extends Ie{findHeader(t,e){let i,s;if(t.column instanceof yi?i=this.columnModel.getDisplayedGroupAtDirection(t.column,e):(s=`getDisplayedCol${e}`,i=this.columnModel[s](t.column)),!i)return;let{headerRowIndex:r}=t;if(this.getHeaderRowType(r)!=="filter"){let a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-r]}let{column:n,headerRowIndex:o}=this.getHeaderIndexToFocus(i,r);return{column:n,headerRowIndex:o}}getHeaderIndexToFocus(t,e){let i;if(t instanceof yi&&this.isAnyChildSpanningHeaderHeight(t)&&t.isPadding()){let s=t;i=s.getLeafColumns()[0];let r=i;for(;r!==s;)e++,r=r.getParent()}return{column:i||t,headerRowIndex:e}}isAnyChildSpanningHeaderHeight(t){return t?t.getLeafColumns().some(e=>e.isSpanHeaderHeight()):!1}getColumnVisibleParent(t,e){let i=this.getHeaderRowType(e),s=i==="filter",r=i==="column",n=s?t:t.getParent(),o=e-1,a=o;if(r&&this.isAnyChildSpanningHeaderHeight(t.getParent())){for(;n&&n.isPadding();)n=n.getParent(),o--;a=o,o<0&&(n=t,o=e,a=void 0)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(t,e,i="After"){let s=this.getHeaderRowType(e),r=t,n=e+1,o=n;if(s==="group"){let a=t.getDisplayedLeafColumns(),l=i==="After"?a[0]:St(a),h=[],c=l;for(;c.getParent()!==t;)c=c.getParent(),h.push(c);if(r=l,l.isSpanHeaderHeight())for(let d=h.length-1;d>=0;d--){let p=h[d];if(!p.isPadding()){r=p;break}n++}else r=St(h),r||(r=l)}return{column:r,headerRowIndex:n,headerRowIndexWithoutSpan:o}}getHeaderRowType(t){let e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)}findColAtEdgeForHeaderRow(t,e){let i=this.columnModel.getAllDisplayedColumns(),s=i[e==="start"?0:i.length-1];if(!s)return;let n=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getRowType(t);if(n=="group"){let o=this.columnModel.getColumnGroupAtLevel(s,t);return{headerRowIndex:t,column:o}}return{headerRowIndex:n==null?-1:t,column:s}}};w([Q("columnModel")],kh.prototype,"columnModel",2);w([Q("ctrlsService")],kh.prototype,"ctrlsService",2);kh=w([Ye("headerPositionUtils")],kh);var jg=class{buildColumnDefs(t,e,i){let s=[],r={};return t.forEach(n=>{let o=this.createDefFromColumn(n,e,i),a=!0,l=o,h=n.getOriginalParent(),c=null;for(;h;){let d=null;if(h.isPadding()){h=h.getOriginalParent();continue}let p=r[h.getGroupId()];if(p){p.children.push(l),a=!1;break}if(d=this.createDefFromGroup(h),d&&(d.children=[l],r[d.groupId]=d,l=d,h=h.getOriginalParent()),h!=null&&c===h){a=!1;break}c=h}a&&s.push(l)}),s}createDefFromGroup(t){let e=Vd(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e}createDefFromColumn(t,e,i){let s=Vd(t.getColDef());return s.colId=t.getColId(),s.width=t.getActualWidth(),s.rowGroup=t.isRowGroupActive(),s.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,s.pivot=t.isPivotActive(),s.pivotIndex=t.isPivotActive()?i.indexOf(t):null,s.aggFunc=t.isValueActive()?t.getAggFunc():null,s.hide=t.isVisible()?void 0:!0,s.pinned=t.isPinned()?t.getPinned():null,s.sort=t.getSort()?t.getSort():null,s.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null,s}};jg=w([Ye("columnDefFactory")],jg);var Nh=class{getInitialRowClasses(t){let e=[];return Me(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),Ag(e,this.processClassesFromGridOptions(t.rowNode)),Ag(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&(t.pinned==="left"&&e.push("ag-cell-last-left-pinned"),t.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e}processClassesFromGridOptions(t){let e=[],i=n=>{typeof n=="string"?e.push(n):Array.isArray(n)&&n.forEach(o=>e.push(o))},s=this.gos.get("rowClass");if(s){if(typeof s=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(s)}let r=this.gos.getCallback("getRowClass");if(r){let n={data:t.data,node:t,rowIndex:t.rowIndex},o=r(n);i(o)}return e}preProcessRowClassRules(t){let e=[];return this.processRowClassRules(t,i=>{e.push(i)},i=>{}),e}processRowClassRules(t,e,i){let s=this.gos.addGridCommonParams({data:t.data,node:t,rowIndex:t.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,e,i)}calculateRowLevel(t){return t.group?t.level:t.parent?t.parent.level+1:0}};w([Q("stylingService")],Nh.prototype,"stylingService",2);w([Q("gridOptionsService")],Nh.prototype,"gos",2);Nh=w([Ye("rowCssClassCalculator")],Nh);var Wa=class extends Ie{init(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(t,e){let i=(r,n)=>({currentPos:n,rowNode:r}),s=t.map(i);return s.sort(this.compareRowNodes.bind(this,e)),s.map(r=>r.rowNode)}compareRowNodes(t,e,i){let s=e.rowNode,r=i.rowNode;for(let n=0,o=t.length;n<o;n++){let a=t[n],l=a.sort==="desc",h=this.getValue(s,a.column),c=this.getValue(r,a.column),d,p=this.getComparator(a,s);if(p?d=p(h,c,s,r,l):d=dt.defaultComparator(h,c,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return e.currentPos-i.currentPos}getComparator(t,e){let i=t.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;let r=!e.group&&i.getColDef().field;if(!r)return;let n=this.columnModel.getPrimaryColumn(r);if(n)return n.getColDef().comparator}getValue(t,e){var i,s;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,t,!1,!1);if(t.rowGroupColumn===e){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){let a=(i=t.allLeafChildren)==null?void 0:i[0];return a?this.valueService.getValue(e,a,!1,!1):void 0}let o=this.columnModel.getGroupDisplayColumnForGroup(e.getId());return o?(s=t.groupData)==null?void 0:s[o.getId()]:void 0}if(!(t.group&&e.getColDef().showRowGroup))return this.valueService.getValue(e,t,!1,!1)}};w([Q("valueService")],Wa.prototype,"valueService",2);w([Q("columnModel")],Wa.prototype,"columnModel",2);w([ke],Wa.prototype,"init",1);Wa=w([Ye("rowNodeSorter")],Wa);var vh=class extends Ie{constructor(){super(...arguments),this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){let t=this.params;this.ready=t.gridCtrl!=null&&t.gridBodyCtrl!=null&&t.center!=null&&t.left!=null&&t.right!=null&&t.bottomCenter!=null&&t.bottomLeft!=null&&t.bottomRight!=null&&t.topCenter!=null&&t.topLeft!=null&&t.topRight!=null&&t.stickyTopCenter!=null&&t.stickyTopLeft!=null&&t.stickyTopRight!=null&&t.stickyBottomCenter!=null&&t.stickyBottomLeft!=null&&t.stickyBottomRight!=null&&t.centerHeader!=null&&t.leftHeader!=null&&t.rightHeader!=null&&t.fakeHScrollComp!=null&&t.fakeVScrollComp!=null&&t.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(e=>e(t)),this.readyCallbacks.length=0)}whenReady(t){this.ready?t(this.params):this.readyCallbacks.push(t)}register(t,e){this.params[t]=e,this.checkReady()}registerHeaderContainer(t,e){switch(e){case"left":this.params.leftHeader=t;break;case"right":this.params.rightHeader=t;break;default:this.params.centerHeader=t;break}this.checkReady()}get(t){return this.params[t]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.params.leftHeader,this.params.rightHeader,this.params.centerHeader]}getHeaderRowContainerCtrl(t){switch(t){case"left":return this.params.leftHeader;case"right":return this.params.rightHeader;default:return this.params.centerHeader}}};vh.NAME="ctrlsService";vh=w([Ye(vh.NAME)],vh);var $g=class extends Ie{constructor(){super(...arguments),this.registry={}}register(t){this.registry[t.controllerName]=t.controllerClass}getInstance(t){let e=this.registry[t];if(e!=null)return new e}};$g=w([Ye("ctrlsFactory")],$g);var Vo=class extends nt{constructor(t,e){super(t),this.direction=e,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,V.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",cm()||Yr())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=um(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let t=["mouseenter","mousedown","touchstart"],e=["mouseleave","touchend"],i=this.getGui();t.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),e.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL,t=>{t.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(t){let e=this.getViewport();Zg(()=>ys(e),()=>this.setScrollPosition(t),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(t){this.addManagedListener(this.getViewport(),"scroll",t)}};w([Be("eViewport")],Vo.prototype,"eViewport",2);w([Be("eContainer")],Vo.prototype,"eContainer",2);w([Q("scrollVisibleService")],Vo.prototype,"scrollVisibleService",2);w([Q("ctrlsService")],Vo.prototype,"ctrlsService",2);w([Q("animationFrameService")],Vo.prototype,"animationFrameService",2);var Bo=class Gx extends Vo{constructor(){super(Gx.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,V.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Ka(i=>this.eContainer.style.width=`${i}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.columnModel.getDisplayedColumnsRightWidth(),s=!this.enableRtl&&e,r=this.gos.getScrollbarWidth();s&&(i+=r),qs(this.eRightSpacer,i),this.eRightSpacer.classList.toggle("ag-scroller-corner",i<=r);let n=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(n+=r),qs(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=r)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),i=this.invisibleScrollbar,s=this.gos.get("suppressHorizontalScroll"),r=e&&this.gos.getScrollbarWidth()||0,o=s?0:r===0&&i?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),co(this.getGui(),o),co(this.eViewport,o),co(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return _h(this.getViewport(),this.enableRtl)}setScrollPosition(e){ys(this.getViewport())||this.attemptSettingScrollPosition(e),Th(this.getViewport(),e,this.enableRtl)}};Bo.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;w([Be("eLeftSpacer")],Bo.prototype,"eLeftSpacer",2);w([Be("eRightSpacer")],Bo.prototype,"eRightSpacer",2);w([Q("columnModel")],Bo.prototype,"columnModel",2);w([Q("pinnedRowModel")],Bo.prototype,"pinnedRowModel",2);w([ke],Bo.prototype,"postConstruct",1);var iF=Bo,Gh=class extends Ie{postConstruct(){let t=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){let t=this.gos.isDomLayout("print"),e=t?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=t?0:this.columnModel.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:V.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:V.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};w([Q("columnModel")],Gh.prototype,"columnModel",2);w([ke],Gh.prototype,"postConstruct",1);Gh=w([Ye("pinnedWidthService")],Gh);var Ua=class extends Ie{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(t,e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(t);return}this.events.push(t);let i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(s=>this.eventService.dispatchEvent(s)),this.events=[]};e?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}};w([Q("animationFrameService")],Ua.prototype,"animationFrameService",2);w([Q("rowModel")],Ua.prototype,"rowModel",2);w([ke],Ua.prototype,"postConstruct",1);Ua=w([Ye("rowNodeEventThrottle")],Ua);var sF={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},yn=(t,e)=>{var i;return((i=e.rowModelType)!=null?i:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},rF={enableRowGroup:yn,rowGroup:yn,rowGroupIndex:yn,enablePivot:yn,enableValue:yn,pivot:yn,pivotIndex:yn,aggFunc:yn,cellEditor:t=>t.cellEditor==="agRichSelect"||t.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:t=>{var e;let i=["columnsMenuTab","generalMenuTab"];return(e=t.menuTabs)!=null&&e.some(s=>i.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>_a},nF={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0},oF=Object.keys(nF),_a={objectName:"colDef",allProperties:oF,docsUrl:"column-properties/",deprecations:sF,validations:rF},aF={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."}},lF={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1},hF={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:t=>{var e;let i=(e=t.rowModelType)!=null?e:"clientSide";switch(i){case"clientSide":let s=`treeData requires 'getDataPath' in the ${i} row model.`;return t.getDataPath?null:s;case"serverSide":let r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return t.isServerSideGroup&&t.getServerSideGroupKey?null:r}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:t=>{var e;switch((e=t.rowModelType)!=null?e:"clientSide"){case"clientSide":return null;case"serverSide":return t.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>_a,defaultColDef:()=>_a,defaultColGroupDef:()=>_a,autoGroupColumnDef:()=>_a},cF={objectName:"gridOptions",allProperties:[...Sh.ALL_PROPERTIES,...jh.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:aF,validations:hF},Et=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new ur,this.globalEventHandlerFactory=t=>(e,i)=>{if(this.destroyed)return;let s=Pd.has(e);if(s&&!t||!s&&t)return;let r=jh.getCallbackForEvent(e),n=this.gridOptions[r];typeof n=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{n(i)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new xo(this.api);let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(t){var e;return(e=this.gridOptions[t])!=null?e:lF[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return Me(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{let s=i;return s.api=this.api,s.columnApi=this.columnApi,s.context=this.context,t(s)})}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t.toUpperCase()==="TRUE"||t=="":!1}static toNumber(t){if(typeof t=="number")return t;if(typeof t=="string"){let e=parseInt(t);return isNaN(e)?void 0:e}}static toConstrainedNum(t,e){return i=>{let s=Et.toNumber(i);if(!(s==null||s<t||s>e))return s}}static getCoercedValue(t,e){let i=Et.PROPERTY_COERCIONS.get(t);return i?i(e):e}static getCoercedGridOptions(t){let e={};return Object.entries(t).forEach(([i,s])=>{let r=Et.getCoercedValue(i,s);e[i]=r}),e}updateGridOptions({options:t,force:e,source:i="api"}){let s={id:Et.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([n,o])=>{i==="api"&&LA[n]&&et(`${n} is an initial property and cannot be updated.`);let a=Et.getCoercedValue(n,o),l=e||typeof a=="object"&&i==="api",h=this.gridOptions[n];if(l||h!==a){this.gridOptions[n]=a;let c={type:n,currentValue:a,previousValue:h,changeSet:s,source:i};r.push(c)}}),this.validationService.processGridOptions(this.gridOptions),s.properties=r.map(n=>n.type),r.forEach(n=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${n.type} from `,n.previousValue," to  ",n.currentValue),this.propertyEventService.dispatchEvent(n)})}addEventListener(t,e){this.propertyEventService.addEventListener(t,e)}removeEventListener(t,e){this.propertyEventService.removeEventListener(t,e)}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:iw();e!=null&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:V.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&rt(this.gridOptions.rowModelType)}isDomLayout(t){var e;return((e=this.gridOptions.domLayout)!=null?e:"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,e=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:i,estimated:!0};let r={node:t,data:t.data},n=this.getCallback("getRowHeight")(r);if(this.isNumeric(n))return n===0&&et("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,n),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||rt(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let t=this.environment.refreshRowHeightVariable();return t!==-1?t:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,e){let i=t[this.getDomDataKey()];return i?i[e]:void 0}setDomData(t,e,i){let s=this.getDomDataKey(),r=t[s];rt(r)&&(r={},t[s]=r),r[e]=i}getDocument(){let t=null;return this.gridOptions.getDocument&&Me(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&Me(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return Me(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){let t=this.gridOptions.autoGroupColumnDef;return!t?.comparator&&!this.get("treeData")}getGroupAggFiltering(){let t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){let t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){let t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;let e=this.get("groupIncludeFooter");if(typeof e=="function"){let i=this.getCallback("groupIncludeFooter");return s=>i(s)?"bottom":void 0}return()=>e?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(t){let e=t;return e.api=this.api,e.columnApi=this.columnApi,e.context=this.context,e}};Et.PROPERTY_COERCIONS=new Map([...Sh.BOOLEAN_PROPERTIES.map(t=>[t,Et.toBoolean]),...Sh.NUMBER_PROPERTIES.map(t=>[t,Et.toNumber]),["groupAggFiltering",t=>typeof t=="function"?t:Et.toBoolean(t)],["pageSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",Et.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",Et.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",Et.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",Et.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",Et.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",Et.toConstrainedNum(0,Number.MAX_VALUE)]]);Et.changeSetId=0;w([Q("gridOptions")],Et.prototype,"gridOptions",2);w([Q("eventService")],Et.prototype,"eventService",2);w([Q("environment")],Et.prototype,"environment",2);w([Q("frameworkOverrides")],Et.prototype,"frameworkOverrides",2);w([Q("eGridDiv")],Et.prototype,"eGridDiv",2);w([Q("validationService")],Et.prototype,"validationService",2);w([Q("gridApi")],Et.prototype,"api",2);w([ke],Et.prototype,"init",1);w([ts],Et.prototype,"destroy",1);Et=w([Ye("gridOptionsService")],Et);var Kg=class extends Ie{getLocaleTextFunc(){let t=this.gos.getCallback("getLocaleText");if(t)return(i,s,r)=>t({key:i,defaultValue:s,variableValues:r});let e=this.gos.get("localeText");return(i,s,r)=>{let n=e&&e[i];if(n&&r&&r.length){let o=0;for(;!(o>=r.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",r[o++])}return n??s}}};Kg=w([Ye("localeService")],Kg);var qm=class Vx extends Vo{constructor(){super(Vx.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new _u(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedListener(this.eventService,V.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.invisibleScrollbar,s=e&&this.gos.getScrollbarWidth()||0,r=s===0&&i?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),qs(this.getGui(),r),qs(this.eViewport,r),qs(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,s=e.getGridBodyCtrl().getBodyViewportElement(),r=this.getScrollPosition(),n=s.scrollTop;r!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,i){!i&&!ys(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};qm.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;w([ke],qm.prototype,"postConstruct",1);var dF=qm,ey={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},ty=["january","february","march","april","may","june","july","august","september","october","november","december"],Eo=class extends Ie{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",t=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(ba(t.source))})}processDataTypeDefinitions(){var t;let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(e).forEach(([s,r])=>{this.dataTypeDefinitions[s]=zt(Qe({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})});let i=(t=this.gos.get("dataTypeDefinitions"))!=null?t:{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,r])=>{let n=this.processDataTypeDefinition(r,i,[s],e);n&&(this.dataTypeDefinitions[s]=n,r.dataTypeMatcher&&(this.dataTypeMatchers[s]=r.dataTypeMatcher))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(s=>{let r=this.dataTypeMatchers[s];r&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=r??e[s].dataTypeMatcher})}mergeDataTypeDefinitions(t,e){let i=Qe(Qe({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(t.columnTypes),...this.convertColumnTypes(e.columnTypes)]),i}processDataTypeDefinition(t,e,i,s){let r,n=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){let o=s[n],a=e[n];if(o&&a&&(o=a),!this.validateDataTypeDefinition(t,o,n))return;r=this.mergeDataTypeDefinitions(o,t)}else{if(i.includes(n)){et('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let o=e[n];if(!this.validateDataTypeDefinition(t,o,n))return;let a=this.processDataTypeDefinition(o,e,[...i,n],s);if(!a)return;r=this.mergeDataTypeDefinitions(a,t)}return zt(Qe({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(t,e,i){return e?e.baseDataType!==t.baseDataType?(et('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(et(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(t){if(t.valueFormatter)return e=>{var i,s;if((i=e.node)!=null&&i.group){let r=e.column.getAggFunc();if(r){if(r==="first"||r==="last")return t.valueFormatter(e);if(t.baseDataType==="number"&&r!=="count"){if(typeof e.value=="number")return t.valueFormatter(e);if(typeof e.value=="object"){if(!e.value)return;if("toNumber"in e.value)return t.valueFormatter(zt(Qe({},e),{value:e.value.toNumber()}));if("value"in e.value)return t.valueFormatter(zt(Qe({},e),{value:e.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&e.column.isRowGroupActive()){if(typeof e.value!="string"||(s=t.dataTypeMatcher)!=null&&s.call(t,e.value))return t.valueFormatter(e);if(!this.gos.get("suppressGroupMaintainValueType"))return}return t.valueFormatter(e)}}updateColDefAndGetDataTypeDefinitionColumnType(t,e,i){let{cellDataType:s}=e,{field:r}=e;if(s===void 0&&(s=t.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(t,e)?this.inferCellDataType(r,i):!1),!s){t.cellDataType=!1;return}let n=this.dataTypeDefinitions[s];if(!n){et(`Missing data type definition - "${s}"`);return}return t.cellDataType=s,n.groupSafeValueFormatter&&(t.valueFormatter=n.groupSafeValueFormatter),n.valueParser&&(t.valueParser=n.valueParser),n.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,n,i),n.columnTypes}updateColDefAndGetColumnType(t,e,i){var s,r;let n=this.updateColDefAndGetDataTypeDefinitionColumnType(t,e,i),o=(r=(s=e.type)!=null?s:n)!=null?r:t.type;return t.type=o,o?this.convertColumnTypes(o):void 0}addColumnListeners(t){if(!this.isWaitingForRowData)return;let e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e)return;let i=s=>{e.add(s.key)};t.addEventListener(Pt.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push(()=>t.removeEventListener(Pt.EVENT_STATE_UPDATED,i))}canInferCellDataType(t,e){var i;if(this.rowModel.getType()!=="clientSide")return!1;let s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,s))return!1;let r=e.type===null?t.type:e.type;if(r){let n=(i=this.gos.get("columnTypes"))!=null?i:{};if(this.convertColumnTypes(r).some(a=>{let l=n[a.trim()];return l&&this.doColDefPropsPreventInference(l,s)}))return!1}return!this.doColDefPropsPreventInference(t,s)}doColDefPropsPreventInference(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(t,e,i,s))}doesColDefPropPreventInference(t,e,i,s){if(!e[i])return!1;let r=t[i];return r===null?(e[i]=!1,!1):s===void 0?!!r:r===s}inferCellDataType(t,e){var i;if(!t)return;let s,r=this.getInitialData();if(r){let o=t.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");s=Ta(r,t,o)}else this.initWaitForRowData(e);if(s==null)return;let[n]=(i=Object.entries(this.dataTypeMatchers).find(([o,a])=>a(s)))!=null?i:["object"];return n}getInitialData(){let t=this.gos.get("rowData");if(t?.length)return t[0];if(this.initialData)return this.initialData;{let e=this.rowModel.getRootNode().allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(t){if(this.columnStateUpdatesPendingInference[t]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let e=this.isColumnTypeOverrideInDataTypeDefinitions;e&&this.columnModel.queueResizeOperations();let i=this.addManagedListener(this.eventService,V.EVENT_ROW_DATA_UPDATE_STARTED,s=>{let{firstRowData:r}=s;if(!r)return;i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,e),this.columnStateUpdatesPendingInference={},e&&this.columnModel.processResizeOperations();let n={type:V.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(n)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(t,e){this.initialData=t;let i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(n=>n()),this.columnStateUpdateListenerDestroyFuncs=[];let s={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([n,o])=>{let a=this.columnModel.getGridColumn(n);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;let h=a.getColDef();if(e&&h.type&&h.type!==l.type){let c=this.getUpdatedColumnState(a,o);c.rowGroup&&c.rowGroupIndex==null&&(s[n]=c),c.pivot&&c.pivotIndex==null&&(r[n]=c),i.push(c)}}),e&&i.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(s,r)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(t,e){let i=this.columnModel.getColumnStateFromColDef(t);return e.forEach(s=>{delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(t){let e=this.dataTypeDefinitions.object,i=t.object;this.hasObjectValueParser=e.valueParser!==i.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==i.valueFormatter}convertColumnTypes(t){let e=[];return t instanceof Array?t.some(s=>typeof s!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):e=t:typeof t=="string"?e=t.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),e}getDateStringTypeDefinition(t){var e;return t?(e=this.getDataTypeDefinition(t))!=null?e:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDataTypeDefinition(t){let e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){var e;return(e=this.getDataTypeDefinition(t))==null?void 0:e.baseDataType}checkType(t,e){var i;if(e==null)return!0;let s=(i=this.getDataTypeDefinition(t))==null?void 0:i.dataTypeMatcher;return s?s(e):!0}validateColDef(t){t.cellDataType==="object"&&(t.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&et('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),t.editable&&t.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&et('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(t,e,i){let s=(a,l,h)=>{let c=a.getColDef().valueFormatter;return c===e.groupSafeValueFormatter&&(c=e.valueFormatter),this.valueService.formatValue(a,l,h,c)},r=bt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),n=this.localeService.getLocaleTextFunc(),o=a=>{let{filterParams:l}=t;t.filterParams=typeof l=="object"?Qe(Qe({},l),a):a};switch(e.baseDataType){case"number":{t.cellEditor="agNumberCellEditor",r&&o({comparator:(a,l)=>{let h=a==null?0:parseInt(a),c=l==null?0:parseInt(l);return h===c?0:h>c?1:-1}});break}case"boolean":{t.cellEditor="agCheckboxCellEditor",t.cellRenderer="agCheckboxCellRenderer",t.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===Ce.SPACE,o(r?{valueFormatter:a=>Me(a.value)?n(String(a.value),a.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>l===!1,numberOfInputs:0}]});break}case"date":{t.cellEditor="agDateCellEditor",t.keyCreator=a=>s(a.column,a.node,a.value),r&&o({valueFormatter:a=>{let l=s(a.column,a.node,a.value);return Me(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(l===1&&a!=null){let h=ty[Number(a)-1];return n(h,ey[h])}return a??n("blanks","(Blanks)")}});break}case"dateString":{t.cellEditor="agDateStringCellEditor",t.keyCreator=l=>s(l.column,l.node,l.value);let a=e.dateParser;o(r?{valueFormatter:l=>{let h=s(l.column,l.node,l.value);return Me(h)?h:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{let h=a(l??void 0);return h?[String(h.getFullYear()),String(h.getMonth()+1),String(h.getDate())]:null},treeListFormatter:(l,h)=>{if(h===1&&l!=null){let c=ty[Number(l)-1];return n(c,ey[c])}return l??n("blanks","(Blanks)")}}:{comparator:(l,h)=>{let c=a(h);return h==null||c<l?-1:c>l?1:0}});break}case"object":{t.cellEditorParams={useFormatter:!0},t.comparator=(a,l)=>{let h=this.columnModel.getPrimaryColumn(i),c=h?.getColDef();if(!h||!c)return 0;let d=a==null?"":s(h,null,a),p=l==null?"":s(h,null,l);return d===p?0:d>p?1:-1},t.keyCreator=a=>s(a.column,a.node,a.value),r?o({valueFormatter:a=>{let l=s(a.column,a.node,a.value);return Me(l)?l:n("blanks","(Blanks)")}}):t.filterValueGetter=a=>s(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){let t=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var s,r;return((r=(s=i.newValue)==null?void 0:s.trim)==null?void 0:r.call(s))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?e("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:Ch(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var s,r;return i.newValue==null?i.newValue:((r=(s=i.newValue)==null?void 0:s.trim)==null?void 0:r.call(s))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>gs(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>{var s;return i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?e("invalidDate","Invalid Date"):(s=Ys(i.value,!1))!=null?s:""},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var s;return(s=gs(i))!=null?s:void 0},dateFormatter:i=>{var s;return(s=Ys(i??null,!1))!=null?s:void 0},valueParser:i=>t(String(i.newValue))?i.newValue:null,valueFormatter:i=>t(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&t(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var s;return(s=Ch(i.value))!=null?s:""}}}}};w([Q("rowModel")],Eo.prototype,"rowModel",2);w([Q("columnModel")],Eo.prototype,"columnModel",2);w([Q("valueService")],Eo.prototype,"valueService",2);w([ke],Eo.prototype,"init",1);Eo=w([Ye("dataTypeService")],Eo);var bo=class extends Ie{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",t=>this.setColumnDefs(t))}start(){this.ctrlsService.whenReady(()=>{let t=this.gos.get("columnDefs");t?this.setColumnsAndData(t):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(t){this.columnModel.setColumnDefs(t??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();let t=bt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new Ym("AG Grid",()=>this.gos.get("debug")).log(`initialised successfully, enterprise = ${t}`)}dispatchGridReadyEvent(){let t={type:V.EVENT_GRID_READY};this.eventService.dispatchEvent(t)}setColumnDefs(t){let e=this.gos.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.columnModel.setColumnDefs(e,ba(t.source))}}};w([Q("ctrlsService")],bo.prototype,"ctrlsService",2);w([Q("columnModel")],bo.prototype,"columnModel",2);w([Q("rowModel")],bo.prototype,"rowModel",2);w([ke],bo.prototype,"postConstruct",1);bo=w([Ye("syncService")],bo);var _o=class extends Ie{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,V.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(t){this.overlayWrapperComp=t,(!this.gos.get("columnDefs")||this.gos.isRowModelType("clientSide")&&!this.gos.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gos.get("suppressLoadingOverlay"))return;let t={},e=this.userComponentFactory.getLoadingOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gos.get("suppressNoRowsOverlay"))return;let t={},e=this.userComponentFactory.getNoRowsOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(t,e,i){let s=t.newAgStackInstance(),r=this.addManagedPropertyListener(i,({currentValue:n})=>{s.then(o=>{o.refresh&&o.refresh(this.gos.addGridCommonParams(Qe({},n??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(s,e,r)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){let t=this.paginationProxy.isEmpty(),e=this.gos.get("suppressNoRowsOverlay");t&&!e?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};w([Q("userComponentFactory")],_o.prototype,"userComponentFactory",2);w([Q("paginationProxy")],_o.prototype,"paginationProxy",2);w([Q("columnModel")],_o.prototype,"columnModel",2);w([ke],_o.prototype,"postConstruct",1);_o=w([Ye("overlayService")],_o);var Ji=class extends Ie{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Qi(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Qi(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Qi(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var t;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(t=this.gos.get("initialState"))!=null?t:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let e=this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,({source:r})=>{r==="gridInitializing"&&(e?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),i=this.addManagedListener(this.eventService,V.EVENT_ROW_COUNT_READY,()=>{i?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),s=this.addManagedListener(this.eventService,V.EVENT_FIRST_DATA_RENDERED,()=>{s?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,V.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,V.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var t;let e=(t=this.gos.get("initialState"))!=null?t:{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,V.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var t;let{filter:e,rowGroupExpansion:i,rowSelection:s,pagination:r}=(t=this.gos.get("initialState"))!=null?t:{},n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),i&&this.setRowGroupExpansionState(i),s&&this.setRowSelectionState(s),r&&this.setPaginationState(r),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,V.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,V.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,V.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,V.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,o=>{(o.newPage||o.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var t;let{scroll:e,rangeSelection:i,focusedCell:s,columnOrder:r}=(t=this.gos.get("initialState"))!=null?t:{};s&&this.setFocusedCellState(s),i&&this.setRangeSelectionState(i),e&&this.setScrollState(e),this.setColumnPivotState(!!r?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,V.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,V.EVENT_RANGE_SELECTION_CHANGED,n=>{n.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,V.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){let t=this.columnModel.isPivotMode(),e=[],i=[],s=[],r=[],n=[],o=[],a=[],l=[],h=[],c=this.columnModel.getColumnState();for(let d=0;d<c.length;d++){let{colId:p,sort:u,sortIndex:m,rowGroup:f,rowGroupIndex:g,aggFunc:y,pivot:x,pivotIndex:T,pinned:A,hide:S,width:M,flex:B}=c[d];h.push(p),u&&(e[m??0]={colId:p,sort:u}),f&&(i[g??0]=p),typeof y=="string"&&s.push({colId:p,aggFunc:y}),x&&(r[T??0]=p),A&&(A==="right"?o:n).push(p),S&&a.push(p),(B||M)&&l.push({colId:p,flex:B??void 0,width:M})}return{sort:e.length?{sortModel:e}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:r.length||t?{pivotMode:t,pivotColIds:r}:void 0,columnPinning:n.length||o.length?{leftColIds:n,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:h.length?{orderedColIds:h}:void 0}}setColumnState(t){let{sort:e,rowGroup:i,aggregation:s,pivot:r,columnPinning:n,columnVisibility:o,columnSizing:a,columnOrder:l}=t,h={},c=m=>{let f=h[m];return f||(f={colId:m},h[m]=f,f)};e&&e.sortModel.forEach(({colId:m,sort:f},g)=>{let y=c(m);y.sort=f,y.sortIndex=g}),i&&i.groupColIds.forEach((m,f)=>{let g=c(m);g.rowGroup=!0,g.rowGroupIndex=f}),s&&s.aggregationModel.forEach(({colId:m,aggFunc:f})=>{c(m).aggFunc=f}),r&&(r.pivotColIds.forEach((m,f)=>{let g=c(m);g.pivot=!0,g.pivotIndex=f}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"})),n&&(n.leftColIds.forEach(m=>{c(m).pinned="left"}),n.rightColIds.forEach(m=>{c(m).pinned="right"})),o&&o.hiddenColIds.forEach(m=>{c(m).hide=!0}),a&&a.columnSizingModel.forEach(({colId:m,flex:f,width:g})=>{let y=c(m);y.flex=f??null,y.width=g});let d=l?.orderedColIds,p=!!d?.length,u=p?d.map(m=>c(m)):Object.values(h);if(u.length){this.columnStates=u;let m={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:u,applyOrder:p,defaultState:m},"gridInitializing")}}setColumnPivotState(t){let e=this.columnStates;this.columnStates=void 0;let i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(e){let s=[];for(let r of e)this.columnModel.getSecondaryColumn(r.colId)&&s.push(r);this.columnModel.applyColumnState({state:s,applyOrder:t},"gridInitializing")}i&&this.columnModel.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){let t=this.columnModel.getColumnGroupState(),e=[];return t.forEach(({groupId:i,open:s})=>{s&&e.push(i)}),e.length?{openColumnGroupIds:e}:void 0}setColumnGroupState(t){var e;if(!t.hasOwnProperty("columnGroup"))return;let i=new Set((e=t.columnGroup)==null?void 0:e.openColumnGroupIds),r=this.columnModel.getColumnGroupState().map(({groupId:n})=>{let o=i.has(n);return o&&i.delete(n),{groupId:n,open:o}});i.forEach(n=>{r.push({groupId:n,open:!0})}),r.length&&(this.columnGroupStates=r),this.columnModel.setColumnGroupState(r,"gridInitializing")}getFilterState(){var t;let e=this.filterManager.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let i=(t=this.filterManager.getAdvancedFilterModel())!=null?t:void 0;return e||i?{filterModel:e,advancedFilterModel:i}:void 0}setFilterState(t,e){let{filterModel:i,advancedFilterModel:s}=t??{advancedFilterModel:e};i&&this.filterManager.setFilterModel(i,"columnFilter"),s&&this.filterManager.setAdvancedFilterModel(s)}getRangeSelectionState(){var t;let e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{let{id:s,type:r,startRow:n,endRow:o,columns:a,startColumn:l}=i;return{id:s,type:r,startRow:n,endRow:o,colIds:a.map(h=>h.getColId()),startColId:l.getColId()}});return e?.length?{cellRanges:e}:void 0}setRangeSelectionState(t){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;let e=[];t.cellRanges.forEach(i=>{let s=[];if(i.colIds.forEach(n=>{let o=this.columnModel.getGridColumn(n);o&&s.push(o)}),!s.length)return;let r=this.columnModel.getGridColumn(i.startColId);if(!r){let n=this.columnModel.getAllDisplayedColumns(),o=new Set(s);r=n.find(a=>o.has(a))}e.push(zt(Qe({},i),{columns:s,startColumn:r}))}),this.rangeService.setCellRanges(e)}getScrollState(){var t,e,i;if(!this.isClientSideRowModel)return;let s=(t=this.ctrlsService.getGridBodyCtrl())==null?void 0:t.getScrollFeature(),{left:r}=(e=s?.getHScrollPosition())!=null?e:{left:0},{top:n}=(i=s?.getVScrollPosition())!=null?i:{top:0};return n||r?{top:n,left:r}:void 0}setScrollState(t){var e;if(!this.isClientSideRowModel)return;let{top:i,left:s}=t;(e=this.ctrlsService.getGridBodyCtrl())==null||e.getScrollFeature().setScrollPosition(i,s)}getSideBarState(){var t,e;return(e=(t=this.sideBarService)==null?void 0:t.getSideBarComp())==null?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let t=this.focusService.getFocusedCell();if(t){let{column:e,rowIndex:i,rowPinned:s}=t;return{colId:e.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(t){if(!this.isClientSideRowModel)return;let{colId:e,rowIndex:i,rowPinned:s}=t;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(e),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){let t=this.paginationProxy.getCurrentPage(),e=this.gos.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!t&&!e))return{page:t,pageSize:e}}setPaginationState(t){t.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(t.pageSize,"initialState"),typeof t.page=="number"&&this.paginationProxy.setPage(t.page)}getRowSelectionState(){var t;let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((t=e?.toggledNodes)!=null&&t.length)?void 0:e}setRowSelectionState(t){this.selectionService.setSelectionState(t,"gridInitializing")}getRowGroupExpansionState(){let t=this.expansionService.getExpandedRows();return t.length?{expandedRowGroupIds:t}:void 0}setRowGroupExpansionState(t){this.expansionService.expandRows(t.expandedRowGroupIds)}updateColumnState(t){let e=this.getColumnState(),i=!1;Object.entries(e).forEach(([s,r])=>{Sg(r,this.cachedState[s])||(i=!0)}),this.cachedState=Qe(Qe({},this.cachedState),e),i&&this.dispatchStateUpdateEvent(t)}updateCachedState(t,e){let i=this.cachedState[t];this.setCachedStateValue(t,e),Sg(e,i)||this.dispatchStateUpdateEvent([t])}setCachedStateValue(t,e){this.cachedState=zt(Qe({},this.cachedState),{[t]:e})}refreshStaleState(){this.staleStateKeys.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(t){this.suppressEvents||(t.forEach(e=>this.queuedUpdateSources.add(e)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let t=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();let e={type:V.EVENT_STATE_UPDATED,sources:t,state:this.cachedState};this.eventService.dispatchEvent(e)}suppressEventsAndDispatchInitEvent(t){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),t(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};w([Q("filterManager")],Ji.prototype,"filterManager",2);w([Q("ctrlsService")],Ji.prototype,"ctrlsService",2);w([Q("focusService")],Ji.prototype,"focusService",2);w([Q("columnModel")],Ji.prototype,"columnModel",2);w([Q("paginationProxy")],Ji.prototype,"paginationProxy",2);w([Q("rowModel")],Ji.prototype,"rowModel",2);w([Q("selectionService")],Ji.prototype,"selectionService",2);w([Q("expansionService")],Ji.prototype,"expansionService",2);w([Q("columnAnimationService")],Ji.prototype,"columnAnimationService",2);w([_t("sideBarService")],Ji.prototype,"sideBarService",2);w([_t("rangeService")],Ji.prototype,"rangeService",2);w([ke],Ji.prototype,"postConstruct",1);Ji=w([Ye("stateService")],Ji);var Vh=class extends Ie{init(){this.processGridOptions(this.gridOptions)}processGridOptions(t){this.processOptions(t,cF)}processColumnDefs(t){this.processOptions(t,_a)}processOptions(t,e){let{validations:i,deprecations:s,allProperties:r,propertyExceptions:n,objectName:o,docsUrl:a}=e;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(t,[...n??[],...Object.keys(s)],r,o,a);let l=new Set;Object.keys(t).forEach(c=>{var d;let p=s[c];if(p)if("renamed"in p){let{renamed:T,version:A}=p;l.add(`As of v${A}, ${String(c)} is deprecated. Please use ${String(T)} instead.`),t[T]=t[c]}else{let{message:T,version:A}=p;l.add(`As of v${A}, ${String(c)} is deprecated. ${T??""}`)}let u=t[c];if(u==null||u===!1)return;let m=i[c],f;if(m)if(typeof m=="function"){let T=m(t,this.gridOptions);if(!T)return;if("objectName"in T){let A=t[c];if(Array.isArray(A)){A.forEach(S=>{this.processOptions(S,T)});return}this.processOptions(t[c],T);return}f=T}else f=m;else return;let{module:g,dependencies:y,supportedRowModels:x}=f;if(x){let T=(d=this.gridOptions.rowModelType)!=null?d:"clientSide";if(!x.includes(T)){l.add(`${String(c)} is not supported with the '${T}' row model.`);return}}if(g){let T=Array.isArray(g)?g:[g],A=!0;if(T.forEach(S=>{bt.__assertRegistered(S,String(c),this.context.getGridId())||(A=!1,l.add(`${String(c)} is only available when ${S} is loaded.`))}),!A)return}if(y){let T=this.checkForWarning(c,y,t);if(T){l.add(T);return}}}),l.size>0&&l.forEach(c=>{et(c)})}checkForWarning(t,e,i){if(typeof e=="function")return e(i,this.gridOptions);let r=Object.entries(e).find(([a,l])=>{let h=i[a];return!l.includes(h)});if(!r)return null;let[n,o]=r;return o.length>1?`'${String(t)}' requires '${n}' to be one of [${o.join(", ")}].`:`'${String(t)}' requires '${n}' to be ${o[0]}.`}checkProperties(t,e,i,s,r){let n=["__ob__","__v_skip","__metadata__"],o=mw(Object.getOwnPropertyNames(t),[...n,...e,...i],i);if(Ui(o,(a,l)=>{et(`invalid ${s} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`)}),Object.keys(o).length>0&&r){let a=this.getFrameworkOverrides().getDocLink(r);et(`to see all the valid ${s} properties please check: ${a}`)}}};w([Q("gridOptions")],Vh.prototype,"gridOptions",2);w([ke],Vh.prototype,"init",1);Vh=w([Ye("validationService")],Vh);var Qd=class extends Ie{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new Qg(this.getFrameworkOverrides())}addEventListener(t,e){let i=this.frameworkEventWrappingService.wrap(e),s=this.gos.useAsyncEvents()&&!Pd.has(t),r=s?this.asyncEventListeners:this.syncEventListeners;r.has(t)||r.set(t,new Set),r.get(t).add(i),this.eventService.addEventListener(t,i,s)}removeEventListener(t,e){var i;let s=this.frameworkEventWrappingService.unwrap(e),r=this.asyncEventListeners.get(t),n=!!r?.delete(s);n||(i=this.syncEventListeners.get(t))==null||i.delete(s),this.eventService.removeEventListener(t,s,n)}addGlobalListener(t){let e=this.frameworkEventWrappingService.wrapGlobal(t);if(this.gos.useAsyncEvents()){let s=(n,o)=>{Pd.has(n)&&e(n,o)},r=(n,o)=>{Pd.has(n)||e(n,o)};this.globalEventListenerPairs.set(t,{syncListener:s,asyncListener:r}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(e),this.eventService.addGlobalListener(e,!1)}removeGlobalListener(t){let e=this.frameworkEventWrappingService.unwrapGlobal(t);if(this.globalEventListenerPairs.has(e)){let{syncListener:s,asyncListener:r}=this.globalEventListenerPairs.get(e);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(t)}else this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,!1)}destroyEventListeners(t,e){t.forEach((i,s)=>{i.forEach(r=>this.eventService.removeEventListener(s,r,e)),i.clear()}),t.clear()}destroyGlobalListeners(t,e){t.forEach(i=>this.eventService.removeGlobalListener(i,e)),t.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:t,asyncListener:e})=>{this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(e,!0)}),this.globalEventListenerPairs.clear()}};w([ke],Qd.prototype,"postConstruct",1);Qd=w([Ye("apiEventService")],Qd);var Zm=class extends nt{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let t=this.selectPageSizeComp.getValue();if(!t)return;let e=Number(t);isNaN(e)||e<1||e===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(e,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,V.EVENT_PAGINATION_CHANGED,t=>this.handlePaginationChanged(t))}handlePaginationChanged(t){if(!this.selectPageSizeComp||!t?.newPageSize)return;let e=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(t){this.selectPageSizeComp&&this.reset(),t&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){ti(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){let t=this.getPageSizeSelectorValues(),e=this.paginationProxy.getPageSize(),i=!e||!t.includes(e);i&&(t.unshift(""),et(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);let s=this.localeService.getLocaleTextFunc(),r=s("pageSizeSelectorLabel","Page Size:"),n=t.map(a=>({value:String(a),text:String(a)})),o=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new mu).addOptions(n).setValue(String(i?"":e)).setAriaLabel(o).setLabel(r).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=i}getPageSizeSelectorValues(){let t=[20,50,100],e=this.gos.get("paginationPageSizeSelector");return!Array.isArray(e)||!this.validateValues(e)?t:[...e].sort((i,s)=>i-s)}validateValues(t){if(!t.length)return et(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let e=0;e<t.length;e++){let i=t[e],s=typeof i=="number",r=i>0;if(!s)return et(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!r)return et(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};w([Q("paginationProxy")],Zm.prototype,"paginationProxy",2);w([ke],Zm.prototype,"init",1);var Bh=class extends Ie{constructor(){super(),this.descriptionContainer=null,this.announceValue=Qi(this.announceValue.bind(this),200)}postConstruct(){let t=this.gos.getDocument(),e=this.descriptionContainer=t.createElement("div");e.classList.add("ag-aria-description-container"),im(e,"polite"),Uy(e,"additions text"),Wy(e,!0),this.eGridDiv.appendChild(e)}announceValue(t){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=t)},50))}destroy(){super.destroy();let{descriptionContainer:t}=this;t&&(ti(t),t.parentElement&&t.parentElement.removeChild(t)),this.descriptionContainer=null,this.eGridDiv=null}};w([Q("eGridDiv")],Bh.prototype,"eGridDiv",2);w([ke],Bh.prototype,"postConstruct",1);Bh=w([Ye("ariaAnnouncementService")],Bh);var Xg=class{};Xg.gridOptions=void 0;function Bx(t,e,i){if(!e)return Ar("No gridOptions provided to createGrid"),{};let s=new pF().create(t,e,r=>{let n=new sl(t);r.createBean(n)},void 0,i);if(!Object.isFrozen(e)&&!i?.frameworkOverrides){let r="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(e,"api",{get:()=>{Ar(`gridOptions.api is no longer supported. See ${r}.`)},configurable:!0}),Object.defineProperty(e,"columnApi",{get:()=>{Ar(`gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ${r}.`)},configurable:!0})}return s}var uF=1,pF=class{create(t,e,i,s,r){var n;let o={};Xg.gridOptions?(fs(o,Xg.gridOptions,!0,!0),o=Qe(Qe({},o),e)):o=e;let a=Et.getCoercedGridOptions(o),l=!!a.debug,h=(n=a.gridId)!=null?n:String(uF++),c=this.getRegisteredModules(r,h),d=this.createBeansList(a.rowModelType,c,h),p=this.createProvidedBeans(t,a,r);if(!d){Ar("Failed to create grid.");return}let u={providedBeanInstances:p,beanClasses:d,debug:l,gridId:h},m=new Ym("Context",()=>u.debug),f=new wA(u,m),g=f.getBean("beans");return this.registerModuleUserComponents(g,c),this.registerStackComponents(g,c),this.registerControllers(g,c),i(f),g.syncService.start(),s&&s(f),f.getBean("gridApi")}registerControllers(t,e){e.forEach(i=>{i.controllers&&i.controllers.forEach(s=>t.ctrlsFactory.register(s))})}registerStackComponents(t,e){let i=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(t,e){let i=t?t.modules:null,s=bt.__getRegisteredModules(e),r=[],n={},o=(a,l,h)=>{(d=>{n[d.moduleName]||(n[d.moduleName]=!0,r.push(d),bt.__register(d,a,h))})(l),l.dependantModules&&l.dependantModules.forEach(d=>o(a,d,h))};return i&&i.forEach(a=>o(!0,a,e)),s&&s.forEach(a=>o(!bt.__isPackageBased(),a,void 0)),r}registerModuleUserComponents(t,e){this.extractModuleEntity(e,s=>s.userComponents?s.userComponents:[]).forEach(s=>{t.userComponentRegistry.registerDefaultComponent(s.componentName,s.componentClass)})}createProvidedBeans(t,e,i){let s=i?i.frameworkOverrides:null;rt(s)&&(s=new Xm);let r={gridOptions:e,eGridDiv:t,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(r,i.providedBeanInstances),r}createAgStackComponentsList(t){let e=[{componentName:"AgCheckbox",componentClass:vu},{componentName:"AgRadioButton",componentClass:Ow},{componentName:"AgToggleButton",componentClass:Dx},{componentName:"AgInputTextField",componentClass:Do},{componentName:"AgInputTextArea",componentClass:kD},{componentName:"AgInputNumberField",componentClass:Pm},{componentName:"AgInputDateField",componentClass:ND},{componentName:"AgInputRange",componentClass:GD},{componentName:"AgRichSelect",componentClass:Mu},{componentName:"AgSelect",componentClass:mu},{componentName:"AgSlider",componentClass:BD},{componentName:"AgGridBody",componentClass:fr},{componentName:"AgHeaderRoot",componentClass:ID},{componentName:"AgSortIndicator",componentClass:Im},{componentName:"AgPagination",componentClass:xs},{componentName:"AgPageSizeSelector",componentClass:Zm},{componentName:"AgOverlayWrapper",componentClass:tF},{componentName:"AgGroupComponent",componentClass:HD},{componentName:"AgRowContainer",componentClass:Xa},{componentName:"AgFakeHorizontalScroll",componentClass:iF},{componentName:"AgFakeVerticalScroll",componentClass:dF},{componentName:"AgAutocomplete",componentClass:KD}],i=this.extractModuleEntity(t,s=>s.agStackComponents?s.agStackComponents:[]);return e=e.concat(i),e}createBeansList(t="clientSide",e,i){let s=e.filter(l=>!l.rowModel||l.rowModel===t),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[t]){Ar("Could not find row model for rowModelType = "+t);return}if(!bt.__assertRegistered(r[t],`rowModelType = '${t}'`,i))return;let n=[lt,Ha,zg,kh,Na,gt,$d,Zd,Oh,Vg,En,Va,Dh,Kg,Vh,Ph,Rh,Rg,ur,Et,Kr,wo,Zs,Ti,vo,Mh,Ns,Xd,wh,yo,zi,qd,Tn,Yd,Co,bn,at,xo,Ft,jr,Lh,_n,Kd,La,So,Ug,Ih,Ba,xh,Ga,ka,Ir,Dg,jg,Nh,Mr,Wa,vh,Gh,Ua,$g,Eo,vs,bo,_o,Ji,Fh,Qd,Bh,Qs],o=this.extractModuleEntity(s,l=>l.beans?l.beans:[]);n.push(...o);let a=[];return n.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(t,e){return[].concat(...t.map(e))}},Hx=class{wrap(t,e,i=[],s){let r=this.createWrapper(t,s);return e.forEach(n=>{this.createMethod(r,n,!0)}),i.forEach(n=>{this.createMethod(r,n,!1)}),r}unwrap(t){return t}createMethod(t,e,i){t.addMethod(e,this.createMethodProxy(t,e,i))}createMethodProxy(t,e,i){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}},Qm=class{};Qm.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};Qm.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];Qm.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var rl=typeof global>"u"?{}:global;rl.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;rl.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;rl.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;rl.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;rl.Node=typeof Node>"u"?{}:Node;rl.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Jm=class gh{constructor(e,i,s,r,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=i,this.eventService=s,this.columnModel=r,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=gh.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return dt.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let i=this.rootNode,s=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?i.allLeafChildren=e.map(r=>this.createNode(r,this.rootNode,gh.TOP_LEVEL)):(i.allLeafChildren=[],i.childrenAfterGroup=[]),s&&(s.childrenAfterFilter=i.childrenAfterFilter,s.childrenAfterGroup=i.childrenAfterGroup,s.childrenAfterAggFilter=i.childrenAfterAggFilter,s.childrenAfterSort=i.childrenAfterSort,s.childrenMapped=i.childrenMapped,s.allLeafChildren=i.allLeafChildren)}updateRowData(e,i){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let s={remove:[],update:[],add:[]},r=[];return this.executeRemove(e,s,r),this.executeUpdate(e,s,r),this.executeAdd(e,s),this.updateSelection(r,"rowDataChanged"),i&&dt.sortRowNodesByOrder(this.rootNode.allLeafChildren,i),s}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){let i={type:V.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e?.length?e[0]:null};this.eventService.dispatchEvent(i)}updateSelection(e,i){let s=e.length>0;if(s&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i}),this.selectionService.updateGroupsFromChildrenSelections(i),s){let r={type:V.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(r)}}executeAdd(e,i){var s;let{add:r,addIndex:n}=e;if(dt.missingOrEmpty(r))return;let o=r.map(a=>this.createNode(a,this.rootNode,gh.TOP_LEVEL));if(typeof n=="number"&&n>=0){let{allLeafChildren:a}=this.rootNode,l=a.length,h=n;if(this.gos.get("treeData")&&n>0&&l>0){for(let u=0;u<l;u++)if(((s=a[u])==null?void 0:s.rowIndex)==n-1){h=u+1;break}}let d=a.slice(0,h),p=a.slice(h,a.length);this.rootNode.allLeafChildren=[...d,...o,...p]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...o];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),i.add=o}executeRemove(e,i,s){let{remove:r}=e;if(dt.missingOrEmpty(r))return;let n={};r.forEach(o=>{let a=this.lookupRowNode(o);a&&(a.isSelected()&&s.push(a),a.clearRowTopAndRowIndex(),n[a.id]=!0,delete this.allNodesMap[a.id],i.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(o=>!n[o.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,i,s){let{update:r}=e;dt.missingOrEmpty(r)||r.forEach(n=>{let o=this.lookupRowNode(n);o&&(o.updateData(n),!o.selectable&&o.isSelected()&&s.push(o),this.setMasterForRow(o,n,gh.TOP_LEVEL,!1),i.update.push(o))})}lookupRowNode(e){let i=this.gos.getCallback("getRowId"),s;if(i){let r=i({data:e,level:0});if(s=this.allNodesMap[r],!s)return console.error(`AG Grid: could not find row id=${r}, data item was not found for this id`),null}else if(s=this.rootNode.allLeafChildren.find(r=>r.data===e),!s)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return s||null}createNode(e,i,s){let r=new ct(this.beans);r.group=!1,this.setMasterForRow(r,e,s,!0);let n=this.gos.get("suppressParentsInRowNodes");return i&&!n&&(r.parent=i),r.level=s,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn(`AG Grid: duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,i,s,r){if(this.gos.get("treeData"))e.setMaster(!1),r&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let a=this.gos.get("isRowMaster");a?e.setMaster(a(i)):e.setMaster(!0)}else e.setMaster(!1);if(r){let a=this.columnModel.getRowGroupColumns(),l=a?a.length:0,h=s+l;e.expanded=e.master?this.isExpanded(h):!1}}}isExpanded(e){let i=this.gos.get("groupDefaultExpanded");return i===-1?!0:e<i}};Jm.TOP_LEVEL=0;Jm.ROOT_NODE_ID="ROOT_NODE_ID";var fF=Jm,es=class extends Ie{constructor(){super(...arguments),this.onRowHeightChanged_debounced=dt.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){let t=this.refreshModel.bind(this,{step:"group"}),e=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:e});this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,V.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,V.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,V.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,V.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new ct(this.beans),this.nodeManager=new fF(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){let t=new Set(["treeData","masterDetail"]),e=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),n=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...t,...e,...i,...s,...s,...r,...n,...o,...a];this.addManagedPropertyListeners(l,h=>{var c;let d=(c=h.changeSet)==null?void 0:c.properties;if(!d)return;let p=u=>d.some(m=>u.has(m));if(p(t)){this.setRowData(this.rootNode.allLeafChildren.map(u=>u.data));return}if(p(e)){this.refreshModel({step:"group"});return}if(p(i)){this.refreshModel({step:"filter"});return}if(p(s)){this.refreshModel({step:"pivot"});return}if(p(r)){this.refreshModel({step:"aggregate"});return}if(p(n)){this.refreshModel({step:"sort"});return}if(p(o)){this.refreshModel({step:"filter_aggregates"});return}p(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let t=this.gos.get("rowData");t&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(t))}ensureRowHeightsValid(t,e,i,s){let r,n=!1;do{r=!1;let o=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),l=Math.max(o,i),h=Math.min(a,s);for(let c=l;c<=h;c++){let d=this.getRow(c);if(d.rowHeightEstimated){let p=this.gos.getRowHeightForNode(d);d.setRowHeight(p.height),r=!0,n=!0}}r&&this.setRowTopAndRowIndex()}while(r);return n}setRowTopAndRowIndex(){let t=this.environment.getDefaultRowHeight(),e=0,i=new Set,s=this.gos.isDomLayout("normal");for(let r=0;r<this.rowsToDisplay.length;r++){let n=this.rowsToDisplay[r];if(n.id!=null&&i.add(n.id),n.rowHeight==null){let o=this.gos.getRowHeightForNode(n,s,t);n.setRowHeight(o.height,o.estimated)}n.setRowTop(e),n.setRowIndex(r),e+=n.rowHeight}return i}clearRowTopAndRowIndex(t,e){let i=t.isActive(),s=n=>{n&&n.id!=null&&!e.has(n.id)&&n.clearRowTopAndRowIndex()},r=n=>{if(s(n),s(n.detailNode),s(n.sibling),n.hasChildren()&&n.childrenAfterGroup){let o=n.level==-1;i&&!o&&!n.expanded||n.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(t,e,i=0){let s=this.getRowIndexAtPixel(e),r=this.getRow(s),n=!this.gos.get("suppressAnimationFrame");return r===t[0]?!1:(t.forEach(o=>{dt.removeFromArray(this.rootNode.allLeafChildren,o)}),t.forEach((o,a)=>{dt.insertIntoArray(this.rootNode.allLeafChildren,o,Math.max(s+i,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:n}),!0)}highlightRowAtPixel(t,e){let i=e!=null?this.getRowIndexAtPixel(e):null,s=i!=null?this.getRow(i):null;if(!s||!t||s===t||e==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let r=this.getHighlightPosition(e,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(r),this.lastHighlightedRow=s}getHighlightPosition(t,e){if(!e){let r=this.getRowIndexAtPixel(t);if(e=this.getRow(r||0),!e)return 1}let{rowTop:i,rowHeight:s}=e;return t-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let e=this.rootNode.childrenAfterAggFilter;return e?e.length:0}getTopLevelRowDisplayedIndex(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;let i=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(t){if(dt.missing(this.rowsToDisplay))return null;let e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){let t=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:t})}onFilterChanged(t){if(t.afterDataChange)return;let e=this.gos.isAnimateRows(),s=t.columns.length===0||t.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:e})}onSortChanged(){let t=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:t,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(t){let e=dt.missingOrEmpty(t),i=new Pu(!1,this.rootNode);return(e||this.gos.get("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||t.rowNodeTransactions==null)return!1;let e=t.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return e==null||e.length==0}buildRefreshModelParams(t){let e="group",i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(dt.exists(t)&&(e=i[t]),dt.missing(e)){console.error(`AG Grid: invalid step ${t}, available steps are ${Object.keys(i).join(", ")}`);return}let s=!this.gos.get("suppressAnimationFrame");return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(t){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let e=typeof t=="object"&&"step"in t?t:this.buildRefreshModelParams(t);if(!e||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;let i=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,i,!!e.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(e.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}let s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1;let r={type:V.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(r)}isEmpty(){let t=dt.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return dt.missing(this.rootNode)||t||!this.columnModel.isReady()}isRowsToRender(){return dt.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let i=!e,s=!1,r=[],n=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(s)return;if(i&&(o===e||o===t)&&(s=!0,o.group&&n)){r.push(...o.allLeafChildren);return}if(!i){if(o!==e&&o!==t)return;i=!0}if(!o.group||!n){r.push(o);return}}),r}setDatasource(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let e=0,i=this.rowsToDisplay.length-1;if(t<=0)return 0;if(dt.last(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;let r=-1,n=-1;for(;;){let o=Math.floor((e+i)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,t)||(a.rowTop<t?e=o+1:a.rowTop>t&&(i=o-1),r===e&&n===i))return o;r=e,n=i}}isRowInPixel(t,e){let i=t.rowTop,s=t.rowTop+t.rowHeight;return i<=e&&s>e}forEachLeafNode(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((e,i)=>t(e,i))}forEachNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:t,recursionType:0,index:0,includeFooterNodes:e})}forEachNodeAfterFilter(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:t,recursionType:1,index:0,includeFooterNodes:e})}forEachNodeAfterFilterAndSort(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:t,recursionType:2,index:0,includeFooterNodes:e})}forEachPivotNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:3,index:0,includeFooterNodes:e})}recursivelyWalkNodesAndCallback(t){let{nodes:e,callback:i,recursionType:s,includeFooterNodes:r}=t,{index:n}=t,o=a=>{var l;let h=(l=e[0])==null?void 0:l.parent;if(!h)return;let c=r&&this.gos.getGrandTotalRow(),d=this.gos.getGroupTotalRowCallback(),p=r&&d({node:h});if(h===this.rootNode){c===a&&(h.createFooter(),i(h.sibling,n++));return}p===a&&(h.createFooter(),i(h.sibling,n++))};o("top");for(let a=0;a<e.length;a++){let l=e[a];if(i(l,n++),l.hasChildren()&&!l.footer){let h=null;switch(s){case 0:h=l.childrenAfterGroup;break;case 1:h=l.childrenAfterAggFilter;break;case 2:h=l.childrenAfterSort;break;case 3:h=l.leafGroup?null:l.childrenAfterSort;break}h&&(n=this.recursivelyWalkNodesAndCallback({nodes:[...h],callback:i,recursionType:s,index:n,includeFooterNodes:r}))}}return o("bottom"),n}doAggregate(t){var e;(e=this.aggregationStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}doFilterAggregates(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(t){let e=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=o=>{o&&o.forEach(a=>{let l=()=>{a.expanded=t,s(a.childrenAfterGroup)};if(e){dt.exists(a.childrenAfterGroup)&&l();return}if(i){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});let r=t?"expandAll":"collapseAll",n={type:V.EVENT_EXPAND_COLLAPSE_ALL,source:r};this.eventService.dispatchEvent(n)}doSort(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})}doRowGrouping(t,e,i,s){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:e,changedPath:i}):this.groupStage.execute({rowNode:this.rootNode,changedPath:i,afterColumnsChanged:s}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)){let n={type:V.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(n)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:V.EVENT_ROW_COUNT_READY}))}doFilter(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})}doPivot(t){var e;(e=this.pivotStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(t){if(typeof t=="string"&&t.indexOf(ct.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===t&&(i=s)}),i}return this.nodeManager.getRowNode(t)}setRowData(t){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(t),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){let t={type:V.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(t,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let i=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let t=[],e=[],i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(s=>{let r=this.nodeManager.updateRowData(s.rowDataTransaction,void 0);e.push(r),s.callback&&t.push(s.callback.bind(null,r)),typeof s.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(e,void 0,i),t.length>0&&window.setTimeout(()=>{t.forEach(s=>s())},0),e.length>0){let s={type:V.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(t,e){this.valueCache.onDataChanged();let i=this.nodeManager.updateRowData(t,e),s=typeof t.addIndex=="number";return this.commonUpdateRowData([i],e,s),i}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;let e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){let s=this.rootNode.allLeafChildren[i];e[s.id]=i}return e}commonUpdateRowData(t,e,i){if(!this.hasStarted)return;let s=!this.gos.get("suppressAnimationFrame");i&&(e=this.createRowNodeOrder());let r={type:V.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(r),this.refreshModel({step:"group",rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:s})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);let i=e.detailNode;i&&i.setRowHeight(i.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};w([Q("columnModel")],es.prototype,"columnModel",2);w([Q("selectionService")],es.prototype,"selectionService",2);w([Q("valueCache")],es.prototype,"valueCache",2);w([Q("beans")],es.prototype,"beans",2);w([Q("filterStage")],es.prototype,"filterStage",2);w([Q("sortStage")],es.prototype,"sortStage",2);w([Q("flattenStage")],es.prototype,"flattenStage",2);w([_t("groupStage")],es.prototype,"groupStage",2);w([_t("aggregationStage")],es.prototype,"aggregationStage",2);w([_t("pivotStage")],es.prototype,"pivotStage",2);w([_t("filterAggregatesStage")],es.prototype,"filterAggregatesStage",2);w([ke],es.prototype,"init",1);es=w([Ye("rowModel")],es);var Jd=class extends Ie{execute(t){let{changedPath:e}=t;this.filterService.filter(e)}};w([Q("filterService")],Jd.prototype,"filterService",2);Jd=w([Ye("filterStage")],Jd);var Hh=class extends Ie{execute(t){let e=this.sortController.getSortOptions(),i=dt.exists(e)&&e.length>0,s=i&&dt.exists(t.rowNodeTransactions)&&this.gos.get("deltaSort"),r=e.some(n=>this.gos.isColumnsSortingCoupledToGroup()?n.column.isPrimary()&&n.column.isRowGroupActive():!!n.column.getColDef().showRowGroup);this.sortService.sort(e,i,s,t.rowNodeTransactions,t.changedPath,r)}};w([Q("sortService")],Hh.prototype,"sortService",2);w([Q("sortController")],Hh.prototype,"sortController",2);Hh=w([Ye("sortStage")],Hh);var eu=class extends Ie{execute(t){let e=t.rowNode,i=[],s=this.beans.columnModel.isPivotMode(),r=s&&e.leafGroup,n=r?[e]:e.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,n,i,s,0);let a=i.length>0;if(!r&&a&&o.grandTotalRow){e.createFooter();let h=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,e.sibling,i,0,h)}return i}getFlattenDetails(){let t=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!t&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(t,e,i,s,r){if(!dt.missingOrEmpty(e))for(let n=0;n<e.length;n++){let o=e[n],a=o.hasChildren(),l=s&&!a,h=t.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,c=t.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,d=s&&o.leafGroup,p=t.hideOpenParents&&o.expanded&&!o.master&&!d;if(!l&&!p&&!h&&!c&&this.addRowNodeToRowsToDisplay(t,o,i,r),!(s&&o.leafGroup)){if(a){let m=h||c;if(o.expanded||m){let f=t.groupTotalRow({node:o});f||o.destroyFooter();let g=m?r:r+1;f==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,i,g)),this.recursivelyAddToRowsToDisplay(t,o.childrenAfterSort,i,s,g),f==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,i,g))}}else if(o.master&&o.expanded){let m=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(t,m,i,r)}}}}addRowNodeToRowsToDisplay(t,e,i,s,r){r?i.unshift(e):i.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:s)}createDetailNode(t){if(dt.exists(t.detailNode))return t.detailNode;let e=new ct(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,dt.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e}};w([Q("beans")],eu.prototype,"beans",2);eu=w([Ye("flattenStage")],eu);var Wh=class extends Ie{sort(t,e,i,s,r,n){let o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(p=>p.isRowGroupActive()),l={};i&&s&&(l=this.calculateDirtyNodes(s));let h=this.columnModel.isPivotMode(),c=this.gos.getCallback("postSortRows"),d=p=>{var u;this.pullDownGroupDataForHideOpenParents(p.childrenAfterAggFilter,!0);let m=h&&p.leafGroup;if(o&&a&&!p.leafGroup&&!n){let g=(u=this.columnModel.getRowGroupColumns())==null?void 0:u[p.level+1],y=g?.getSort()===null,x=p.childrenAfterAggFilter.slice(0);if(p.childrenAfterSort&&!y){let T={};p.childrenAfterSort.forEach((A,S)=>{T[A.id]=S}),x.sort((A,S)=>{var M,B;return((M=T[A.id])!=null?M:0)-((B=T[S.id])!=null?B:0)})}p.childrenAfterSort=x}else!e||m?p.childrenAfterSort=p.childrenAfterAggFilter.slice(0):i?p.childrenAfterSort=this.doDeltaSort(p,l,r,t):p.childrenAfterSort=this.rowNodeSorter.doFullSort(p.childrenAfterAggFilter,t);if(p.sibling&&(p.sibling.childrenAfterSort=p.childrenAfterSort),this.updateChildIndexes(p),c){let g={nodes:p.childrenAfterSort};c(g)}};r&&r.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(t){let e={},i=s=>{s&&s.forEach(r=>e[r.id]=!0)};return t&&t.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),e}doDeltaSort(t,e,i,s){let r=t.childrenAfterAggFilter,n=t.childrenAfterSort;if(!n)return this.rowNodeSorter.doFullSort(r,s);let o={},a=[];r.forEach(d=>{e[d.id]||!i.canSkip(d)?a.push(d):o[d.id]=!0});let l=n.filter(d=>o[d.id]),h=(d,p)=>({currentPos:p,rowNode:d}),c=a.map(h).sort((d,p)=>this.rowNodeSorter.compareRowNodes(s,d,p));return this.mergeSortedArrays(s,c,l.map(h)).map(({rowNode:d})=>d)}mergeSortedArrays(t,e,i){let s=[],r=0,n=0;for(;r<e.length&&n<i.length;)this.rowNodeSorter.compareRowNodes(t,e[r],i[n])<0?s.push(e[r++]):s.push(i[n++]);for(;r<e.length;)s.push(e[r++]);for(;n<i.length;)s.push(i[n++]);return s}updateChildIndexes(t){if(dt.missing(t.childrenAfterSort))return;let e=t.childrenAfterSort;for(let i=0;i<e.length;i++){let s=e[i],r=i===0,n=i===t.childrenAfterSort.length-1;s.setFirstChild(r),s.setLastChild(n),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(t){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return dt.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let e=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&e(s)})};t&&t.executeFromRootNode(i=>e(i))}pullDownGroupDataForHideOpenParents(t,e){!this.gos.get("groupHideOpenParents")||dt.missing(t)||t.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(r=>{let n=r.getColDef().showRowGroup;if(typeof n!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let o=n,a=this.columnModel.getPrimaryColumn(o);if(a!==i.rowGroupColumn)if(e)i.setGroupValue(r.getId(),void 0);else{let h=i.getFirstChildOfFirstChild(a);h&&i.setGroupValue(r.getId(),h.key)}})})}};w([Q("columnModel")],Wh.prototype,"columnModel",2);w([Q("rowNodeSorter")],Wh.prototype,"rowNodeSorter",2);Wh=w([Ye("sortService")],Wh);var tu=class extends Ie{filter(t){let e=this.filterManager.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){let i=(s,r)=>{s.hasChildren()&&t&&!r?s.childrenAfterFilter=s.childrenAfterGroup.filter(n=>{let o=n.childrenAfterFilter&&n.childrenAfterFilter.length>0,a=n.data&&this.filterManager.doesRowPassFilter({rowNode:n});return o||a}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let s=(n,o)=>{if(n.childrenAfterGroup)for(let a=0;a<n.childrenAfterGroup.length;a++){let l=n.childrenAfterGroup[a],h=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?s(n.childrenAfterGroup[a],h):i(l,h)}i(n,o)},r=n=>s(n,!1);e.executeFromRootNode(r)}else{let s=r=>i(r,!1);e.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};w([Q("filterManager")],tu.prototype,"filterManager",2);tu=w([Ye("filterService")],tu);var To=class extends Ie{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let t=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:t}setRowData(t){let e=this.createTransactionForRowData(t);if(!e)return;let[i,s]=e;this.clientSideRowModel.updateRowData(i,s)}createTransactionForRowData(t){if(dt.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}let e=this.gos.getCallback("getRowId");if(e==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let i={remove:[],update:[],add:[]},s=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return dt.exists(t)&&t.forEach((o,a)=>{let l=e({data:o,level:0}),h=s[l];n&&(n[l]=a),h?(h.data!==o&&i.update.push(o),s[l]=void 0):i.add.push(o)}),dt.iterateObject(s,(o,a)=>{a&&i.remove.push(a.data)}),[i,n]}onRowDataUpdated(){let t=this.gos.get("rowData");t&&(this.isActive()?this.setRowData(t):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(t)))}};w([Q("rowModel")],To.prototype,"rowModel",2);w([Q("rowRenderer")],To.prototype,"rowRenderer",2);w([Q("selectionService")],To.prototype,"selectionService",2);w([ke],To.prototype,"postConstruct",1);To=w([Ye("immutableService")],To);var gF="31.3.2",mF={version:gF,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[es,Jd,Hh,eu,Wh,tu,To]},vF=Object.defineProperty,CF=Object.getOwnPropertyDescriptor,rs=(t,e,i,s)=>{for(var r=s>1?void 0:s?CF(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&vF(e,i,r),r},yF=(t,e)=>(i,s)=>e(i,s,t),Uh=class extends Bg{constructor(t,e,i){super(t),this.parentCache=e,this.params=i,this.startRow=t*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(t,e,i){dt.exists(e)?t.setDataAndId(e,i.toString()):t.setDataAndId(void 0,void 0)}loadFromDatasource(){let t=this.createLoadParams();if(dt.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(t)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(t,e,i){this.rowNodes.forEach((s,r)=>{this.startRow+r<i&&t(s,e.next())})}getLastAccessed(){return this.lastAccessed}getRow(t,e=!1){e||(this.lastAccessed=this.params.lastAccessedSequence.next());let i=t-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let t=0;t<this.params.blockSize;t++){let e=this.startRow+t,i=new ct(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(e),i.setRowTop(this.params.rowHeight*e),this.rowNodes.push(i)}}processServerResult(t){this.rowNodes.forEach((i,s)=>{let r=t.rowData?t.rowData[s]:void 0;!i.id&&i.alreadyRendered&&r&&(this.rowNodes[s]=new ct(this.beans),this.rowNodes[s].setRowIndex(i.rowIndex),this.rowNodes[s].setRowTop(i.rowTop),this.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],r,this.startRow+s)});let e=t.rowCount!=null&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,e)}destroyRowNodes(){this.rowNodes.forEach(t=>{t.clearRowTopAndRowIndex()})}};rs([Q("beans")],Uh.prototype,"beans",2);rs([ke],Uh.prototype,"postConstruct",1);rs([ts],Uh.prototype,"destroyRowNodes",1);var nl=class Wx extends Ie{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,i=!1){let s=Math.floor(e/this.params.blockSize),r=this.blocks[s];if(!r){if(i)return;r=this.createBlock(s)}return r.getRow(e)}createBlock(e){let i=this.createBean(new Uh(e,this,this.params));return this.blocks[i.getId()]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),this.params.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(i=>i.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,i){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${i}`),this.checkRowCount(e,i),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let i=this.getBlocksInOrder().filter(a=>a!=e),s=(a,l)=>l.getLastAccessed()-a.getLastAccessed();i.sort(s);let r=this.params.maxBlocksInCache>0,n=r?this.params.maxBlocksInCache-1:null,o=Wx.MAX_EMPTY_BLOCKS_TO_KEEP-1;i.forEach((a,l)=>{let h=a.getState()===Uh.STATE_WAITING_TO_LOAD&&l>=o,c=r?l>=n:!1;if(h||c){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){let i=this.focusService.getFocusCellToUseAfterRefresh();if(!i||i.rowPinned!=null)return!1;let s=e.getStartRow(),r=e.getEndRow();return i.rowIndex>=s&&i.rowIndex<r}isBlockCurrentlyDisplayed(e){let i=e.getStartRow(),s=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(i,s)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,i){if(typeof i=="number"&&i>=0)this.rowCount=i,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let r=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,i){this.rowCount=e,dt.exists(i)&&(this.lastRowIndexKnown=i),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let i=new Oa;this.getBlocksInOrder().forEach(s=>s.forEachNode(e,i,this.rowCount))}getBlocksInOrder(){let e=(s,r)=>s.getId()-r.getId();return dt.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let e={type:V.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(i=>{i.getId()*this.params.blockSize>=this.rowCount&&e.push(i)}),e.length>0&&e.forEach(i=>this.destroyBlock(i))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,i){let s=[],r=-1,n=!1,o=new Oa;dt.missing(e)&&(n=!0);let a=!1;return this.getBlocksInOrder().forEach(h=>{if(!a){if(n&&r+1!==h.getId()){a=!0;return}r=h.getId(),h.forEachNode(c=>{let d=c===e||c===i;(n||d)&&s.push(c),d&&(n=!n)},o,this.rowCount)}}),a||n?[]:s}};nl.MAX_EMPTY_BLOCKS_TO_KEEP=2;rs([Q("rowRenderer")],nl.prototype,"rowRenderer",2);rs([Q("focusService")],nl.prototype,"focusService",2);rs([yF(0,Xs("loggerFactory"))],nl.prototype,"setBeans",1);rs([ts],nl.prototype,"destroyAllBlocks",1);var wF=nl,Or=class extends Ie{getRowBounds(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}}ensureRowHeightsValid(t,e,i,s){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&dt.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,V.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,V.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,V.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let t;this.cacheParams?t=this.isSortModelDifferent():t=!0,t&&this.reset()}isSortModelDifferent(){return!dt.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(t,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,e):[]}reset(){if(!this.datasource)return;this.gos.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:V.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Oa},this.infiniteCache=this.createBean(new wF(this.cacheParams)),this.eventService.dispatchEventOnce({type:V.EVENT_ROW_COUNT_READY});let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}getRow(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)}getRowNode(t){let e;return this.forEachNode(i=>{i.id===t&&(e=i)}),e}forEachNode(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(t){return t}getRowIndexAtPixel(t){if(this.rowHeight!==0){let e=Math.floor(t/this.rowHeight),i=this.getRowCount()-1;return e>i?i:e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(t){return!!this.getRowNode(t.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(t,e){this.infiniteCache&&this.infiniteCache.setRowCount(t,e)}};rs([Q("filterManager")],Or.prototype,"filterManager",2);rs([Q("sortController")],Or.prototype,"sortController",2);rs([Q("selectionService")],Or.prototype,"selectionService",2);rs([Q("rowRenderer")],Or.prototype,"rowRenderer",2);rs([Q("rowNodeBlockLoader")],Or.prototype,"rowNodeBlockLoader",2);rs([ke],Or.prototype,"init",1);rs([ts],Or.prototype,"destroyDatasource",1);Or=rs([Ye("rowModel")],Or);var xF="31.3.2",SF={version:xF,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[Or]},Ux=Object.defineProperty,EF=Object.defineProperties,bF=Object.getOwnPropertyDescriptor,_F=Object.getOwnPropertyDescriptors,iy=Object.getOwnPropertySymbols,TF=Object.prototype.hasOwnProperty,AF=Object.prototype.propertyIsEnumerable,sy=(t,e,i)=>e in t?Ux(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,zx=(t,e)=>{for(var i in e||(e={}))TF.call(e,i)&&sy(t,i,e[i]);if(iy)for(var i of iy(e))AF.call(e,i)&&sy(t,i,e[i]);return t},jx=(t,e)=>EF(t,_F(e)),Ss=(t,e,i,s)=>{for(var r=s>1?void 0:s?bF(e,i):e,n=t.length-1,o;n>=0;n--)(o=t[n])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&Ux(e,i,r),r},zh=(t,e,i)=>new Promise((s,r)=>{var n=l=>{try{a(i.next(l))}catch(h){r(h)}},o=l=>{try{a(i.throw(l))}catch(h){r(h)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,o);a((i=i.apply(t,e)).next())}),RF=class{setBeans(t){this.beans=t}getFileName(t){let e=this.getDefaultFileExtension();return(t==null||!t.length)&&(t=this.getDefaultFileName()),t.indexOf(".")===-1?`${t}.${e}`:t}getData(t){let e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},DF=class{constructor(t){this.groupColumns=[];let{columnModel:e,valueService:i,gos:s,processCellCallback:r,processHeaderCallback:n,processGroupHeaderCallback:o,processRowGroupCallback:a}=t;this.columnModel=e,this.valueService=i,this.gos=s,this.processCellCallback=r,this.processHeaderCallback=n,this.processGroupHeaderCallback=o,this.processRowGroupCallback=a}prepare(t){this.groupColumns=t.filter(e=>!!e.getColDef().showRowGroup)}extractHeaderValue(t){let e=this.getHeaderName(this.processHeaderCallback,t);return e??""}extractRowCellValue(t,e,i,s,r){let o=(!this.gos.get("groupHideOpenParents")||r.footer)&&this.shouldRenderGroupSummaryCell(r,t,e)?this.createValueForGroupNode(t,r):this.valueService.getValue(t,r);return this.processCell({accumulatedRowIndex:i,rowNode:r,column:t,value:o,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(t,e,i){var s;if(!(t&&t.group))return!1;if(this.groupColumns.indexOf(e)!==-1){if(((s=t.groupData)==null?void 0:s[e.getId()])!=null||this.gos.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&t.level===-1){let a=e.getColDef();return a==null||a.showRowGroup===!0||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}let o=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return i===0&&o}getHeaderName(t,e){return t?t(this.gos.addGridCommonParams({column:e})):this.columnModel.getDisplayNameForColumn(e,"csv",!0)}createValueForGroupNode(t,e){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:t,node:e}));let i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),r=l=>{var h,c;if(i||s)return l.key;let d=(h=l.groupData)==null?void 0:h[t.getId()];return!d||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?d:(c=this.valueService.formatValue(l.rowGroupColumn,l,d))!=null?c:d},n=e.footer,o=[r(e)];if(!this.gos.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,o.push(r(e));let a=o.reverse().join(" -> ");return n?`Total ${a}`:a}processCell(t){var e;let{accumulatedRowIndex:i,rowNode:s,column:r,value:n,processCellCallback:o,type:a}=t;return o?{value:(e=o(this.gos.addGridCommonParams({accumulatedRowIndex:i,column:r,node:s,value:n,type:a,parseValue:l=>this.valueService.parseValue(r,s,l,this.valueService.getValue(r,s)),formatValue:l=>{var h;return(h=this.valueService.formatValue(r,s,l))!=null?h:l}})))!=null?e:""}:r.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(r,s,n)}:{value:n??""}}},FF=class{static download(t,e){let i=document.defaultView||window;if(!i){console.warn("AG Grid: There is no `window` associated with the current `document`");return}let s=document.createElement("a"),r=i.URL.createObjectURL(e);s.setAttribute("href",r),s.setAttribute("download",t),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(r)},0)}},ry=`\r
`,PF=class extends DF{constructor(t){super(t),this.isFirstLine=!0,this.result="";let{suppressQuotes:e,columnSeparator:i}=t;this.suppressQuotes=e,this.columnSeparator=i}addCustomContent(t){t&&(typeof t=="string"?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,ry),this.result+=t):t.forEach(e=>{this.beginNewLine(),e.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(t,e,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(s)}appendEmptyCells(t){for(let e=1;e<=t;e++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(t,e){e!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(t,e,i){var s;e!=0&&(this.result+=this.columnSeparator);let r=this.extractRowCellValue(t,e,e,"csv",i);this.result+=this.putInQuotes((s=r.valueFormatted)!=null?s:r.value)}putInQuotes(t){if(this.suppressQuotes)return t;if(t==null)return'""';let e;return typeof t=="string"?e=t:typeof t.toString=="function"?e=t.toString():(console.warn("AG Grid: unknown value type during csv conversion"),e=""),'"'+e.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=ry),this.isFirstLine=!1}},An=class extends RF{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(t){let e=this.gos.get("defaultCsvExportParams");return Object.assign({},e,t)}export(t){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}let e=this.getMergedParams(t),i=this.getData(e),s=new Blob(["\uFEFF",i],{type:"text/plain"}),r=typeof e.fileName=="function"?e.fileName(this.gos.getGridCommonParams()):e.fileName;FF.download(this.getFileName(r),s)}exportDataAsCsv(t){this.export(t)}getDataAsCsv(t,e=!1){let i=e?Object.assign({},t):this.getMergedParams(t);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(t){let{columnModel:e,valueService:i,gos:s}=this,{processCellCallback:r,processHeaderCallback:n,processGroupHeaderCallback:o,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:h}=t;return new PF({columnModel:e,valueService:i,gos:s,processCellCallback:r||void 0,processHeaderCallback:n||void 0,processGroupHeaderCallback:o||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:h||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};Ss([Q("columnModel")],An.prototype,"columnModel",2);Ss([Q("valueService")],An.prototype,"valueService",2);Ss([Q("gridSerializer")],An.prototype,"gridSerializer",2);Ss([Q("gridOptionsService")],An.prototype,"gos",2);Ss([ke],An.prototype,"postConstruct",1);An=Ss([Ye("csvCreator")],An);var Lr=class extends Ie{serialize(t,e={}){let{allColumns:i,columnKeys:s,skipRowGroups:r}=e,n=this.getColumnsToExport(i,r,s);return dt.compose(this.prepareSession(n),this.prependContent(e),this.exportColumnGroups(e,n),this.exportHeaders(e,n),this.processPinnedTopRows(e,n),this.processRows(e,n),this.processPinnedBottomRows(e,n),this.appendContent(e))(t).parse()}processRow(t,e,i,s){let r=e.shouldRowBeSkipped||(()=>!1),n=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=e.rowPositions!=null||!!e.onlySelected,h=this.gos.get("groupHideOpenParents")&&!l,c=this.columnModel.isPivotMode()?s.leafGroup:!s.group,d=!!s.footer,p=e.skipRowGroups,u=o&&s.leafGroup,m=s.allChildrenCount===1&&(n||u);if(!c&&!d&&(e.skipRowGroups||m||h)||e.onlySelected&&!s.isSelected()||e.skipPinnedTop&&s.rowPinned==="top"||e.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!c&&!d||r(this.gos.addGridCommonParams({node:s})))return;let y=t.onNewBodyRow(s);if(i.forEach((x,T)=>{y.onColumn(x,T,s)}),e.getCustomContentBelowRow){let x=e.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));x&&t.addCustomContent(x)}}appendContent(t){return e=>{let i=t.appendContent;return i&&e.addCustomContent(i),e}}prependContent(t){return e=>{let i=t.prependContent;return i&&e.addCustomContent(i),e}}prepareSession(t){return e=>(e.prepare(t),e)}exportColumnGroups(t,e){return i=>{if(!t.skipColumnGroupHeaders){let s=new My,r=this.displayedGroupCreator.createDisplayedGroups(e,s,null);this.recursivelyAddHeaderGroups(r,i,t.processGroupHeaderCallback)}return i}}exportHeaders(t,e){return i=>{if(!t.skipColumnHeaders){let s=i.onNewHeaderRow();e.forEach((r,n)=>{s.onColumn(r,n,void 0)})}return i}}processPinnedTopRows(t,e){return i=>{let s=this.processRow.bind(this,i,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="top").sort((r,n)=>r.rowIndex-n.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedTopRow(s),i}}processRows(t,e){return i=>{let s=this.rowModel,r=s.getType(),n=r==="clientSide",o=r==="serverSide",a=!n&&t.onlySelected,l=this.processRow.bind(this,i,t,e),{exportedRows:h="filteredAndSorted"}=t;if(t.rowPositions)t.rowPositions.filter(c=>c.rowPinned==null).sort((c,d)=>c.rowIndex-d.rowIndex).map(c=>s.getRow(c.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(l,!0):o?s.forEachNodeAfterFilterAndSort(l,!0):s.forEachNode(l);else if(t.onlySelectedAllPages||a){let c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(l)}else h==="all"?s.forEachNode(l):n||o?s.forEachNodeAfterFilterAndSort(l,!0):s.forEachNode(l);return i}}replicateSortedOrder(t){let e=this.sortController.getSortOptions(),i=(s,r)=>{var n,o,a,l;return s.rowIndex!=null&&r.rowIndex!=null?s.rowIndex-r.rowIndex:s.level===r.level?((n=s.parent)==null?void 0:n.id)===((o=r.parent)==null?void 0:o.id)?this.rowNodeSorter.compareRowNodes(e,{rowNode:s,currentPos:(a=s.rowIndex)!=null?a:-1},{rowNode:r,currentPos:(l=r.rowIndex)!=null?l:-1}):i(s.parent,r.parent):s.level>r.level?i(s.parent,r):i(s,r.parent)};t.sort(i)}processPinnedBottomRows(t,e){return i=>{let s=this.processRow.bind(this,i,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,n)=>r.rowIndex-n.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedBottomRow(s),i}}getColumnsToExport(t=!1,e=!1,i){let s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getGridColumns(i);let r=this.gos.get("treeData"),n=[];return t&&!s?n=this.columnModel.getAllGridColumns():n=this.columnModel.getAllDisplayedColumns(),e&&!r&&(n=n.filter(o=>o.getColId()!==Fa)),n}recursivelyAddHeaderGroups(t,e,i){let s=[];t.forEach(r=>{let n=r;n.getChildren&&n.getChildren().forEach(o=>s.push(o))}),t.length>0&&t[0]instanceof yi&&this.doAddHeaderHeader(e,t,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,e,i)}doAddHeaderHeader(t,e,i){let s=t.onNewHeaderGroupingRow(),r=0;e.forEach(n=>{let o=n,a;i?a=i(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnModel.getDisplayNameForColumnGroup(o,"header");let l=o.getLeafColumns().reduce((h,c,d,p)=>{let u=dt.last(h);return c.getColumnGroupShow()==="open"?(!u||u[1]!=null)&&(u=[d],h.push(u)):u&&u[1]==null&&(u[1]=d-1),d===p.length-1&&u&&u[1]==null&&(u[1]=d),h},[]);s.onColumn(o,a||"",r++,o.getLeafColumns().length-1,l)})}};Ss([Q("displayedGroupCreator")],Lr.prototype,"displayedGroupCreator",2);Ss([Q("columnModel")],Lr.prototype,"columnModel",2);Ss([Q("rowModel")],Lr.prototype,"rowModel",2);Ss([Q("pinnedRowModel")],Lr.prototype,"pinnedRowModel",2);Ss([Q("selectionService")],Lr.prototype,"selectionService",2);Ss([Q("rowNodeSorter")],Lr.prototype,"rowNodeSorter",2);Ss([Q("sortController")],Lr.prototype,"sortController",2);Lr=Ss([Ye("gridSerializer")],Lr);var MF="31.3.2",IF={version:MF,moduleName:"@ag-grid-community/csv-export",beans:[An,Lr]};var OF=t=>{let e=t.getHours();return e<<=6,e=e|t.getMinutes(),e<<=5,e=e|t.getSeconds()/2,e},LF=t=>{let e=t.getFullYear()-1980;return e<<=4,e=e|t.getMonth()+1,e<<=5,e=e|t.getDate(),e};function Wi(t,e){let i="";for(let s=0;s<e;s++)i+=String.fromCharCode(t&255),t>>>=8;return i}var ny=t=>{if(!t.length)return 0;let e=-1,i=0,s=0,r=0;for(let n=0;n<t.length;n++)i=t[n],s=(e^i)&255,r=kF[s],e=e>>>8^r;return e^-1},oy=t=>t.length?ny(typeof t=="string"?new TextEncoder().encode(t):t):0,kF=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),NF=t=>zh(void 0,null,function*(){let e=0,i=[],s=new WritableStream({write:o=>{i.push(o),e+=o.length}}),r=new ReadableStream({start:o=>{let a=new FileReader;a.onload=l=>{var h;(h=l.target)!=null&&h.result&&o.enqueue(l.target.result),o.close()},a.readAsArrayBuffer(t)}}),n=new window.CompressionStream("deflate-raw");return yield r.pipeThrough(n).pipeTo(s),{size:e,content:new Blob(i)}}),GF=t=>zh(void 0,null,function*(){let e=new Blob([t]),{size:i,content:s}=yield NF(e),r=new Uint8Array(yield s.arrayBuffer());return{size:i,content:r}}),{utf8_encode:VF}=dt,BF=(t,e)=>zh(void 0,null,function*(){let{content:i}=t,{size:s,content:r}=i?Kx(i):{size:0,content:Uint8Array.from([])},n,o,a=!1;if(t.type==="file"&&r&&s>0){let c=yield GF(r);n=c.content,o=c.size,a=!0}let h=$x(t,a,e,s,r,o);return jx(zx({},h),{content:n||r,isCompressed:a})}),HF=(t,e)=>{let{content:i}=t,{content:s}=i?Kx(i):{content:Uint8Array.from([])},r=$x(t,!1,e,s.length,s,void 0);return jx(zx({},r),{content:s,isCompressed:!1})},$x=(t,e,i,s,r,n)=>{let{content:o,path:a,created:l}=t,h=OF(l),c=LF(l),d=oy(r),p=n!==void 0?n:s,u=VF(a),m=u!==a,f="";if(m){let T=Wi(1,1)+Wi(oy(u),4)+u;f="up"+Wi(T.length,2)+T}let g="\0"+(m?"\0\b":"\0\0")+Wi(e?8:0,2)+Wi(h,2)+Wi(c,2)+Wi(p?d:0,4)+Wi(n??s,4)+Wi(s,4)+Wi(u.length,2)+Wi(f.length,2),y="PK"+g+u+f,x="PK\0"+g+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\0\0\0")+Wi(i,4)+u+f;return{localFileHeader:Uint8Array.from(y,T=>T.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(x,T=>T.charCodeAt(0))}},WF=(t,e,i)=>{let s="PK\0\0\0\0"+Wi(t,2)+Wi(t,2)+Wi(e,4)+Wi(i,4)+"\0\0";return Uint8Array.from(s,r=>r.charCodeAt(0))},UF=t=>{let e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e},Kx=t=>{let e;if(typeof t=="string"){let i=atob(t.split(";base64,")[1]);e=UF(i)}else e=t;return{size:e.length,content:e}},Xx=class{static addFolders(t){t.forEach(this.addFolder.bind(this))}static addFolder(t){this.folders.push({path:t,created:new Date,isBase64:!1,type:"folder"})}static addFile(t,e,i=!1){this.files.push({path:t,created:new Date,content:i?e:new TextEncoder().encode(e),isBase64:i,type:"file"})}static getZipFile(t="application/zip"){return zh(this,null,function*(){let e=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([e],{type:t})})}static getUncompressedZipFile(t="application/zip"){let e=this.buildFileStream();return this.clearStream(),new Blob([e],{type:t})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(t){let e=new Uint8Array(0),i=new Uint8Array(0),s=0,r=0;for(let a of t){let{localFileHeader:l,centralDirectoryHeader:h,content:c}=a,d=new Uint8Array(e.length+l.length);d.set(e),d.set(l,e.length),e=d;let p=new Uint8Array(e.length+c.length);p.set(e),p.set(c,e.length),e=p;let u=new Uint8Array(i.length+h.length);u.set(i),u.set(h,i.length),i=u,s+=l.length+c.length,r+=h.length}let n=WF(t.length,r,s),o=new Uint8Array(e.length+i.length+n.length);return o.set(e),o.set(i,e.length),o.set(n,e.length+i.length),o}static buildCompressedFileStream(){return zh(this,null,function*(){let t=[...this.folders,...this.files],e=[],i=0;for(let s of t){let r=yield BF(s,i),{localFileHeader:n,content:o}=r;e.push(r),i+=n.length+o.length}return this.packageFiles(e)})}static buildFileStream(){let t=[...this.folders,...this.files],e=[],i=0;for(let s of t){let r=HF(s,i),{localFileHeader:n,content:o}=r;e.push(r),i+=n.length+o.length}return this.packageFiles(e)}};Xx.folders=[];Xx.files=[];bt.__registerModules([mF,SF,IF],!1,void 0);var Yx=(()=>{class t extends Xm{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(s,r)=>this.runOutside(s,r),this.wrapOutgoing=s=>this.runInsideAngular(s),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(s,r)=>r==="resize-observer"?this._ngZone.runOutsideAngular(s):s():this.runOutside=s=>this._ngZone.runOutsideAngular(s):this.runOutside=s=>s()}get shouldWrapOutgoing(){return this._ngZone&&xt.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let s=i.prototype;return s&&"agInit"in s}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,s){return this.runOutside(i,s)}}return t.\u0275fac=function(i){return new(i||t)(Ve(xt))},t.\u0275prov=it({token:t,factory:t.\u0275fac}),t})(),qx=(()=>{class t extends Hx{setViewContainerRef(i,s){this.viewContainerRef=i,this.angularFrameworkOverrides=s}createWrapper(i,s){let r=this.angularFrameworkOverrides,n=this;class o extends e0{init(h){r.runInsideAngular(()=>{super.init(h),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return r.runInsideAngular(()=>n.createComponent(i))}hasMethod(h){return a.getFrameworkComponentInstance()[h]!=null}callMethod(h,c){let d=this.getFrameworkComponentInstance();return r.runInsideAngular(()=>a.getFrameworkComponentInstance()[h].apply(d,c))}addMethod(h,c){a[h]=c}}let a=new o;return a}createComponent(i){return this.viewContainerRef.createComponent(i)}}return t.\u0275fac=(()=>{let e;return function(s){return(e||(e=zs(t)))(s||t)}})(),t.\u0275prov=it({token:t,factory:t.\u0275fac}),t})(),e0=class{init(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},Zx=(()=>{class t{constructor(i,s,r,n){this.viewContainerRef=s,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=n,this._initialised=!1,this._destroyed=!1,this._fullyReady=Cs.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new Le,this.toolPanelSizeChanged=new Le,this.columnMenuVisibleChanged=new Le,this.contextMenuVisibleChanged=new Le,this.cutStart=new Le,this.cutEnd=new Le,this.pasteStart=new Le,this.pasteEnd=new Le,this.columnVisible=new Le,this.columnPinned=new Le,this.columnResized=new Le,this.columnMoved=new Le,this.columnValueChanged=new Le,this.columnPivotModeChanged=new Le,this.columnPivotChanged=new Le,this.columnGroupOpened=new Le,this.newColumnsLoaded=new Le,this.gridColumnsChanged=new Le,this.displayedColumnsChanged=new Le,this.virtualColumnsChanged=new Le,this.columnEverythingChanged=new Le,this.columnHeaderMouseOver=new Le,this.columnHeaderMouseLeave=new Le,this.columnHeaderClicked=new Le,this.columnHeaderContextMenu=new Le,this.componentStateChanged=new Le,this.cellValueChanged=new Le,this.cellEditRequest=new Le,this.rowValueChanged=new Le,this.cellEditingStarted=new Le,this.cellEditingStopped=new Le,this.rowEditingStarted=new Le,this.rowEditingStopped=new Le,this.undoStarted=new Le,this.undoEnded=new Le,this.redoStarted=new Le,this.redoEnded=new Le,this.rangeDeleteStart=new Le,this.rangeDeleteEnd=new Le,this.fillStart=new Le,this.fillEnd=new Le,this.filterOpened=new Le,this.filterChanged=new Le,this.filterModified=new Le,this.advancedFilterBuilderVisibleChanged=new Le,this.chartCreated=new Le,this.chartRangeSelectionChanged=new Le,this.chartOptionsChanged=new Le,this.chartDestroyed=new Le,this.cellKeyDown=new Le,this.gridReady=new Le,this.gridPreDestroyed=new Le,this.firstDataRendered=new Le,this.gridSizeChanged=new Le,this.modelUpdated=new Le,this.virtualRowRemoved=new Le,this.viewportChanged=new Le,this.bodyScroll=new Le,this.bodyScrollEnd=new Le,this.dragStarted=new Le,this.dragStopped=new Le,this.stateUpdated=new Le,this.paginationChanged=new Le,this.rowDragEnter=new Le,this.rowDragMove=new Le,this.rowDragLeave=new Le,this.rowDragEnd=new Le,this.columnRowGroupChanged=new Le,this.rowGroupOpened=new Le,this.expandOrCollapseAll=new Le,this.pivotMaxColumnsExceeded=new Le,this.pinnedRowDataChanged=new Le,this.rowDataUpdated=new Le,this.asyncTransactionsFlushed=new Le,this.storeRefreshed=new Le,this.cellClicked=new Le,this.cellDoubleClicked=new Le,this.cellFocused=new Le,this.cellMouseOver=new Le,this.cellMouseOut=new Le,this.cellMouseDown=new Le,this.rowClicked=new Le,this.rowDoubleClicked=new Le,this.rowSelected=new Le,this.selectionChanged=new Le,this.cellContextMenu=new Le,this.rangeSelectionChanged=new Le,this.tooltipShow=new Le,this.tooltipHide=new Le,this.sortChanged=new Le,this.columnRowGroupChangeRequest=new Le,this.columnPivotChangeRequest=new Le,this.columnValueChangeRequest=new Le,this.columnAggFuncChangeRequest=new Le,this._nativeElement=i.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=jh.combineAttributesAndGridOptions(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let s=Bx(this._nativeElement,i,this.gridParams);s&&(this.api=s,this.columnApi=new xo(s));let r=this.gridPreDestroyed;(r.observed??r.observers.length>0)&&console.warn('AG Grid: gridPreDestroyed event listener registered via (gridPreDestroyed)="method($event)" will be ignored! Please assign via gridOptions.gridPreDestroyed and pass to the grid as [gridOptions]="gridOptions"'),this._initialised=!0,this._fullyReady.resolveNow(null,n=>n)})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let s={};Object.entries(i).forEach(([r,n])=>{s[r]=n.currentValue}),jh.processOnChange(s,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let r=this[i],n=r?.observed??r?.observers?.length>0,o=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[o];return n||a}globalEventListener(i,s){if(this._destroyed)return;let r=this[i];if(r&&this.isEmitterUsed(i)){let n=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(s));i==="gridReady"?this._fullyReady.then(()=>n()):n()}}}return t.\u0275fac=function(i){return new(i||t)(st(Qt),st(un),st(Yx),st(qx))},t.\u0275cmp=Yi({type:t,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",gridPreDestroyed:"gridPreDestroyed",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},standalone:!0,features:[Ps([Yx,qx]),Ds,Ms],decls:0,vars:0,template:function(i,s){},encapsulation:2}),t})();var In=(()=>{let e=class e{constructor(s){this.http=s,this.apiKey="2G51AEASNIUF9I1K",this.baseUrl="https://www.alphavantage.co/query"}getTimeSeries(s){let r=`${this.baseUrl}?function=TIME_SERIES_DAILY&symbol=${s}&apikey=${this.apiKey}`;return this.http.get(r).pipe(wt(n=>n["Time Series (Daily)"]))}getMultipleTimeSeries(s){let r=s.map(n=>this.getTimeSeries(n));return zc(r)}};e.\u0275fac=function(r){return new(r||e)(Ve(af))},e.\u0275prov=it({token:e,factory:e.\u0275fac});let t=e;return t})();var Ou=(()=>{let e=class e{constructor(s,r){this.el=s,this._zone=r,this.updateChange=new Le(!0),this.chartInstance=new Le}ngOnChanges(s){let r=s.update&&s.update.currentValue;(s.options||r)&&(this.wrappedUpdateOrCreateChart(),r&&this.updateChange.emit(!1))}wrappedUpdateOrCreateChart(){this.runOutsideAngular?this._zone.runOutsideAngular(()=>{this.updateOrCreateChart()}):this.updateOrCreateChart()}updateOrCreateChart(){this.chart&&this.chart.update?this.chart.update(this.options,!0,this.oneToOne||!1):(this.chart=this.Highcharts[this.constructorType||"chart"](this.el.nativeElement,this.options,this.callbackFunction||null),this.chartInstance.emit(this.chart))}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null,this.chartInstance.emit(this.chart))}};e.\u0275fac=function(r){return new(r||e)(st(Qt),st(xt))},e.\u0275cmp=Yi({type:e,selectors:[["highcharts-chart"]],inputs:{Highcharts:"Highcharts",constructorType:"constructorType",callbackFunction:"callbackFunction",oneToOne:"oneToOne",runOutsideAngular:"runOutsideAngular",options:"options",update:"update"},outputs:{updateChange:"updateChange",chartInstance:"chartInstance"},features:[Ds],decls:0,vars:0,template:function(r,n){},encapsulation:2});let t=e;return t})(),Lu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=vi({type:e}),e.\u0275inj=mi({});let t=e;return t})();var w_=fv(t0());function Nu(t){let e=[];for(let i in t)e.push([new Date(i).getTime(),parseFloat(t[i]["4. close"])]);return e.sort((i,s)=>i[0]-s[0])}function tS(t){let e=new Date(t),i=e.getFullYear(),s=("0"+(e.getMonth()+1)).slice(-2),r=("0"+e.getDate()).slice(-2);return`${i}-${s}-${r}`}function Gu(t,e=0){return zF(t)?Number(t):e}function zF(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function i0(t){return Array.isArray(t)?t:[t]}function li(t){return t==null?"":typeof t=="string"?t:`${t}px`}function ol(t){return t instanceof Qt?t.nativeElement:t}var r0;try{r0=typeof Intl<"u"&&Intl.v8BreakIterator}catch{r0=!1}var Es=(()=>{let e=class e{constructor(s){this._platformId=s,this.isBrowser=this._platformId?Lv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||r0)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(Ve(Wr))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var lc;function jF(){if(lc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lc=!0}))}finally{lc=lc||!1}return lc}function n0(t){return jF()?t:!!t.capture}var Ho;function iS(){if(Ho==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ho=!1,Ho;if("scrollBehavior"in document.documentElement.style)Ho=!0;else{let t=Element.prototype.scrollTo;t?Ho=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Ho=!1}}return Ho}var s0;function $F(){if(s0==null){let t=typeof document<"u"?document.head:null;s0=!!(t&&(t.createShadowRoot||t.attachShadow))}return s0}function sS(t){if($F()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function hc(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function en(t){return t.composedPath?t.composedPath()[0]:t.target}function o0(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var KF=new pt("cdk-dir-doc",{providedIn:"root",factory:XF});function XF(){return tt(yt)}var YF=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function qF(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?YF.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var cc=(()=>{let e=class e{constructor(s){if(this.value="ltr",this.change=new Le,s){let r=s.body?s.body.dir:null,n=s.documentElement?s.documentElement.dir:null;this.value=qF(r||n||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(Ve(KF,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var QF=20,rS=(()=>{let e=class e{constructor(s,r,n){this._ngZone=s,this._platform=r,this._scrolled=new Ot,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(s){this.scrollContainers.has(s)||this.scrollContainers.set(s,s.elementScrolled().subscribe(()=>this._scrolled.next(s)))}deregister(s){let r=this.scrollContainers.get(s);r&&(r.unsubscribe(),this.scrollContainers.delete(s))}scrolled(s=QF){return this._platform.isBrowser?new Uc(r=>{this._globalSubscription||this._addGlobalListener();let n=s>0?this._scrolled.pipe(Bp(s)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ot()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((s,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(s,r){let n=this.getAncestorScrollContainers(s);return this.scrolled(r).pipe(Ei(o=>!o||n.indexOf(o)>-1))}getAncestorScrollContainers(s){let r=[];return this.scrollContainers.forEach((n,o)=>{this._scrollableContainsElement(o,s)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(s,r){let n=ol(r),o=s.getElementRef().nativeElement;do if(n==o)return!0;while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let s=this._getWindow();return Cv(s.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(Ve(xt),Ve(Es),Ve(yt,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JF=20,l0=(()=>{let e=class e{constructor(s,r,n){this._platform=s,this._change=new Ot,this._changeListener=o=>{this._change.next(o)},this._document=n,r.runOutsideAngular(()=>{if(s.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let s=this._getWindow();s.removeEventListener("resize",this._changeListener),s.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let s={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),s}getViewportRect(){let s=this.getViewportScrollPosition(),{width:r,height:n}=this.getViewportSize();return{top:s.top,left:s.left,bottom:s.top+n,right:s.left+r,height:n,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let s=this._document,r=this._getWindow(),n=s.documentElement,o=n.getBoundingClientRect(),a=-o.top||s.body.scrollTop||r.scrollY||n.scrollTop||0,l=-o.left||s.body.scrollLeft||r.scrollX||n.scrollLeft||0;return{top:a,left:l}}change(s=JF){return s>0?this._change.pipe(Bp(s)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let s=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:s.innerWidth,height:s.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(Ve(Es),Ve(xt),Ve(yt,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var dc=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},al=class extends dc{constructor(e,i,s,r,n){super(),this.component=e,this.viewContainerRef=i,this.injector=s,this.componentFactoryResolver=r,this.projectableNodes=n}},ll=class extends dc{constructor(e,i,s,r){super(),this.templateRef=e,this.viewContainerRef=i,this.context=s,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,i=this.context){return this.context=i,super.attach(e)}detach(){return this.context=void 0,super.detach()}},h0=class extends dc{constructor(e){super(),this.element=e instanceof Qt?e.nativeElement:e}},hl=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof al)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof ll)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof h0)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Vu=class extends hl{constructor(e,i,s,r,n){super(),this.outletElement=e,this._componentFactoryResolver=i,this._appRef=s,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=n}attachComponentPortal(e){let s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(s,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=s.create(e.injector||this._defaultInjector||ds.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let i=e.viewContainerRef,s=i.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return s.rootNodes.forEach(r=>this.outletElement.appendChild(r)),s.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(s);r!==-1&&i.remove(r)}),this._attachedPortal=e,s}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var uc=(()=>{let e=class e extends hl{constructor(s,r,n){super(),this._componentFactoryResolver=s,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Le,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let l=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(l,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=n}get portal(){return this._attachedPortal}set portal(s){this.hasAttached()&&!s&&!this._isInitialized||(this.hasAttached()&&super.detach(),s&&super.attach(s),this._attachedPortal=s||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(s){s.setAttachedHost(this);let r=s.viewContainerRef!=null?s.viewContainerRef:this._viewContainerRef,o=(s.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(s.component),a=r.createComponent(o,r.length,s.injector||r.injector,s.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=s,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(s){s.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(s.templateRef,s.context,{injector:s.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=s,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let s=this._viewContainerRef.element.nativeElement;return s.nodeType===s.ELEMENT_NODE?s:s.parentNode}};e.\u0275fac=function(r){return new(r||e)(st(Xc),st(un),st(yt))},e.\u0275dir=ri({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[or.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Zi]});let t=e;return t})();function Bu(t,...e){return e.length?e.some(i=>t[i]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var nS=iS(),c0=class{constructor(e,i){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=li(-this._previousScrollPosition.left),e.style.top=li(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,i=this._document.body,s=e.style,r=i.style,n=s.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),nS&&(s.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),nS&&(s.scrollBehavior=n,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,s=this._viewportRuler.getViewportSize();return i.scrollHeight>s.height||i.scrollWidth>s.width}};var d0=class{constructor(e,i,s,r){this._scrollDispatcher=e,this._ngZone=i,this._viewportRuler=s,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ei(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Hu=class{enable(){}disable(){}attach(){}};function u0(t,e){return e.some(i=>{let s=t.bottom<i.top,r=t.top>i.bottom,n=t.right<i.left,o=t.left>i.right;return s||r||n||o})}function oS(t,e){return e.some(i=>{let s=t.top<i.top,r=t.bottom>i.bottom,n=t.left<i.left,o=t.right>i.right;return s||r||n||o})}var p0=class{constructor(e,i,s,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=s,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:r}=this._viewportRuler.getViewportSize();u0(i,[{width:s,height:r,bottom:r,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},tP=(()=>{let e=class e{constructor(s,r,n,o){this._scrollDispatcher=s,this._viewportRuler=r,this._ngZone=n,this.noop=()=>new Hu,this.close=a=>new d0(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new c0(this._viewportRuler,this._document),this.reposition=a=>new p0(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(r){return new(r||e)(Ve(rS),Ve(l0),Ve(xt),Ve(yt))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pc=class{constructor(e){if(this.scrollStrategy=new Hu,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let i=Object.keys(e);for(let s of i)e[s]!==void 0&&(this[s]=e[s])}}};var f0=class{constructor(e,i){this.connectionPair=e,this.scrollableViewProperties=i}};var uS=(()=>{let e=class e{constructor(s){this._attachedOverlays=[],this._document=s}ngOnDestroy(){this.detach()}add(s){this.remove(s),this._attachedOverlays.push(s)}remove(s){let r=this._attachedOverlays.indexOf(s);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(Ve(yt))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iP=(()=>{let e=class e extends uS{constructor(s,r){super(s),this._ngZone=r,this._keydownListener=n=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let l=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n);break}}}add(s){super.add(s),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(Ve(yt),Ve(xt,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sP=(()=>{let e=class e extends uS{constructor(s,r,n){super(s),this._platform=r,this._ngZone=n,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=en(o)},this._clickListener=o=>{let a=en(o),l=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let h=this._attachedOverlays.slice();for(let c=h.length-1;c>-1;c--){let d=h[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(l))break;let p=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(o)):p.next(o)}}}add(s){if(super.add(s),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let s=this._document.body;s.removeEventListener("pointerdown",this._pointerDownListener,!0),s.removeEventListener("click",this._clickListener,!0),s.removeEventListener("auxclick",this._clickListener,!0),s.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(s.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(s){s.addEventListener("pointerdown",this._pointerDownListener,!0),s.addEventListener("click",this._clickListener,!0),s.addEventListener("auxclick",this._clickListener,!0),s.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(Ve(yt),Ve(Es),Ve(xt,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cl=(()=>{let e=class e{constructor(s,r){this._platform=r,this._document=s}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let s="cdk-overlay-container";if(this._platform.isBrowser||o0()){let n=this._document.querySelectorAll(`.${s}[platform="server"], .${s}[platform="test"]`);for(let o=0;o<n.length;o++)n[o].remove()}let r=this._document.createElement("div");r.classList.add(s),o0()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(Ve(yt),Ve(Es))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tn=class{constructor(e,i,s,r,n,o,a,l,h,c=!1){this._portalOutlet=e,this._host=i,this._pane=s,this._config=r,this._ngZone=n,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=h,this._animationsDisabled=c,this._backdropElement=null,this._backdropClick=new Ot,this._attachments=new Ot,this._detachments=new Ot,this._locationChanges=zn.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Ot,this._outsidePointerEvents=new Ot,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(cs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Xe(Xe({},this._config),e),this._updateElementSize()}setDirection(e){this._config=It(Xe({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=li(this._config.width),e.height=li(this._config.height),e.minWidth=li(this._config.minWidth),e.minHeight=li(this._config.minHeight),e.maxWidth=li(this._config.maxWidth),e.maxHeight=li(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,i,s){let r=i0(i||[]).filter(n=>!!n);r.length&&(s?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(Yn(jc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},aS="cdk-overlay-connected-position-bounding-box",rP=/([A-Za-z%]+)$/,g0=class{get positions(){return this._preferredPositions}constructor(e,i,s,r,n){this._viewportRuler=i,this._document=s,this._platform=r,this._overlayContainer=n,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ot,this._resizeSubscription=zn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(aS),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,i=this._overlayRect,s=this._viewportRect,r=this._containerRect,n=[],o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),h=this._getOverlayPoint(l,i,a),c=this._getOverlayFit(h,i,s,a);if(c.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(c,h,s)){n.push({position:a,origin:l,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!o||o.overlayFit.visibleArea<c.visibleArea)&&(o={overlayFit:c,overlayPoint:h,originPoint:l,position:a,overlayRect:i})}if(n.length){let a=null,l=-1;for(let h of n){let c=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);c>l&&(l=c,a=h)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Wo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(aS),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,i)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,i,s){let r;if(s.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=s.originX=="start"?o:a}i.left<0&&(r-=i.left);let n;return s.originY=="center"?n=e.top+e.height/2:n=s.originY=="top"?e.top:e.bottom,i.top<0&&(n-=i.top),{x:r,y:n}}_getOverlayPoint(e,i,s){let r;s.overlayX=="center"?r=-i.width/2:s.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let n;return s.overlayY=="center"?n=-i.height/2:n=s.overlayY=="top"?0:-i.height,{x:e.x+r,y:e.y+n}}_getOverlayFit(e,i,s,r){let n=hS(i),{x:o,y:a}=e,l=this._getOffset(r,"x"),h=this._getOffset(r,"y");l&&(o+=l),h&&(a+=h);let c=0-o,d=o+n.width-s.width,p=0-a,u=a+n.height-s.height,m=this._subtractOverflows(n.width,c,d),f=this._subtractOverflows(n.height,p,u),g=m*f;return{visibleArea:g,isCompletelyWithinViewport:n.width*n.height===g,fitsInViewportVertically:f===n.height,fitsInViewportHorizontally:m==n.width}}_canFitWithFlexibleDimensions(e,i,s){if(this._hasFlexibleDimensions){let r=s.bottom-i.y,n=s.right-i.x,o=lS(this._overlayRef.getConfig().minHeight),a=lS(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,h=e.fitsInViewportHorizontally||a!=null&&a<=n;return l&&h}return!1}_pushOverlayOnScreen(e,i,s){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=hS(i),n=this._viewportRect,o=Math.max(e.x+r.width-n.width,0),a=Math.max(e.y+r.height-n.height,0),l=Math.max(n.top-s.top-e.y,0),h=Math.max(n.left-s.left-e.x,0),c=0,d=0;return r.width<=n.width?c=h||-o:c=e.x<this._viewportMargin?n.left-s.left-e.x:0,r.height<=n.height?d=l||-a:d=e.y<this._viewportMargin?n.top-s.top-e.y:0,this._previousPushAmount={x:c,y:d},{x:e.x+c,y:e.y+d}}_applyPosition(e,i){if(this._setTransformOrigin(e),this._setOverlayElementStyles(i,e),this._setBoundingBoxStyles(i,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let s=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!nP(this._lastScrollVisibility,s)){let r=new f0(e,s);this._positionChanges.next(r)}this._lastScrollVisibility=s}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),s,r=e.overlayY;e.overlayX==="center"?s="center":this._isRtl()?s=e.overlayX==="start"?"right":"left":s=e.overlayX==="start"?"left":"right";for(let n=0;n<i.length;n++)i[n].style.transformOrigin=`${s} ${r}`}_calculateBoundingBoxRect(e,i){let s=this._viewportRect,r=this._isRtl(),n,o,a;if(i.overlayY==="top")o=e.y,n=s.height-o+this._viewportMargin;else if(i.overlayY==="bottom")a=s.height-e.y+this._viewportMargin*2,n=s.height-a+this._viewportMargin;else{let u=Math.min(s.bottom-e.y+s.top,e.y),m=this._lastBoundingBoxSize.height;n=u*2,o=e.y-u,n>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}let l=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,h=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,c,d,p;if(h)p=s.width-e.x+this._viewportMargin*2,c=e.x-this._viewportMargin;else if(l)d=e.x,c=s.right-e.x;else{let u=Math.min(s.right-e.x+s.left,e.x),m=this._lastBoundingBoxSize.width;c=u*2,d=e.x-u,c>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-m/2)}return{top:o,left:d,bottom:a,right:p,width:c,height:n}}_setBoundingBoxStyles(e,i){let s=this._calculateBoundingBoxRect(e,i);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let n=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=li(s.height),r.top=li(s.top),r.bottom=li(s.bottom),r.width=li(s.width),r.left=li(s.left),r.right=li(s.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",n&&(r.maxHeight=li(n)),o&&(r.maxWidth=li(o))}this._lastBoundingBoxSize=s,Wo(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Wo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Wo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,i){let s={},r=this._hasExactPosition(),n=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let c=this._viewportRuler.getViewportScrollPosition();Wo(s,this._getExactOverlayY(i,e,c)),Wo(s,this._getExactOverlayX(i,e,c))}else s.position="static";let a="",l=this._getOffset(i,"x"),h=this._getOffset(i,"y");l&&(a+=`translateX(${l}px) `),h&&(a+=`translateY(${h}px)`),s.transform=a.trim(),o.maxHeight&&(r?s.maxHeight=li(o.maxHeight):n&&(s.maxHeight="")),o.maxWidth&&(r?s.maxWidth=li(o.maxWidth):n&&(s.maxWidth="")),Wo(this._pane.style,s)}_getExactOverlayY(e,i,s){let r={top:"",bottom:""},n=this._getOverlayPoint(i,this._overlayRect,e);if(this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,s)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(n.y+this._overlayRect.height)}px`}else r.top=li(n.y);return r}_getExactOverlayX(e,i,s){let r={left:"",right:""},n=this._getOverlayPoint(i,this._overlayRect,e);this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,s));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(n.x+this._overlayRect.width)}px`}else r.left=li(n.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),i=this._pane.getBoundingClientRect(),s=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:oS(e,s),isOriginOutsideView:u0(e,s),isOverlayClipped:oS(i,s),isOverlayOutsideView:u0(i,s)}}_subtractOverflows(e,...i){return i.reduce((s,r)=>s-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+e-this._viewportMargin,bottom:s.top+i-this._viewportMargin,width:e-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,i){return i==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&i0(e).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Qt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let i=e.width||0,s=e.height||0;return{top:e.y,bottom:e.y+s,left:e.x,right:e.x+i,height:s,width:i}}};function Wo(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function lS(t){if(typeof t!="number"&&t!=null){let[e,i]=t.split(rP);return!i||i==="px"?parseFloat(e):null}return t||null}function hS(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function nP(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var cS="cdk-global-overlay-wrapper",m0=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let i=e.getConfig();this._overlayRef=e,this._width&&!i.width&&e.updateSize({width:this._width}),this._height&&!i.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(cS),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:r,height:n,maxWidth:o,maxHeight:a}=s,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),h=(n==="100%"||n==="100vh")&&(!a||a==="100%"||a==="100vh"),c=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",u="",m="",f="";l?f="flex-start":c==="center"?(f="center",p?m=d:u=d):p?c==="left"||c==="end"?(f="flex-end",u=d):(c==="right"||c==="start")&&(f="flex-start",m=d):c==="left"||c==="start"?(f="flex-start",u=d):(c==="right"||c==="end")&&(f="flex-end",m=d),e.position=this._cssPosition,e.marginLeft=l?"0":u,e.marginTop=h?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,i.justifyContent=f,i.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,s=i.style;i.classList.remove(cS),s.justifyContent=s.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},oP=(()=>{let e=class e{constructor(s,r,n,o){this._viewportRuler=s,this._document=r,this._platform=n,this._overlayContainer=o}global(){return new m0}flexibleConnectedTo(s){return new g0(s,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(Ve(l0),Ve(yt),Ve(Es),Ve(cl))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aP=0,On=(()=>{let e=class e{constructor(s,r,n,o,a,l,h,c,d,p,u,m){this.scrollStrategies=s,this._overlayContainer=r,this._componentFactoryResolver=n,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=l,this._ngZone=h,this._document=c,this._directionality=d,this._location=p,this._outsideClickDispatcher=u,this._animationsModuleType=m}create(s){let r=this._createHostElement(),n=this._createPaneElement(r),o=this._createPortalOutlet(n),a=new pc(s);return a.direction=a.direction||this._directionality.value,new tn(o,r,n,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(s){let r=this._document.createElement("div");return r.id=`cdk-overlay-${aP++}`,r.classList.add("cdk-overlay-pane"),s.appendChild(r),r}_createHostElement(){let s=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalOutlet(s){return this._appRef||(this._appRef=this._injector.get(la)),new Vu(s,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(Ve(tP),Ve(cl),Ve(Xc),Ve(oP),Ve(iP),Ve(ds),Ve(xt),Ve(yt),Ve(cc),Ve(fn),Ve(sP),Ve(Zn,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fc=(()=>{let e=class e{constructor(s){this._platform=s}isDisabled(s){return s.hasAttribute("disabled")}isVisible(s){return hP(s)&&getComputedStyle(s).visibility==="visible"}isTabbable(s){if(!this._platform.isBrowser)return!1;let r=lP(vP(s));if(r&&(fS(r)===-1||!this.isVisible(r)))return!1;let n=s.nodeName.toLowerCase(),o=fS(s);return s.hasAttribute("contenteditable")?o!==-1:n==="iframe"||n==="object"||this._platform.WEBKIT&&this._platform.IOS&&!gP(s)?!1:n==="audio"?s.hasAttribute("controls")?o!==-1:!1:n==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||s.hasAttribute("controls"):s.tabIndex>=0}isFocusable(s,r){return mP(s)&&!this.isDisabled(s)&&(r?.ignoreVisibility||this.isVisible(s))}};e.\u0275fac=function(r){return new(r||e)(Ve(Es))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lP(t){try{return t.frameElement}catch{return null}}function hP(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function cP(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function dP(t){return pP(t)&&t.type=="hidden"}function uP(t){return fP(t)&&t.hasAttribute("href")}function pP(t){return t.nodeName.toLowerCase()=="input"}function fP(t){return t.nodeName.toLowerCase()=="a"}function gS(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function fS(t){if(!gS(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function gP(t){let e=t.nodeName.toLowerCase(),i=e==="input"&&t.type;return i==="text"||i==="password"||e==="select"||e==="textarea"}function mP(t){return dP(t)?!1:cP(t)||uP(t)||t.hasAttribute("contenteditable")||gS(t)}function vP(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var v0=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,i,s,r,n=!1){this._element=e,this._checker=i,this._ngZone=s,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,n||this.attachAnchors()}destroy(){let e=this._startAnchor,i=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),i&&(i.removeEventListener("focus",this.endAnchorListener),i.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let i=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?i.length?i[0]:this._getFirstTabbableElement(this._element):i.length?i[i.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(!this._checker.isFocusable(i)){let s=this._getFirstTabbableElement(i);return s?.focus(e),!!s}return i.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let i=this._getRegionBoundary("start");return i&&i.focus(e),!!i}focusLastTabbableElement(e){let i=this._getRegionBoundary("end");return i&&i.focus(e),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let s=0;s<i.length;s++){let r=i[s].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(i[s]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let s=i.length-1;s>=0;s--){let r=i[s].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(i[s]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,i){e?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(cs(1)).subscribe(e)}},zu=(()=>{let e=class e{constructor(s,r,n){this._checker=s,this._ngZone=r,this._document=n}create(s,r=!1){return new v0(s,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(Ve(fc),Ve(xt),Ve(yt))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CP(t){return t.buttons===0||t.detail===0}function yP(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var wP=new pt("cdk-input-modality-detector-options"),xP={ignoreKeys:[18,17,224,91,16]},mS=650,dl=n0({passive:!0,capture:!0}),SP=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(s,r,n,o){this._platform=s,this._mostRecentTarget=null,this._modality=new hs(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(l=>l===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=en(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<mS||(this._modality.next(CP(a)?"keyboard":"mouse"),this._mostRecentTarget=en(a))},this._onTouchstart=a=>{if(yP(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=en(a)},this._options=Xe(Xe({},xP),o),this.modalityDetected=this._modality.pipe(Sv(1)),this.modalityChanged=this.modalityDetected.pipe(Wp()),s.isBrowser&&r.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,dl),n.addEventListener("mousedown",this._onMousedown,dl),n.addEventListener("touchstart",this._onTouchstart,dl)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,dl),document.removeEventListener("mousedown",this._onMousedown,dl),document.removeEventListener("touchstart",this._onTouchstart,dl))}};e.\u0275fac=function(r){return new(r||e)(Ve(Es),Ve(xt),Ve(yt),Ve(wP,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Uu=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Uu||{}),EP=new pt("cdk-focus-monitor-default-options"),Wu=n0({passive:!0,capture:!0}),ju=(()=>{let e=class e{constructor(s,r,n,o,a){this._ngZone=s,this._platform=r,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ot,this._rootNodeFocusAndBlurListener=l=>{let h=en(l);for(let c=h;c;c=c.parentElement)l.type==="focus"?this._onFocus(l,c):this._onBlur(l,c)},this._document=o,this._detectionMode=a?.detectionMode||Uu.IMMEDIATE}monitor(s,r=!1){let n=ol(s);if(!this._platform.isBrowser||n.nodeType!==1)return ot();let o=sS(n)||this._getDocument(),a=this._elementInfo.get(n);if(a)return r&&(a.checkChildren=!0),a.subject;let l={checkChildren:r,subject:new Ot,rootNode:o};return this._elementInfo.set(n,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(s){let r=ol(s),n=this._elementInfo.get(r);n&&(n.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(n))}focusVia(s,r,n){let o=ol(s),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([l,h])=>this._originChanged(l,r,h)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(n))}ngOnDestroy(){this._elementInfo.forEach((s,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(s){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(s)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:s&&this._isLastInteractionFromInputLabel(s)?"mouse":"program"}_shouldBeAttributedToTouch(s){return this._detectionMode===Uu.EVENTUAL||!!s?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(s,r){s.classList.toggle("cdk-focused",!!r),s.classList.toggle("cdk-touch-focused",r==="touch"),s.classList.toggle("cdk-keyboard-focused",r==="keyboard"),s.classList.toggle("cdk-mouse-focused",r==="mouse"),s.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(s,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=s,this._originFromTouchInteraction=s==="touch"&&r,this._detectionMode===Uu.IMMEDIATE){clearTimeout(this._originTimeoutId);let n=this._originFromTouchInteraction?mS:1;this._originTimeoutId=setTimeout(()=>this._origin=null,n)}})}_onFocus(s,r){let n=this._elementInfo.get(r),o=en(s);!n||!n.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),n)}_onBlur(s,r){let n=this._elementInfo.get(r);!n||n.checkChildren&&s.relatedTarget instanceof Node&&r.contains(s.relatedTarget)||(this._setClasses(r),this._emitOrigin(n,null))}_emitOrigin(s,r){s.subject.observers.length&&this._ngZone.run(()=>s.subject.next(r))}_registerGlobalListeners(s){if(!this._platform.isBrowser)return;let r=s.rootNode,n=this._rootNodeFocusListenerCount.get(r)||0;n||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Wu)}),this._rootNodeFocusListenerCount.set(r,n+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Yn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(s){let r=s.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let n=this._rootNodeFocusListenerCount.get(r);n>1?this._rootNodeFocusListenerCount.set(r,n-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Wu),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(s,r,n){this._setClasses(s,r),this._emitOrigin(n,r),this._lastFocusOrigin=r}_getClosestElementsInfo(s){let r=[];return this._elementInfo.forEach((n,o)=>{(o===s||n.checkChildren&&o.contains(s))&&r.push([o,n])}),r}_isLastInteractionFromInputLabel(s){let{_mostRecentTarget:r,mostRecentModality:n}=this._inputModalityDetector;if(n!=="mouse"||!r||r===s||s.nodeName!=="INPUT"&&s.nodeName!=="TEXTAREA"||s.disabled)return!1;let o=s.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(Ve(xt),Ve(Es),Ve(SP),Ve(yt,8),Ve(EP,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _P(t,e){}var Uo=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var w0=(()=>{let e=class e extends hl{constructor(s,r,n,o,a,l,h,c){super(),this._elementRef=s,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._overlayRef=h,this._focusMonitor=c,this._platform=tt(Es),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=tt(Qn),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let p=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),p},this._document=n,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(s){this._ariaLabelledByQueue.push(s),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(s){let r=this._ariaLabelledByQueue.indexOf(s);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(s){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(s);return this._contentAttached(),r}attachTemplatePortal(s){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(s);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(s,r){this._interactivityChecker.isFocusable(s)||(s.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{s.removeEventListener("blur",n),s.removeEventListener("mousedown",n),s.removeAttribute("tabindex")};s.addEventListener("blur",n),s.addEventListener("mousedown",n)})),s.focus(r)}_focusByCssSelector(s,r){let n=this._elementRef.nativeElement.querySelector(s);n&&this._forceFocus(n,r)}_trapFocus(){let s=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||s.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let s=this._config.restoreFocus,r=null;if(typeof s=="string"?r=this._document.querySelector(s):typeof s=="boolean"?r=s?this._elementFocusedBeforeDialogWasOpened:null:s&&(r=s),this._config.restoreFocus&&r&&typeof r.focus=="function"){let n=hc(),o=this._elementRef.nativeElement;(!n||n===this._document.body||n===o||o.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let s=this._elementRef.nativeElement,r=hc();return s===r||s.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=hc()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(st(Qt),st(zu),st(yt,8),st(Uo),st(fc),st(xt),st(tn),st(ju))},e.\u0275cmp=Yi({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,n){if(r&1&&Gl(uc,7),r&2){let o;oa(o=aa())&&(n._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,n){r&2&&pn("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},standalone:!0,features:[Zi,Ms],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,n){r&1&&xr(0,_P,0,0,"ng-template",0)},dependencies:[uc],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),gc=class{constructor(e,i){this.overlayRef=e,this.config=i,this.closed=new Ot,this.disableClose=i.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=i.id,this.keydownEvents.subscribe(s=>{s.keyCode===27&&!this.disableClose&&!Bu(s)&&(s.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{i.closeOnOverlayDetachments!==!1&&this.close()})}close(e,i){if(this.containerInstance){let s=this.closed;this.containerInstance._closeInteractionType=i?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),s.next(e),s.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",i=""){return this.overlayRef.updateSize({width:e,height:i}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},TP=new pt("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=tt(On);return()=>t.scrollStrategies.block()}}),AP=new pt("DialogData"),RP=new pt("DefaultDialogConfig");var DP=0,CS=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(s,r,n,o,a,l){this._overlay=s,this._injector=r,this._defaultOptions=n,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ot,this._afterOpenedAtThisLevel=new Ot,this._ariaHiddenElements=new Map,this.afterAllClosed=jn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Xn(void 0))),this._scrollStrategy=l}open(s,r){let n=this._defaultOptions||new Uo;r=Xe(Xe({},n),r),r.id=r.id||`cdk-dialog-${DP++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),l=new gc(a,r),h=this._attachContainer(a,l,r);return l.containerInstance=h,this._attachDialogContent(s,l,h,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){C0(this.openDialogs,s=>s.close())}getDialogById(s){return this.openDialogs.find(r=>r.id===s)}ngOnDestroy(){C0(this._openDialogsAtThisLevel,s=>{s.config.closeOnDestroy===!1&&this._removeOpenDialog(s,!1)}),C0(this._openDialogsAtThisLevel,s=>s.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(s){let r=new pc({positionStrategy:s.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:s.scrollStrategy||this._scrollStrategy(),panelClass:s.panelClass,hasBackdrop:s.hasBackdrop,direction:s.direction,minWidth:s.minWidth,minHeight:s.minHeight,maxWidth:s.maxWidth,maxHeight:s.maxHeight,width:s.width,height:s.height,disposeOnNavigation:s.closeOnNavigation});return s.backdropClass&&(r.backdropClass=s.backdropClass),r}_attachContainer(s,r,n){let o=n.injector||n.viewContainerRef?.injector,a=[{provide:Uo,useValue:n},{provide:gc,useValue:r},{provide:tn,useValue:s}],l;n.container?typeof n.container=="function"?l=n.container:(l=n.container.type,a.push(...n.container.providers(n))):l=w0;let h=new al(l,n.viewContainerRef,ds.create({parent:o||this._injector,providers:a}),n.componentFactoryResolver);return s.attach(h).instance}_attachDialogContent(s,r,n,o){if(s instanceof kl){let a=this._createInjector(o,r,n,void 0),l={$implicit:o.data,dialogRef:r};o.templateContext&&(l=Xe(Xe({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),n.attachTemplatePortal(new ll(s,null,l,a))}else{let a=this._createInjector(o,r,n,this._injector),l=n.attachComponentPortal(new al(s,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=l,r.componentInstance=l.instance}}_createInjector(s,r,n,o){let a=s.injector||s.viewContainerRef?.injector,l=[{provide:AP,useValue:s.data},{provide:gc,useValue:r}];return s.providers&&(typeof s.providers=="function"?l.push(...s.providers(r,s,n)):l.push(...s.providers)),s.direction&&(!a||!a.get(cc,null,{optional:!0}))&&l.push({provide:cc,useValue:{value:s.direction,change:ot()}}),ds.create({parent:a||o,providers:l})}_removeOpenDialog(s,r){let n=this.openDialogs.indexOf(s);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let s=this._overlayContainer.getContainerElement();if(s.parentElement){let r=s.parentElement.children;for(let n=r.length-1;n>-1;n--){let o=r[n];o!==s&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let s=this._parentDialog;return s?s._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(Ve(On),Ve(ds),Ve(RP,8),Ve(e,12),Ve(cl),Ve(TP))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function C0(t,e){let i=t.length;for(;i--;)e(t[i])}function FP(t,e){}var mc=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},x0="mdc-dialog--open",yS="mdc-dialog--opening",wS="mdc-dialog--closing",PP=150,MP=75,IP=(()=>{let e=class e extends w0{constructor(s,r,n,o,a,l,h,c,d){super(s,r,n,o,a,l,h,d),this._animationMode=c,this._animationStateChanged=new Le,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?SS(this._config.enterAnimationDuration)??PP:0,this._exitAnimationDuration=this._animationsEnabled?SS(this._config.exitAnimationDuration)??MP:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(xS,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(yS,x0)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(x0),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(x0),this._animationsEnabled?(this._hostElement.style.setProperty(xS,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(wS)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(s){this._actionSectionCount+=s,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(yS,wS)}_waitForAnimationToComplete(s,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,s)}_requestAnimationFrame(s){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(s):s()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(s){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:s})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(s){let r=super.attachComponentPortal(s);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(st(Qt),st(zu),st(yt,8),st(mc),st(fc),st(xt),st(tn),st(Zn,8),st(ju))},e.\u0275cmp=Yi({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,n){r&2&&(Zp("id",n._config.id),pn("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),ra("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},standalone:!0,features:[Zi,Ms],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,n){r&1&&(Jt(0,"div",0)(1,"div",1),xr(2,FP,0,0,"ng-template",2),ei()())},dependencies:[uc],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),xS="--mat-dialog-transition-duration";function SS(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Gu(t.substring(0,t.length-2)):t.endsWith("s")?Gu(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var $u=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}($u||{}),ul=class{constructor(e,i,s){this._ref=e,this._containerInstance=s,this._afterOpened=new Ot,this._beforeClosed=new Ot,this._state=$u.OPEN,this.disableClose=i.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),s._animationStateChanged.pipe(Ei(r=>r.state==="opened"),cs(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),s._animationStateChanged.pipe(Ei(r=>r.state==="closed"),cs(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),jc(this.backdropClick(),this.keydownEvents().pipe(Ei(r=>r.keyCode===27&&!this.disableClose&&!Bu(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),OP(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ei(i=>i.state==="closing"),cs(1)).subscribe(i=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),i.totalTime+100)}),this._state=$u.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let i=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?i.left(e.left):i.right(e.right):i.centerHorizontally(),e&&(e.top||e.bottom)?e.top?i.top(e.top):i.bottom(e.bottom):i.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",i=""){return this._ref.updateSize(e,i),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=$u.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function OP(t,e,i){return t._closeInteractionType=e,t.close(i)}var S0=new pt("MatMdcDialogData"),LP=new pt("mat-mdc-dialog-default-options"),kP=new pt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=tt(On);return()=>t.scrollStrategies.block()}});var NP=0,E0=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let s=this._parentDialog;return s?s._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(s,r,n,o,a,l,h,c){this._overlay=s,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ot,this._afterOpenedAtThisLevel=new Ot,this.dialogConfigClass=mc,this.afterAllClosed=jn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Xn(void 0))),this._dialog=r.get(CS),this._dialogRefConstructor=ul,this._dialogContainerType=IP,this._dialogDataToken=S0}open(s,r){let n;r=Xe(Xe({},this._defaultOptions||new mc),r),r.id=r.id||`mat-mdc-dialog-${NP++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(s,It(Xe({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:Uo,useValue:r}]},templateContext:()=>({dialogRef:n}),providers:(a,l,h)=>(n=new this._dialogRefConstructor(a,r,h),n.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:h},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=o.componentRef,n.componentInstance=o.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(n);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(s){return this.openDialogs.find(r=>r.id===s)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(s){let r=s.length;for(;r--;)s[r].close()}};e.\u0275fac=function(r){return new(r||e)(Ve(On),Ve(ds),Ve(fn,8),Ve(LP,8),Ve(kP),Ve(e,12),Ve(cl),Ve(Zn,8))},e.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),GP=0;var ES=(()=>{let e=class e{constructor(s,r,n){this._dialogRef=s,this._elementRef=r,this._dialog=n}ngOnInit(){this._dialogRef||(this._dialogRef=VP(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}};e.\u0275fac=function(r){return new(r||e)(st(ul,8),st(Qt),st(E0))},e.\u0275dir=ri({type:e,standalone:!0});let t=e;return t})(),bS=(()=>{let e=class e extends ES{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${GP++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}};e.\u0275fac=(()=>{let s;return function(n){return(s||(s=zs(e)))(n||e)}})(),e.\u0275dir=ri({type:e,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,n){r&2&&Zp("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[Zi]});let t=e;return t})(),_S=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ri({type:e,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0});let t=e;return t})(),TS=(()=>{let e=class e extends ES{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}};e.\u0275fac=(()=>{let s;return function(n){return(s||(s=zs(e)))(n||e)}})(),e.\u0275dir=ri({type:e,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(r,n){r&2&&ra("mat-mdc-dialog-actions-align-start",n.align==="start")("mat-mdc-dialog-actions-align-center",n.align==="center")("mat-mdc-dialog-actions-align-end",n.align==="end")},inputs:{align:"align"},standalone:!0,features:[Zi]});let t=e;return t})();function VP(t,e){let i=t.nativeElement.parentElement;for(;i&&!i.classList.contains("mat-mdc-dialog-container");)i=i.parentElement;return i?e.find(s=>s.id===i.id):null}var sE=fv(t0());var OS=(()=>{let e=class e{constructor(s,r){this._renderer=s,this._elementRef=r,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(s,r){this._renderer.setProperty(this._elementRef.nativeElement,s,r)}registerOnTouched(s){this.onTouched=s}registerOnChange(s){this.onChange=s}setDisabledState(s){this.setProperty("disabled",s)}};e.\u0275fac=function(r){return new(r||e)(st(qc),st(Qt))},e.\u0275dir=ri({type:e});let t=e;return t})(),BP=(()=>{let e=class e extends OS{};e.\u0275fac=(()=>{let s;return function(n){return(s||(s=zs(e)))(n||e)}})(),e.\u0275dir=ri({type:e,features:[Zi]});let t=e;return t})(),LS=new pt("");var HP={provide:LS,useExisting:$c(()=>Qu),multi:!0};function WP(){let t=ha()?ha().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var UP=new pt(""),Qu=(()=>{let e=class e extends OS{constructor(s,r,n){super(s,r),this._compositionMode=n,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!WP())}writeValue(s){let r=s??"";this.setProperty("value",r)}_handleInput(s){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(s)}_compositionStart(){this._composing=!0}_compositionEnd(s){this._composing=!1,this._compositionMode&&this.onChange(s)}};e.\u0275fac=function(r){return new(r||e)(st(qc),st(Qt),st(UP,8))},e.\u0275dir=ri({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,n){r&1&&Sr("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[Ps([HP]),Zi]});let t=e;return t})();function Ln(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function kS(t){return t!=null&&typeof t.length=="number"}var NS=new pt(""),zP=new pt(""),jP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Xu=class{static min(e){return $P(e)}static max(e){return KP(e)}static required(e){return GS(e)}static requiredTrue(e){return XP(e)}static email(e){return YP(e)}static minLength(e){return qP(e)}static maxLength(e){return ZP(e)}static pattern(e){return QP(e)}static nullValidator(e){return Yu(e)}static compose(e){return zS(e)}static composeAsync(e){return $S(e)}};function $P(t){return e=>{if(Ln(e.value)||Ln(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i<t?{min:{min:t,actual:e.value}}:null}}function KP(t){return e=>{if(Ln(e.value)||Ln(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i>t?{max:{max:t,actual:e.value}}:null}}function GS(t){return Ln(t.value)?{required:!0}:null}function XP(t){return t.value===!0?null:{required:!0}}function YP(t){return Ln(t.value)||jP.test(t.value)?null:{email:!0}}function qP(t){return e=>Ln(e.value)||!kS(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function ZP(t){return e=>kS(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function QP(t){if(!t)return Yu;let e,i;return typeof t=="string"?(i="",t.charAt(0)!=="^"&&(i+="^"),i+=t,t.charAt(t.length-1)!=="$"&&(i+="$"),e=new RegExp(i)):(i=t.toString(),e=t),s=>{if(Ln(s.value))return null;let r=s.value;return e.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function Yu(t){return null}function VS(t){return t!=null}function BS(t){return Qc(t)?Xi(t):t}function HS(t){let e={};return t.forEach(i=>{e=i!=null?Xe(Xe({},e),i):e}),Object.keys(e).length===0?null:e}function WS(t,e){return e.map(i=>i(t))}function JP(t){return!t.validate}function US(t){return t.map(e=>JP(e)?e:i=>e.validate(i))}function zS(t){if(!t)return null;let e=t.filter(VS);return e.length==0?null:function(i){return HS(WS(i,e))}}function jS(t){return t!=null?zS(US(t)):null}function $S(t){if(!t)return null;let e=t.filter(VS);return e.length==0?null:function(i){let s=WS(i,e).map(BS);return zc(s).pipe(wt(HS))}}function KS(t){return t!=null?$S(US(t)):null}function RS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function XS(t){return t._rawValidators}function YS(t){return t._rawAsyncValidators}function b0(t){return t?Array.isArray(t)?t:[t]:[]}function qu(t,e){return Array.isArray(t)?t.includes(e):t===e}function DS(t,e){let i=b0(e);return b0(t).forEach(r=>{qu(i,r)||i.push(r)}),i}function FS(t,e){return b0(e).filter(i=>!qu(t,i))}var _0=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=KS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}};var yc=class extends _0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},T0=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},eM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Oz=It(Xe({},eM),{"[class.ng-submitted]":"isSubmitted"}),qS=(()=>{let e=class e extends T0{constructor(s){super(s)}};e.\u0275fac=function(r){return new(r||e)(st(yc,2))},e.\u0275dir=ri({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,n){r&2&&ra("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Zi]});let t=e;return t})();var vc="VALID",Ku="INVALID",pl="PENDING",Cc="DISABLED";function tM(t){return(Ju(t)?t.validators:t)||null}function iM(t){return Array.isArray(t)?jS(t):t||null}function sM(t,e){return(Ju(e)?e.asyncValidators:t)||null}function rM(t){return Array.isArray(t)?KS(t):t||null}function Ju(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var A0=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vc}get invalid(){return this.status===Ku}get pending(){return this.status==pl}get disabled(){return this.status===Cc}get enabled(){return this.status!==Cc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FS(e,this._rawAsyncValidators))}hasValidator(e){return qu(this._rawValidators,e)}hasAsyncValidator(e){return qu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pl,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Cc,this.errors=null,this._forEachChild(s=>{s.disable(It(Xe({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(It(Xe({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=vc,this._forEachChild(s=>{s.enable(It(Xe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(It(Xe({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vc||this.status===pl)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cc:vc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pl,this._hasOwnPendingAsyncValidator=!0;let i=BS(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((s,r)=>s&&s._find(r),this)}getError(e,i){let s=i?this.get(i):this;return s&&s.errors?s.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?Cc:this.errors?Ku:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pl)?pl:this._anyControlsHaveStatus(Ku)?Ku:vc}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ju(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rM(this._rawAsyncValidators)}};var R0=new pt("CallSetDisabledState",{providedIn:"root",factory:()=>ep}),ep="always";function nM(t,e,i=ep){aM(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),hM(t,e),dM(t,e),cM(t,e),oM(t,e)}function PS(t,e,i=!0){let s=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(s),e.valueAccessor.registerOnTouched(s)),lM(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Zu(t,e){t.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function oM(t,e){if(e.valueAccessor.setDisabledState){let i=s=>{e.valueAccessor.setDisabledState(s)};t.registerOnDisabledChange(i),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(i)})}}function aM(t,e){let i=XS(t);e.validator!==null?t.setValidators(RS(i,e.validator)):typeof i=="function"&&t.setValidators([i]);let s=YS(t);e.asyncValidator!==null?t.setAsyncValidators(RS(s,e.asyncValidator)):typeof s=="function"&&t.setAsyncValidators([s]);let r=()=>t.updateValueAndValidity();Zu(e._rawValidators,r),Zu(e._rawAsyncValidators,r)}function lM(t,e){let i=!1;if(t!==null){if(e.validator!==null){let r=XS(t);if(Array.isArray(r)&&r.length>0){let n=r.filter(o=>o!==e.validator);n.length!==r.length&&(i=!0,t.setValidators(n))}}if(e.asyncValidator!==null){let r=YS(t);if(Array.isArray(r)&&r.length>0){let n=r.filter(o=>o!==e.asyncValidator);n.length!==r.length&&(i=!0,t.setAsyncValidators(n))}}}let s=()=>{};return Zu(e._rawValidators,s),Zu(e._rawAsyncValidators,s),i}function hM(t,e){e.valueAccessor.registerOnChange(i=>{t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ZS(t,e)})}function cM(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ZS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ZS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function dM(t,e){let i=(s,r)=>{e.valueAccessor.writeValue(s),r&&e.viewToModelUpdate(s)};t.registerOnChange(i),e._registerOnDestroy(()=>{t._unregisterOnChange(i)})}function uM(t,e){if(!t.hasOwnProperty("model"))return!1;let i=t.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function pM(t){return Object.getPrototypeOf(t.constructor)===BP}function fM(t,e){if(!e)return null;Array.isArray(e);let i,s,r;return e.forEach(n=>{n.constructor===Qu?i=n:pM(n)?s=n:r=n}),r||s||i||null}function MS(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function IS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var QS=class extends A0{constructor(e=null,i,s){super(tM(i),sM(s,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ju(i)&&(i.nonNullable||i.initialValueIsDefault)&&(IS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(s=>s(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){IS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var JS=new pt(""),gM={provide:yc,useExisting:$c(()=>D0)},D0=(()=>{let e=class e extends yc{set isDisabled(s){}constructor(s,r,n,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new Le,this._ngModelWarningSent=!1,this._setValidators(s),this._setAsyncValidators(r),this.valueAccessor=fM(this,n)}ngOnChanges(s){if(this._isControlChanged(s)){let r=s.form.previousValue;r&&PS(r,this,!1),nM(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}uM(s,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&PS(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(s){this.viewModel=s,this.update.emit(s)}_isControlChanged(s){return s.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(st(NS,10),st(zP,10),st(LS,10),st(JS,8),st(R0,8))},e.\u0275dir=ri({type:e,selectors:[["","formControl",""]],inputs:{form:[or.None,"formControl","form"],isDisabled:[or.None,"disabled","isDisabled"],model:[or.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Ps([gM]),Zi,Ds]});let t=e;return t})();var mM=(()=>{let e=class e{constructor(){this._validator=Yu}ngOnChanges(s){if(this.inputName in s){let r=this.normalizeInput(s[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Yu,this._onChange&&this._onChange()}}validate(s){return this._validator(s)}registerOnValidatorChange(s){this._onChange=s}enabled(s){return s!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ri({type:e,features:[Ds]});let t=e;return t})();var vM={provide:NS,useExisting:$c(()=>F0),multi:!0};var F0=(()=>{let e=class e extends mM{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Vl,this.createValidator=s=>GS}enabled(s){return s}};e.\u0275fac=(()=>{let s;return function(n){return(s||(s=zs(e)))(n||e)}})(),e.\u0275dir=ri({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,n){r&2&&pn("required",n._enabled?"":null)},inputs:{required:"required"},features:[Ps([vM]),Zi]});let t=e;return t})();var eE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=vi({type:e}),e.\u0275inj=mi({});let t=e;return t})();var tE=(()=>{let e=class e{static withConfig(s){return{ngModule:e,providers:[{provide:R0,useValue:s.callSetDisabledState??ep}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=vi({type:e}),e.\u0275inj=mi({imports:[eE]});let t=e;return t})(),iE=(()=>{let e=class e{static withConfig(s){return{ngModule:e,providers:[{provide:JS,useValue:s.warnOnNgModelWithFormControl??"always"},{provide:R0,useValue:s.callSetDisabledState??ep}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=vi({type:e}),e.\u0275inj=mi({imports:[eE]});let t=e;return t})();function yM(t,e){if(t&1&&(Jt(0,"div"),Fs(1,"highcharts-chart",6),ei()),t&2){let i=na();qi(),us("Highcharts",i.Highcharts)("options",i.chartOptions)}}var rE=(()=>{let e=class e{constructor(s,r,n){this.dialogRef=s,this.data=r,this.alphaVantageService=n,this.Highcharts=sE.default,this.chartOptions=null,this.symbol=new QS(null,[Xu.required])}fetchStockData(){this.alphaVantageService.getTimeSeries(this.symbol.value).subscribe(s=>{let r=Nu(s);this.chartOptions={series:[{type:"line",data:r,name:this.symbol.value}],title:{text:`${this.symbol.value} Stock Price`},xAxis:{type:"datetime"},yAxis:{title:{text:"Price"}}}})}close(){this.dialogRef.close()}get symbolFieldValid(){return this.symbol.valid}};e.\u0275fac=function(r){return new(r||e)(st(ul),st(S0),st(In))},e.\u0275cmp=Yi({type:e,selectors:[["app-stock-modal"]],standalone:!0,features:[Ps([In]),Ms],decls:11,vars:3,consts:[["mat-dialog-title",""],[1,"row","g-3","align-items-center"],["required","",1,"form-control",3,"formControl"],[1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[2,"width","100%","height","400px","display","block",3,"Highcharts","options"]],template:function(r,n){r&1&&(Jt(0,"h2",0),Ur(1,"Stock Data"),ei(),Jt(2,"mat-dialog-content")(3,"div",1),Fs(4,"input",2),Jt(5,"button",3),Sr("click",function(){return n.fetchStockData()}),Ur(6,"Fetch Data"),ei()(),xr(7,yM,2,2,"div",4),ei(),Jt(8,"mat-dialog-actions")(9,"button",5),Sr("click",function(){return n.close()}),Ur(10,"Close"),ei()()),r&2&&(qi(4),us("formControl",n.symbol),qi(),us("disabled",!n.symbolFieldValid),qi(2),us("ngIf",n.chartOptions))},dependencies:[_S,tE,Qu,qS,F0,Lu,Ou,TS,ed,bS,iE,D0],encapsulation:2});let t=e;return t})();var Rc={};Rc.version="0.18.5";var jo=1200,bl=1252,wM=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],xM={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},jE=function(t){wM.indexOf(t)!=-1&&(bl=xM[0]=t)};function SM(){jE(1252)}var Dc=function(t){jo=t,jE(t)};function EM(){Dc(1200),SM()}function bM(t){for(var e=[],i=0;i<t.length>>1;++i)e[i]=String.fromCharCode(t.charCodeAt(2*i+1)+(t.charCodeAt(2*i)<<8));return e.join("")}var tp=function(e){return String.fromCharCode(e)},nE=function(e){return String.fromCharCode(e)},Ut;var Gr=null,wc=!0,Nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Fc(t){for(var e="",i=0,s=0,r=0,n=0,o=0,a=0,l=0,h=0;h<t.length;)i=t.charCodeAt(h++),n=i>>2,s=t.charCodeAt(h++),o=(i&3)<<4|s>>4,r=t.charCodeAt(h++),a=(s&15)<<2|r>>6,l=r&63,isNaN(s)?a=l=64:isNaN(r)&&(l=64),e+=Nn.charAt(n)+Nn.charAt(o)+Nn.charAt(a)+Nn.charAt(l);return e}function an(t){var e="",i=0,s=0,r=0,n=0,o=0,a=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<t.length;)n=Nn.indexOf(t.charAt(h++)),o=Nn.indexOf(t.charAt(h++)),i=n<<2|o>>4,e+=String.fromCharCode(i),a=Nn.indexOf(t.charAt(h++)),s=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(s)),l=Nn.indexOf(t.charAt(h++)),r=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(r));return e}var Rt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),hn=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,i){return i?new Buffer(e,i):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Ko(t){return Rt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function oE(t){return Rt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var vr=function(e){return Rt?hn(e,"binary"):e.split("").map(function(i){return i.charCodeAt(0)&255})};function Ep(t){if(typeof ArrayBuffer>"u")return vr(t);for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),s=0;s!=t.length;++s)i[s]=t.charCodeAt(s)&255;return e}function Lc(t){if(Array.isArray(t))return t.map(function(s){return String.fromCharCode(s)}).join("");for(var e=[],i=0;i<t.length;++i)e[i]=String.fromCharCode(t[i]);return e.join("")}function _M(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Gi=Rt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:hn(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,i=0;for(e=0;e<t.length;++e)i+=t[e].length;var s=new Uint8Array(i),r=0;for(e=0,i=0;e<t.length;i+=r,++e)if(r=t[e].length,t[e]instanceof Uint8Array)s.set(t[e],i);else{if(typeof t[e]=="string")throw"wtf";s.set(new Uint8Array(t[e]),i)}return s}return[].concat.apply([],t.map(function(n){return Array.isArray(n)?n:[].slice.call(n)}))};function TM(t){for(var e=[],i=0,s=t.length+250,r=Ko(t.length+255),n=0;n<t.length;++n){var o=t.charCodeAt(n);if(o<128)r[i++]=o;else if(o<2048)r[i++]=192|o>>6&31,r[i++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++n)&1023;r[i++]=240|o>>8&7,r[i++]=128|o>>2&63,r[i++]=128|a>>6&15|(o&3)<<4,r[i++]=128|a&63}else r[i++]=224|o>>12&15,r[i++]=128|o>>6&63,r[i++]=128|o&63;i>s&&(e.push(r.slice(0,i)),i=0,r=Ko(65535),s=65530)}return e.push(r.slice(0,i)),Gi(e)}var yl=/\u0000/g,ip=/[\u0001-\u0006]/g;function wl(t){for(var e="",i=t.length-1;i>=0;)e+=t.charAt(i--);return e}function Cr(t,e){var i=""+t;return i.length>=e?i:ii("0",e-i.length)+i}function U0(t,e){var i=""+t;return i.length>=e?i:ii(" ",e-i.length)+i}function cp(t,e){var i=""+t;return i.length>=e?i:i+ii(" ",e-i.length)}function AM(t,e){var i=""+Math.round(t);return i.length>=e?i:ii("0",e-i.length)+i}function RM(t,e){var i=""+t;return i.length>=e?i:ii("0",e-i.length)+i}var aE=Math.pow(2,32);function fl(t,e){if(t>aE||t<-aE)return AM(t,e);var i=Math.round(t);return RM(i,e)}function dp(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var lE=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],P0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function DM(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "',t}var si={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "'},hE={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},FM={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function up(t,e,i){for(var s=t<0?-1:1,r=t*s,n=0,o=1,a=0,l=1,h=0,c=0,d=Math.floor(r);h<e&&(d=Math.floor(r),a=d*o+n,c=d*h+l,!(r-d<5e-8));)r=1/(r-d),n=o,o=a,l=h,h=c;if(c>e&&(h>e?(c=l,a=n):(c=h,a=o)),!i)return[0,s*a,c];var p=Math.floor(s*a/c);return[p,s*a-p*c,c]}function sp(t,e,i){if(t>2958465||t<0)return null;var s=t|0,r=Math.floor(86400*(t-s)),n=0,o=[],a={D:s,T:r,u:86400*(t-s)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(s+=1462),a.u>.9999&&(a.u=0,++r==86400&&(a.T=r=0,++s,++a.D)),s===60)o=i?[1317,10,29]:[1900,2,29],n=3;else if(s===0)o=i?[1317,8,29]:[1900,1,0],n=6;else{s>60&&--s;var l=new Date(1900,0,1);l.setDate(l.getDate()+s-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],n=l.getDay(),s<60&&(n=(n+6)%7),i&&(n=NM(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=r%60,r=Math.floor(r/60),a.M=r%60,r=Math.floor(r/60),a.H=r,a.q=n,a}var $E=new Date(1899,11,31,0,0,0),PM=$E.getTime(),MM=new Date(1900,2,1,0,0,0);function KE(t,e){var i=t.getTime();return e?i-=1461*24*60*60*1e3:t>=MM&&(i+=24*60*60*1e3),(i-(PM+(t.getTimezoneOffset()-$E.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function z0(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function IM(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function OM(t){var e=t<0?12:11,i=z0(t.toFixed(12));return i.length<=e||(i=t.toPrecision(10),i.length<=e)?i:t.toExponential(5)}function LM(t){var e=z0(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function kM(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),i;return e>=-4&&e<=-1?i=t.toPrecision(10+e):Math.abs(e)<=9?i=OM(t):e===10?i=t.toFixed(10).substr(0,12):i=LM(t),z0(IM(i.toUpperCase()))}function V0(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):kM(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Vn(14,KE(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function NM(t,e){e[0]-=581;var i=t.getDay();return t<60&&(i=(i+6)%7),i}function GM(t,e,i,s){var r="",n=0,o=0,a=i.y,l,h=0;switch(t){case 98:a=i.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,h=2;break;default:l=a%1e4,h=4;break}break;case 109:switch(e.length){case 1:case 2:l=i.m,h=e.length;break;case 3:return P0[i.m-1][1];case 5:return P0[i.m-1][0];default:return P0[i.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=i.d,h=e.length;break;case 3:return lE[i.q][0];default:return lE[i.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(i.H+11)%12,h=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=i.H,h=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=i.M,h=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return i.u===0&&(e=="s"||e=="ss")?Cr(i.S,e.length):(s>=2?o=s===3?1e3:100:o=s===1?10:1,n=Math.round(o*(i.S+i.u)),n>=60*o&&(n=0),e==="s"?n===0?"0":""+n/o:(r=Cr(n,2+s),e==="ss"?r.substr(0,2):"."+r.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=i.D*24+i.H;break;case"[m]":case"[mm]":l=(i.D*24+i.H)*60+i.M;break;case"[s]":case"[ss]":l=((i.D*24+i.H)*60+i.M)*60+Math.round(i.S+i.u);break;default:throw"bad abstime format: "+e}h=e.length===3?1:2;break;case 101:l=a,h=1;break}var c=h>0?Cr(l,h):"";return c}function Gn(t){var e=3;if(t.length<=e)return t;for(var i=t.length%e,s=t.substr(0,i);i!=t.length;i+=e)s+=(s.length>0?",":"")+t.substr(i,e);return s}var XE=/%/g;function VM(t,e,i){var s=e.replace(XE,""),r=e.length-s.length;return rn(t,s,i*Math.pow(10,2*r))+ii("%",r)}function BM(t,e,i){for(var s=e.length-1;e.charCodeAt(s-1)===44;)--s;return rn(t,e.substr(0,s),i/Math.pow(10,3*(e.length-s)))}function YE(t,e){var i,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+YE(t,-e);var r=t.indexOf(".");r===-1&&(r=t.indexOf("E"));var n=Math.floor(Math.log(e)*Math.LOG10E)%r;if(n<0&&(n+=r),i=(e/Math.pow(10,n)).toPrecision(s+1+(r+n)%r),i.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(i.indexOf(".")===-1?i=i.charAt(0)+"."+i.substr(1)+"E+"+(o-i.length+n):i+="E+"+(o-n);i.substr(0,2)==="0.";)i=i.charAt(0)+i.substr(2,r)+"."+i.substr(2+r),i=i.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,h,c){return l+h+c.substr(0,(r+n)%r)+"."+c.substr(n)+"E"})}else i=e.toExponential(s);return t.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),t.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}var qE=/# (\?+)( ?)\/( ?)(\d+)/;function HM(t,e,i){var s=parseInt(t[4],10),r=Math.round(e*s),n=Math.floor(r/s),o=r-n*s,a=s;return i+(n===0?"":""+n)+" "+(o===0?ii(" ",t[1].length+1+t[4].length):U0(o,t[1].length)+t[2]+"/"+t[3]+Cr(a,t[4].length))}function WM(t,e,i){return i+(e===0?"":""+e)+ii(" ",t[1].length+2+t[4].length)}var ZE=/^#*0*\.([0#]+)/,QE=/\).*[0#]/,JE=/\(###\) ###\\?-####/;function ns(t){for(var e="",i,s=0;s!=t.length;++s)switch(i=t.charCodeAt(s)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(i)}return e}function cE(t,e){var i=Math.pow(10,e);return""+Math.round(t*i)/i}function dE(t,e){var i=t-Math.floor(t),s=Math.pow(10,e);return e<(""+Math.round(i*s)).length?0:Math.round(i*s)}function UM(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function zM(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function tr(t,e,i){if(t.charCodeAt(0)===40&&!e.match(QE)){var s=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?tr("n",s,i):"("+tr("n",s,-i)+")"}if(e.charCodeAt(e.length-1)===44)return BM(t,e,i);if(e.indexOf("%")!==-1)return VM(t,e,i);if(e.indexOf("E")!==-1)return YE(e,i);if(e.charCodeAt(0)===36)return"$"+tr(t,e.substr(e.charAt(1)==" "?2:1),i);var r,n,o,a,l=Math.abs(i),h=i<0?"-":"";if(e.match(/^00+$/))return h+fl(l,e.length);if(e.match(/^[#?]+$/))return r=fl(i,0),r==="0"&&(r=""),r.length>e.length?r:ns(e.substr(0,e.length-r.length))+r;if(n=e.match(qE))return HM(n,l,h);if(e.match(/^#+0+$/))return h+fl(l,e.length-e.indexOf("0"));if(n=e.match(ZE))return r=cE(i,n[1].length).replace(/^([^\.]+)$/,"$1."+ns(n[1])).replace(/\.$/,"."+ns(n[1])).replace(/\.(\d*)$/,function(m,f){return"."+f+ii("0",ns(n[1]).length-f.length)}),e.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),n=e.match(/^(0*)\.(#*)$/))return h+cE(l,n[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,n[1].length?"0.":".");if(n=e.match(/^#{1,3},##0(\.?)$/))return h+Gn(fl(l,0));if(n=e.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+tr(t,e,-i):Gn(""+(Math.floor(i)+UM(i,n[1].length)))+"."+Cr(dE(i,n[1].length),n[1].length);if(n=e.match(/^#,#*,#0/))return tr(t,e.replace(/^#,#*,/,""),i);if(n=e.match(/^([0#]+)(\\?-([0#]+))+$/))return r=wl(tr(t,e.replace(/[\\-]/g,""),i)),o=0,wl(wl(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<r.length?r.charAt(o++):m==="0"?"0":""}));if(e.match(JE))return r=tr(t,"##########",i),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var c="";if(n=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(n[4].length,7),a=up(l,Math.pow(10,o)-1,!1),r=""+h,c=rn("n",n[1],a[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),r+=c+n[2]+"/"+n[3],c=cp(a[2],o),c.length<n[4].length&&(c=ns(n[4].substr(n[4].length-c.length))+c),r+=c,r;if(n=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(n[1].length,n[4].length),7),a=up(l,Math.pow(10,o)-1,!0),h+(a[0]||(a[1]?"":"0"))+" "+(a[1]?U0(a[1],o)+n[2]+"/"+n[3]+cp(a[2],o):ii(" ",2*o+1+n[2].length+n[3].length));if(n=e.match(/^[#0?]+$/))return r=fl(i,0),e.length<=r.length?r:ns(e.substr(0,e.length-r.length))+r;if(n=e.match(/^([#0?]+)\.([#0]+)$/)){r=""+i.toFixed(Math.min(n[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var d=e.indexOf(".")-o,p=e.length-r.length-d;return ns(e.substr(0,d)+r+e.substr(e.length-p))}if(n=e.match(/^00,000\.([#0]*0)$/))return o=dE(i,n[1].length),i<0?"-"+tr(t,e,-i):Gn(zM(i)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Cr(0,3-m.length):"")+m})+"."+Cr(o,n[1].length);switch(e){case"###,##0.00":return tr(t,"#,##0.00",i);case"###,###":case"##,###":case"#,###":var u=Gn(fl(l,0));return u!=="0"?h+u:"";case"###,###.00":return tr(t,"###,##0.00",i).replace(/^0\./,".");case"#,###.00":return tr(t,"#,##0.00",i).replace(/^0\./,".");default:}throw new Error("unsupported format |"+e+"|")}function jM(t,e,i){for(var s=e.length-1;e.charCodeAt(s-1)===44;)--s;return rn(t,e.substr(0,s),i/Math.pow(10,3*(e.length-s)))}function $M(t,e,i){var s=e.replace(XE,""),r=e.length-s.length;return rn(t,s,i*Math.pow(10,2*r))+ii("%",r)}function eb(t,e){var i,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+eb(t,-e);var r=t.indexOf(".");r===-1&&(r=t.indexOf("E"));var n=Math.floor(Math.log(e)*Math.LOG10E)%r;if(n<0&&(n+=r),i=(e/Math.pow(10,n)).toPrecision(s+1+(r+n)%r),!i.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);i.indexOf(".")===-1?i=i.charAt(0)+"."+i.substr(1)+"E+"+(o-i.length+n):i+="E+"+(o-n),i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,h,c){return l+h+c.substr(0,(r+n)%r)+"."+c.substr(n)+"E"})}else i=e.toExponential(s);return t.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),t.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}function kr(t,e,i){if(t.charCodeAt(0)===40&&!e.match(QE)){var s=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?kr("n",s,i):"("+kr("n",s,-i)+")"}if(e.charCodeAt(e.length-1)===44)return jM(t,e,i);if(e.indexOf("%")!==-1)return $M(t,e,i);if(e.indexOf("E")!==-1)return eb(e,i);if(e.charCodeAt(0)===36)return"$"+kr(t,e.substr(e.charAt(1)==" "?2:1),i);var r,n,o,a,l=Math.abs(i),h=i<0?"-":"";if(e.match(/^00+$/))return h+Cr(l,e.length);if(e.match(/^[#?]+$/))return r=""+i,i===0&&(r=""),r.length>e.length?r:ns(e.substr(0,e.length-r.length))+r;if(n=e.match(qE))return WM(n,l,h);if(e.match(/^#+0+$/))return h+Cr(l,e.length-e.indexOf("0"));if(n=e.match(ZE))return r=(""+i).replace(/^([^\.]+)$/,"$1."+ns(n[1])).replace(/\.$/,"."+ns(n[1])),r=r.replace(/\.(\d*)$/,function(m,f){return"."+f+ii("0",ns(n[1]).length-f.length)}),e.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),n=e.match(/^(0*)\.(#*)$/))return h+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,n[1].length?"0.":".");if(n=e.match(/^#{1,3},##0(\.?)$/))return h+Gn(""+l);if(n=e.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+kr(t,e,-i):Gn(""+i)+"."+ii("0",n[1].length);if(n=e.match(/^#,#*,#0/))return kr(t,e.replace(/^#,#*,/,""),i);if(n=e.match(/^([0#]+)(\\?-([0#]+))+$/))return r=wl(kr(t,e.replace(/[\\-]/g,""),i)),o=0,wl(wl(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<r.length?r.charAt(o++):m==="0"?"0":""}));if(e.match(JE))return r=kr(t,"##########",i),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var c="";if(n=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(n[4].length,7),a=up(l,Math.pow(10,o)-1,!1),r=""+h,c=rn("n",n[1],a[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),r+=c+n[2]+"/"+n[3],c=cp(a[2],o),c.length<n[4].length&&(c=ns(n[4].substr(n[4].length-c.length))+c),r+=c,r;if(n=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(n[1].length,n[4].length),7),a=up(l,Math.pow(10,o)-1,!0),h+(a[0]||(a[1]?"":"0"))+" "+(a[1]?U0(a[1],o)+n[2]+"/"+n[3]+cp(a[2],o):ii(" ",2*o+1+n[2].length+n[3].length));if(n=e.match(/^[#0?]+$/))return r=""+i,e.length<=r.length?r:ns(e.substr(0,e.length-r.length))+r;if(n=e.match(/^([#0]+)\.([#0]+)$/)){r=""+i.toFixed(Math.min(n[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var d=e.indexOf(".")-o,p=e.length-r.length-d;return ns(e.substr(0,d)+r+e.substr(e.length-p))}if(n=e.match(/^00,000\.([#0]*0)$/))return i<0?"-"+kr(t,e,-i):Gn(""+i).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Cr(0,3-m.length):"")+m})+"."+Cr(0,n[1].length);switch(e){case"###,###":case"##,###":case"#,###":var u=Gn(""+l);return u!=="0"?h+u:"";default:if(e.match(/\.[0#?]*$/))return kr(t,e.slice(0,e.lastIndexOf(".")),i)+ns(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function rn(t,e,i){return(i|0)===i?kr(t,e,i):tr(t,e,i)}function KM(t){for(var e=[],i=!1,s=0,r=0;s<t.length;++s)switch(t.charCodeAt(s)){case 34:i=!i;break;case 95:case 42:case 92:++s;break;case 59:e[e.length]=t.substr(r,s-r),r=s+1}if(e[e.length]=t.substr(r),i===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var tb=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ib(t){for(var e=0,i="",s="";e<t.length;)switch(i=t.charAt(e)){case"G":dp(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4E0A":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348")return!0;++e;break;case"[":for(s=i;t.charAt(e++)!=="]"&&e<t.length;)s+=t.charAt(e);if(s.match(tb))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(i=t.charAt(++e))>-1||i=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===i;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function XM(t,e,i,s){for(var r=[],n="",o=0,a="",l="t",h,c,d,p="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!dp(t,o))throw new Error("unrecognized character "+a+" in "+t);r[r.length]={t:"G",v:"General"},o+=7;break;case'"':for(n="";(d=t.charCodeAt(++o))!==34&&o<t.length;)n+=String.fromCharCode(d);r[r.length]={t:"t",v:n},++o;break;case"\\":var u=t.charAt(++o),m=u==="("||u===")"?u:"t";r[r.length]={t:m,v:u},++o;break;case"_":r[r.length]={t:"t",v:" "},o+=2;break;case"@":r[r.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(h==null&&(h=sp(e,i,t.charAt(o+1)==="2"),h==null))return"";r[r.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||h==null&&(h=sp(e,i),h==null))return"";for(n=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)n+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=p),r[r.length]={t:a,v:n},l=a;break;case"A":case"a":case"\u4E0A":var f={t:a,v:a};if(h==null&&(h=sp(e,i)),t.substr(o,3).toUpperCase()==="A/P"?(h!=null&&(f.v=h.H>=12?"P":"A"),f.t="T",p="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(h!=null&&(f.v=h.H>=12?"PM":"AM"),f.t="T",o+=5,p="h"):t.substr(o,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348"?(h!=null&&(f.v=h.H>=12?"\u4E0B\u5348":"\u4E0A\u5348"),f.t="T",o+=5,p="h"):(f.t="t",++o),h==null&&f.t==="T")return"";r[r.length]=f,l=a;break;case"[":for(n=a;t.charAt(o++)!=="]"&&o<t.length;)n+=t.charAt(o);if(n.slice(-1)!=="]")throw'unterminated "[" block: |'+n+"|";if(n.match(tb)){if(h==null&&(h=sp(e,i),h==null))return"";r[r.length]={t:"Z",v:n.toLowerCase()},l=n.charAt(1)}else n.indexOf("$")>-1&&(n=(n.match(/\$([^-\[\]]*)/)||[])[1]||"$",ib(t)||(r[r.length]={t:"t",v:n}));break;case".":if(h!=null){for(n=a;++o<t.length&&(a=t.charAt(o))==="0";)n+=a;r[r.length]={t:"s",v:n};break}case"0":case"#":for(n=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)n+=a;r[r.length]={t:"n",v:n};break;case"?":for(n=a;t.charAt(++o)===a;)n+=a;r[r.length]={t:a,v:n},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":r[r.length]={t:s===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(n=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)n+=t.charAt(o);r[r.length]={t:"D",v:n};break;case" ":r[r.length]={t:a,v:a},++o;break;case"$":r[r.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=\u20ACacfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);r[r.length]={t:"t",v:a},++o;break}var g=0,y=0,x;for(o=r.length-1,l="t";o>=0;--o)switch(r[o].t){case"h":case"H":r[o].t=p,l="h",g<1&&(g=1);break;case"s":(x=r[o].v.match(/\.0+$/))&&(y=Math.max(y,x[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":l=r[o].t;break;case"m":l==="s"&&(r[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&r[o].v.match(/[Hh]/)&&(g=1),g<2&&r[o].v.match(/[Mm]/)&&(g=2),g<3&&r[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var T="",A;for(o=0;o<r.length;++o)switch(r[o].t){case"t":case"T":case" ":case"D":break;case"X":r[o].v="",r[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":r[o].v=GM(r[o].t.charCodeAt(0),r[o].v,h,y),r[o].t="t";break;case"n":case"?":for(A=o+1;r[A]!=null&&((a=r[A].t)==="?"||a==="D"||(a===" "||a==="t")&&r[A+1]!=null&&(r[A+1].t==="?"||r[A+1].t==="t"&&r[A+1].v==="/")||r[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(r[A].v==="/"||r[A].v===" "&&r[A+1]!=null&&r[A+1].t=="?"));)r[o].v+=r[A].v,r[A]={v:"",t:";"},++A;T+=r[o].v,o=A-1;break;case"G":r[o].t="t",r[o].v=V0(e,i);break}var S="",M,B;if(T.length>0){T.charCodeAt(0)==40?(M=e<0&&T.charCodeAt(0)===45?-e:e,B=rn("n",T,M)):(M=e<0&&s>1?-e:e,B=rn("n",T,M),M<0&&r[0]&&r[0].t=="t"&&(B=B.substr(1),r[0].v="-"+r[0].v)),A=B.length-1;var j=r.length;for(o=0;o<r.length;++o)if(r[o]!=null&&r[o].t!="t"&&r[o].v.indexOf(".")>-1){j=o;break}var O=r.length;if(j===r.length&&B.indexOf("E")===-1){for(o=r.length-1;o>=0;--o)r[o]==null||"n?".indexOf(r[o].t)===-1||(A>=r[o].v.length-1?(A-=r[o].v.length,r[o].v=B.substr(A+1,r[o].v.length)):A<0?r[o].v="":(r[o].v=B.substr(0,A+1),A=-1),r[o].t="t",O=o);A>=0&&O<r.length&&(r[O].v=B.substr(0,A+1)+r[O].v)}else if(j!==r.length&&B.indexOf("E")===-1){for(A=B.indexOf(".")-1,o=j;o>=0;--o)if(!(r[o]==null||"n?".indexOf(r[o].t)===-1)){for(c=r[o].v.indexOf(".")>-1&&o===j?r[o].v.indexOf(".")-1:r[o].v.length-1,S=r[o].v.substr(c+1);c>=0;--c)A>=0&&(r[o].v.charAt(c)==="0"||r[o].v.charAt(c)==="#")&&(S=B.charAt(A--)+S);r[o].v=S,r[o].t="t",O=o}for(A>=0&&O<r.length&&(r[O].v=B.substr(0,A+1)+r[O].v),A=B.indexOf(".")+1,o=j;o<r.length;++o)if(!(r[o]==null||"n?(".indexOf(r[o].t)===-1&&o!==j)){for(c=r[o].v.indexOf(".")>-1&&o===j?r[o].v.indexOf(".")+1:0,S=r[o].v.substr(0,c);c<r[o].v.length;++c)A<B.length&&(S+=B.charAt(A++));r[o].v=S,r[o].t="t",O=o}}}for(o=0;o<r.length;++o)r[o]!=null&&"n?".indexOf(r[o].t)>-1&&(M=s>1&&e<0&&o>0&&r[o-1].v==="-"?-e:e,r[o].v=rn(r[o].t,r[o].v,M),r[o].t="t");var _="";for(o=0;o!==r.length;++o)r[o]!=null&&(_+=r[o].v);return _}var uE=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function pE(t,e){if(e==null)return!1;var i=parseFloat(e[2]);switch(e[1]){case"=":if(t==i)return!0;break;case">":if(t>i)return!0;break;case"<":if(t<i)return!0;break;case"<>":if(t!=i)return!0;break;case">=":if(t>=i)return!0;break;case"<=":if(t<=i)return!0;break}return!1}function YM(t,e){var i=KM(t),s=i.length,r=i[s-1].indexOf("@");if(s<4&&r>-1&&--s,i.length>4)throw new Error("cannot find right format for |"+i.join("|")+"|");if(typeof e!="number")return[4,i.length===4||r>-1?i[i.length-1]:"@"];switch(i.length){case 1:i=r>-1?["General","General","General",i[0]]:[i[0],i[0],i[0],"@"];break;case 2:i=r>-1?[i[0],i[0],i[0],i[1]]:[i[0],i[1],i[0],"@"];break;case 3:i=r>-1?[i[0],i[1],i[0],i[2]]:[i[0],i[1],i[2],"@"];break;case 4:break}var n=e>0?i[0]:e<0?i[1]:i[2];if(i[0].indexOf("[")===-1&&i[1].indexOf("[")===-1)return[s,n];if(i[0].match(/\[[=<>]/)!=null||i[1].match(/\[[=<>]/)!=null){var o=i[0].match(uE),a=i[1].match(uE);return pE(e,o)?[s,i[0]]:pE(e,a)?[s,i[1]]:[s,i[o!=null&&a!=null?2:1]]}return[s,n]}function Vn(t,e,i){i==null&&(i={});var s="";switch(typeof t){case"string":t=="m/d/yy"&&i.dateNF?s=i.dateNF:s=t;break;case"number":t==14&&i.dateNF?s=i.dateNF:s=(i.table!=null?i.table:si)[t],s==null&&(s=i.table&&i.table[hE[t]]||si[hE[t]]),s==null&&(s=FM[t]||"General");break}if(dp(s,0))return V0(e,i);e instanceof Date&&(e=KE(e,i.date1904));var r=YM(s,e);if(dp(r[1]))return V0(e,i);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return XM(r[1],e,i,r[0])}function sb(t,e){if(typeof e!="number"){e=+e||-1;for(var i=0;i<392;++i){if(si[i]==null){e<0&&(e=i);continue}if(si[i]==t){e=i;break}}e<0&&(e=391)}return si[e]=t,e}function bp(t){for(var e=0;e!=392;++e)t[e]!==void 0&&sb(t[e],e)}function _p(){si=DM()}var rb=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function qM(t){var e=typeof t=="number"?si[t]:t;return e=e.replace(rb,"(\\d+)"),new RegExp("^"+e+"$")}function ZM(t,e,i){var s=-1,r=-1,n=-1,o=-1,a=-1,l=-1;(e.match(rb)||[]).forEach(function(d,p){var u=parseInt(i[p+1],10);switch(d.toLowerCase().charAt(0)){case"y":s=u;break;case"d":n=u;break;case"h":o=u;break;case"s":l=u;break;case"m":o>=0?a=u:r=u;break}}),l>=0&&a==-1&&r>=0&&(a=r,r=-1);var h=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(r>=1?r:1)).slice(-2)+"-"+("00"+(n>=1?n:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var c=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?h:s==-1&&r==-1&&n==-1?c:h+"T"+c}var QM=function(){var t={};t.version="1.2.0";function e(){for(var B=0,j=new Array(256),O=0;O!=256;++O)B=O,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,j[O]=B;return typeof Int32Array<"u"?new Int32Array(j):j}var i=e();function s(B){var j=0,O=0,_=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(_=0;_!=256;++_)P[_]=B[_];for(_=0;_!=256;++_)for(O=B[_],j=256+_;j<4096;j+=256)O=P[j]=O>>>8^B[O&255];var R=[];for(_=1;_!=16;++_)R[_-1]=typeof Int32Array<"u"?P.subarray(_*256,_*256+256):P.slice(_*256,_*256+256);return R}var r=s(i),n=r[0],o=r[1],a=r[2],l=r[3],h=r[4],c=r[5],d=r[6],p=r[7],u=r[8],m=r[9],f=r[10],g=r[11],y=r[12],x=r[13],T=r[14];function A(B,j){for(var O=j^-1,_=0,P=B.length;_<P;)O=O>>>8^i[(O^B.charCodeAt(_++))&255];return~O}function S(B,j){for(var O=j^-1,_=B.length-15,P=0;P<_;)O=T[B[P++]^O&255]^x[B[P++]^O>>8&255]^y[B[P++]^O>>16&255]^g[B[P++]^O>>>24]^f[B[P++]]^m[B[P++]]^u[B[P++]]^p[B[P++]]^d[B[P++]]^c[B[P++]]^h[B[P++]]^l[B[P++]]^a[B[P++]]^o[B[P++]]^n[B[P++]]^i[B[P++]];for(_+=15;P<_;)O=O>>>8^i[(O^B[P++])&255];return~O}function M(B,j){for(var O=j^-1,_=0,P=B.length,R=0,v=0;_<P;)R=B.charCodeAt(_++),R<128?O=O>>>8^i[(O^R)&255]:R<2048?(O=O>>>8^i[(O^(192|R>>6&31))&255],O=O>>>8^i[(O^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,v=B.charCodeAt(_++)&1023,O=O>>>8^i[(O^(240|R>>8&7))&255],O=O>>>8^i[(O^(128|R>>2&63))&255],O=O>>>8^i[(O^(128|v>>6&15|(R&3)<<4))&255],O=O>>>8^i[(O^(128|v&63))&255]):(O=O>>>8^i[(O^(224|R>>12&15))&255],O=O>>>8^i[(O^(128|R>>6&63))&255],O=O>>>8^i[(O^(128|R&63))&255]);return~O}return t.table=i,t.bstr=A,t.buf=S,t.str=M,t}(),Wt=function(){var e={};e.version="1.2.1";function i(te,ue){for(var ae=te.split("/"),he=ue.split("/"),pe=0,fe=0,be=Math.min(ae.length,he.length);pe<be;++pe){if(fe=ae[pe].length-he[pe].length)return fe;if(ae[pe]!=he[pe])return ae[pe]<he[pe]?-1:1}return ae.length-he.length}function s(te){if(te.charAt(te.length-1)=="/")return te.slice(0,-1).indexOf("/")===-1?te:s(te.slice(0,-1));var ue=te.lastIndexOf("/");return ue===-1?te:te.slice(0,ue+1)}function r(te){if(te.charAt(te.length-1)=="/")return r(te.slice(0,-1));var ue=te.lastIndexOf("/");return ue===-1?te:te.slice(ue+1)}function n(te,ue){typeof ue=="string"&&(ue=new Date(ue));var ae=ue.getHours();ae=ae<<6|ue.getMinutes(),ae=ae<<5|ue.getSeconds()>>>1,te.write_shift(2,ae);var he=ue.getFullYear()-1980;he=he<<4|ue.getMonth()+1,he=he<<5|ue.getDate(),te.write_shift(2,he)}function o(te){var ue=te.read_shift(2)&65535,ae=te.read_shift(2)&65535,he=new Date,pe=ae&31;ae>>>=5;var fe=ae&15;ae>>>=4,he.setMilliseconds(0),he.setFullYear(ae+1980),he.setMonth(fe-1),he.setDate(pe);var be=ue&31;ue>>>=5;var De=ue&63;return ue>>>=6,he.setHours(ue),he.setMinutes(De),he.setSeconds(be<<1),he}function a(te){Bs(te,0);for(var ue={},ae=0;te.l<=te.length-4;){var he=te.read_shift(2),pe=te.read_shift(2),fe=te.l+pe,be={};switch(he){case 21589:ae=te.read_shift(1),ae&1&&(be.mtime=te.read_shift(4)),pe>5&&(ae&2&&(be.atime=te.read_shift(4)),ae&4&&(be.ctime=te.read_shift(4))),be.mtime&&(be.mt=new Date(be.mtime*1e3));break}te.l=fe,ue[he]=be}return ue}var l;function h(){return l||(l={})}function c(te,ue){if(te[0]==80&&te[1]==75)return Mt(te,ue);if((te[0]|32)==109&&(te[1]|32)==105)return nr(te,ue);if(te.length<512)throw new Error("CFB file size "+te.length+" < 512");var ae=3,he=512,pe=0,fe=0,be=0,De=0,_e=0,Te=[],Ae=te.slice(0,512);Bs(Ae,0);var He=d(Ae);switch(ae=He[0],ae){case 3:he=512;break;case 4:he=4096;break;case 0:if(He[1]==0)return Mt(te,ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+ae)}he!==512&&(Ae=te.slice(0,he),Bs(Ae,28));var $e=te.slice(0,he);p(Ae,ae);var Je=Ae.read_shift(4,"i");if(ae===3&&Je!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Je);Ae.l+=4,be=Ae.read_shift(4,"i"),Ae.l+=4,Ae.chk("00100000","Mini Stream Cutoff Size: "),De=Ae.read_shift(4,"i"),pe=Ae.read_shift(4,"i"),_e=Ae.read_shift(4,"i"),fe=Ae.read_shift(4,"i");for(var Ke=-1,qe=0;qe<109&&(Ke=Ae.read_shift(4,"i"),!(Ke<0));++qe)Te[qe]=Ke;var ht=u(te,he);g(_e,fe,ht,he,Te);var $t=x(ht,be,Te,he);$t[be].name="!Directory",pe>0&&De!==v&&($t[De].name="!MiniFAT"),$t[Te[0]].name="!FAT",$t.fat_addrs=Te,$t.ssz=he;var ls={},ci=[],As=[],Pl=[];T(be,$t,ht,ci,pe,ls,As,De),m(As,Pl,ci),ci.shift();var Ml={FileIndex:As,FullPaths:Pl};return ue&&ue.raw&&(Ml.raw={header:$e,sectors:ht}),Ml}function d(te){if(te[te.l]==80&&te[te.l+1]==75)return[0,0];te.chk(C,"Header Signature: "),te.l+=16;var ue=te.read_shift(2,"u");return[te.read_shift(2,"u"),ue]}function p(te,ue){var ae=9;switch(te.l+=2,ae=te.read_shift(2)){case 9:if(ue!=3)throw new Error("Sector Shift: Expected 9 saw "+ae);break;case 12:if(ue!=4)throw new Error("Sector Shift: Expected 12 saw "+ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ae)}te.chk("0600","Mini Sector Shift: "),te.chk("000000000000","Reserved: ")}function u(te,ue){for(var ae=Math.ceil(te.length/ue)-1,he=[],pe=1;pe<ae;++pe)he[pe-1]=te.slice(pe*ue,(pe+1)*ue);return he[ae-1]=te.slice(ae*ue),he}function m(te,ue,ae){for(var he=0,pe=0,fe=0,be=0,De=0,_e=ae.length,Te=[],Ae=[];he<_e;++he)Te[he]=Ae[he]=he,ue[he]=ae[he];for(;De<Ae.length;++De)he=Ae[De],pe=te[he].L,fe=te[he].R,be=te[he].C,Te[he]===he&&(pe!==-1&&Te[pe]!==pe&&(Te[he]=Te[pe]),fe!==-1&&Te[fe]!==fe&&(Te[he]=Te[fe])),be!==-1&&(Te[be]=he),pe!==-1&&he!=Te[he]&&(Te[pe]=Te[he],Ae.lastIndexOf(pe)<De&&Ae.push(pe)),fe!==-1&&he!=Te[he]&&(Te[fe]=Te[he],Ae.lastIndexOf(fe)<De&&Ae.push(fe));for(he=1;he<_e;++he)Te[he]===he&&(fe!==-1&&Te[fe]!==fe?Te[he]=Te[fe]:pe!==-1&&Te[pe]!==pe&&(Te[he]=Te[pe]));for(he=1;he<_e;++he)if(te[he].type!==0){if(De=he,De!=Te[De])do De=Te[De],ue[he]=ue[De]+"/"+ue[he];while(De!==0&&Te[De]!==-1&&De!=Te[De]);Te[he]=-1}for(ue[0]+="/",he=1;he<_e;++he)te[he].type!==2&&(ue[he]+="/")}function f(te,ue,ae){for(var he=te.start,pe=te.size,fe=[],be=he;ae&&pe>0&&be>=0;)fe.push(ue.slice(be*R,be*R+R)),pe-=R,be=zo(ae,be*4);return fe.length===0?Fe(0):Gi(fe).slice(0,te.size)}function g(te,ue,ae,he,pe){var fe=v;if(te===v){if(ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(te!==-1){var be=ae[te],De=(he>>>2)-1;if(!be)return;for(var _e=0;_e<De&&(fe=zo(be,_e*4))!==v;++_e)pe.push(fe);g(zo(be,he-4),ue-1,ae,he,pe)}}function y(te,ue,ae,he,pe){var fe=[],be=[];pe||(pe=[]);var De=he-1,_e=0,Te=0;for(_e=ue;_e>=0;){pe[_e]=!0,fe[fe.length]=_e,be.push(te[_e]);var Ae=ae[Math.floor(_e*4/he)];if(Te=_e*4&De,he<4+Te)throw new Error("FAT boundary crossed: "+_e+" 4 "+he);if(!te[Ae])break;_e=zo(te[Ae],Te)}return{nodes:fe,data:xE([be])}}function x(te,ue,ae,he){var pe=te.length,fe=[],be=[],De=[],_e=[],Te=he-1,Ae=0,He=0,$e=0,Je=0;for(Ae=0;Ae<pe;++Ae)if(De=[],$e=Ae+ue,$e>=pe&&($e-=pe),!be[$e]){_e=[];var Ke=[];for(He=$e;He>=0;){Ke[He]=!0,be[He]=!0,De[De.length]=He,_e.push(te[He]);var qe=ae[Math.floor(He*4/he)];if(Je=He*4&Te,he<4+Je)throw new Error("FAT boundary crossed: "+He+" 4 "+he);if(!te[qe]||(He=zo(te[qe],Je),Ke[He]))break}fe[$e]={nodes:De,data:xE([_e])}}return fe}function T(te,ue,ae,he,pe,fe,be,De){for(var _e=0,Te=he.length?2:0,Ae=ue[te].data,He=0,$e=0,Je;He<Ae.length;He+=128){var Ke=Ae.slice(He,He+128);Bs(Ke,64),$e=Ke.read_shift(2),Je=Rp(Ke,0,$e-Te),he.push(Je);var qe={name:Je,type:Ke.read_shift(1),color:Ke.read_shift(1),L:Ke.read_shift(4,"i"),R:Ke.read_shift(4,"i"),C:Ke.read_shift(4,"i"),clsid:Ke.read_shift(16),state:Ke.read_shift(4,"i"),start:0,size:0},ht=Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2);ht!==0&&(qe.ct=A(Ke,Ke.l-8));var $t=Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2);$t!==0&&(qe.mt=A(Ke,Ke.l-8)),qe.start=Ke.read_shift(4,"i"),qe.size=Ke.read_shift(4,"i"),qe.size<0&&qe.start<0&&(qe.size=qe.type=0,qe.start=v,qe.name=""),qe.type===5?(_e=qe.start,pe>0&&_e!==v&&(ue[_e].name="!StreamData")):qe.size>=4096?(qe.storage="fat",ue[qe.start]===void 0&&(ue[qe.start]=y(ae,qe.start,ue.fat_addrs,ue.ssz)),ue[qe.start].name=qe.name,qe.content=ue[qe.start].data.slice(0,qe.size)):(qe.storage="minifat",qe.size<0?qe.size=0:_e!==v&&qe.start!==v&&ue[_e]&&(qe.content=f(qe,ue[_e].data,(ue[De]||{}).data))),qe.content&&Bs(qe.content,0),fe[Je]=qe,be.push(qe)}}function A(te,ue){return new Date((Ri(te,ue+4)/1e7*Math.pow(2,32)+Ri(te,ue)/1e7-11644473600)*1e3)}function S(te,ue){return h(),c(l.readFileSync(te),ue)}function M(te,ue){var ae=ue&&ue.type;switch(ae||Rt&&Buffer.isBuffer(te)&&(ae="buffer"),ae||"base64"){case"file":return S(te,ue);case"base64":return c(vr(an(te)),ue);case"binary":return c(vr(te),ue)}return c(te,ue)}function B(te,ue){var ae=ue||{},he=ae.root||"Root Entry";if(te.FullPaths||(te.FullPaths=[]),te.FileIndex||(te.FileIndex=[]),te.FullPaths.length!==te.FileIndex.length)throw new Error("inconsistent CFB structure");te.FullPaths.length===0&&(te.FullPaths[0]=he+"/",te.FileIndex[0]={name:he,type:5}),ae.CLSID&&(te.FileIndex[0].clsid=ae.CLSID),j(te)}function j(te){var ue="Sh33tJ5";if(!Wt.find(te,"/"+ue)){var ae=Fe(4);ae[0]=55,ae[1]=ae[3]=50,ae[2]=54,te.FileIndex.push({name:ue,type:2,content:ae,size:4,L:69,R:69,C:69}),te.FullPaths.push(te.FullPaths[0]+ue),O(te)}}function O(te,ue){B(te);for(var ae=!1,he=!1,pe=te.FullPaths.length-1;pe>=0;--pe){var fe=te.FileIndex[pe];switch(fe.type){case 0:he?ae=!0:(te.FileIndex.pop(),te.FullPaths.pop());break;case 1:case 2:case 5:he=!0,isNaN(fe.R*fe.L*fe.C)&&(ae=!0),fe.R>-1&&fe.L>-1&&fe.R==fe.L&&(ae=!0);break;default:ae=!0;break}}if(!(!ae&&!ue)){var be=new Date(1987,1,19),De=0,_e=Object.create?Object.create(null):{},Te=[];for(pe=0;pe<te.FullPaths.length;++pe)_e[te.FullPaths[pe]]=!0,te.FileIndex[pe].type!==0&&Te.push([te.FullPaths[pe],te.FileIndex[pe]]);for(pe=0;pe<Te.length;++pe){var Ae=s(Te[pe][0]);he=_e[Ae],he||(Te.push([Ae,{name:r(Ae).replace("/",""),type:1,clsid:E,ct:be,mt:be,content:null}]),_e[Ae]=!0)}for(Te.sort(function(Je,Ke){return i(Je[0],Ke[0])}),te.FullPaths=[],te.FileIndex=[],pe=0;pe<Te.length;++pe)te.FullPaths[pe]=Te[pe][0],te.FileIndex[pe]=Te[pe][1];for(pe=0;pe<Te.length;++pe){var He=te.FileIndex[pe],$e=te.FullPaths[pe];if(He.name=r($e).replace("/",""),He.L=He.R=He.C=-(He.color=1),He.size=He.content?He.content.length:0,He.start=0,He.clsid=He.clsid||E,pe===0)He.C=Te.length>1?1:-1,He.size=0,He.type=5;else if($e.slice(-1)=="/"){for(De=pe+1;De<Te.length&&s(te.FullPaths[De])!=$e;++De);for(He.C=De>=Te.length?-1:De,De=pe+1;De<Te.length&&s(te.FullPaths[De])!=s($e);++De);He.R=De>=Te.length?-1:De,He.type=1}else s(te.FullPaths[pe+1]||"")==s($e)&&(He.R=pe+1),He.type=2}}}function _(te,ue){var ae=ue||{};if(ae.fileType=="mad")return Ip(te,ae);switch(O(te),ae.fileType){case"zip":return Mi(te,ae)}var he=function(Je){for(var Ke=0,qe=0,ht=0;ht<Je.FileIndex.length;++ht){var $t=Je.FileIndex[ht];if($t.content){var ls=$t.content.length;ls>0&&(ls<4096?Ke+=ls+63>>6:qe+=ls+511>>9)}}for(var ci=Je.FullPaths.length+3>>2,As=Ke+7>>3,Pl=Ke+127>>7,Ml=As+qe+ci+Pl,Un=Ml+127>>7,Lp=Un<=109?0:Math.ceil((Un-109)/127);Ml+Un+Lp+127>>7>Un;)Lp=++Un<=109?0:Math.ceil((Un-109)/127);var Br=[1,Lp,Un,Pl,ci,qe,Ke,0];return Je.FileIndex[0].size=Ke<<6,Br[7]=(Je.FileIndex[0].start=Br[0]+Br[1]+Br[2]+Br[3]+Br[4]+Br[5])+(Br[6]+7>>3),Br}(te),pe=Fe(he[7]<<9),fe=0,be=0;{for(fe=0;fe<8;++fe)pe.write_shift(1,D[fe]);for(fe=0;fe<8;++fe)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),fe=0;fe<3;++fe)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,he[2]),pe.write_shift(4,he[0]+he[1]+he[2]+he[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,he[3]?he[0]+he[1]+he[2]-1:v),pe.write_shift(4,he[3]),pe.write_shift(-4,he[1]?he[0]-1:v),pe.write_shift(4,he[1]),fe=0;fe<109;++fe)pe.write_shift(-4,fe<he[2]?he[1]+fe:-1)}if(he[1])for(be=0;be<he[1];++be){for(;fe<236+be*127;++fe)pe.write_shift(-4,fe<he[2]?he[1]+fe:-1);pe.write_shift(-4,be===he[1]-1?v:be+1)}var De=function(Je){for(be+=Je;fe<be-1;++fe)pe.write_shift(-4,fe+1);Je&&(++fe,pe.write_shift(-4,v))};for(be=fe=0,be+=he[1];fe<be;++fe)pe.write_shift(-4,L.DIFSECT);for(be+=he[2];fe<be;++fe)pe.write_shift(-4,L.FATSECT);De(he[3]),De(he[4]);for(var _e=0,Te=0,Ae=te.FileIndex[0];_e<te.FileIndex.length;++_e)Ae=te.FileIndex[_e],Ae.content&&(Te=Ae.content.length,!(Te<4096)&&(Ae.start=be,De(Te+511>>9)));for(De(he[6]+7>>3);pe.l&511;)pe.write_shift(-4,L.ENDOFCHAIN);for(be=fe=0,_e=0;_e<te.FileIndex.length;++_e)Ae=te.FileIndex[_e],Ae.content&&(Te=Ae.content.length,!(!Te||Te>=4096)&&(Ae.start=be,De(Te+63>>6)));for(;pe.l&511;)pe.write_shift(-4,L.ENDOFCHAIN);for(fe=0;fe<he[4]<<2;++fe){var He=te.FullPaths[fe];if(!He||He.length===0){for(_e=0;_e<17;++_e)pe.write_shift(4,0);for(_e=0;_e<3;++_e)pe.write_shift(4,-1);for(_e=0;_e<12;++_e)pe.write_shift(4,0);continue}Ae=te.FileIndex[fe],fe===0&&(Ae.start=Ae.size?Ae.start-1:v);var $e=fe===0&&ae.root||Ae.name;if(Te=2*($e.length+1),pe.write_shift(64,$e,"utf16le"),pe.write_shift(2,Te),pe.write_shift(1,Ae.type),pe.write_shift(1,Ae.color),pe.write_shift(-4,Ae.L),pe.write_shift(-4,Ae.R),pe.write_shift(-4,Ae.C),Ae.clsid)pe.write_shift(16,Ae.clsid,"hex");else for(_e=0;_e<4;++_e)pe.write_shift(4,0);pe.write_shift(4,Ae.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,Ae.start),pe.write_shift(4,Ae.size),pe.write_shift(4,0)}for(fe=1;fe<te.FileIndex.length;++fe)if(Ae=te.FileIndex[fe],Ae.size>=4096)if(pe.l=Ae.start+1<<9,Rt&&Buffer.isBuffer(Ae.content))Ae.content.copy(pe,pe.l,0,Ae.size),pe.l+=Ae.size+511&-512;else{for(_e=0;_e<Ae.size;++_e)pe.write_shift(1,Ae.content[_e]);for(;_e&511;++_e)pe.write_shift(1,0)}for(fe=1;fe<te.FileIndex.length;++fe)if(Ae=te.FileIndex[fe],Ae.size>0&&Ae.size<4096)if(Rt&&Buffer.isBuffer(Ae.content))Ae.content.copy(pe,pe.l,0,Ae.size),pe.l+=Ae.size+63&-64;else{for(_e=0;_e<Ae.size;++_e)pe.write_shift(1,Ae.content[_e]);for(;_e&63;++_e)pe.write_shift(1,0)}if(Rt)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function P(te,ue){var ae=te.FullPaths.map(function(_e){return _e.toUpperCase()}),he=ae.map(function(_e){var Te=_e.split("/");return Te[Te.length-(_e.slice(-1)=="/"?2:1)]}),pe=!1;ue.charCodeAt(0)===47?(pe=!0,ue=ae[0].slice(0,-1)+ue):pe=ue.indexOf("/")!==-1;var fe=ue.toUpperCase(),be=pe===!0?ae.indexOf(fe):he.indexOf(fe);if(be!==-1)return te.FileIndex[be];var De=!fe.match(ip);for(fe=fe.replace(yl,""),De&&(fe=fe.replace(ip,"!")),be=0;be<ae.length;++be)if((De?ae[be].replace(ip,"!"):ae[be]).replace(yl,"")==fe||(De?he[be].replace(ip,"!"):he[be]).replace(yl,"")==fe)return te.FileIndex[be];return null}var R=64,v=-2,C="d0cf11e0a1b11ae1",D=[208,207,17,224,161,177,26,225],E="00000000000000000000000000000000",L={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:C,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:E,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(te,ue,ae){h();var he=_(te,ae);l.writeFileSync(ue,he)}function Y(te){for(var ue=new Array(te.length),ae=0;ae<te.length;++ae)ue[ae]=String.fromCharCode(te[ae]);return ue.join("")}function J(te,ue){var ae=_(te,ue);switch(ue&&ue.type||"buffer"){case"file":return h(),l.writeFileSync(ue.filename,ae),ae;case"binary":return typeof ae=="string"?ae:Y(ae);case"base64":return Fc(typeof ae=="string"?ae:Y(ae));case"buffer":if(Rt)return Buffer.isBuffer(ae)?ae:hn(ae);case"array":return typeof ae=="string"?vr(ae):ae}return ae}var de;function b(te){try{var ue=te.InflateRaw,ae=new ue;if(ae._processChunk(new Uint8Array([3,0]),ae._finishFlushFlag),ae.bytesRead)de=te;else throw new Error("zlib does not expose bytesRead")}catch(he){console.error("cannot use native zlib: "+(he.message||he))}}function K(te,ue){if(!de)return ut(te,ue);var ae=de.InflateRaw,he=new ae,pe=he._processChunk(te.slice(te.l),he._finishFlushFlag);return te.l+=he.bytesRead,pe}function z(te){return de?de.deflateRawSync(te):Ee(te)}var W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function k(te){var ue=(te<<1|te<<11)&139536|(te<<5|te<<15)&558144;return(ue>>16|ue>>8|ue)&255}for(var N=typeof Uint8Array<"u",q=N?new Uint8Array(256):[],F=0;F<256;++F)q[F]=k(F);function H(te,ue){var ae=q[te&255];return ue<=8?ae>>>8-ue:(ae=ae<<8|q[te>>8&255],ue<=16?ae>>>16-ue:(ae=ae<<8|q[te>>16&255],ae>>>24-ue))}function U(te,ue){var ae=ue&7,he=ue>>>3;return(te[he]|(ae<=6?0:te[he+1]<<8))>>>ae&3}function X(te,ue){var ae=ue&7,he=ue>>>3;return(te[he]|(ae<=5?0:te[he+1]<<8))>>>ae&7}function Z(te,ue){var ae=ue&7,he=ue>>>3;return(te[he]|(ae<=4?0:te[he+1]<<8))>>>ae&15}function ee(te,ue){var ae=ue&7,he=ue>>>3;return(te[he]|(ae<=3?0:te[he+1]<<8))>>>ae&31}function ne(te,ue){var ae=ue&7,he=ue>>>3;return(te[he]|(ae<=1?0:te[he+1]<<8))>>>ae&127}function le(te,ue,ae){var he=ue&7,pe=ue>>>3,fe=(1<<ae)-1,be=te[pe]>>>he;return ae<8-he||(be|=te[pe+1]<<8-he,ae<16-he)||(be|=te[pe+2]<<16-he,ae<24-he)||(be|=te[pe+3]<<24-he),be&fe}function ge(te,ue,ae){var he=ue&7,pe=ue>>>3;return he<=5?te[pe]|=(ae&7)<<he:(te[pe]|=ae<<he&255,te[pe+1]=(ae&7)>>8-he),ue+3}function xe(te,ue,ae){var he=ue&7,pe=ue>>>3;return ae=(ae&1)<<he,te[pe]|=ae,ue+1}function Se(te,ue,ae){var he=ue&7,pe=ue>>>3;return ae<<=he,te[pe]|=ae&255,ae>>>=8,te[pe+1]=ae,ue+8}function se(te,ue,ae){var he=ue&7,pe=ue>>>3;return ae<<=he,te[pe]|=ae&255,ae>>>=8,te[pe+1]=ae&255,te[pe+2]=ae>>>8,ue+16}function ie(te,ue){var ae=te.length,he=2*ae>ue?2*ae:ue+5,pe=0;if(ae>=ue)return te;if(Rt){var fe=oE(he);if(te.copy)te.copy(fe);else for(;pe<te.length;++pe)fe[pe]=te[pe];return fe}else if(N){var be=new Uint8Array(he);if(be.set)be.set(te);else for(;pe<ae;++pe)be[pe]=te[pe];return be}return te.length=he,te}function oe(te){for(var ue=new Array(te),ae=0;ae<te;++ae)ue[ae]=0;return ue}function ce(te,ue,ae){var he=1,pe=0,fe=0,be=0,De=0,_e=te.length,Te=N?new Uint16Array(32):oe(32);for(fe=0;fe<32;++fe)Te[fe]=0;for(fe=_e;fe<ae;++fe)te[fe]=0;_e=te.length;var Ae=N?new Uint16Array(_e):oe(_e);for(fe=0;fe<_e;++fe)Te[pe=te[fe]]++,he<pe&&(he=pe),Ae[fe]=0;for(Te[0]=0,fe=1;fe<=he;++fe)Te[fe+16]=De=De+Te[fe-1]<<1;for(fe=0;fe<_e;++fe)De=te[fe],De!=0&&(Ae[fe]=Te[De+16]++);var He=0;for(fe=0;fe<_e;++fe)if(He=te[fe],He!=0)for(De=H(Ae[fe],he)>>he-He,be=(1<<he+4-He)-1;be>=0;--be)ue[De|be<<He]=He&15|fe<<4;return he}var ve=N?new Uint16Array(512):oe(512),me=N?new Uint16Array(32):oe(32);if(!N){for(var ye=0;ye<512;++ye)ve[ye]=0;for(ye=0;ye<32;++ye)me[ye]=0}(function(){for(var te=[],ue=0;ue<32;ue++)te.push(5);ce(te,me,32);var ae=[];for(ue=0;ue<=143;ue++)ae.push(8);for(;ue<=255;ue++)ae.push(9);for(;ue<=279;ue++)ae.push(7);for(;ue<=287;ue++)ae.push(8);ce(ae,ve,288)})();var we=function(){for(var ue=N?new Uint8Array(32768):[],ae=0,he=0;ae<I.length-1;++ae)for(;he<I[ae+1];++he)ue[he]=ae;for(;he<32768;++he)ue[he]=29;var pe=N?new Uint8Array(259):[];for(ae=0,he=0;ae<re.length-1;++ae)for(;he<re[ae+1];++he)pe[he]=ae;function fe(De,_e){for(var Te=0;Te<De.length;){var Ae=Math.min(65535,De.length-Te),He=Te+Ae==De.length;for(_e.write_shift(1,+He),_e.write_shift(2,Ae),_e.write_shift(2,~Ae&65535);Ae-- >0;)_e[_e.l++]=De[Te++]}return _e.l}function be(De,_e){for(var Te=0,Ae=0,He=N?new Uint16Array(32768):[];Ae<De.length;){var $e=Math.min(65535,De.length-Ae);if($e<10){for(Te=ge(_e,Te,+(Ae+$e==De.length)),Te&7&&(Te+=8-(Te&7)),_e.l=Te/8|0,_e.write_shift(2,$e),_e.write_shift(2,~$e&65535);$e-- >0;)_e[_e.l++]=De[Ae++];Te=_e.l*8;continue}Te=ge(_e,Te,+(Ae+$e==De.length)+2);for(var Je=0;$e-- >0;){var Ke=De[Ae];Je=(Je<<5^Ke)&32767;var qe=-1,ht=0;if((qe=He[Je])&&(qe|=Ae&-32768,qe>Ae&&(qe-=32768),qe<Ae))for(;De[qe+ht]==De[Ae+ht]&&ht<250;)++ht;if(ht>2){Ke=pe[ht],Ke<=22?Te=Se(_e,Te,q[Ke+1]>>1)-1:(Se(_e,Te,3),Te+=5,Se(_e,Te,q[Ke-23]>>5),Te+=3);var $t=Ke<8?0:Ke-4>>2;$t>0&&(se(_e,Te,ht-re[Ke]),Te+=$t),Ke=ue[Ae-qe],Te=Se(_e,Te,q[Ke]>>3),Te-=3;var ls=Ke<4?0:Ke-2>>1;ls>0&&(se(_e,Te,Ae-qe-I[Ke]),Te+=ls);for(var ci=0;ci<ht;++ci)He[Je]=Ae&32767,Je=(Je<<5^De[Ae])&32767,++Ae;$e-=ht-1}else Ke<=143?Ke=Ke+48:Te=xe(_e,Te,1),Te=Se(_e,Te,q[Ke]),He[Je]=Ae&32767,++Ae}Te=Se(_e,Te,0)-1}return _e.l=(Te+7)/8|0,_e.l}return function(_e,Te){return _e.length<8?fe(_e,Te):be(_e,Te)}}();function Ee(te){var ue=Fe(50+Math.floor(te.length*1.1)),ae=we(te,ue);return ue.slice(0,ae)}var Pe=N?new Uint16Array(32768):oe(32768),Oe=N?new Uint16Array(32768):oe(32768),Re=N?new Uint16Array(128):oe(128),We=1,Ze=1;function ze(te,ue){var ae=ee(te,ue)+257;ue+=5;var he=ee(te,ue)+1;ue+=5;var pe=Z(te,ue)+4;ue+=4;for(var fe=0,be=N?new Uint8Array(19):oe(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_e=1,Te=N?new Uint8Array(8):oe(8),Ae=N?new Uint8Array(8):oe(8),He=be.length,$e=0;$e<pe;++$e)be[W[$e]]=fe=X(te,ue),_e<fe&&(_e=fe),Te[fe]++,ue+=3;var Je=0;for(Te[0]=0,$e=1;$e<=_e;++$e)Ae[$e]=Je=Je+Te[$e-1]<<1;for($e=0;$e<He;++$e)(Je=be[$e])!=0&&(De[$e]=Ae[Je]++);var Ke=0;for($e=0;$e<He;++$e)if(Ke=be[$e],Ke!=0){Je=q[De[$e]]>>8-Ke;for(var qe=(1<<7-Ke)-1;qe>=0;--qe)Re[Je|qe<<Ke]=Ke&7|$e<<3}var ht=[];for(_e=1;ht.length<ae+he;)switch(Je=Re[ne(te,ue)],ue+=Je&7,Je>>>=3){case 16:for(fe=3+U(te,ue),ue+=2,Je=ht[ht.length-1];fe-- >0;)ht.push(Je);break;case 17:for(fe=3+X(te,ue),ue+=3;fe-- >0;)ht.push(0);break;case 18:for(fe=11+ne(te,ue),ue+=7;fe-- >0;)ht.push(0);break;default:ht.push(Je),_e<Je&&(_e=Je);break}var $t=ht.slice(0,ae),ls=ht.slice(ae);for($e=ae;$e<286;++$e)$t[$e]=0;for($e=he;$e<30;++$e)ls[$e]=0;return We=ce($t,Pe,286),Ze=ce(ls,Oe,30),ue}function Ge(te,ue){if(te[0]==3&&!(te[1]&3))return[Ko(ue),2];for(var ae=0,he=0,pe=oE(ue||1<<18),fe=0,be=pe.length>>>0,De=0,_e=0;!(he&1);){if(he=X(te,ae),ae+=3,he>>>1)he>>1==1?(De=9,_e=5):(ae=ze(te,ae),De=We,_e=Ze);else{ae&7&&(ae+=8-(ae&7));var Te=te[ae>>>3]|te[(ae>>>3)+1]<<8;if(ae+=32,Te>0)for(!ue&&be<fe+Te&&(pe=ie(pe,fe+Te),be=pe.length);Te-- >0;)pe[fe++]=te[ae>>>3],ae+=8;continue}for(;;){!ue&&be<fe+32767&&(pe=ie(pe,fe+32767),be=pe.length);var Ae=le(te,ae,De),He=he>>>1==1?ve[Ae]:Pe[Ae];if(ae+=He&15,He>>>=4,!(He>>>8&255))pe[fe++]=He;else{if(He==256)break;He-=257;var $e=He<8?0:He-4>>2;$e>5&&($e=0);var Je=fe+re[He];$e>0&&(Je+=le(te,ae,$e),ae+=$e),Ae=le(te,ae,_e),He=he>>>1==1?me[Ae]:Oe[Ae],ae+=He&15,He>>>=4;var Ke=He<4?0:He-2>>1,qe=I[He];for(Ke>0&&(qe+=le(te,ae,Ke),ae+=Ke),!ue&&be<Je&&(pe=ie(pe,Je+100),be=pe.length);fe<Je;)pe[fe]=pe[fe-qe],++fe}}}return ue?[pe,ae+7>>>3]:[pe.slice(0,fe),ae+7>>>3]}function ut(te,ue){var ae=te.slice(te.l||0),he=Ge(ae,ue);return te.l+=he[1],he[0]}function Ct(te,ue){if(te)typeof console<"u"&&console.error(ue);else throw new Error(ue)}function Mt(te,ue){var ae=te;Bs(ae,0);var he=[],pe=[],fe={FileIndex:he,FullPaths:pe};B(fe,{root:ue.root});for(var be=ae.length-4;(ae[be]!=80||ae[be+1]!=75||ae[be+2]!=5||ae[be+3]!=6)&&be>=0;)--be;ae.l=be+4,ae.l+=4;var De=ae.read_shift(2);ae.l+=6;var _e=ae.read_shift(4);for(ae.l=_e,be=0;be<De;++be){ae.l+=20;var Te=ae.read_shift(4),Ae=ae.read_shift(4),He=ae.read_shift(2),$e=ae.read_shift(2),Je=ae.read_shift(2);ae.l+=8;var Ke=ae.read_shift(4),qe=a(ae.slice(ae.l+He,ae.l+He+$e));ae.l+=He+$e+Je;var ht=ae.l;ae.l=Ke+4,Vt(ae,Te,Ae,fe,qe),ae.l=ht}return fe}function Vt(te,ue,ae,he,pe){te.l+=2;var fe=te.read_shift(2),be=te.read_shift(2),De=o(te);if(fe&8257)throw new Error("Unsupported ZIP encryption");for(var _e=te.read_shift(4),Te=te.read_shift(4),Ae=te.read_shift(4),He=te.read_shift(2),$e=te.read_shift(2),Je="",Ke=0;Ke<He;++Ke)Je+=String.fromCharCode(te[te.l++]);if($e){var qe=a(te.slice(te.l,te.l+$e));(qe[21589]||{}).mt&&(De=qe[21589].mt),((pe||{})[21589]||{}).mt&&(De=pe[21589].mt)}te.l+=$e;var ht=te.slice(te.l,te.l+Te);switch(be){case 8:ht=K(te,Ae);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+be)}var $t=!1;fe&8&&(_e=te.read_shift(4),_e==134695760&&(_e=te.read_shift(4),$t=!0),Te=te.read_shift(4),Ae=te.read_shift(4)),Te!=ue&&Ct($t,"Bad compressed size: "+ue+" != "+Te),Ae!=ae&&Ct($t,"Bad uncompressed size: "+ae+" != "+Ae),ta(he,Je,ht,{unsafe:!0,mt:De})}function Mi(te,ue){var ae=ue||{},he=[],pe=[],fe=Fe(1),be=ae.compression?8:0,De=0,_e=!1;_e&&(De|=8);var Te=0,Ae=0,He=0,$e=0,Je=te.FullPaths[0],Ke=Je,qe=te.FileIndex[0],ht=[],$t=0;for(Te=1;Te<te.FullPaths.length;++Te)if(Ke=te.FullPaths[Te].slice(Je.length),qe=te.FileIndex[Te],!(!qe.size||!qe.content||Ke=="Sh33tJ5")){var ls=He,ci=Fe(Ke.length);for(Ae=0;Ae<Ke.length;++Ae)ci.write_shift(1,Ke.charCodeAt(Ae)&127);ci=ci.slice(0,ci.l),ht[$e]=QM.buf(qe.content,0);var As=qe.content;be==8&&(As=z(As)),fe=Fe(30),fe.write_shift(4,67324752),fe.write_shift(2,20),fe.write_shift(2,De),fe.write_shift(2,be),qe.mt?n(fe,qe.mt):fe.write_shift(4,0),fe.write_shift(-4,De&8?0:ht[$e]),fe.write_shift(4,De&8?0:As.length),fe.write_shift(4,De&8?0:qe.content.length),fe.write_shift(2,ci.length),fe.write_shift(2,0),He+=fe.length,he.push(fe),He+=ci.length,he.push(ci),He+=As.length,he.push(As),De&8&&(fe=Fe(12),fe.write_shift(-4,ht[$e]),fe.write_shift(4,As.length),fe.write_shift(4,qe.content.length),He+=fe.l,he.push(fe)),fe=Fe(46),fe.write_shift(4,33639248),fe.write_shift(2,0),fe.write_shift(2,20),fe.write_shift(2,De),fe.write_shift(2,be),fe.write_shift(4,0),fe.write_shift(-4,ht[$e]),fe.write_shift(4,As.length),fe.write_shift(4,qe.content.length),fe.write_shift(2,ci.length),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(4,0),fe.write_shift(4,ls),$t+=fe.l,pe.push(fe),$t+=ci.length,pe.push(ci),++$e}return fe=Fe(22),fe.write_shift(4,101010256),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,$e),fe.write_shift(2,$e),fe.write_shift(4,$t),fe.write_shift(4,He),fe.write_shift(2,0),Gi([Gi(he),Gi(pe),fe])}var Bt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function hi(te,ue){if(te.ctype)return te.ctype;var ae=te.name||"",he=ae.match(/\.([^\.]+)$/);return he&&Bt[he[1]]||ue&&(he=(ae=ue).match(/[\.\\]([^\.\\])+$/),he&&Bt[he[1]])?Bt[he[1]]:"application/octet-stream"}function wr(te){for(var ue=Fc(te),ae=[],he=0;he<ue.length;he+=76)ae.push(ue.slice(he,he+76));return ae.join(`\r
`)+`\r
`}function rr(te){var ue=te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Te){var Ae=Te.charCodeAt(0).toString(16).toUpperCase();return"="+(Ae.length==1?"0"+Ae:Ae)});ue=ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ue.charAt(0)==`
`&&(ue="=0D"+ue.slice(1)),ue=ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ae=[],he=ue.split(`\r
`),pe=0;pe<he.length;++pe){var fe=he[pe];if(fe.length==0){ae.push("");continue}for(var be=0;be<fe.length;){var De=76,_e=fe.slice(be,be+De);_e.charAt(De-1)=="="?De--:_e.charAt(De-2)=="="?De-=2:_e.charAt(De-3)=="="&&(De-=3),_e=fe.slice(be,be+De),be+=De,be<fe.length&&(_e+="="),ae.push(_e)}}return ae.join(`\r
`)}function xi(te){for(var ue=[],ae=0;ae<te.length;++ae){for(var he=te[ae];ae<=te.length&&he.charAt(he.length-1)=="=";)he=he.slice(0,he.length-1)+te[++ae];ue.push(he)}for(var pe=0;pe<ue.length;++pe)ue[pe]=ue[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(fe){return String.fromCharCode(parseInt(fe.slice(1),16))});return vr(ue.join(`\r
`))}function Si(te,ue,ae){for(var he="",pe="",fe="",be,De=0;De<10;++De){var _e=ue[De];if(!_e||_e.match(/^\s*$/))break;var Te=_e.match(/^(.*?):\s*([^\s].*)$/);if(Te)switch(Te[1].toLowerCase()){case"content-location":he=Te[2].trim();break;case"content-type":fe=Te[2].trim();break;case"content-transfer-encoding":pe=Te[2].trim();break}}switch(++De,pe.toLowerCase()){case"base64":be=vr(an(ue.slice(De).join("")));break;case"quoted-printable":be=xi(ue.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var Ae=ta(te,he.slice(ae.length),be,{unsafe:!0});fe&&(Ae.ctype=fe)}function nr(te,ue){if(Y(te.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ae=ue&&ue.root||"",he=(Rt&&Buffer.isBuffer(te)?te.toString("binary"):Y(te)).split(`\r
`),pe=0,fe="";for(pe=0;pe<he.length;++pe)if(fe=he[pe],!!/^Content-Location:/i.test(fe)&&(fe=fe.slice(fe.indexOf("file")),ae||(ae=fe.slice(0,fe.lastIndexOf("/")+1)),fe.slice(0,ae.length)!=ae))for(;ae.length>0&&(ae=ae.slice(0,ae.length-1),ae=ae.slice(0,ae.lastIndexOf("/")+1),fe.slice(0,ae.length)!=ae););var be=(he[1]||"").match(/boundary="(.*?)"/);if(!be)throw new Error("MAD cannot find boundary");var De="--"+(be[1]||""),_e=[],Te=[],Ae={FileIndex:_e,FullPaths:Te};B(Ae);var He,$e=0;for(pe=0;pe<he.length;++pe){var Je=he[pe];Je!==De&&Je!==De+"--"||($e++&&Si(Ae,he.slice(He,pe),ae),He=pe)}return Ae}function Ip(te,ue){var ae=ue||{},he=ae.boundary||"SheetJS";he="------="+he;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+he.slice(2)+'"',"","",""],fe=te.FullPaths[0],be=fe,De=te.FileIndex[0],_e=1;_e<te.FullPaths.length;++_e)if(be=te.FullPaths[_e].slice(fe.length),De=te.FileIndex[_e],!(!De.size||!De.content||be=="Sh33tJ5")){be=be.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ht){return"_x"+ht.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ht){return"_u"+ht.charCodeAt(0).toString(16)+"_"});for(var Te=De.content,Ae=Rt&&Buffer.isBuffer(Te)?Te.toString("binary"):Y(Te),He=0,$e=Math.min(1024,Ae.length),Je=0,Ke=0;Ke<=$e;++Ke)(Je=Ae.charCodeAt(Ke))>=32&&Je<128&&++He;var qe=He>=$e*4/5;pe.push(he),pe.push("Content-Location: "+(ae.root||"file:///C:/SheetJS/")+be),pe.push("Content-Transfer-Encoding: "+(qe?"quoted-printable":"base64")),pe.push("Content-Type: "+hi(De,be)),pe.push(""),pe.push(qe?rr(Ae):wr(Ae))}return pe.push(he+`--\r
`),pe.join(`\r
`)}function Op(te){var ue={};return B(ue,te),ue}function ta(te,ue,ae,he){var pe=he&&he.unsafe;pe||B(te);var fe=!pe&&Wt.find(te,ue);if(!fe){var be=te.FullPaths[0];ue.slice(0,be.length)==be?be=ue:(be.slice(-1)!="/"&&(be+="/"),be=(be+ue).replace("//","/")),fe={name:r(ue),type:2},te.FileIndex.push(fe),te.FullPaths.push(be),pe||Wt.utils.cfb_gc(te)}return fe.content=ae,fe.size=ae?ae.length:0,he&&(he.CLSID&&(fe.clsid=he.CLSID),he.mt&&(fe.mt=he.mt),he.ct&&(fe.ct=he.ct)),fe}function Bc(te,ue){B(te);var ae=Wt.find(te,ue);if(ae){for(var he=0;he<te.FileIndex.length;++he)if(te.FileIndex[he]==ae)return te.FileIndex.splice(he,1),te.FullPaths.splice(he,1),!0}return!1}function Hc(te,ue,ae){B(te);var he=Wt.find(te,ue);if(he){for(var pe=0;pe<te.FileIndex.length;++pe)if(te.FileIndex[pe]==he)return te.FileIndex[pe].name=r(ae),te.FullPaths[pe]=ae,!0}return!1}function Wc(te){O(te,!0)}return e.find=P,e.read=M,e.parse=c,e.write=J,e.writeFile=G,e.utils={cfb_new:Op,cfb_add:ta,cfb_del:Bc,cfb_mov:Hc,cfb_gc:Wc,ReadShift:bc,CheckField:vb,prep_blob:Bs,bconcat:Gi,use_zlib:b,_deflateRaw:Ee,_inflateRaw:ut,consts:L},e}(),rp;function JM(t){return typeof t=="string"?Ep(t):Array.isArray(t)?_M(t):t}function kc(t,e,i){if(typeof rp<"u"&&rp.writeFileSync)return i?rp.writeFileSync(t,e,i):rp.writeFileSync(t,e);if(typeof Deno<"u"){if(i&&typeof e=="string")switch(i){case"utf8":e=new TextEncoder(i).encode(e);break;case"binary":e=Ep(e);break;default:throw new Error("Unsupported encoding "+i)}return Deno.writeFileSync(t,e)}var s=i=="utf8"?sn(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,t);if(typeof Blob<"u"){var r=new Blob([JM(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(r,t);if(typeof saveAs<"u")return saveAs(r,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var n=URL.createObjectURL(r);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(n)},6e4),chrome.downloads.download({url:n,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(n)},6e4),n}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=Lc(e)),a.write(e),a.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Hi(t){for(var e=Object.keys(t),i=[],s=0;s<e.length;++s)Object.prototype.hasOwnProperty.call(t,e[s])&&i.push(e[s]);return i}function fE(t,e){for(var i=[],s=Hi(t),r=0;r!==s.length;++r)i[t[s[r]][e]]==null&&(i[t[s[r]][e]]=s[r]);return i}function j0(t){for(var e=[],i=Hi(t),s=0;s!==i.length;++s)e[t[i[s]]]=i[s];return e}function Tp(t){for(var e=[],i=Hi(t),s=0;s!==i.length;++s)e[t[i[s]]]=parseInt(i[s],10);return e}function eI(t){for(var e=[],i=Hi(t),s=0;s!==i.length;++s)e[t[i[s]]]==null&&(e[t[i[s]]]=[]),e[t[i[s]]].push(i[s]);return e}var pp=new Date(1899,11,30,0,0,0);function _s(t,e){var i=t.getTime();e&&(i-=1462*24*60*60*1e3);var s=pp.getTime()+(t.getTimezoneOffset()-pp.getTimezoneOffset())*6e4;return(i-s)/(24*60*60*1e3)}var nb=new Date,tI=pp.getTime()+(nb.getTimezoneOffset()-pp.getTimezoneOffset())*6e4,gE=nb.getTimezoneOffset();function ob(t){var e=new Date;return e.setTime(t*24*60*60*1e3+tI),e.getTimezoneOffset()!==gE&&e.setTime(e.getTime()+(e.getTimezoneOffset()-gE)*6e4),e}var mE=new Date("2017-02-19T19:06:09.000Z"),ab=isNaN(mE.getFullYear())?new Date("2/19/17"):mE,iI=ab.getFullYear()==2017;function as(t,e){var i=new Date(t);if(iI)return e>0?i.setTime(i.getTime()+i.getTimezoneOffset()*60*1e3):e<0&&i.setTime(i.getTime()-i.getTimezoneOffset()*60*1e3),i;if(t instanceof Date)return t;if(ab.getFullYear()==1917&&!isNaN(i.getFullYear())){var s=i.getFullYear();return t.indexOf(""+s)>-1||i.setFullYear(i.getFullYear()+100),i}var r=t.match(/\d+/g)||["2017","2","19","0","0","0"],n=new Date(+r[0],+r[1]-1,+r[2],+r[3]||0,+r[4]||0,+r[5]||0);return t.indexOf("Z")>-1&&(n=new Date(n.getTime()-n.getTimezoneOffset()*60*1e3)),n}function Ap(t,e){if(Rt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return sn(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return sn(bM(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return sn(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return sn(new TextDecoder("utf-16be").decode(t.slice(2)))}var i={"\u20AC":"\x80","\u201A":"\x82",\u0192:"\x83","\u201E":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02C6":"\x88","\u2030":"\x89",\u0160:"\x8A","\u2039":"\x8B",\u0152:"\x8C",\u017D:"\x8E","\u2018":"\x91","\u2019":"\x92","\u201C":"\x93","\u201D":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02DC":"\x98","\u2122":"\x99",\u0161:"\x9A","\u203A":"\x9B",\u0153:"\x9C",\u017E:"\x9E",\u0178:"\x9F"};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(n){return i[n]||n})}catch{}for(var s=[],r=0;r!=t.length;++r)s.push(String.fromCharCode(t[r]));return s.join("")}function Ts(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=Ts(t[i]));return e}function ii(t,e){for(var i="";i.length<e;)i+=t;return i}function nn(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var i=1,s=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return i*=100,""});return!isNaN(e=Number(s))||(s=s.replace(/[(](.*)[)]/,function(r,n){return i=-i,n}),!isNaN(e=Number(s)))?e/i:e}var sI=["january","february","march","april","may","june","july","august","september","october","november","december"];function Pc(t){var e=new Date(t),i=new Date(NaN),s=e.getYear(),r=e.getMonth(),n=e.getDate();if(isNaN(n))return i;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&sI.indexOf(o)==-1)return i}else if(o.match(/[a-z]/))return i;return s<0||s>8099?i:(r>0||n>1)&&s!=101?e:t.match(/[^-0-9:,\/\\]/)?i:e}function mt(t,e,i){if(t.FullPaths){if(typeof i=="string"){var s;return Rt?s=hn(i):s=TM(i),Wt.utils.cfb_add(t,e,s)}Wt.utils.cfb_add(t,e,i)}else t.file(e,i)}function $0(){return Wt.utils.cfb_new()}var gi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`;var rI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},K0=j0(rI);var X0=/[&<>'"]/g,nI=/[\u0000-\u0008\u000b-\u001f]/g;function Nt(t){var e=t+"";return e.replace(X0,function(i){return K0[i]}).replace(nI,function(i){return"_x"+("000"+i.charCodeAt(0).toString(16)).slice(-4)+"_"})}function vE(t){return Nt(t).replace(/ /g,"_x0020_")}var lb=/[\u0000-\u001f]/g;function oI(t){var e=t+"";return e.replace(X0,function(i){return K0[i]}).replace(/\n/g,"<br/>").replace(lb,function(i){return"&#x"+("000"+i.charCodeAt(0).toString(16)).slice(-4)+";"})}function aI(t){var e=t+"";return e.replace(X0,function(i){return K0[i]}).replace(lb,function(i){return"&#x"+i.charCodeAt(0).toString(16).toUpperCase()+";"})}function lI(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function hI(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function M0(t){for(var e="",i=0,s=0,r=0,n=0,o=0,a=0;i<t.length;){if(s=t.charCodeAt(i++),s<128){e+=String.fromCharCode(s);continue}if(r=t.charCodeAt(i++),s>191&&s<224){o=(s&31)<<6,o|=r&63,e+=String.fromCharCode(o);continue}if(n=t.charCodeAt(i++),s<240){e+=String.fromCharCode((s&15)<<12|(r&63)<<6|n&63);continue}o=t.charCodeAt(i++),a=((s&7)<<18|(r&63)<<12|(n&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function CE(t){var e=Ko(2*t.length),i,s,r=1,n=0,o=0,a;for(s=0;s<t.length;s+=r)r=1,(a=t.charCodeAt(s))<128?i=a:a<224?(i=(a&31)*64+(t.charCodeAt(s+1)&63),r=2):a<240?(i=(a&15)*4096+(t.charCodeAt(s+1)&63)*64+(t.charCodeAt(s+2)&63),r=3):(r=4,i=(a&7)*262144+(t.charCodeAt(s+1)&63)*4096+(t.charCodeAt(s+2)&63)*64+(t.charCodeAt(s+3)&63),i-=65536,o=55296+(i>>>10&1023),i=56320+(i&1023)),o!==0&&(e[n++]=o&255,e[n++]=o>>>8,o=0),e[n++]=i%256,e[n++]=i>>>8;return e.slice(0,n).toString("ucs2")}function yE(t){return hn(t,"binary").toString("utf8")}var np="foo bar baz\xE2\x98\x83\xF0\x9F\x8D\xA3",Ec=Rt&&(yE(np)==M0(np)&&yE||CE(np)==M0(np)&&CE)||M0,sn=Rt?function(t){return hn(t,"utf8").toString("binary")}:function(t){for(var e=[],i=0,s=0,r=0;i<t.length;)switch(s=t.charCodeAt(i++),!0){case s<128:e.push(String.fromCharCode(s));break;case s<2048:e.push(String.fromCharCode(192+(s>>6))),e.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,r=t.charCodeAt(i++)-56320+(s<<10),e.push(String.fromCharCode(240+(r>>18&7))),e.push(String.fromCharCode(144+(r>>12&63))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)));break;default:e.push(String.fromCharCode(224+(s>>12))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)))}return e.join("")};var cI=function(){var t=[["nbsp"," "],["middot","\xB7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(i){for(var s=i.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),r=0;r<t.length;++r)s=s.replace(t[r][0],t[r][1]);return s}}();var hb=/(^\s|\s$|\n)/;function Vi(t,e){return"<"+t+(e.match(hb)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Mc(t){return Hi(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ue(t,e,i){return"<"+t+(i!=null?Mc(i):"")+(e!=null?(e.match(hb)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function B0(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(i){if(e)throw i}return""}function dI(t,e){switch(typeof t){case"string":var i=Ue("vt:lpwstr",Nt(t));return e&&(i=i.replace(/&quot;/g,"_x0022_")),i;case"number":return Ue((t|0)==t?"vt:i4":"vt:r8",Nt(String(t)));case"boolean":return Ue("vt:bool",t?"true":"false")}if(t instanceof Date)return Ue("vt:filetime",B0(t));throw new Error("Unable to serialize "+t)}var Di={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Tl=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Hs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function uI(t,e){for(var i=1-2*(t[e+7]>>>7),s=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),r=t[e+6]&15,n=5;n>=0;--n)r=r*256+t[e+n];return s==2047?r==0?i*(1/0):NaN:(s==0?s=-1022:(s-=1023,r+=Math.pow(2,52)),i*Math.pow(2,s-52)*r)}function pI(t,e,i){var s=(e<0||1/e==-1/0?1:0)<<7,r=0,n=0,o=s?-e:e;isFinite(o)?o==0?r=n=0:(r=Math.floor(Math.log(o)/Math.LN2),n=o*Math.pow(2,52-r),r<=-1023&&(!isFinite(n)||n<Math.pow(2,52))?r=-1022:(n-=Math.pow(2,52),r+=1023)):(r=2047,n=isNaN(e)?26985:0);for(var a=0;a<=5;++a,n/=256)t[i+a]=n&255;t[i+6]=(r&15)<<4|n&15,t[i+7]=r>>4|s}var wE=function(t){for(var e=[],i=10240,s=0;s<t[0].length;++s)if(t[0][s])for(var r=0,n=t[0][s].length;r<n;r+=i)e.push.apply(e,t[0][s].slice(r,r+i));return e},xE=Rt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:hn(e)})):wE(t)}:wE,SE=function(t,e,i){for(var s=[],r=e;r<i;r+=2)s.push(String.fromCharCode(Sc(t,r)));return s.join("").replace(yl,"")},Rp=Rt?function(t,e,i){return Buffer.isBuffer(t)?t.toString("utf16le",e,i).replace(yl,""):SE(t,e,i)}:SE,EE=function(t,e,i){for(var s=[],r=e;r<e+i;++r)s.push(("0"+t[r].toString(16)).slice(-2));return s.join("")},cb=Rt?function(t,e,i){return Buffer.isBuffer(t)?t.toString("hex",e,e+i):EE(t,e,i)}:EE,bE=function(t,e,i){for(var s=[],r=e;r<i;r++)s.push(String.fromCharCode(vl(t,r)));return s.join("")},Al=Rt?function(e,i,s){return Buffer.isBuffer(e)?e.toString("utf8",i,s):bE(e,i,s)}:bE,db=function(t,e){var i=Ri(t,e);return i>0?Al(t,e+4,e+4+i-1):""},Y0=db,ub=function(t,e){var i=Ri(t,e);return i>0?Al(t,e+4,e+4+i-1):""},q0=ub,pb=function(t,e){var i=2*Ri(t,e);return i>0?Al(t,e+4,e+4+i-1):""},Z0=pb,fb=function(e,i){var s=Ri(e,i);return s>0?Rp(e,i+4,i+4+s):""},Q0=fb,gb=function(t,e){var i=Ri(t,e);return i>0?Al(t,e+4,e+4+i):""},J0=gb,mb=function(t,e){return uI(t,e)},fp=mb,ev=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Rt&&(Y0=function(e,i){if(!Buffer.isBuffer(e))return db(e,i);var s=e.readUInt32LE(i);return s>0?e.toString("utf8",i+4,i+4+s-1):""},q0=function(e,i){if(!Buffer.isBuffer(e))return ub(e,i);var s=e.readUInt32LE(i);return s>0?e.toString("utf8",i+4,i+4+s-1):""},Z0=function(e,i){if(!Buffer.isBuffer(e))return pb(e,i);var s=2*e.readUInt32LE(i);return e.toString("utf16le",i+4,i+4+s-1)},Q0=function(e,i){if(!Buffer.isBuffer(e))return fb(e,i);var s=e.readUInt32LE(i);return e.toString("utf16le",i+4,i+4+s)},J0=function(e,i){if(!Buffer.isBuffer(e))return gb(e,i);var s=e.readUInt32LE(i);return e.toString("utf8",i+4,i+4+s)},fp=function(e,i){return Buffer.isBuffer(e)?e.readDoubleLE(i):mb(e,i)},ev=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});function fI(){Rp=function(t,e,i){return Ut.utils.decode(1200,t.slice(e,i)).replace(yl,"")},Al=function(t,e,i){return Ut.utils.decode(65001,t.slice(e,i))},Y0=function(t,e){var i=Ri(t,e);return i>0?Ut.utils.decode(bl,t.slice(e+4,e+4+i-1)):""},q0=function(t,e){var i=Ri(t,e);return i>0?Ut.utils.decode(jo,t.slice(e+4,e+4+i-1)):""},Z0=function(t,e){var i=2*Ri(t,e);return i>0?Ut.utils.decode(1200,t.slice(e+4,e+4+i-1)):""},Q0=function(t,e){var i=Ri(t,e);return i>0?Ut.utils.decode(1200,t.slice(e+4,e+4+i)):""},J0=function(t,e){var i=Ri(t,e);return i>0?Ut.utils.decode(65001,t.slice(e+4,e+4+i)):""}}typeof Ut<"u"&&fI();var vl=function(t,e){return t[e]},Sc=function(t,e){return t[e+1]*256+t[e]},gI=function(t,e){var i=t[e+1]*256+t[e];return i<32768?i:(65535-i+1)*-1},Ri=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},zo=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},mI=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function bc(t,e){var i="",s,r,n=[],o,a,l,h;switch(e){case"dbcs":if(h=this.l,Rt&&Buffer.isBuffer(this))i=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)i+=String.fromCharCode(Sc(this,h)),h+=2;t*=2;break;case"utf8":i=Al(this,this.l,this.l+t);break;case"utf16le":t*=2,i=Rp(this,this.l,this.l+t);break;case"wstr":if(typeof Ut<"u")i=Ut.utils.decode(jo,this.slice(this.l,this.l+2*t));else return bc.call(this,t,"dbcs");t=2*t;break;case"lpstr-ansi":i=Y0(this,this.l),t=4+Ri(this,this.l);break;case"lpstr-cp":i=q0(this,this.l),t=4+Ri(this,this.l);break;case"lpwstr":i=Z0(this,this.l),t=4+2*Ri(this,this.l);break;case"lpp4":t=4+Ri(this,this.l),i=Q0(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ri(this,this.l),i=J0(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,i="";(o=vl(this,this.l+t++))!==0;)n.push(tp(o));i=n.join("");break;case"_wstr":for(t=0,i="";(o=Sc(this,this.l+t))!==0;)n.push(tp(o)),t+=2;t+=2,i=n.join("");break;case"dbcs-cont":for(i="",h=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(h)!==-1)return o=vl(this,h),this.l=h+1,a=bc.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),n.join("")+a;n.push(tp(Sc(this,h))),h+=2}i=n.join(""),t*=2;break;case"cpstr":if(typeof Ut<"u"){i=Ut.utils.decode(jo,this.slice(this.l,this.l+t));break}case"sbcs-cont":for(i="",h=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(h)!==-1)return o=vl(this,h),this.l=h+1,a=bc.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),n.join("")+a;n.push(tp(vl(this,h))),h+=1}i=n.join("");break;default:switch(t){case 1:return s=vl(this,this.l),this.l++,s;case 2:return s=(e==="i"?gI:Sc)(this,this.l),this.l+=2,s;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(s=(t>0?zo:mI)(this,this.l),this.l+=4,s):(r=Ri(this,this.l),this.l+=4,r);case 8:case-8:if(e==="f")return t==8?r=fp(this,this.l):r=fp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;t=8;case 16:i=cb(this,this.l,t);break}}return this.l+=t,i}var vI=function(t,e,i){t[i]=e&255,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24&255},CI=function(t,e,i){t[i]=e&255,t[i+1]=e>>8&255,t[i+2]=e>>16&255,t[i+3]=e>>24&255},yI=function(t,e,i){t[i]=e&255,t[i+1]=e>>>8&255};function wI(t,e,i){var s=0,r=0;if(i==="dbcs"){for(r=0;r!=e.length;++r)yI(this,e.charCodeAt(r),this.l+2*r);s=2*e.length}else if(i==="sbcs"){if(typeof Ut<"u"&&bl==874)for(r=0;r!=e.length;++r){var n=Ut.utils.encode(bl,e.charAt(r));this[this.l+r]=n[0]}else for(e=e.replace(/[^\x00-\x7F]/g,"_"),r=0;r!=e.length;++r)this[this.l+r]=e.charCodeAt(r)&255;s=e.length}else if(i==="hex"){for(;r<t;++r)this[this.l++]=parseInt(e.slice(2*r,2*r+2),16)||0;return this}else if(i==="utf16le"){var o=Math.min(this.l+t,this.length);for(r=0;r<Math.min(e.length,t);++r){var a=e.charCodeAt(r);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(t){case 1:s=1,this[this.l]=e&255;break;case 2:s=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:s=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:s=4,vI(this,e,this.l);break;case 8:if(s=8,i==="f"){pI(this,e,this.l);break}case 16:break;case-4:s=4,CI(this,e,this.l);break}return this.l+=s,this}function vb(t,e){var i=cb(this,this.l,t.length>>1);if(i!==t)throw new Error(e+"Expected "+t+" saw "+i);this.l+=t.length>>1}function Bs(t,e){t.l=e,t.read_shift=bc,t.chk=vb,t.write_shift=wI}function Vr(t,e){t.l+=e}function Fe(t){var e=Ko(t);return Bs(e,0),e}function bs(){var t=[],e=Rt?256:2048,i=function(h){var c=Fe(h);return Bs(c,0),c},s=i(e),r=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&t.push(s),s=null)},n=function(h){return s&&h<s.length-s.l?s:(r(),s=i(Math.max(h+1,e)))},o=function(){return r(),Gi(t)},a=function(h){r(),s=h,s.l==null&&(s.l=s.length),n(e)};return{next:n,push:a,end:o,_bufs:t}}function Ne(t,e,i,s){var r=+e,n;if(!isNaN(r)){s||(s=pG[r].p||(i||[]).length||0),n=1+(r>=128?1:0)+1,s>=128&&++n,s>=16384&&++n,s>=2097152&&++n;var o=t.next(n);r<=127?o.write_shift(1,r):(o.write_shift(1,(r&127)+128),o.write_shift(1,r>>7));for(var a=0;a!=4;++a)if(s>=128)o.write_shift(1,(s&127)+128),s>>=7;else{o.write_shift(1,s);break}s>0&&ev(i)&&t.push(i)}}function _c(t,e,i){var s=Ts(t);if(e.s?(s.cRel&&(s.c+=e.s.c),s.rRel&&(s.r+=e.s.r)):(s.cRel&&(s.c+=e.c),s.rRel&&(s.r+=e.r)),!i||i.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function _E(t,e,i){var s=Ts(t);return s.s=_c(s.s,e.s,i),s.e=_c(s.e,e.s,i),s}function Tc(t,e){if(t.cRel&&t.c<0)for(t=Ts(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Ts(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var i=Gt(t);return!t.cRel&&t.cRel!=null&&(i=EI(i)),!t.rRel&&t.rRel!=null&&(i=xI(i)),i}function I0(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+$i(t.s.c)+":"+(t.e.cRel?"":"$")+$i(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Bi(t.s.r)+":"+(t.e.rRel?"":"$")+Bi(t.e.r):Tc(t.s,e.biff)+":"+Tc(t.e,e.biff)}function tv(t){return parseInt(SI(t),10)-1}function Bi(t){return""+(t+1)}function xI(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function SI(t){return t.replace(/\$(\d+)$/,"$1")}function iv(t){for(var e=bI(t),i=0,s=0;s!==e.length;++s)i=26*i+e.charCodeAt(s)-64;return i-1}function $i(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function EI(t){return t.replace(/^([A-Z])/,"$$$1")}function bI(t){return t.replace(/^\$([A-Z])/,"$1")}function _I(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Fi(t){for(var e=0,i=0,s=0;s<t.length;++s){var r=t.charCodeAt(s);r>=48&&r<=57?e=10*e+(r-48):r>=65&&r<=90&&(i=26*i+(r-64))}return{c:i-1,r:e-1}}function Gt(t){for(var e=t.c+1,i="";e;e=(e-1)/26|0)i=String.fromCharCode((e-1)%26+65)+i;return i+(t.r+1)}function Ws(t){var e=t.indexOf(":");return e==-1?{s:Fi(t),e:Fi(t)}:{s:Fi(t.slice(0,e)),e:Fi(t.slice(e+1))}}function fi(t,e){return typeof e>"u"||typeof e=="number"?fi(t.s,t.e):(typeof t!="string"&&(t=Gt(t)),typeof e!="string"&&(e=Gt(e)),t==e?t:t+":"+e)}function Xt(t){var e={s:{c:0,r:0},e:{c:0,r:0}},i=0,s=0,r=0,n=t.length;for(i=0;s<n&&!((r=t.charCodeAt(s)-64)<1||r>26);++s)i=26*i+r;for(e.s.c=--i,i=0;s<n&&!((r=t.charCodeAt(s)-48)<0||r>9);++s)i=10*i+r;if(e.s.r=--i,s===n||r!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++s,i=0;s!=n&&!((r=t.charCodeAt(s)-64)<1||r>26);++s)i=26*i+r;for(e.e.c=--i,i=0;s!=n&&!((r=t.charCodeAt(s)-48)<0||r>9);++s)i=10*i+r;return e.e.r=--i,e}function TE(t,e){var i=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Vn(t.z,i?_s(e):e)}catch{}try{return t.w=Vn((t.XF||{}).numFmtId||(i?14:0),i?_s(e):e)}catch{return""+e}}function ln(t,e,i){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&i&&i.dateNF&&(t.z=i.dateNF),t.t=="e"?Nc[t.v]||t.v:e==null?TE(t,t.v):TE(t,e))}function qo(t,e){var i=e&&e.sheet?e.sheet:"Sheet1",s={};return s[i]=t,{SheetNames:[i],Sheets:s}}function Cb(t,e,i){var s=i||{},r=t?Array.isArray(t):s.dense;Gr!=null&&r==null&&(r=Gr);var n=t||(r?[]:{}),o=0,a=0;if(n&&s.origin!=null){if(typeof s.origin=="number")o=s.origin;else{var l=typeof s.origin=="string"?Fi(s.origin):s.origin;o=l.r,a=l.c}n["!ref"]||(n["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(n["!ref"]){var c=Xt(n["!ref"]);h.s.c=c.s.c,h.s.r=c.s.r,h.e.c=Math.max(h.e.c,c.e.c),h.e.r=Math.max(h.e.r,c.e.r),o==-1&&(h.e.r=o=c.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[d].length;++p)if(!(typeof e[d][p]>"u")){var u={v:e[d][p]},m=o+d,f=a+p;if(h.s.r>m&&(h.s.r=m),h.s.c>f&&(h.s.c=f),h.e.r<m&&(h.e.r=m),h.e.c<f&&(h.e.c=f),e[d][p]&&typeof e[d][p]=="object"&&!Array.isArray(e[d][p])&&!(e[d][p]instanceof Date))u=e[d][p];else if(Array.isArray(u.v)&&(u.f=e[d][p][1],u.v=u.v[0]),u.v===null)if(u.f)u.t="n";else if(s.nullError)u.t="e",u.v=0;else if(s.sheetStubs)u.t="z";else continue;else typeof u.v=="number"?u.t="n":typeof u.v=="boolean"?u.t="b":u.v instanceof Date?(u.z=s.dateNF||si[14],s.cellDates?(u.t="d",u.w=Vn(u.z,_s(u.v))):(u.t="n",u.v=_s(u.v),u.w=Vn(u.z,u.v))):u.t="s";if(r)n[m]||(n[m]=[]),n[m][f]&&n[m][f].z&&(u.z=n[m][f].z),n[m][f]=u;else{var g=Gt({c:f,r:m});n[g]&&n[g].z&&(u.z=n[g].z),n[g]=u}}}return h.s.c<1e7&&(n["!ref"]=fi(h)),n}function Rl(t,e){return Cb(null,t,e)}function TI(t){return t.read_shift(4,"i")}function yr(t,e){return e||(e=Fe(4)),e.write_shift(4,t),e}function Ki(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Pi(t,e){var i=!1;return e==null&&(i=!0,e=Fe(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),i?e.slice(0,e.l):e}function AI(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function RI(t,e){return e||(e=Fe(4)),e.write_shift(2,t.ich||0),e.write_shift(2,t.ifnt||0),e}function sv(t,e){var i=t.l,s=t.read_shift(1),r=Ki(t),n=[],o={t:r,h:r};if(s&1){for(var a=t.read_shift(4),l=0;l!=a;++l)n.push(AI(t));o.r=n}else o.r=[{ich:0,ifnt:0}];return t.l=i+e,o}function DI(t,e){var i=!1;return e==null&&(i=!0,e=Fe(15+4*t.t.length)),e.write_shift(1,0),Pi(t.t,e),i?e.slice(0,e.l):e}var FI=sv;function PI(t,e){var i=!1;return e==null&&(i=!0,e=Fe(23+4*t.t.length)),e.write_shift(1,1),Pi(t.t,e),e.write_shift(4,1),RI({ich:0,ifnt:0},e),i?e.slice(0,e.l):e}function sr(t){var e=t.read_shift(4),i=t.read_shift(2);return i+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:i}}function Zo(t,e){return e==null&&(e=Fe(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Qo(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Jo(t,e){return e==null&&(e=Fe(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var MI=Ki,yb=Pi;function rv(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function gp(t,e){var i=!1;return e==null&&(i=!0,e=Fe(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),i?e.slice(0,e.l):e}var II=Ki,H0=rv,nv=gp;function wb(t){var e=t.slice(t.l,t.l+4),i=e[0]&1,s=e[0]&2;t.l+=4;var r=s===0?fp([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):zo(e,0)>>2;return i?r/100:r}function xb(t,e){e==null&&(e=Fe(4));var i=0,s=0,r=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?s=1:r==(r|0)&&r>=-(1<<29)&&r<1<<29&&(s=1,i=1),s)e.write_shift(-4,((i?r:t)<<2)+(i+2));else throw new Error("unsupported RkNumber "+t)}function Sb(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function OI(t,e){return e||(e=Fe(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var ea=Sb,Dl=OI;function Fl(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Xo(t,e){return(e||Fe(8)).write_shift(8,t,"f")}function LI(t){var e={},i=t.read_shift(1),s=i>>>1,r=t.read_shift(1),n=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,s){case 0:e.auto=1;break;case 1:e.index=r;var h=zI[r];h&&(e.rgb=NE(h));break;case 2:e.rgb=NE([o,a,l]);break;case 3:e.theme=r;break}return n!=0&&(e.tint=n>0?n/32767:n/32768),e}function mp(t,e){if(e||(e=Fe(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var i=t.tint||0;if(i>0?i*=32767:i<0&&(i*=32768),e.write_shift(2,i),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var s=t.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),e.write_shift(1,parseInt(s.slice(0,2),16)),e.write_shift(1,parseInt(s.slice(2,4),16)),e.write_shift(1,parseInt(s.slice(4,6),16)),e.write_shift(1,255)}return e}function kI(t){var e=t.read_shift(1);t.l++;var i={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return i}function NI(t,e){e||(e=Fe(2));var i=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,i),e.write_shift(1,0),e}var Eb=2,Vs=3,op=11;var vp=19;var ap=64,GI=65,VI=71;var BI=4108,HI=4126,Ni=80;var AE={1:{n:"CodePage",t:Eb},2:{n:"Category",t:Ni},3:{n:"PresentationFormat",t:Ni},4:{n:"ByteCount",t:Vs},5:{n:"LineCount",t:Vs},6:{n:"ParagraphCount",t:Vs},7:{n:"SlideCount",t:Vs},8:{n:"NoteCount",t:Vs},9:{n:"HiddenCount",t:Vs},10:{n:"MultimediaClipCount",t:Vs},11:{n:"ScaleCrop",t:op},12:{n:"HeadingPairs",t:BI},13:{n:"TitlesOfParts",t:HI},14:{n:"Manager",t:Ni},15:{n:"Company",t:Ni},16:{n:"LinksUpToDate",t:op},17:{n:"CharacterCount",t:Vs},19:{n:"SharedDoc",t:op},22:{n:"HyperlinksChanged",t:op},23:{n:"AppVersion",t:Vs,p:"version"},24:{n:"DigSig",t:GI},26:{n:"ContentType",t:Ni},27:{n:"ContentStatus",t:Ni},28:{n:"Language",t:Ni},29:{n:"Version",t:Ni},255:{},2147483648:{n:"Locale",t:vp},2147483651:{n:"Behavior",t:vp},1919054434:{}},RE={1:{n:"CodePage",t:Eb},2:{n:"Title",t:Ni},3:{n:"Subject",t:Ni},4:{n:"Author",t:Ni},5:{n:"Keywords",t:Ni},6:{n:"Comments",t:Ni},7:{n:"Template",t:Ni},8:{n:"LastAuthor",t:Ni},9:{n:"RevNumber",t:Ni},10:{n:"EditTime",t:ap},11:{n:"LastPrinted",t:ap},12:{n:"CreatedDate",t:ap},13:{n:"ModifiedDate",t:ap},14:{n:"PageCount",t:Vs},15:{n:"WordCount",t:Vs},16:{n:"CharCount",t:Vs},17:{n:"Thumbnail",t:VI},18:{n:"Application",t:Ni},19:{n:"DocSecurity",t:Vs},255:{},2147483648:{n:"Locale",t:vp},2147483651:{n:"Behavior",t:vp},1919054434:{}};function WI(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var UI=WI([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),zI=Ts(UI),Nc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"};var jI={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},lp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function bb(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function _b(t,e){var i=eI(jI),s=[],r;s[s.length]=gi,s[s.length]=Ue("Types",null,{xmlns:Di.CT,"xmlns:xsd":Di.xsd,"xmlns:xsi":Di.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ue("Default",null,{Extension:l[0],ContentType:l[1]})}));var n=function(l){t[l]&&t[l].length>0&&(r=t[l][0],s[s.length]=Ue("Override",null,{PartName:(r[0]=="/"?"":"/")+r,ContentType:lp[l][e.bookType]||lp[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(h){s[s.length]=Ue("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:lp[l][e.bookType]||lp[l].xlsx})})},a=function(l){(t[l]||[]).forEach(function(h){s[s.length]=Ue("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:i[l][0]})})};return n("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(n),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var Tt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Tb(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function xl(t){var e=[gi,Ue("Relationships",null,{xmlns:Di.RELS})];return Hi(t["!id"]).forEach(function(i){e[e.length]=Ue("Relationship",null,t["!id"][i])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function kt(t,e,i,s,r,n){if(r||(r={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,r.Id="rId"+e,r.Type=s,r.Target=i,n?r.TargetMode=n:[Tt.HLINK,Tt.XPATH,Tt.XMISS].indexOf(r.Type)>-1&&(r.TargetMode="External"),t["!id"][r.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][r.Id]=r,t[("/"+r.Target).replace("//","/")]=r,e}function $I(t){var e=[gi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var i=0;i<t.length;++i)e.push('  <manifest:file-entry manifest:full-path="'+t[i][0]+'" manifest:media-type="'+t[i][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function DE(t,e,i){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(i||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function KI(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function XI(t){var e=[gi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var i=0;i!=t.length;++i)e.push(DE(t[i][0],t[i][1])),e.push(KI("",t[i][0]));return e.push(DE("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Ab(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Rc.version+"</meta:generator></office:meta></office:document-meta>"}var $o=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function O0(t,e,i,s,r){r[t]!=null||e==null||e===""||(r[t]=e,e=Nt(e),s[s.length]=i?Ue(t,e,i):Vi(t,e))}function Rb(t,e){var i=e||{},s=[gi,Ue("cp:coreProperties",null,{"xmlns:cp":Di.CORE_PROPS,"xmlns:dc":Di.dc,"xmlns:dcterms":Di.dcterms,"xmlns:dcmitype":Di.dcmitype,"xmlns:xsi":Di.xsi})],r={};if(!t&&!i.Props)return s.join("");t&&(t.CreatedDate!=null&&O0("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:B0(t.CreatedDate,i.WTF),{"xsi:type":"dcterms:W3CDTF"},s,r),t.ModifiedDate!=null&&O0("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:B0(t.ModifiedDate,i.WTF),{"xsi:type":"dcterms:W3CDTF"},s,r));for(var n=0;n!=$o.length;++n){var o=$o[n],a=i.Props&&i.Props[o[1]]!=null?i.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&O0(o[0],a,null,s,r)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var Sl=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Db=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Fb(t){var e=[],i=Ue;return t||(t={}),t.Application="SheetJS",e[e.length]=gi,e[e.length]=Ue("Properties",null,{xmlns:Di.EXT_PROPS,"xmlns:vt":Di.vt}),Sl.forEach(function(s){if(t[s[1]]!==void 0){var r;switch(s[2]){case"string":r=Nt(String(t[s[1]]));break;case"bool":r=t[s[1]]?"true":"false";break}r!==void 0&&(e[e.length]=i(s[0],r))}}),e[e.length]=i("HeadingPairs",i("vt:vector",i("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+i("vt:variant",i("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=i("TitlesOfParts",i("vt:vector",t.SheetNames.map(function(s){return"<vt:lpstr>"+Nt(s)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function Pb(t){var e=[gi,Ue("Properties",null,{xmlns:Di.CUST_PROPS,"xmlns:vt":Di.vt})];if(!t)return e.join("");var i=1;return Hi(t).forEach(function(r){++i,e[e.length]=Ue("property",dI(t[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:i,name:Nt(r)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var FE={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function YI(t,e){var i=[];return Hi(FE).map(function(s){for(var r=0;r<$o.length;++r)if($o[r][1]==s)return $o[r];for(r=0;r<Sl.length;++r)if(Sl[r][1]==s)return Sl[r];throw s}).forEach(function(s){if(t[s[1]]!=null){var r=e&&e.Props&&e.Props[s[1]]!=null?e.Props[s[1]]:t[s[1]];switch(s[2]){case"date":r=new Date(r).toISOString().replace(/\.\d*Z/,"Z");break}typeof r=="number"?r=String(r):r===!0||r===!1?r=r?"1":"0":r instanceof Date&&(r=new Date(r).toISOString().replace(/\.\d*Z/,"")),i.push(Vi(FE[s[1]]||s[1],r))}}),Ue("DocumentProperties",i.join(""),{xmlns:Hs.o})}function qI(t,e){var i=["Worksheets","SheetNames"],s="CustomDocumentProperties",r=[];return t&&Hi(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)){for(var o=0;o<$o.length;++o)if(n==$o[o][1])return;for(o=0;o<Sl.length;++o)if(n==Sl[o][1])return;for(o=0;o<i.length;++o)if(n==i[o])return;var a=t[n],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),r.push(Ue(vE(n),a,{"dt:dt":l}))}}),e&&Hi(e).forEach(function(n){if(Object.prototype.hasOwnProperty.call(e,n)&&!(t&&Object.prototype.hasOwnProperty.call(t,n))){var o=e[n],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),r.push(Ue(vE(n),o,{"dt:dt":a}))}}),"<"+s+' xmlns="'+Hs.o+'">'+r.join("")+"</"+s+">"}function ZI(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,i=e.getTime()/1e3+11644473600,s=i%Math.pow(2,32),r=(i-s)/Math.pow(2,32);s*=1e7,r*=1e7;var n=s/Math.pow(2,32)|0;n>0&&(s=s%Math.pow(2,32),r+=n);var o=Fe(8);return o.write_shift(4,s),o.write_shift(4,r),o}function PE(t,e){var i=Fe(4),s=Fe(4);switch(i.write_shift(4,t==80?31:t),t){case 3:s.write_shift(-4,e);break;case 5:s=Fe(8),s.write_shift(8,e,"f");break;case 11:s.write_shift(4,e?1:0);break;case 64:s=ZI(e);break;case 31:case 80:for(s=Fe(4+2*(e.length+1)+(e.length%2?0:2)),s.write_shift(4,e.length+1),s.write_shift(0,e,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Gi([i,s])}var Mb=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function QI(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function ME(t,e,i){var s=Fe(8),r=[],n=[],o=8,a=0,l=Fe(8),h=Fe(8);if(l.write_shift(4,2),l.write_shift(4,1200),h.write_shift(4,1),n.push(l),r.push(h),o+=8+l.length,!e){h=Fe(8),h.write_shift(4,0),r.unshift(h);var c=[Fe(4)];for(c[0].write_shift(4,t.length),a=0;a<t.length;++a){var d=t[a][0];for(l=Fe(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);c.push(l)}l=Gi(c),n.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(Mb.indexOf(t[a][0])>-1||Db.indexOf(t[a][0])>-1)&&t[a][1]!=null){var p=t[a][1],u=0;if(e){u=+e[t[a][0]];var m=i[u];if(m.p=="version"&&typeof p=="string"){var f=p.split(".");p=(+f[0]<<16)+(+f[1]||0)}l=PE(m.t,p)}else{var g=QI(p);g==-1&&(g=31,p=String(p)),l=PE(g,p)}n.push(l),h=Fe(8),h.write_shift(4,e?u:2+a),r.push(h),o+=8+l.length}var y=8*(n.length+1);for(a=0;a<n.length;++a)r[a].write_shift(4,y),y+=n[a].length;return s.write_shift(4,o),s.write_shift(4,n.length),Gi([s].concat(r).concat(n))}function IE(t,e,i,s,r,n){var o=Fe(r?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Wt.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,r?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,r?68:48);var l=ME(t,i,s);if(a.push(l),r){var h=ME(r,null,null);o.write_shift(16,n,"hex"),o.write_shift(4,68+l.length),a.push(h)}return Gi(a)}function JI(t,e){e||(e=Fe(t));for(var i=0;i<t;++i)e.write_shift(1,0);return e}function eO(t,e){return t.read_shift(e)===1}function os(t,e){return e||(e=Fe(2)),e.write_shift(2,+!!t),e}function Ib(t){return t.read_shift(2,"u")}function ir(t,e){return e||(e=Fe(2)),e.write_shift(2,t),e}function Ob(t,e,i){return i||(i=Fe(2)),i.write_shift(1,e=="e"?+t:+!!t),i.write_shift(1,e=="e"?1:0),i}function Lb(t,e,i){var s=t.read_shift(i&&i.biff>=12?2:1),r="sbcs-cont",n=jo;if(i&&i.biff>=8&&(jo=1200),!i||i.biff==8){var o=t.read_shift(1);o&&(r="dbcs-cont")}else i.biff==12&&(r="wstr");i.biff>=2&&i.biff<=5&&(r="cpstr");var a=s?t.read_shift(s,r):"";return jo=n,a}function tO(t){var e=t.t||"",i=1,s=Fe(3+(i>1?2:0));s.write_shift(2,e.length),s.write_shift(1,(i>1?8:0)|1),i>1&&s.write_shift(2,i);var r=Fe(2*e.length);r.write_shift(2*e.length,e,"utf16le");var n=[s,r];return Gi(n)}function iO(t,e,i){var s;if(i){if(i.biff>=2&&i.biff<=5)return t.read_shift(e,"cpstr");if(i.biff>=12)return t.read_shift(e,"dbcs-cont")}var r=t.read_shift(1);return r===0?s=t.read_shift(e,"sbcs-cont"):s=t.read_shift(e,"dbcs-cont"),s}function sO(t,e,i){var s=t.read_shift(i&&i.biff==2?1:2);return s===0?(t.l++,""):iO(t,s,i)}function rO(t,e,i){if(i.biff>5)return sO(t,e,i);var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,i.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function kb(t,e,i){return i||(i=Fe(3+2*t.length)),i.write_shift(2,t.length),i.write_shift(1,1),i.write_shift(31,t,"utf16le"),i}function OE(t,e){e||(e=Fe(6+t.length*2)),e.write_shift(4,1+t.length);for(var i=0;i<t.length;++i)e.write_shift(2,t.charCodeAt(i));return e.write_shift(2,0),e}function nO(t){var e=Fe(512),i=0,s=t.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var r=s.indexOf("#"),n=r>-1?31:23;switch(s.charAt(0)){case"#":n=28;break;case".":n&=-3;break}e.write_shift(4,2),e.write_shift(4,n);var o=[8,6815827,6619237,4849780,83];for(i=0;i<o.length;++i)e.write_shift(4,o[i]);if(n==28)s=s.slice(1),OE(s,e);else if(n&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<o.length;++i)e.write_shift(1,parseInt(o[i],16));var a=r>-1?s.slice(0,r):s;for(e.write_shift(4,2*(a.length+1)),i=0;i<a.length;++i)e.write_shift(2,a.charCodeAt(i));e.write_shift(2,0),n&8&&OE(r>-1?s.slice(r+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),i=0;i<o.length;++i)e.write_shift(1,parseInt(o[i],16));for(var l=0;s.slice(l*3,l*3+3)=="../"||s.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,s.length-3*l+1),i=0;i<s.length-3*l;++i)e.write_shift(1,s.charCodeAt(i+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),i=0;i<6;++i)e.write_shift(4,0)}return e.slice(0,e.l)}function Yo(t,e,i,s){return s||(s=Fe(6)),s.write_shift(2,t),s.write_shift(2,e),s.write_shift(2,i||0),s}function oO(t,e,i){var s=i.biff>8?4:2,r=t.read_shift(s),n=t.read_shift(s,"i"),o=t.read_shift(s,"i");return[r,n,o]}function aO(t){var e=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(2),r=t.read_shift(2);return{s:{c:s,r:e},e:{c:r,r:i}}}function Nb(t,e){return e||(e=Fe(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function ov(t,e,i){var s=1536,r=16;switch(i.bookType){case"biff8":break;case"biff5":s=1280,r=8;break;case"biff4":s=4,r=6;break;case"biff3":s=3,r=6;break;case"biff2":s=2,r=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var n=Fe(r);return n.write_shift(2,s),n.write_shift(2,e),r>4&&n.write_shift(2,29282),r>6&&n.write_shift(2,1997),r>8&&(n.write_shift(2,49161),n.write_shift(2,1),n.write_shift(2,1798),n.write_shift(2,0)),n}function lO(t,e){var i=!e||e.biff==8,s=Fe(i?112:54);for(s.write_shift(e.biff==8?2:1,7),i&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(i?0:536870912));s.l<s.length;)s.write_shift(1,i?0:32);return s}function hO(t,e){var i=!e||e.biff>=8?2:1,s=Fe(8+i*t.name.length);s.write_shift(4,t.pos),s.write_shift(1,t.hs||0),s.write_shift(1,t.dt),s.write_shift(1,t.name.length),e.biff>=8&&s.write_shift(1,1),s.write_shift(i*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var r=s.slice(0,s.l);return r.l=s.l,r}function cO(t,e){var i=Fe(8);i.write_shift(4,t.Count),i.write_shift(4,t.Unique);for(var s=[],r=0;r<t.length;++r)s[r]=tO(t[r],e);var n=Gi([i].concat(s));return n.parts=[i.length].concat(s.map(function(o){return o.length})),n}function dO(){var t=Fe(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function uO(t){var e=Fe(18),i=1718;return t&&t.RTL&&(i|=64),e.write_shift(2,i),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function pO(t,e){var i=t.name||"Arial",s=e&&e.biff==5,r=s?15+i.length:16+2*i.length,n=Fe(r);return n.write_shift(2,(t.sz||12)*20),n.write_shift(4,0),n.write_shift(2,400),n.write_shift(4,0),n.write_shift(2,0),n.write_shift(1,i.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*i.length,i,s?"sbcs":"utf16le"),n}function fO(t,e,i,s){var r=Fe(10);return Yo(t,e,s,r),r.write_shift(4,i),r}function gO(t,e,i,s,r){var n=!r||r.biff==8,o=Fe(8+ +n+(1+n)*i.length);return Yo(t,e,s,o),o.write_shift(2,i.length),n&&o.write_shift(1,1),o.write_shift((1+n)*i.length,i,n?"utf16le":"sbcs"),o}function mO(t,e,i,s){var r=i&&i.biff==5;s||(s=Fe(r?3+e.length:5+2*e.length)),s.write_shift(2,t),s.write_shift(r?1:2,e.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*e.length,e,r?"sbcs":"utf16le");var n=s.length>s.l?s.slice(0,s.l):s;return n.l==null&&(n.l=n.length),n}function vO(t,e){var i=e.biff==8||!e.biff?4:2,s=Fe(2*i+6);return s.write_shift(i,t.s.r),s.write_shift(i,t.e.r+1),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c+1),s.write_shift(2,0),s}function LE(t,e,i,s){var r=i&&i.biff==5;s||(s=Fe(r?16:20)),s.write_shift(2,0),t.style?(s.write_shift(2,t.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,t.numFmtId||0),s.write_shift(2,e<<4));var n=0;return t.numFmtId>0&&r&&(n|=1024),s.write_shift(4,n),s.write_shift(4,0),r||s.write_shift(4,0),s.write_shift(2,0),s}function CO(t){var e=Fe(8);return e.write_shift(4,0),e.write_shift(2,t[0]?t[0]+1:0),e.write_shift(2,t[1]?t[1]+1:0),e}function yO(t,e,i,s,r,n){var o=Fe(8);return Yo(t,e,s,o),Ob(i,n,o),o}function wO(t,e,i,s){var r=Fe(14);return Yo(t,e,s,r),Xo(i,r),r}function xO(t,e,i){if(i.biff<8)return SO(t,e,i);for(var s=[],r=t.l+e,n=t.read_shift(i.biff>8?4:2);n--!==0;)s.push(oO(t,i.biff>8?12:6,i));if(t.l!=r)throw new Error("Bad ExternSheet: "+t.l+" != "+r);return s}function SO(t,e,i){t[t.l+1]==3&&t[t.l]++;var s=Lb(t,e,i);return s.charCodeAt(0)==3?s.slice(1):s}function EO(t){var e=Fe(2+t.length*8);e.write_shift(2,t.length);for(var i=0;i<t.length;++i)Nb(t[i],e);return e}function bO(t){var e=Fe(24),i=Fi(t[0]);e.write_shift(2,i.r),e.write_shift(2,i.r),e.write_shift(2,i.c),e.write_shift(2,i.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<16;++r)e.write_shift(1,parseInt(s[r],16));return Gi([e,nO(t[1])])}function _O(t){var e=t[1].Tooltip,i=Fe(10+2*(e.length+1));i.write_shift(2,2048);var s=Fi(t[0]);i.write_shift(2,s.r),i.write_shift(2,s.r),i.write_shift(2,s.c),i.write_shift(2,s.c);for(var r=0;r<e.length;++r)i.write_shift(2,e.charCodeAt(r));return i.write_shift(2,0),i}function TO(t){return t||(t=Fe(4)),t.write_shift(2,1),t.write_shift(2,1),t}function AO(t,e,i){if(!i.cellStyles)return Vr(t,e);var s=i&&i.biff>=12?4:2,r=t.read_shift(s),n=t.read_shift(s),o=t.read_shift(s),a=t.read_shift(s),l=t.read_shift(2);s==2&&(t.l+=2);var h={s:r,e:n,w:o,ixfe:a,flags:l};return(i.biff>=5||!i.biff)&&(h.level=l>>8&7),h}function RO(t,e){var i=Fe(12);i.write_shift(2,e),i.write_shift(2,e),i.write_shift(2,t.width*256),i.write_shift(2,0);var s=0;return t.hidden&&(s|=1),i.write_shift(1,s),s=t.level||0,i.write_shift(1,s),i.write_shift(2,0),i}function DO(t){for(var e=Fe(2*t),i=0;i<t;++i)e.write_shift(2,i+1);return e}function FO(t,e,i){var s=Fe(15);return Vc(s,t,e),s.write_shift(8,i,"f"),s}function PO(t,e,i){var s=Fe(9);return Vc(s,t,e),s.write_shift(2,i),s}var MO=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=j0({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function i(a,l){var h=[],c=Ko(1);switch(l.type){case"base64":c=vr(an(a));break;case"binary":c=vr(a);break;case"buffer":case"array":c=a;break}Bs(c,0);var d=c.read_shift(1),p=!!(d&136),u=!1,m=!1;switch(d){case 2:break;case 3:break;case 48:u=!0,p=!0;break;case 49:u=!0,p=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var f=0,g=521;d==2&&(f=c.read_shift(2)),c.l+=3,d!=2&&(f=c.read_shift(4)),f>1048576&&(f=1e6),d!=2&&(g=c.read_shift(2));var y=c.read_shift(2),x=l.codepage||1252;d!=2&&(c.l+=16,c.read_shift(1),c[c.l]!==0&&(x=t[c[c.l]]),c.l+=1,c.l+=2),m&&(c.l+=36);for(var T=[],A={},S=Math.min(c.length,d==2?521:g-10-(u?264:0)),M=m?32:11;c.l<S&&c[c.l]!=13;)switch(A={},A.name=Ut.utils.decode(x,c.slice(c.l,c.l+M)).replace(/[\u0000\r\n].*$/g,""),c.l+=M,A.type=String.fromCharCode(c.read_shift(1)),d!=2&&!m&&(A.offset=c.read_shift(4)),A.len=c.read_shift(1),d==2&&(A.offset=c.read_shift(2)),A.dec=c.read_shift(1),A.name.length&&T.push(A),d!=2&&(c.l+=m?13:14),A.type){case"B":(!u||A.len!=8)&&l.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+A.type)}if(c[c.l]!==13&&(c.l=g-1),c.read_shift(1)!==13)throw new Error("DBF Terminator not found "+c.l+" "+c[c.l]);c.l=g;var B=0,j=0;for(h[0]=[],j=0;j!=T.length;++j)h[0][j]=T[j].name;for(;f-- >0;){if(c[c.l]===42){c.l+=y;continue}for(++c.l,h[++B]=[],j=0,j=0;j!=T.length;++j){var O=c.slice(c.l,c.l+T[j].len);c.l+=T[j].len,Bs(O,0);var _=Ut.utils.decode(x,O);switch(T[j].type){case"C":_.trim().length&&(h[B][j]=_.replace(/\s+$/,""));break;case"D":_.length===8?h[B][j]=new Date(+_.slice(0,4),+_.slice(4,6)-1,+_.slice(6,8)):h[B][j]=_;break;case"F":h[B][j]=parseFloat(_.trim());break;case"+":case"I":h[B][j]=m?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(_.trim().toUpperCase()){case"Y":case"T":h[B][j]=!0;break;case"N":case"F":h[B][j]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+_+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));h[B][j]="##MEMO##"+(m?parseInt(_.trim(),10):O.read_shift(4));break;case"N":_=_.replace(/\u0000/g,"").trim(),_&&_!="."&&(h[B][j]=+_||0);break;case"@":h[B][j]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":h[B][j]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":h[B][j]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[B][j]=-O.read_shift(-8,"f");break;case"B":if(u&&T[j].len==8){h[B][j]=O.read_shift(8,"f");break}case"G":case"P":O.l+=T[j].len;break;case"0":if(T[j].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[j].type)}}}if(d!=2&&c.l<c.length&&c[c.l++]!=26)throw new Error("DBF EOF Marker missing "+(c.l-1)+" of "+c.length+" "+c[c.l-1].toString(16));return l&&l.sheetRows&&(h=h.slice(0,l.sheetRows)),l.DBF=T,h}function s(a,l){var h=l||{};h.dateNF||(h.dateNF="yyyymmdd");var c=Rl(i(a,h),h);return c["!cols"]=h.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete h.DBF,c}function r(a,l){try{return qo(s(a,l),l)}catch(h){if(l&&l.WTF)throw h}return{SheetNames:[],Sheets:{}}}var n={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){var h=l||{};if(+h.codepage>=0&&Dc(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var c=bs(),d=Sp(a,{header:1,raw:!0,cellDates:!0}),p=d[0],u=d.slice(1),m=a["!cols"]||[],f=0,g=0,y=0,x=1;for(f=0;f<p.length;++f){if(((m[f]||{}).DBF||{}).name){p[f]=m[f].DBF.name,++y;continue}if(p[f]!=null){if(++y,typeof p[f]=="number"&&(p[f]=p[f].toString(10)),typeof p[f]!="string")throw new Error("DBF Invalid column name "+p[f]+" |"+typeof p[f]+"|");if(p.indexOf(p[f])!==f){for(g=0;g<1024;++g)if(p.indexOf(p[f]+"_"+g)==-1){p[f]+="_"+g;break}}}}var T=Xt(a["!ref"]),A=[],S=[],M=[];for(f=0;f<=T.e.c-T.s.c;++f){var B="",j="",O=0,_=[];for(g=0;g<u.length;++g)u[g][f]!=null&&_.push(u[g][f]);if(_.length==0||p[f]==null){A[f]="?";continue}for(g=0;g<_.length;++g){switch(typeof _[g]){case"number":j="B";break;case"string":j="C";break;case"boolean":j="L";break;case"object":j=_[g]instanceof Date?"D":"C";break;default:j="C"}O=Math.max(O,String(_[g]).length),B=B&&B!=j?"C":j}O>250&&(O=250),j=((m[f]||{}).DBF||{}).type,j=="C"&&m[f].DBF.len>O&&(O=m[f].DBF.len),B=="B"&&j=="N"&&(B="N",M[f]=m[f].DBF.dec,O=m[f].DBF.len),S[f]=B=="C"||j=="N"?O:n[B]||0,x+=S[f],A[f]=B}var P=c.next(32);for(P.write_shift(4,318902576),P.write_shift(4,u.length),P.write_shift(2,296+32*y),P.write_shift(2,x),f=0;f<4;++f)P.write_shift(4,0);for(P.write_shift(4,0|(+e[bl]||3)<<8),f=0,g=0;f<p.length;++f)if(p[f]!=null){var R=c.next(32),v=(p[f].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,v,"sbcs"),R.write_shift(1,A[f]=="?"?"C":A[f],"sbcs"),R.write_shift(4,g),R.write_shift(1,S[f]||n[A[f]]||0),R.write_shift(1,M[f]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),g+=S[f]||n[A[f]]||0}var C=c.next(264);for(C.write_shift(4,13),f=0;f<65;++f)C.write_shift(4,0);for(f=0;f<u.length;++f){var D=c.next(x);for(D.write_shift(1,0),g=0;g<p.length;++g)if(p[g]!=null)switch(A[g]){case"L":D.write_shift(1,u[f][g]==null?63:u[f][g]?84:70);break;case"B":D.write_shift(8,u[f][g]||0,"f");break;case"N":var E="0";for(typeof u[f][g]=="number"&&(E=u[f][g].toFixed(M[g]||0)),y=0;y<S[g]-E.length;++y)D.write_shift(1,32);D.write_shift(1,E,"sbcs");break;case"D":u[f][g]?(D.write_shift(4,("0000"+u[f][g].getFullYear()).slice(-4),"sbcs"),D.write_shift(2,("00"+(u[f][g].getMonth()+1)).slice(-2),"sbcs"),D.write_shift(2,("00"+u[f][g].getDate()).slice(-2),"sbcs")):D.write_shift(8,"00000000","sbcs");break;case"C":var L=String(u[f][g]!=null?u[f][g]:"").slice(0,S[g]);for(D.write_shift(1,L,"sbcs"),y=0;y<S[g]-L.length;++y)D.write_shift(1,32);break}}return c.next(1).write_shift(1,26),c.end()}return{to_workbook:r,to_sheet:s,from_sheet:o}}(),IO=function(){var t={AA:"\xC0",BA:"\xC1",CA:"\xC2",DA:195,HA:"\xC4",JA:197,AE:"\xC8",BE:"\xC9",CE:"\xCA",HE:"\xCB",AI:"\xCC",BI:"\xCD",CI:"\xCE",HI:"\xCF",AO:"\xD2",BO:"\xD3",CO:"\xD4",DO:213,HO:"\xD6",AU:"\xD9",BU:"\xDA",CU:"\xDB",HU:"\xDC",Aa:"\xE0",Ba:"\xE1",Ca:"\xE2",Da:227,Ha:"\xE4",Ja:229,Ae:"\xE8",Be:"\xE9",Ce:"\xEA",He:"\xEB",Ai:"\xEC",Bi:"\xED",Ci:"\xEE",Hi:"\xEF",Ao:"\xF2",Bo:"\xF3",Co:"\xF4",Do:245,Ho:"\xF6",Au:"\xF9",Bu:"\xFA",Cu:"\xFB",Hu:"\xFC",KC:"\xC7",Kc:"\xE7",q:"\xE6",z:"\u0153",a:"\xC6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Hi(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),i=function(p,u){var m=t[u];return typeof m=="number"?nE(m):m},s=function(p,u,m){var f=u.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return f==59?p:nE(f)};t["|"]=254;function r(p,u){switch(u.type){case"base64":return n(an(p),u);case"binary":return n(p,u);case"buffer":return n(Rt&&Buffer.isBuffer(p)?p.toString("binary"):Lc(p),u);case"array":return n(Ap(p),u)}throw new Error("Unrecognized type "+u.type)}function n(p,u){var m=p.split(/[\n\r]+/),f=-1,g=-1,y=0,x=0,T=[],A=[],S=null,M={},B=[],j=[],O=[],_=0,P;for(+u.codepage>=0&&Dc(+u.codepage);y!==m.length;++y){_=0;var R=m[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(e,i),v=R.replace(/;;/g,"\0").split(";").map(function(W){return W.replace(/\u0000/g,";")}),C=v[0],D;if(R.length>0)switch(C){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":v[1].charAt(0)=="P"&&A.push(R.slice(3).replace(/;;/g,";"));break;case"C":var E=!1,L=!1,G=!1,Y=!1,J=-1,de=-1;for(x=1;x<v.length;++x)switch(v[x].charAt(0)){case"A":break;case"X":g=parseInt(v[x].slice(1))-1,L=!0;break;case"Y":for(f=parseInt(v[x].slice(1))-1,L||(g=0),P=T.length;P<=f;++P)T[P]=[];break;case"K":D=v[x].slice(1),D.charAt(0)==='"'?D=D.slice(1,D.length-1):D==="TRUE"?D=!0:D==="FALSE"?D=!1:isNaN(nn(D))?isNaN(Pc(D).getDate())||(D=as(D)):(D=nn(D),S!==null&&ib(S)&&(D=ob(D))),typeof Ut<"u"&&typeof D=="string"&&(u||{}).type!="string"&&(u||{}).codepage&&(D=Ut.utils.decode(u.codepage,D)),E=!0;break;case"E":Y=!0;var b=PL(v[x].slice(1),{r:f,c:g});T[f][g]=[T[f][g],b];break;case"S":G=!0,T[f][g]=[T[f][g],"S5S"];break;case"G":break;case"R":J=parseInt(v[x].slice(1))-1;break;case"C":de=parseInt(v[x].slice(1))-1;break;default:if(u&&u.WTF)throw new Error("SYLK bad record "+R)}if(E&&(T[f][g]&&T[f][g].length==2?T[f][g][0]=D:T[f][g]=D,S=null),G){if(Y)throw new Error("SYLK shared formula cannot have own formula");var K=J>-1&&T[J][de];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");T[f][g][1]=ML(K[1],{r:f-J,c:g-de})}break;case"F":var z=0;for(x=1;x<v.length;++x)switch(v[x].charAt(0)){case"X":g=parseInt(v[x].slice(1))-1,++z;break;case"Y":for(f=parseInt(v[x].slice(1))-1,P=T.length;P<=f;++P)T[P]=[];break;case"M":_=parseInt(v[x].slice(1))/20;break;case"F":break;case"G":break;case"P":S=A[parseInt(v[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=v[x].slice(1).split(" "),P=parseInt(O[0],10);P<=parseInt(O[1],10);++P)_=parseInt(O[2],10),j[P-1]=_===0?{hidden:!0}:{wch:_},av(j[P-1]);break;case"C":g=parseInt(v[x].slice(1))-1,j[g]||(j[g]={});break;case"R":f=parseInt(v[x].slice(1))-1,B[f]||(B[f]={}),_>0?(B[f].hpt=_,B[f].hpx=Wb(_)):_===0&&(B[f].hidden=!0);break;default:if(u&&u.WTF)throw new Error("SYLK bad record "+R)}z<1&&(S=null);break;default:if(u&&u.WTF)throw new Error("SYLK bad record "+R)}}return B.length>0&&(M["!rows"]=B),j.length>0&&(M["!cols"]=j),u&&u.sheetRows&&(T=T.slice(0,u.sheetRows)),[T,M]}function o(p,u){var m=r(p,u),f=m[0],g=m[1],y=Rl(f,u);return Hi(g).forEach(function(x){y[x]=g[x]}),y}function a(p,u){return qo(o(p,u),u)}function l(p,u,m,f){var g="C;Y"+(m+1)+";X"+(f+1)+";K";switch(p.t){case"n":g+=p.v||0,p.f&&!p.F&&(g+=";E"+hv(p.f,{r:m,c:f}));break;case"b":g+=p.v?"TRUE":"FALSE";break;case"e":g+=p.w||p.v;break;case"d":g+='"'+(p.w||p.v)+'"';break;case"s":g+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function h(p,u){u.forEach(function(m,f){var g="F;W"+(f+1)+" "+(f+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=Cp(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=yp(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&p.push(g)})}function c(p,u){u.forEach(function(m,f){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*wp(m.hpx)+";"),g.length>2&&p.push(g+"R"+(f+1))})}function d(p,u){var m=["ID;PWXL;N;E"],f=[],g=Xt(p["!ref"]),y,x=Array.isArray(p),T=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),p["!cols"]&&h(m,p["!cols"]),p["!rows"]&&c(m,p["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var A=g.s.r;A<=g.e.r;++A)for(var S=g.s.c;S<=g.e.c;++S){var M=Gt({r:A,c:S});y=x?(p[A]||[])[S]:p[M],!(!y||y.v==null&&(!y.f||y.F))&&f.push(l(y,p,A,S,u))}return m.join(T)+T+f.join(T)+T+"E"+T}return{to_workbook:a,to_sheet:o,from_sheet:d}}(),OO=function(){function t(n,o){switch(o.type){case"base64":return e(an(n),o);case"binary":return e(n,o);case"buffer":return e(Rt&&Buffer.isBuffer(n)?n.toString("binary"):Lc(n),o);case"array":return e(Ap(n),o)}throw new Error("Unrecognized type "+o.type)}function e(n,o){for(var a=n.split(`
`),l=-1,h=-1,c=0,d=[];c!==a.length;++c){if(a[c].trim()==="BOT"){d[++l]=[],h=0;continue}if(!(l<0)){var p=a[c].trim().split(","),u=p[0],m=p[1];++c;for(var f=a[c]||"";(f.match(/["]/g)||[]).length&1&&c<a.length-1;)f+=`
`+a[++c];switch(f=f.trim(),+u){case-1:if(f==="BOT"){d[++l]=[],h=0;continue}else if(f!=="EOD")throw new Error("Unrecognized DIF special command "+f);break;case 0:f==="TRUE"?d[l][h]=!0:f==="FALSE"?d[l][h]=!1:isNaN(nn(m))?isNaN(Pc(m).getDate())?d[l][h]=m:d[l][h]=as(m):d[l][h]=nn(m),++h;break;case 1:f=f.slice(1,f.length-1),f=f.replace(/""/g,'"'),wc&&f&&f.match(/^=".*"$/)&&(f=f.slice(2,-1)),d[l][h++]=f!==""?f:null;break}if(f==="EOD")break}}return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),d}function i(n,o){return Rl(t(n,o),o)}function s(n,o){return qo(i(n,o),o)}var r=function(){var n=function(l,h,c,d,p){l.push(h),l.push(c+","+d),l.push('"'+p.replace(/"/g,'""')+'"')},o=function(l,h,c,d){l.push(h+","+c),l.push(h==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var h=[],c=Xt(l["!ref"]),d,p=Array.isArray(l);n(h,"TABLE",0,1,"sheetjs"),n(h,"VECTORS",0,c.e.r-c.s.r+1,""),n(h,"TUPLES",0,c.e.c-c.s.c+1,""),n(h,"DATA",0,0,"");for(var u=c.s.r;u<=c.e.r;++u){o(h,-1,0,"BOT");for(var m=c.s.c;m<=c.e.c;++m){var f=Gt({r:u,c:m});if(d=p?(l[u]||[])[m]:l[f],!d){o(h,1,0,"");continue}switch(d.t){case"n":var g=wc?d.w:d.v;!g&&d.v!=null&&(g=d.v),g==null?wc&&d.f&&!d.F?o(h,1,0,"="+d.f):o(h,1,0,""):o(h,0,g,"V");break;case"b":o(h,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":o(h,1,0,!wc||isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Vn(d.z||si[14],_s(as(d.v)))),wc?o(h,0,d.w,"V"):o(h,1,0,d.w);break;default:o(h,1,0,"")}}}o(h,-1,0,"EOD");var y=`\r
`,x=h.join(y);return x}}();return{to_workbook:s,to_sheet:i,from_sheet:r}}(),Gb=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function i(d,p){for(var u=d.split(`
`),m=-1,f=-1,g=0,y=[];g!==u.length;++g){var x=u[g].trim().split(":");if(x[0]==="cell"){var T=Fi(x[1]);if(y.length<=T.r)for(m=y.length;m<=T.r;++m)y[m]||(y[m]=[]);switch(m=T.r,f=T.c,x[2]){case"t":y[m][f]=t(x[3]);break;case"v":y[m][f]=+x[3];break;case"vtf":var A=x[x.length-1];case"vtc":switch(x[3]){case"nl":y[m][f]=!!+x[4];break;default:y[m][f]=+x[4];break}x[2]=="vtf"&&(y[m][f]=[y[m][f],A])}}}return p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),y}function s(d,p){return Rl(i(d,p),p)}function r(d,p){return qo(s(d,p),p)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function h(d){if(!d||!d["!ref"])return"";for(var p=[],u=[],m,f="",g=Ws(d["!ref"]),y=Array.isArray(d),x=g.s.r;x<=g.e.r;++x)for(var T=g.s.c;T<=g.e.c;++T)if(f=Gt({r:x,c:T}),m=y?(d[x]||[])[T]:d[f],!(!m||m.v==null||m.t==="z")){switch(u=["cell",f,"t"],m.t){case"s":case"str":u.push(e(m.v));break;case"n":m.f?(u[2]="vtf",u[3]="n",u[4]=m.v,u[5]=e(m.f)):(u[2]="v",u[3]=m.v);break;case"b":u[2]="vt"+(m.f?"f":"c"),u[3]="nl",u[4]=m.v?"1":"0",u[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var A=_s(as(m.v));u[2]="vtc",u[3]="nd",u[4]=""+A,u[5]=m.w||Vn(m.z||si[14],A);break;case"e":continue}p.push(u.join(":"))}return p.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function c(d){return[n,o,a,o,h(d),l].join(`
`)}return{to_workbook:r,to_sheet:s,from_sheet:c}}(),LO=function(){function t(c,d,p,u,m){m.raw?d[p][u]=c:c===""||(c==="TRUE"?d[p][u]=!0:c==="FALSE"?d[p][u]=!1:isNaN(nn(c))?isNaN(Pc(c).getDate())?d[p][u]=c:d[p][u]=as(c):d[p][u]=nn(c))}function e(c,d){var p=d||{},u=[];if(!c||c.length===0)return u;for(var m=c.split(/[\r\n]/),f=m.length-1;f>=0&&m[f].length===0;)--f;for(var g=10,y=0,x=0;x<=f;++x)y=m[x].indexOf(" "),y==-1?y=m[x].length:y++,g=Math.max(g,y);for(x=0;x<=f;++x){u[x]=[];var T=0;for(t(m[x].slice(0,g).trim(),u,x,T,p),T=1;T<=(m[x].length-g)/10+1;++T)t(m[x].slice(g+(T-1)*10,g+T*10).trim(),u,x,T,p)}return p.sheetRows&&(u=u.slice(0,p.sheetRows)),u}var i={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function r(c){for(var d={},p=!1,u=0,m=0;u<c.length;++u)(m=c.charCodeAt(u))==34?p=!p:!p&&m in i&&(d[m]=(d[m]||0)+1);m=[];for(u in d)Object.prototype.hasOwnProperty.call(d,u)&&m.push([d[u],u]);if(!m.length){d=s;for(u in d)Object.prototype.hasOwnProperty.call(d,u)&&m.push([d[u],u])}return m.sort(function(f,g){return f[0]-g[0]||s[f[1]]-s[g[1]]}),i[m.pop()[1]]||44}function n(c,d){var p=d||{},u="";Gr!=null&&p.dense==null&&(p.dense=Gr);var m=p.dense?[]:{},f={s:{c:0,r:0},e:{c:0,r:0}};c.slice(0,4)=="sep="?c.charCodeAt(5)==13&&c.charCodeAt(6)==10?(u=c.charAt(4),c=c.slice(7)):c.charCodeAt(5)==13||c.charCodeAt(5)==10?(u=c.charAt(4),c=c.slice(6)):u=r(c.slice(0,1024)):p&&p.FS?u=p.FS:u=r(c.slice(0,1024));var g=0,y=0,x=0,T=0,A=0,S=u.charCodeAt(0),M=!1,B=0,j=c.charCodeAt(0);c=c.replace(/\r\n/mg,`
`);var O=p.dateNF!=null?qM(p.dateNF):null;function _(){var P=c.slice(T,A),R={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)R.t="z";else if(p.raw)R.t="s",R.v=P;else if(P.trim().length===0)R.t="s",R.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(R.t="s",R.v=P.slice(2,-1).replace(/""/g,'"')):IL(P)?(R.t="n",R.f=P.slice(1)):(R.t="s",R.v=P);else if(P=="TRUE")R.t="b",R.v=!0;else if(P=="FALSE")R.t="b",R.v=!1;else if(!isNaN(x=nn(P)))R.t="n",p.cellText!==!1&&(R.w=P),R.v=x;else if(!isNaN(Pc(P).getDate())||O&&P.match(O)){R.z=p.dateNF||si[14];var v=0;O&&P.match(O)&&(P=ZM(P,p.dateNF,P.match(O)||[]),v=1),p.cellDates?(R.t="d",R.v=as(P,v)):(R.t="n",R.v=_s(as(P,v))),p.cellText!==!1&&(R.w=Vn(R.z,R.v instanceof Date?_s(R.v):R.v)),p.cellNF||delete R.z}else R.t="s",R.v=P;if(R.t=="z"||(p.dense?(m[g]||(m[g]=[]),m[g][y]=R):m[Gt({c:y,r:g})]=R),T=A+1,j=c.charCodeAt(T),f.e.c<y&&(f.e.c=y),f.e.r<g&&(f.e.r=g),B==S)++y;else if(y=0,++g,p.sheetRows&&p.sheetRows<=g)return!0}e:for(;A<c.length;++A)switch(B=c.charCodeAt(A)){case 34:j===34&&(M=!M);break;case S:case 10:case 13:if(!M&&_())break e;break;default:break}return A-T>0&&_(),m["!ref"]=fi(f),m}function o(c,d){return!(d&&d.PRN)||d.FS||c.slice(0,4)=="sep="||c.indexOf("	")>=0||c.indexOf(",")>=0||c.indexOf(";")>=0?n(c,d):Rl(e(c,d),d)}function a(c,d){var p="",u=d.type=="string"?[0,0,0,0]:KG(c,d);switch(d.type){case"base64":p=an(c);break;case"binary":p=c;break;case"buffer":d.codepage==65001?p=c.toString("utf8"):d.codepage&&typeof Ut<"u"?p=Ut.utils.decode(d.codepage,c):p=Rt&&Buffer.isBuffer(c)?c.toString("binary"):Lc(c);break;case"array":p=Ap(c);break;case"string":p=c;break;default:throw new Error("Unrecognized type "+d.type)}return u[0]==239&&u[1]==187&&u[2]==191?p=Ec(p.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?p=Ec(p):d.type=="binary"&&typeof Ut<"u"&&d.codepage&&(p=Ut.utils.decode(d.codepage,Ut.utils.encode(28591,p))),p.slice(0,19)=="socialcalc:version:"?Gb.to_sheet(d.type=="string"?p:Ec(p),d):o(p,d)}function l(c,d){return qo(a(c,d),d)}function h(c){for(var d=[],p=Xt(c["!ref"]),u,m=Array.isArray(c),f=p.s.r;f<=p.e.r;++f){for(var g=[],y=p.s.c;y<=p.e.c;++y){var x=Gt({r:f,c:y});if(u=m?(c[f]||[])[y]:c[x],!u||u.v==null){g.push("          ");continue}for(var T=(u.w||(ln(u),u.w)||"").slice(0,10);T.length<10;)T+=" ";g.push(T+(y===0?" ":""))}d.push(g.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:h}}();var kE=function(){function t(b,K,z){if(b){Bs(b,b.l||0);for(var W=z.Enum||J;b.l<b.length;){var re=b.read_shift(2),I=W[re]||W[65535],k=b.read_shift(2),N=b.l+k,q=I.f&&I.f(b,k,z);if(b.l=N,K(q,I,re))return}}}function e(b,K){switch(K.type){case"base64":return i(vr(an(b)),K);case"binary":return i(vr(b),K);case"buffer":case"array":return i(b,K)}throw"Unsupported type "+K.type}function i(b,K){if(!b)return b;var z=K||{};Gr!=null&&z.dense==null&&(z.dense=Gr);var W=z.dense?[]:{},re="Sheet1",I="",k=0,N={},q=[],F=[],H={s:{r:0,c:0},e:{r:0,c:0}},U=z.sheetRows||0;if(b[2]==0&&(b[3]==8||b[3]==9)&&b.length>=16&&b[14]==5&&b[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(b[2]==2)z.Enum=J,t(b,function(ne,le,ge){switch(ge){case 0:z.vers=ne,ne>=4096&&(z.qpro=!0);break;case 6:H=ne;break;case 204:ne&&(I=ne);break;case 222:I=ne;break;case 15:case 51:z.qpro||(ne[1].v=ne[1].v.slice(1));case 13:case 14:case 16:ge==14&&(ne[2]&112)==112&&(ne[2]&15)>1&&(ne[2]&15)<15&&(ne[1].z=z.dateNF||si[14],z.cellDates&&(ne[1].t="d",ne[1].v=ob(ne[1].v))),z.qpro&&ne[3]>k&&(W["!ref"]=fi(H),N[re]=W,q.push(re),W=z.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},k=ne[3],re=I||"Sheet"+(k+1),I="");var xe=z.dense?(W[ne[0].r]||[])[ne[0].c]:W[Gt(ne[0])];if(xe){xe.t=ne[1].t,xe.v=ne[1].v,ne[1].z!=null&&(xe.z=ne[1].z),ne[1].f!=null&&(xe.f=ne[1].f);break}z.dense?(W[ne[0].r]||(W[ne[0].r]=[]),W[ne[0].r][ne[0].c]=ne[1]):W[Gt(ne[0])]=ne[1];break;default:}},z);else if(b[2]==26||b[2]==14)z.Enum=de,b[2]==14&&(z.qpro=!0,b.l=0),t(b,function(ne,le,ge){switch(ge){case 204:re=ne;break;case 22:ne[1].v=ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ne[3]>k&&(W["!ref"]=fi(H),N[re]=W,q.push(re),W=z.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},k=ne[3],re="Sheet"+(k+1)),U>0&&ne[0].r>=U)break;z.dense?(W[ne[0].r]||(W[ne[0].r]=[]),W[ne[0].r][ne[0].c]=ne[1]):W[Gt(ne[0])]=ne[1],H.e.c<ne[0].c&&(H.e.c=ne[0].c),H.e.r<ne[0].r&&(H.e.r=ne[0].r);break;case 27:ne[14e3]&&(F[ne[14e3][0]]=ne[14e3][1]);break;case 1537:F[ne[0]]=ne[1],ne[0]==k&&(re=ne[1]);break;default:break}},z);else throw new Error("Unrecognized LOTUS BOF "+b[2]);if(W["!ref"]=fi(H),N[I||re]=W,q.push(I||re),!F.length)return{SheetNames:q,Sheets:N};for(var X={},Z=[],ee=0;ee<F.length;++ee)N[q[ee]]?(Z.push(F[ee]||q[ee]),X[F[ee]]=N[F[ee]]||N[q[ee]]):(Z.push(F[ee]),X[F[ee]]={"!ref":"A1"});return{SheetNames:Z,Sheets:X}}function s(b,K){var z=K||{};if(+z.codepage>=0&&Dc(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var W=bs(),re=Xt(b["!ref"]),I=Array.isArray(b),k=[];je(W,0,n(1030)),je(W,6,l(re));for(var N=Math.min(re.e.r,8191),q=re.s.r;q<=N;++q)for(var F=Bi(q),H=re.s.c;H<=re.e.c;++H){q===re.s.r&&(k[H]=$i(H));var U=k[H]+F,X=I?(b[q]||[])[H]:b[U];if(!(!X||X.t=="z"))if(X.t=="n")(X.v|0)==X.v&&X.v>=-32768&&X.v<=32767?je(W,13,u(q,H,X.v)):je(W,14,f(q,H,X.v));else{var Z=ln(X);je(W,15,d(q,H,Z.slice(0,239)))}}return je(W,1),W.end()}function r(b,K){var z=K||{};if(+z.codepage>=0&&Dc(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var W=bs();je(W,0,o(b));for(var re=0,I=0;re<b.SheetNames.length;++re)(b.Sheets[b.SheetNames[re]]||{})["!ref"]&&je(W,27,Y(b.SheetNames[re],I++));var k=0;for(re=0;re<b.SheetNames.length;++re){var N=b.Sheets[b.SheetNames[re]];if(!(!N||!N["!ref"])){for(var q=Xt(N["!ref"]),F=Array.isArray(N),H=[],U=Math.min(q.e.r,8191),X=q.s.r;X<=U;++X)for(var Z=Bi(X),ee=q.s.c;ee<=q.e.c;++ee){X===q.s.r&&(H[ee]=$i(ee));var ne=H[ee]+Z,le=F?(N[X]||[])[ee]:N[ne];if(!(!le||le.t=="z"))if(le.t=="n")je(W,23,_(X,ee,k,le.v));else{var ge=ln(le);je(W,22,B(X,ee,k,ge.slice(0,239)))}}++k}}return je(W,1),W.end()}function n(b){var K=Fe(2);return K.write_shift(2,b),K}function o(b){var K=Fe(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var z=0,W=0,re=0,I=0;I<b.SheetNames.length;++I){var k=b.SheetNames[I],N=b.Sheets[k];if(!(!N||!N["!ref"])){++re;var q=Ws(N["!ref"]);z<q.e.r&&(z=q.e.r),W<q.e.c&&(W=q.e.c)}}return z>8191&&(z=8191),K.write_shift(2,z),K.write_shift(1,re),K.write_shift(1,W),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function a(b,K,z){var W={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&z.qpro?(W.s.c=b.read_shift(1),b.l++,W.s.r=b.read_shift(2),W.e.c=b.read_shift(1),b.l++,W.e.r=b.read_shift(2),W):(W.s.c=b.read_shift(2),W.s.r=b.read_shift(2),K==12&&z.qpro&&(b.l+=2),W.e.c=b.read_shift(2),W.e.r=b.read_shift(2),K==12&&z.qpro&&(b.l+=2),W.s.c==65535&&(W.s.c=W.e.c=W.s.r=W.e.r=0),W)}function l(b){var K=Fe(8);return K.write_shift(2,b.s.c),K.write_shift(2,b.s.r),K.write_shift(2,b.e.c),K.write_shift(2,b.e.r),K}function h(b,K,z){var W=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(W[0].c=b.read_shift(1),W[3]=b.read_shift(1),W[0].r=b.read_shift(2),b.l+=2):(W[2]=b.read_shift(1),W[0].c=b.read_shift(2),W[0].r=b.read_shift(2)),W}function c(b,K,z){var W=b.l+K,re=h(b,K,z);if(re[1].t="s",z.vers==20768){b.l++;var I=b.read_shift(1);return re[1].v=b.read_shift(I,"utf8"),re}return z.qpro&&b.l++,re[1].v=b.read_shift(W-b.l,"cstr"),re}function d(b,K,z){var W=Fe(7+z.length);W.write_shift(1,255),W.write_shift(2,K),W.write_shift(2,b),W.write_shift(1,39);for(var re=0;re<W.length;++re){var I=z.charCodeAt(re);W.write_shift(1,I>=128?95:I)}return W.write_shift(1,0),W}function p(b,K,z){var W=h(b,K,z);return W[1].v=b.read_shift(2,"i"),W}function u(b,K,z){var W=Fe(7);return W.write_shift(1,255),W.write_shift(2,K),W.write_shift(2,b),W.write_shift(2,z,"i"),W}function m(b,K,z){var W=h(b,K,z);return W[1].v=b.read_shift(8,"f"),W}function f(b,K,z){var W=Fe(13);return W.write_shift(1,255),W.write_shift(2,K),W.write_shift(2,b),W.write_shift(8,z,"f"),W}function g(b,K,z){var W=b.l+K,re=h(b,K,z);if(re[1].v=b.read_shift(8,"f"),z.qpro)b.l=W;else{var I=b.read_shift(2);A(b.slice(b.l,b.l+I),re),b.l+=I}return re}function y(b,K,z){var W=K&32768;return K&=-32769,K=(W?b:0)+(K>=8192?K-16384:K),(W?"":"$")+(z?$i(K):Bi(K))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(b,K){Bs(b,0);for(var z=[],W=0,re="",I="",k="",N="";b.l<b.length;){var q=b[b.l++];switch(q){case 0:z.push(b.read_shift(8,"f"));break;case 1:I=y(K[0].c,b.read_shift(2),!0),re=y(K[0].r,b.read_shift(2),!1),z.push(I+re);break;case 2:{var F=y(K[0].c,b.read_shift(2),!0),H=y(K[0].r,b.read_shift(2),!1);I=y(K[0].c,b.read_shift(2),!0),re=y(K[0].r,b.read_shift(2),!1),z.push(F+H+":"+I+re)}break;case 3:if(b.l<b.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(b.read_shift(2));break;case 6:{for(var U="";q=b[b.l++];)U+=String.fromCharCode(q);z.push('"'+U.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:N=z.pop(),k=z.pop(),z.push(["AND","OR"][q-20]+"("+k+","+N+")");break;default:if(q<32&&T[q])N=z.pop(),k=z.pop(),z.push(k+T[q]+N);else if(x[q]){if(W=x[q][1],W==69&&(W=b[b.l++]),W>z.length){console.error("WK1 bad formula parse 0x"+q.toString(16)+":|"+z.join("|")+"|");return}var X=z.slice(-W);z.length-=W,z.push(x[q][0]+"("+X.join(",")+")")}else return q<=7?console.error("WK1 invalid opcode "+q.toString(16)):q<=24?console.error("WK1 unsupported op "+q.toString(16)):q<=30?console.error("WK1 invalid opcode "+q.toString(16)):q<=115?console.error("WK1 unsupported function opcode "+q.toString(16)):console.error("WK1 unrecognized opcode "+q.toString(16))}}z.length==1?K[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function S(b){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=b.read_shift(2),K[3]=b[b.l++],K[0].c=b[b.l++],K}function M(b,K){var z=S(b,K);return z[1].t="s",z[1].v=b.read_shift(K-4,"cstr"),z}function B(b,K,z,W){var re=Fe(6+W.length);re.write_shift(2,b),re.write_shift(1,z),re.write_shift(1,K),re.write_shift(1,39);for(var I=0;I<W.length;++I){var k=W.charCodeAt(I);re.write_shift(1,k>=128?95:k)}return re.write_shift(1,0),re}function j(b,K){var z=S(b,K);z[1].v=b.read_shift(2);var W=z[1].v>>1;if(z[1].v&1)switch(W&7){case 0:W=(W>>3)*5e3;break;case 1:W=(W>>3)*500;break;case 2:W=(W>>3)/20;break;case 3:W=(W>>3)/200;break;case 4:W=(W>>3)/2e3;break;case 5:W=(W>>3)/2e4;break;case 6:W=(W>>3)/16;break;case 7:W=(W>>3)/64;break}return z[1].v=W,z}function O(b,K){var z=S(b,K),W=b.read_shift(4),re=b.read_shift(4),I=b.read_shift(2);if(I==65535)return W===0&&re===3221225472?(z[1].t="e",z[1].v=15):W===0&&re===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var k=I&32768;return I=(I&32767)-16446,z[1].v=(1-k*2)*(re*Math.pow(2,I+32)+W*Math.pow(2,I)),z}function _(b,K,z,W){var re=Fe(14);if(re.write_shift(2,b),re.write_shift(1,z),re.write_shift(1,K),W==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var I=0,k=0,N=0,q=0;return W<0&&(I=1,W=-W),k=Math.log2(W)|0,W/=Math.pow(2,k-31),q=W>>>0,q&2147483648||(W/=2,++k,q=W>>>0),W-=q,q|=2147483648,q>>>=0,W*=Math.pow(2,32),N=W>>>0,re.write_shift(4,N),re.write_shift(4,q),k+=16383+(I?32768:0),re.write_shift(2,k),re}function P(b,K){var z=O(b,14);return b.l+=K-14,z}function R(b,K){var z=S(b,K),W=b.read_shift(4);return z[1].v=W>>6,z}function v(b,K){var z=S(b,K),W=b.read_shift(8,"f");return z[1].v=W,z}function C(b,K){var z=v(b,14);return b.l+=K-10,z}function D(b,K){return b[b.l+K-1]==0?b.read_shift(K,"cstr"):""}function E(b,K){var z=b[b.l++];z>K-1&&(z=K-1);for(var W="";W.length<z;)W+=String.fromCharCode(b[b.l++]);return W}function L(b,K,z){if(!(!z.qpro||K<21)){var W=b.read_shift(1);b.l+=17,b.l+=1,b.l+=2;var re=b.read_shift(K-21,"cstr");return[W,re]}}function G(b,K){for(var z={},W=b.l+K;b.l<W;){var re=b.read_shift(2);if(re==14e3){for(z[re]=[0,""],z[re][0]=b.read_shift(2);b[b.l];)z[re][1]+=String.fromCharCode(b[b.l]),b.l++;b.l++}}return z}function Y(b,K){var z=Fe(5+b.length);z.write_shift(2,14e3),z.write_shift(2,K);for(var W=0;W<b.length;++W){var re=b.charCodeAt(W);z[z.l++]=re>127?95:re}return z[z.l++]=0,z}var J={0:{n:"BOF",f:Ib},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:c},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:c},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:D},222:{n:"SHEETNAMELP",f:E},65535:{n:""}},de={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:M},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:j},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:v},40:{n:"FORMULA28",f:C},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:D},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:L},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:r,to_workbook:e}}();var kO=/^\s|\s$|[\t\n\r]/;function Vb(t,e){if(!e.bookSST)return"";var i=[gi];i[i.length]=Ue("sst",null,{xmlns:Tl[0],count:t.Count,uniqueCount:t.Unique});for(var s=0;s!=t.length;++s)if(t[s]!=null){var r=t[s],n="<si>";r.r?n+=r.r:(n+="<t",r.t||(r.t=""),r.t.match(kO)&&(n+=' xml:space="preserve"'),n+=">"+Nt(r.t)+"</t>"),n+="</si>",i[i.length]=n}return i.length>2&&(i[i.length]="</sst>",i[1]=i[1].replace("/>",">")),i.join("")}function NO(t){return[t.read_shift(4),t.read_shift(4)]}function GO(t,e){return e||(e=Fe(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var VO=DI;function BO(t){var e=bs();Ne(e,159,GO(t));for(var i=0;i<t.length;++i)Ne(e,19,VO(t[i]));return Ne(e,160),e.end()}function HO(t){if(typeof Ut<"u")return Ut.utils.encode(bl,t);for(var e=[],i=t.split(""),s=0;s<i.length;++s)e[s]=i[s].charCodeAt(0);return e}function Bb(t){var e=0,i,s=HO(t),r=s.length+1,n,o,a,l,h;for(i=Ko(r),i[0]=s.length,n=1;n!=r;++n)i[n]=s[n-1];for(n=r-1;n>=0;--n)o=i[n],a=e&16384?1:0,l=e<<1&32767,h=a|l,e=h^o;return e^52811}var WO=function(){function t(r,n){switch(n.type){case"base64":return e(an(r),n);case"binary":return e(r,n);case"buffer":return e(Rt&&Buffer.isBuffer(r)?r.toString("binary"):Lc(r),n);case"array":return e(Ap(r),n)}throw new Error("Unrecognized type "+n.type)}function e(r,n){var o=n||{},a=o.dense?[]:{},l=r.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(c,d){Array.isArray(a)&&(a[d]=[]);for(var p=/\\\w+\b/g,u=0,m,f=-1;m=p.exec(c);){switch(m[0]){case"\\cell":var g=c.slice(u,p.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++f,g.length){var y={v:g,t:"s"};Array.isArray(a)?a[d][f]=y:a[Gt({r:d,c:f})]=y}break}u=p.lastIndex}f>h.e.c&&(h.e.c=f)}),a["!ref"]=fi(h),a}function i(r,n){return qo(t(r,n),n)}function s(r){for(var n=["{\\rtf1\\ansi"],o=Xt(r["!ref"]),a,l=Array.isArray(r),h=o.s.r;h<=o.e.r;++h){n.push("\\trowd\\trautofit1");for(var c=o.s.c;c<=o.e.c;++c)n.push("\\cellx"+(c+1));for(n.push("\\pard\\intbl"),c=o.s.c;c<=o.e.c;++c){var d=Gt({r:h,c});a=l?(r[h]||[])[c]:r[d],!(!a||a.v==null&&(!a.f||a.F))&&(n.push(" "+(a.w||(ln(a),a.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}return{to_workbook:i,to_sheet:t,from_sheet:s}}();function NE(t){for(var e=0,i=1;e!=3;++e)i=i*256+(t[e]>255?255:t[e]<0?0:t[e]);return i.toString(16).toUpperCase().slice(1)}var UO=6;var on=UO;function Cp(t){return Math.floor((t+Math.round(128/on)/256)*on)}function yp(t){return Math.floor((t-5)/on*100+.5)/100}function W0(t){return Math.round((t*on+5)/on*256)/256}function av(t){t.width?(t.wpx=Cp(t.width),t.wch=yp(t.wpx),t.MDW=on):t.wpx?(t.wch=yp(t.wpx),t.width=W0(t.wch),t.MDW=on):typeof t.wch=="number"&&(t.width=W0(t.wch),t.wpx=Cp(t.width),t.MDW=on),t.customWidth&&delete t.customWidth}var zO=96,Hb=zO;function wp(t){return t*96/Hb}function Wb(t){return t*Hb/96}function jO(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var s=i[0];s<=i[1];++s)t[s]!=null&&(e[e.length]=Ue("numFmt",null,{numFmtId:s,formatCode:Nt(t[s])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ue("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function $O(t){var e=[];return e[e.length]=Ue("cellXfs",null),t.forEach(function(i){e[e.length]=Ue("xf",null,i)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ue("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Ub(t,e){var i=[gi,Ue("styleSheet",null,{xmlns:Tl[0],"xmlns:vt":Di.vt})],s;return t.SSF&&(s=jO(t.SSF))!=null&&(i[i.length]=s),i[i.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',i[i.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',i[i.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',i[i.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=$O(e.cellXfs))&&(i[i.length]=s),i[i.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',i[i.length]='<dxfs count="0"/>',i[i.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',i.length>2&&(i[i.length]="</styleSheet>",i[1]=i[1].replace("/>",">")),i.join("")}function KO(t,e){var i=t.read_shift(2),s=Ki(t,e-2);return[i,s]}function XO(t,e,i){i||(i=Fe(6+4*e.length)),i.write_shift(2,t),Pi(e,i);var s=i.length>i.l?i.slice(0,i.l):i;return i.l==null&&(i.l=i.length),s}function YO(t,e,i){var s={};s.sz=t.read_shift(2)/20;var r=kI(t,2,i);r.fItalic&&(s.italic=1),r.fCondense&&(s.condense=1),r.fExtend&&(s.extend=1),r.fShadow&&(s.shadow=1),r.fOutline&&(s.outline=1),r.fStrikeout&&(s.strike=1);var n=t.read_shift(2);switch(n===700&&(s.bold=1),t.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(s.underline=o);var a=t.read_shift(1);a>0&&(s.family=a);var l=t.read_shift(1);switch(l>0&&(s.charset=l),t.l++,s.color=LI(t,8),t.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=Ki(t,e-21),s}function qO(t,e){e||(e=Fe(25+4*32)),e.write_shift(2,t.sz*20),NI(t,e),e.write_shift(2,t.bold?700:400);var i=0;t.vertAlign=="superscript"?i=1:t.vertAlign=="subscript"&&(i=2),e.write_shift(2,i),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),mp(t.color,e);var s=0;return t.scheme=="major"&&(s=1),t.scheme=="minor"&&(s=2),e.write_shift(1,s),Pi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var ZO=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],L0,QO=Vr;function GE(t,e){e||(e=Fe(4*3+8*7+16*1)),L0||(L0=j0(ZO));var i=L0[t.patternType];i==null&&(i=40),e.write_shift(4,i);var s=0;if(i!=40)for(mp({auto:1},e),mp({auto:1},e);s<12;++s)e.write_shift(4,0);else{for(;s<4;++s)e.write_shift(4,0);for(;s<12;++s)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function JO(t,e){var i=t.l+e,s=t.read_shift(2),r=t.read_shift(2);return t.l=i,{ixfe:s,numFmtId:r}}function zb(t,e,i){i||(i=Fe(16)),i.write_shift(2,e||0),i.write_shift(2,t.numFmtId||0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(1,0),i.write_shift(1,0);var s=0;return i.write_shift(1,s),i.write_shift(1,0),i.write_shift(1,0),i.write_shift(1,0),i}function xc(t,e){return e||(e=Fe(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var eL=Vr;function tL(t,e){return e||(e=Fe(51)),e.write_shift(1,0),xc(null,e),xc(null,e),xc(null,e),xc(null,e),xc(null,e),e.length>e.l?e.slice(0,e.l):e}function iL(t,e){return e||(e=Fe(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,+t.builtinId),e.write_shift(1,0),gp(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function sL(t,e,i){var s=Fe(2052);return s.write_shift(4,t),gp(e,s),gp(i,s),s.length>s.l?s.slice(0,s.l):s}function rL(t,e){if(e){var i=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var r=s[0];r<=s[1];++r)e[r]!=null&&++i}),i!=0&&(Ne(t,615,yr(i)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var r=s[0];r<=s[1];++r)e[r]!=null&&Ne(t,44,XO(r,e[r]))}),Ne(t,616))}}function nL(t){var e=1;e!=0&&(Ne(t,611,yr(e)),Ne(t,43,qO({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Ne(t,612))}function oL(t){var e=2;e!=0&&(Ne(t,603,yr(e)),Ne(t,45,GE({patternType:"none"})),Ne(t,45,GE({patternType:"gray125"})),Ne(t,604))}function aL(t){var e=1;e!=0&&(Ne(t,613,yr(e)),Ne(t,46,tL({})),Ne(t,614))}function lL(t){var e=1;Ne(t,626,yr(e)),Ne(t,47,zb({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Ne(t,627)}function hL(t,e){Ne(t,617,yr(e.length)),e.forEach(function(i){Ne(t,47,zb(i,0))}),Ne(t,618)}function cL(t){var e=1;Ne(t,619,yr(e)),Ne(t,48,iL({xfId:0,builtinId:0,name:"Normal"})),Ne(t,620)}function dL(t){var e=0;Ne(t,505,yr(e)),Ne(t,506)}function uL(t){var e=0;Ne(t,508,sL(e,"TableStyleMedium9","PivotStyleMedium4")),Ne(t,509)}function pL(t,e){var i=bs();return Ne(i,278),rL(i,t.SSF),nL(i,t),oL(i,t),aL(i,t),lL(i,t),hL(i,e.cellXfs),cL(i,t),dL(i,t),uL(i,t),Ne(i,279),i.end()}function jb(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var i=[gi];return i[i.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',i[i.length]="<a:themeElements>",i[i.length]='<a:clrScheme name="Office">',i[i.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',i[i.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',i[i.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',i[i.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',i[i.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',i[i.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',i[i.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',i[i.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',i[i.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',i[i.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',i[i.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',i[i.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',i[i.length]="</a:clrScheme>",i[i.length]='<a:fontScheme name="Office">',i[i.length]="<a:majorFont>",i[i.length]='<a:latin typeface="Cambria"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',i[i.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',i[i.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',i[i.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',i[i.length]='<a:font script="Arab" typeface="Times New Roman"/>',i[i.length]='<a:font script="Hebr" typeface="Times New Roman"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="MoolBoran"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Times New Roman"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:majorFont>",i[i.length]="<a:minorFont>",i[i.length]='<a:latin typeface="Calibri"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',i[i.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',i[i.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',i[i.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',i[i.length]='<a:font script="Arab" typeface="Arial"/>',i[i.length]='<a:font script="Hebr" typeface="Arial"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="DaunPenh"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Arial"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:minorFont>",i[i.length]="</a:fontScheme>",i[i.length]='<a:fmtScheme name="Office">',i[i.length]="<a:fillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="1"/>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="0"/>',i[i.length]="</a:gradFill>",i[i.length]="</a:fillStyleLst>",i[i.length]="<a:lnStyleLst>",i[i.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]="</a:lnStyleLst>",i[i.length]="<a:effectStyleLst>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',i[i.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',i[i.length]="</a:effectStyle>",i[i.length]="</a:effectStyleLst>",i[i.length]="<a:bgFillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]="</a:bgFillStyleLst>",i[i.length]="</a:fmtScheme>",i[i.length]="</a:themeElements>",i[i.length]="<a:objectDefaults>",i[i.length]="<a:spDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',i[i.length]="</a:spDef>",i[i.length]="<a:lnDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',i[i.length]="</a:lnDef>",i[i.length]="</a:objectDefaults>",i[i.length]="<a:extraClrSchemeLst/>",i[i.length]="</a:theme>",i.join("")}function fL(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ki(t,e-8)}}function gL(t){var e=Fe(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Pi(t.name,e),e.slice(0,e.l)}function mL(t){for(var e=[],i=t.read_shift(4);i-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function vL(t){var e=Fe(4+8*t.length);e.write_shift(4,t.length);for(var i=0;i<t.length;++i)e.write_shift(4,t[i][0]),e.write_shift(4,t[i][1]);return e}function CL(t,e){var i=Fe(8+2*e.length);return i.write_shift(4,t),Pi(e,i),i.slice(0,i.l)}function yL(t){return t.l+=4,t.read_shift(4)!=0}function wL(t,e){var i=Fe(8);return i.write_shift(4,t),i.write_shift(4,e?1:0),i}function xL(){var t=bs();return Ne(t,332),Ne(t,334,yr(1)),Ne(t,335,gL({name:"XLDAPR",version:12e4,flags:3496657072})),Ne(t,336),Ne(t,339,CL(1,"XLDAPR")),Ne(t,52),Ne(t,35,yr(514)),Ne(t,4096,yr(0)),Ne(t,4097,ir(1)),Ne(t,36),Ne(t,53),Ne(t,340),Ne(t,337,wL(1,!0)),Ne(t,51,vL([[1,0]])),Ne(t,338),Ne(t,333),t.end()}function $b(){var t=[gi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function SL(t){var e={};e.i=t.read_shift(4);var i={};i.r=t.read_shift(4),i.c=t.read_shift(4),e.r=Gt(i);var s=t.read_shift(1);return s&2&&(e.l="1"),s&8&&(e.a="1"),e}var Cl=1024;function Kb(t,e){for(var i=[21600,21600],s=["m0,0l0",i[1],i[0],i[1],i[0],"0xe"].join(","),r=[Ue("xml",null,{"xmlns:v":Hs.v,"xmlns:o":Hs.o,"xmlns:x":Hs.x,"xmlns:mv":Hs.mv}).replace(/\/>/,">"),Ue("o:shapelayout",Ue("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ue("v:shapetype",[Ue("v:stroke",null,{joinstyle:"miter"}),Ue("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:i.join(","),path:s})];Cl<t*1e3;)Cl+=1e3;return e.forEach(function(n){var o=Fi(n[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var l=a.type=="gradient"?Ue("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=Ue("v:fill",l,a),c={on:"t",obscured:"t"};++Cl,r=r.concat(["<v:shape"+Mc({id:"_x0000_s"+Cl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(n[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,Ue("v:shadow",null,c),Ue("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Vi("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Vi("x:AutoFill","False"),Vi("x:Row",String(o.r)),Vi("x:Column",String(o.c)),n[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),r.push("</xml>"),r.join("")}function Xb(t){var e=[gi,Ue("comments",null,{xmlns:Tl[0]})],i=[];return e.push("<authors>"),t.forEach(function(s){s[1].forEach(function(r){var n=Nt(r.a);i.indexOf(n)==-1&&(i.push(n),e.push("<author>"+n+"</author>")),r.T&&r.ID&&i.indexOf("tc="+r.ID)==-1&&(i.push("tc="+r.ID),e.push("<author>tc="+r.ID+"</author>"))})}),i.length==0&&(i.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(s){var r=0,n=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?r=i.indexOf("tc="+s[1][0].ID):s[1].forEach(function(l){l.a&&(r=i.indexOf(Nt(l.a))),n.push(l.t||"")}),e.push('<comment ref="'+s[0]+'" authorId="'+r+'"><text>'),n.length<=1)e.push(Vi("t",Nt(n[0]||"")));else{for(var o=`Comment:
    `+n[0]+`
`,a=1;a<n.length;++a)o+=`Reply:
    `+n[a]+`
`;e.push(Vi("t",Nt(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function EL(t,e,i){var s=[gi,Ue("ThreadedComments",null,{xmlns:Di.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(r){var n="";(r[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:r[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+i.tcid++).slice(-12)+"}"};a==0?n=l.id:l.parentId=n,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),s.push(Ue("threadedComment",Vi("text",o.t||""),l))})}),s.push("</ThreadedComments>"),s.join("")}function bL(t){var e=[gi,Ue("personList",null,{xmlns:Di.TCMNT,"xmlns:x":Tl[0]}).replace(/[\/]>/,">")];return t.forEach(function(i,s){e.push(Ue("person",null,{displayName:i,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:i,providerId:"None"}))}),e.push("</personList>"),e.join("")}function _L(t){var e={};e.iauthor=t.read_shift(4);var i=ea(t,16);return e.rfx=i.s,e.ref=Gt(i.s),t.l+=16,e}function TL(t,e){return e==null&&(e=Fe(36)),e.write_shift(4,t[1].iauthor),Dl(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var AL=Ki;function RL(t){return Pi(t.slice(0,54))}function DL(t){var e=bs(),i=[];return Ne(e,628),Ne(e,630),t.forEach(function(s){s[1].forEach(function(r){i.indexOf(r.a)>-1||(i.push(r.a.slice(0,54)),Ne(e,632,RL(r.a)))})}),Ne(e,631),Ne(e,633),t.forEach(function(s){s[1].forEach(function(r){r.iauthor=i.indexOf(r.a);var n={s:Fi(s[0]),e:Fi(s[0])};Ne(e,635,TL([n,r])),r.t&&r.t.length>0&&Ne(e,637,PI(r)),Ne(e,636),delete r.iauthor})}),Ne(e,634),Ne(e,629),e.end()}function FL(t,e){e.FullPaths.forEach(function(i,s){if(s!=0){var r=i.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");r.slice(-1)!=="/"&&Wt.utils.cfb_add(t,r,e.FileIndex[s].content)}})}var Yb=["xlsb","xlsm","xlam","biff8","xla"];var PL=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function i(s,r,n,o){var a=!1,l=!1;n.length==0?l=!0:n.charAt(0)=="["&&(l=!0,n=n.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var h=n.length>0?parseInt(n,10)|0:0,c=o.length>0?parseInt(o,10)|0:0;return a?c+=e.c:--c,l?h+=e.r:--h,r+(a?"":"$")+$i(c)+(l?"":"$")+Bi(h)}return function(r,n){return e=n,r.replace(t,i)}}(),lv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,hv=function(){return function(e,i){return e.replace(lv,function(s,r,n,o,a,l){var h=iv(o)-(n?0:i.c),c=tv(l)-(a?0:i.r),d=c==0?"":a?c+1:"["+c+"]",p=h==0?"":n?h+1:"["+h+"]";return r+"R"+d+"C"+p})}}();function ML(t,e){return t.replace(lv,function(i,s,r,n,o,a){return s+(r=="$"?r+n:$i(iv(n)+e.c))+(o=="$"?o+a:Bi(tv(a)+e.r))})}function IL(t){return t.length!=1}function pi(t){t.l+=1}function Bn(t,e){var i=t.read_shift(e==1?1:2);return[i&16383,i>>14&1,i>>15&1]}function qb(t,e,i){var s=2;if(i){if(i.biff>=2&&i.biff<=5)return Zb(t,e,i);i.biff==12&&(s=4)}var r=t.read_shift(s),n=t.read_shift(s),o=Bn(t,2),a=Bn(t,2);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:n,c:a[0],cRel:a[1],rRel:a[2]}}}function Zb(t){var e=Bn(t,2),i=Bn(t,2),s=t.read_shift(1),r=t.read_shift(1);return{s:{r:e[0],c:s,cRel:e[1],rRel:e[2]},e:{r:i[0],c:r,cRel:i[1],rRel:i[2]}}}function OL(t,e,i){if(i.biff<8)return Zb(t,e,i);var s=t.read_shift(i.biff==12?4:2),r=t.read_shift(i.biff==12?4:2),n=Bn(t,2),o=Bn(t,2);return{s:{r:s,c:n[0],cRel:n[1],rRel:n[2]},e:{r,c:o[0],cRel:o[1],rRel:o[2]}}}function Qb(t,e,i){if(i&&i.biff>=2&&i.biff<=5)return LL(t,e,i);var s=t.read_shift(i&&i.biff==12?4:2),r=Bn(t,2);return{r:s,c:r[0],cRel:r[1],rRel:r[2]}}function LL(t){var e=Bn(t,2),i=t.read_shift(1);return{r:e[0],c:i,cRel:e[1],rRel:e[2]}}function kL(t){var e=t.read_shift(2),i=t.read_shift(2);return{r:e,c:i&255,fQuoted:!!(i&16384),cRel:i>>15,rRel:i>>15}}function NL(t,e,i){var s=i&&i.biff?i.biff:8;if(s>=2&&s<=5)return GL(t,e,i);var r=t.read_shift(s>=12?4:2),n=t.read_shift(2),o=(n&16384)>>14,a=(n&32768)>>15;if(n&=16383,a==1)for(;r>524287;)r-=1048576;if(o==1)for(;n>8191;)n=n-16384;return{r,c:n,cRel:o,rRel:a}}function GL(t){var e=t.read_shift(2),i=t.read_shift(1),s=(e&32768)>>15,r=(e&16384)>>14;return e&=16383,s==1&&e>=8192&&(e=e-16384),r==1&&i>=128&&(i=i-256),{r:e,c:i,cRel:r,rRel:s}}function VL(t,e,i){var s=(t[t.l++]&96)>>5,r=qb(t,i.biff>=2&&i.biff<=5?6:8,i);return[s,r]}function BL(t,e,i){var s=(t[t.l++]&96)>>5,r=t.read_shift(2,"i"),n=8;if(i)switch(i.biff){case 5:t.l+=12,n=6;break;case 12:n=12;break}var o=qb(t,n,i);return[s,r,o]}function HL(t,e,i){var s=(t[t.l++]&96)>>5;return t.l+=i&&i.biff>8?12:i.biff<8?6:8,[s]}function WL(t,e,i){var s=(t[t.l++]&96)>>5,r=t.read_shift(2),n=8;if(i)switch(i.biff){case 5:t.l+=12,n=6;break;case 12:n=12;break}return t.l+=n,[s,r]}function UL(t,e,i){var s=(t[t.l++]&96)>>5,r=OL(t,e-1,i);return[s,r]}function zL(t,e,i){var s=(t[t.l++]&96)>>5;return t.l+=i.biff==2?6:i.biff==12?14:7,[s]}function VE(t){var e=t[t.l+1]&1,i=1;return t.l+=4,[e,i]}function jL(t,e,i){t.l+=2;for(var s=t.read_shift(i&&i.biff==2?1:2),r=[],n=0;n<=s;++n)r.push(t.read_shift(i&&i.biff==2?1:2));return r}function $L(t,e,i){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(i&&i.biff==2?1:2)]}function KL(t,e,i){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(i&&i.biff==2?1:2)]}function XL(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function YL(t,e,i){var s=t[t.l+1]&255?1:0;return t.l+=i&&i.biff==2?3:4,[s]}function Jb(t){var e=t.read_shift(1),i=t.read_shift(1);return[e,i]}function qL(t){return t.read_shift(2),Jb(t,2)}function ZL(t){return t.read_shift(2),Jb(t,2)}function QL(t,e,i){var s=(t[t.l]&96)>>5;t.l+=1;var r=Qb(t,0,i);return[s,r]}function JL(t,e,i){var s=(t[t.l]&96)>>5;t.l+=1;var r=NL(t,0,i);return[s,r]}function ek(t,e,i){var s=(t[t.l]&96)>>5;t.l+=1;var r=t.read_shift(2);i&&i.biff==5&&(t.l+=12);var n=Qb(t,0,i);return[s,r,n]}function tk(t,e,i){var s=(t[t.l]&96)>>5;t.l+=1;var r=t.read_shift(i&&i.biff<=3?1:2);return[tN[r],i_[r],s]}function ik(t,e,i){var s=t[t.l++],r=t.read_shift(1),n=i&&i.biff<=3?[s==88?-1:0,t.read_shift(1)]:sk(t);return[r,(n[0]===0?i_:eN)[n[1]]]}function sk(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function rk(t,e,i){t.l+=i&&i.biff==2?3:4}function nk(t,e,i){if(t.l++,i&&i.biff==12)return[t.read_shift(4,"i"),0];var s=t.read_shift(2),r=t.read_shift(i&&i.biff==2?1:2);return[s,r]}function ok(t){return t.l++,Nc[t.read_shift(1)]}function ak(t){return t.l++,t.read_shift(2)}function lk(t){return t.l++,t.read_shift(1)!==0}function hk(t){return t.l++,Fl(t,8)}function ck(t,e,i){return t.l++,Lb(t,e-1,i)}function dk(t,e){var i=[t.read_shift(1)];if(e==12)switch(i[0]){case 2:i[0]=4;break;case 4:i[0]=16;break;case 0:i[0]=1;break;case 1:i[0]=2;break}switch(i[0]){case 4:i[1]=eO(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:i[1]=Nc[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:i[1]=Fl(t,8);break;case 2:i[1]=rO(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+i[0])}return i}function uk(t,e,i){for(var s=t.read_shift(i.biff==12?4:2),r=[],n=0;n!=s;++n)r.push((i.biff==12?ea:aO)(t,8));return r}function pk(t,e,i){var s=0,r=0;i.biff==12?(s=t.read_shift(4),r=t.read_shift(4)):(r=1+t.read_shift(1),s=1+t.read_shift(2)),i.biff>=2&&i.biff<8&&(--s,--r==0&&(r=256));for(var n=0,o=[];n!=s&&(o[n]=[]);++n)for(var a=0;a!=r;++a)o[n][a]=dk(t,i.biff);return o}function fk(t,e,i){var s=t.read_shift(1)>>>5&3,r=!i||i.biff>=8?4:2,n=t.read_shift(r);switch(i.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[s,0,n]}function gk(t,e,i){if(i.biff==5)return mk(t,e,i);var s=t.read_shift(1)>>>5&3,r=t.read_shift(2),n=t.read_shift(4);return[s,r,n]}function mk(t){var e=t.read_shift(1)>>>5&3,i=t.read_shift(2,"i");t.l+=8;var s=t.read_shift(2);return t.l+=12,[e,i,s]}function vk(t,e,i){var s=t.read_shift(1)>>>5&3;t.l+=i&&i.biff==2?3:4;var r=t.read_shift(i&&i.biff==2?1:2);return[s,r]}function Ck(t,e,i){var s=t.read_shift(1)>>>5&3,r=t.read_shift(i&&i.biff==2?1:2);return[s,r]}function yk(t,e,i){var s=t.read_shift(1)>>>5&3;return t.l+=4,i.biff<8&&t.l--,i.biff==12&&(t.l+=2),[s]}function wk(t,e,i){var s=(t[t.l++]&96)>>5,r=t.read_shift(2),n=4;if(i)switch(i.biff){case 5:n=15;break;case 12:n=6;break}return t.l+=n,[s,r]}var xk=Vr,Sk=Vr,Ek=Vr;function Gc(t,e,i){return t.l+=2,[kL(t,4,i)]}function cv(t){return t.l+=6,[]}var bk=Gc,_k=cv,Tk=cv,Ak=Gc;function e_(t){return t.l+=2,[Ib(t),t.read_shift(2)&1]}var Rk=Gc,Dk=e_,Fk=cv,Pk=Gc,Mk=Gc,Ik=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Ok(t){t.l+=2;var e=t.read_shift(2),i=t.read_shift(2),s=t.read_shift(4),r=t.read_shift(2),n=t.read_shift(2),o=Ik[i>>2&31];return{ixti:e,coltype:i&3,rt:o,idx:s,c:r,C:n}}function Lk(t){return t.l+=2,[t.read_shift(4)]}function kk(t,e,i){return t.l+=5,t.l+=2,t.l+=i.biff==2?1:4,["PTGSHEET"]}function Nk(t,e,i){return t.l+=i.biff==2?4:5,["PTGENDSHEET"]}function Gk(t){var e=t.read_shift(1)>>>5&3,i=t.read_shift(2);return[e,i]}function Vk(t){var e=t.read_shift(1)>>>5&3,i=t.read_shift(2);return[e,i]}function Bk(t){return t.l+=4,[0,0]}var BE={1:{n:"PtgExp",f:nk},2:{n:"PtgTbl",f:Ek},3:{n:"PtgAdd",f:pi},4:{n:"PtgSub",f:pi},5:{n:"PtgMul",f:pi},6:{n:"PtgDiv",f:pi},7:{n:"PtgPower",f:pi},8:{n:"PtgConcat",f:pi},9:{n:"PtgLt",f:pi},10:{n:"PtgLe",f:pi},11:{n:"PtgEq",f:pi},12:{n:"PtgGe",f:pi},13:{n:"PtgGt",f:pi},14:{n:"PtgNe",f:pi},15:{n:"PtgIsect",f:pi},16:{n:"PtgUnion",f:pi},17:{n:"PtgRange",f:pi},18:{n:"PtgUplus",f:pi},19:{n:"PtgUminus",f:pi},20:{n:"PtgPercent",f:pi},21:{n:"PtgParen",f:pi},22:{n:"PtgMissArg",f:pi},23:{n:"PtgStr",f:ck},26:{n:"PtgSheet",f:kk},27:{n:"PtgEndSheet",f:Nk},28:{n:"PtgErr",f:ok},29:{n:"PtgBool",f:lk},30:{n:"PtgInt",f:ak},31:{n:"PtgNum",f:hk},32:{n:"PtgArray",f:zL},33:{n:"PtgFunc",f:tk},34:{n:"PtgFuncVar",f:ik},35:{n:"PtgName",f:fk},36:{n:"PtgRef",f:QL},37:{n:"PtgArea",f:VL},38:{n:"PtgMemArea",f:vk},39:{n:"PtgMemErr",f:xk},40:{n:"PtgMemNoMem",f:Sk},41:{n:"PtgMemFunc",f:Ck},42:{n:"PtgRefErr",f:yk},43:{n:"PtgAreaErr",f:HL},44:{n:"PtgRefN",f:JL},45:{n:"PtgAreaN",f:UL},46:{n:"PtgMemAreaN",f:Gk},47:{n:"PtgMemNoMemN",f:Vk},57:{n:"PtgNameX",f:gk},58:{n:"PtgRef3d",f:ek},59:{n:"PtgArea3d",f:BL},60:{n:"PtgRefErr3d",f:wk},61:{n:"PtgAreaErr3d",f:WL},255:{}},Hk={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Wk={1:{n:"PtgElfLel",f:e_},2:{n:"PtgElfRw",f:Pk},3:{n:"PtgElfCol",f:bk},6:{n:"PtgElfRwV",f:Mk},7:{n:"PtgElfColV",f:Ak},10:{n:"PtgElfRadical",f:Rk},11:{n:"PtgElfRadicalS",f:Fk},13:{n:"PtgElfColS",f:_k},15:{n:"PtgElfColSV",f:Tk},16:{n:"PtgElfRadicalLel",f:Dk},25:{n:"PtgList",f:Ok},29:{n:"PtgSxName",f:Lk},255:{}},Uk={0:{n:"PtgAttrNoop",f:Bk},1:{n:"PtgAttrSemi",f:YL},2:{n:"PtgAttrIf",f:KL},4:{n:"PtgAttrChoose",f:jL},8:{n:"PtgAttrGoto",f:$L},16:{n:"PtgAttrSum",f:rk},32:{n:"PtgAttrBaxcel",f:VE},33:{n:"PtgAttrBaxcel",f:VE},64:{n:"PtgAttrSpace",f:qL},65:{n:"PtgAttrSpaceSemi",f:ZL},128:{n:"PtgAttrIfError",f:XL},255:{}};function zk(t,e,i,s){if(s.biff<8)return Vr(t,e);for(var r=t.l+e,n=[],o=0;o!==i.length;++o)switch(i[o][0]){case"PtgArray":i[o][1]=pk(t,0,s),n.push(i[o][1]);break;case"PtgMemArea":i[o][2]=uk(t,i[o][1],s),n.push(i[o][2]);break;case"PtgExp":s&&s.biff==12&&(i[o][1][1]=t.read_shift(4),n.push(i[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+i[o][0];default:break}return e=r-t.l,e!==0&&n.push(Vr(t,e)),n}function jk(t,e,i){for(var s=t.l+e,r,n,o=[];s!=t.l;)e=s-t.l,n=t[t.l],r=BE[n]||BE[Hk[n]],(n===24||n===25)&&(r=(n===24?Wk:Uk)[t[t.l+1]]),!r||!r.f?Vr(t,e):o.push([r.n,r.f(t,e,i)]);return o}function $k(t){for(var e=[],i=0;i<t.length;++i){for(var s=t[i],r=[],n=0;n<s.length;++n){var o=s[n];if(o)switch(o[0]){case 2:r.push('"'+o[1].replace(/"/g,'""')+'"');break;default:r.push(o[1])}else r.push("")}e.push(r.join(","))}return e.join(";")}var Kk={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Xk(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function t_(t,e,i){if(!t)return"SH33TJSERR0";if(i.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var s=t.XTI[e];if(i.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!s)return"SH33TJSERR1";var r="";if(i.biff>8)switch(t[s[0]][0]){case 357:return r=s[1]==-1?"#REF":t.SheetNames[s[1]],s[1]==s[2]?r:r+":"+t.SheetNames[s[2]];case 358:return i.SID!=null?t.SheetNames[i.SID]:"SH33TJSSAME"+t[s[0]][0];case 355:default:return"SH33TJSSRC"+t[s[0]][0]}switch(t[s[0]][0][0]){case 1025:return r=s[1]==-1?"#REF":t.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?r:r+":"+t.SheetNames[s[2]];case 14849:return t[s[0]].slice(1).map(function(n){return n.Name}).join(";;");default:return t[s[0]][0][3]?(r=s[1]==-1?"#REF":t[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?r:r+":"+t[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function HE(t,e,i){var s=t_(t,e,i);return s=="#REF"?s:Xk(s,i)}function _l(t,e,i,s,r){var n=r&&r.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},a=[],l,h,c,d=0,p=0,u,m="";if(!t[0]||!t[0][0])return"";for(var f=-1,g="",y=0,x=t[0].length;y<x;++y){var T=t[0][y];switch(T[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),h=a.pop(),f>=0){switch(t[0][f][1][0]){case 0:g=ii(" ",t[0][f][1][1]);break;case 1:g=ii("\r",t[0][f][1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}h=h+g,f=-1}a.push(h+Kk[T[0]]+l);break;case"PtgIsect":l=a.pop(),h=a.pop(),a.push(h+" "+l);break;case"PtgUnion":l=a.pop(),h=a.pop(),a.push(h+","+l);break;case"PtgRange":l=a.pop(),h=a.pop(),a.push(h+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":c=_c(T[1][1],o,r),a.push(Tc(c,n));break;case"PtgRefN":c=i?_c(T[1][1],i,r):T[1][1],a.push(Tc(c,n));break;case"PtgRef3d":d=T[1][1],c=_c(T[1][2],o,r),m=HE(s,d,r);var A=m;a.push(m+"!"+Tc(c,n));break;case"PtgFunc":case"PtgFuncVar":var S=T[1][0],M=T[1][1];S||(S=0),S&=127;var B=S==0?[]:a.slice(-S);a.length-=S,M==="User"&&(M=B.shift()),a.push(M+"("+B.join(",")+")");break;case"PtgBool":a.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(T[1]);break;case"PtgNum":a.push(String(T[1]));break;case"PtgStr":a.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(T[1]);break;case"PtgAreaN":u=_E(T[1][1],i?{s:i}:o,r),a.push(I0(u,r));break;case"PtgArea":u=_E(T[1][1],o,r),a.push(I0(u,r));break;case"PtgArea3d":d=T[1][1],u=T[1][2],m=HE(s,d,r),a.push(m+"!"+I0(u,r));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=T[1][2];var j=(s.names||[])[p-1]||(s[0]||[])[p],O=j?j.Name:"SH33TJSNAME"+String(p);O&&O.slice(0,6)=="_xlfn."&&!r.xlfn&&(O=O.slice(6)),a.push(O);break;case"PtgNameX":var _=T[1][1];p=T[1][2];var P;if(r.biff<=5)_<0&&(_=-_),s[_]&&(P=s[_][p]);else{var R="";if(((s[_]||[])[0]||[])[0]==14849||(((s[_]||[])[0]||[])[0]==1025?s[_][p]&&s[_][p].itab>0&&(R=s.SheetNames[s[_][p].itab-1]+"!"):R=s.SheetNames[p-1]+"!"),s[_]&&s[_][p])R+=s[_][p].Name;else if(s[0]&&s[0][p])R+=s[0][p].Name;else{var v=(t_(s,_,r)||"").split(";;");v[p-1]?R=v[p-1]:R+="SH33TJSERRX"}a.push(R);break}P||(P={Name:"SH33TJSERRY"}),a.push(P.Name);break;case"PtgParen":var C="(",D=")";if(f>=0){switch(g="",t[0][f][1][0]){case 2:C=ii(" ",t[0][f][1][1])+C;break;case 3:C=ii("\r",t[0][f][1][1])+C;break;case 4:D=ii(" ",t[0][f][1][1])+D;break;case 5:D=ii("\r",t[0][f][1][1])+D;break;default:if(r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}f=-1}a.push(C+a.pop()+D);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":c={c:T[1][1],r:T[1][0]};var E={c:i.c,r:i.r};if(s.sharedf[Gt(c)]){var L=s.sharedf[Gt(c)];a.push(_l(L,o,E,s,r))}else{var G=!1;for(l=0;l!=s.arrayf.length;++l)if(h=s.arrayf[l],!(c.c<h[0].s.c||c.c>h[0].e.c)&&!(c.r<h[0].s.r||c.r>h[0].e.r)){a.push(_l(h[1],o,E,s,r)),G=!0;break}G||a.push(T[1])}break;case"PtgArray":a.push("{"+$k(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var Y=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(r.biff!=3&&f>=0&&Y.indexOf(t[0][y][0])==-1){T=t[0][f];var J=!0;switch(T[1][0]){case 4:J=!1;case 0:g=ii(" ",T[1][1]);break;case 5:J=!1;case 1:g=ii("\r",T[1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}a.push((J?g:"")+a.pop()+(J?"":g)),f=-1}}if(a.length>1&&r.WTF)throw new Error("bad formula stack");return a[0]}function Yk(t){if(t==null){var e=Fe(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Xo(t);return Xo(0)}function qk(t,e,i,s,r){var n=Yo(e,i,r),o=Yk(t.v),a=Fe(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var h=Fe(t.bf.length),c=0;c<t.bf.length;++c)h[c]=t.bf[c];var d=Gi([n,o,a,h]);return d}function Dp(t,e,i){var s=t.read_shift(4),r=jk(t,s,i),n=t.read_shift(4),o=n>0?zk(t,n,r,i):null;return[r,o]}var Zk=Dp,Fp=Dp,Qk=Dp,Jk=Dp,eN={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},i_={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},tN={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function iN(t){var e="of:="+t.replace(lv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function sN(t){return t.replace(/\./,"!")}var Ac=typeof Map<"u";function dv(t,e,i){var s=0,r=t.length;if(i){if(Ac?i.has(e):Object.prototype.hasOwnProperty.call(i,e)){for(var n=Ac?i.get(e):i[e];s<n.length;++s)if(t[n[s]].t===e)return t.Count++,n[s]}}else for(;s<r;++s)if(t[s].t===e)return t.Count++,s;return t[r]={t:e},t.Count++,t.Unique++,i&&(Ac?(i.has(e)||i.set(e,[]),i.get(e).push(r)):(Object.prototype.hasOwnProperty.call(i,e)||(i[e]=[]),i[e].push(r))),r}function Pp(t,e){var i={min:t+1,max:t+1},s=-1;return e.MDW&&(on=e.MDW),e.width!=null?i.customWidth=1:e.wpx!=null?s=yp(e.wpx):e.wch!=null&&(s=e.wch),s>-1?(i.width=W0(s),i.customWidth=1):e.width!=null&&(i.width=e.width),e.hidden&&(i.hidden=!0),e.level!=null&&(i.outlineLevel=i.level=e.level),i}function s_(t,e){if(t){var i=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(i=[1,1,1,1,.5,.5]),t.left==null&&(t.left=i[0]),t.right==null&&(t.right=i[1]),t.top==null&&(t.top=i[2]),t.bottom==null&&(t.bottom=i[3]),t.header==null&&(t.header=i[4]),t.footer==null&&(t.footer=i[5])}}function Wn(t,e,i){var s=i.revssf[e.z!=null?e.z:"General"],r=60,n=t.length;if(s==null&&i.ssf){for(;r<392;++r)if(i.ssf[r]==null){sb(e.z,r),i.ssf[r]=e.z,i.revssf[e.z]=s=r;break}}for(r=0;r!=n;++r)if(t[r].numFmtId===s)return r;return t[n]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},n}function rN(t,e,i){if(t&&t["!ref"]){var s=Xt(t["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+i+"): "+t["!ref"])}}function nN(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',i=0;i!=t.length;++i)e+='<mergeCell ref="'+fi(t[i])+'"/>';return e+"</mergeCells>"}function oN(t,e,i,s,r){var n=!1,o={},a=null;if(s.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[i];try{e.Workbook&&(l=e.Workbook.Sheets[i].CodeName||l)}catch{}n=!0,o.codeName=sn(Nt(l))}if(t&&t["!outline"]){var h={summaryBelow:1,summaryRight:1};t["!outline"].above&&(h.summaryBelow=0),t["!outline"].left&&(h.summaryRight=0),a=(a||"")+Ue("outlinePr",null,h)}!n&&!a||(r[r.length]=Ue("sheetPr",a,o))}var aN=["objects","scenarios","selectLockedCells","selectUnlockedCells"],lN=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function hN(t){var e={sheet:1};return aN.forEach(function(i){t[i]!=null&&t[i]&&(e[i]="1")}),lN.forEach(function(i){t[i]!=null&&!t[i]&&(e[i]="0")}),t.password&&(e.password=Bb(t.password).toString(16).toUpperCase()),Ue("sheetProtection",null,e)}function cN(t){return s_(t),Ue("pageMargins",null,t)}function dN(t,e){for(var i=["<cols>"],s,r=0;r!=e.length;++r)(s=e[r])&&(i[i.length]=Ue("col",null,Pp(r,s)));return i[i.length]="</cols>",i.join("")}function uN(t,e,i,s){var r=typeof t.ref=="string"?t.ref:fi(t.ref);i.Workbook||(i.Workbook={Sheets:[]}),i.Workbook.Names||(i.Workbook.Names=[]);var n=i.Workbook.Names,o=Ws(r);o.s.r==o.e.r&&(o.e.r=Ws(e["!ref"]).e.r,r=fi(o));for(var a=0;a<n.length;++a){var l=n[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==s){l.Ref="'"+i.SheetNames[s]+"'!"+r;break}}return a==n.length&&n.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+i.SheetNames[s]+"'!"+r}),Ue("autoFilter",null,{ref:r})}function pN(t,e,i,s){var r={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(r.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),Ue("sheetViews",Ue("sheetView",null,r),{})}function fN(t,e,i,s){if(t.c&&i["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var r="",n=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":r=t.v?"1":"0";break;case"n":r=""+t.v;break;case"e":r=Nc[t.v];break;case"d":s&&s.cellDates?r=as(t.v,-1).toISOString():(t=Ts(t),t.t="n",r=""+(t.v=_s(as(t.v)))),typeof t.z>"u"&&(t.z=si[14]);break;default:r=t.v;break}var a=Vi("v",Nt(r)),l={r:e},h=Wn(s.cellXfs,t,s);switch(h!==0&&(l.s=h),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){a=Vi("v",""+dv(s.Strings,t.v,s.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=n&&(t.t=n,t.v=o),typeof t.f=="string"&&t.f){var c=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;a=Ue("f",Nt(t.f),c)+(t.v!=null?a:"")}return t.l&&i["!links"].push([e,t.l]),t.D&&(l.cm=1),Ue("c",a,l)}function gN(t,e,i,s){var r=[],n=[],o=Xt(t["!ref"]),a="",l,h="",c=[],d=0,p=0,u=t["!rows"],m=Array.isArray(t),f={r:h},g,y=-1;for(p=o.s.c;p<=o.e.c;++p)c[p]=$i(p);for(d=o.s.r;d<=o.e.r;++d){for(n=[],h=Bi(d),p=o.s.c;p<=o.e.c;++p){l=c[p]+h;var x=m?(t[d]||[])[p]:t[l];x!==void 0&&(a=fN(x,l,t,e,i,s))!=null&&n.push(a)}(n.length>0||u&&u[d])&&(f={r:h},u&&u[d]&&(g=u[d],g.hidden&&(f.hidden=1),y=-1,g.hpx?y=wp(g.hpx):g.hpt&&(y=g.hpt),y>-1&&(f.ht=y,f.customHeight=1),g.level&&(f.outlineLevel=g.level)),r[r.length]=Ue("row",n.join(""),f))}if(u)for(;d<u.length;++d)u&&u[d]&&(f={r:d+1},g=u[d],g.hidden&&(f.hidden=1),y=-1,g.hpx?y=wp(g.hpx):g.hpt&&(y=g.hpt),y>-1&&(f.ht=y,f.customHeight=1),g.level&&(f.outlineLevel=g.level),r[r.length]=Ue("row","",f));return r.join("")}function r_(t,e,i,s){var r=[gi,Ue("worksheet",null,{xmlns:Tl[0],"xmlns:r":Di.r})],n=i.SheetNames[t],o=0,a="",l=i.Sheets[n];l==null&&(l={});var h=l["!ref"]||"A1",c=Xt(h);if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575),h=fi(c)}s||(s={}),l["!comments"]=[];var d=[];oN(l,i,t,e,r),r[r.length]=Ue("dimension",null,{ref:h}),r[r.length]=pN(l,e,t,i),e.sheetFormat&&(r[r.length]=Ue("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(r[r.length]=dN(l,l["!cols"])),r[o=r.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=gN(l,e,t,i,s),a.length>0&&(r[r.length]=a)),r.length>o+1&&(r[r.length]="</sheetData>",r[o]=r[o].replace("/>",">")),l["!protect"]&&(r[r.length]=hN(l["!protect"])),l["!autofilter"]!=null&&(r[r.length]=uN(l["!autofilter"],l,i,t)),l["!merges"]!=null&&l["!merges"].length>0&&(r[r.length]=nN(l["!merges"]));var p=-1,u,m=-1;return l["!links"].length>0&&(r[r.length]="<hyperlinks>",l["!links"].forEach(function(f){f[1].Target&&(u={ref:f[0]},f[1].Target.charAt(0)!="#"&&(m=kt(s,-1,Nt(f[1].Target).replace(/#.*$/,""),Tt.HLINK),u["r:id"]="rId"+m),(p=f[1].Target.indexOf("#"))>-1&&(u.location=Nt(f[1].Target.slice(p+1))),f[1].Tooltip&&(u.tooltip=Nt(f[1].Tooltip)),r[r.length]=Ue("hyperlink",null,u))}),r[r.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(r[r.length]=cN(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(r[r.length]=Vi("ignoredErrors",Ue("ignoredError",null,{numberStoredAsText:1,sqref:h}))),d.length>0&&(m=kt(s,-1,"../drawings/drawing"+(t+1)+".xml",Tt.DRAW),r[r.length]=Ue("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=d),l["!comments"].length>0&&(m=kt(s,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Tt.VML),r[r.length]=Ue("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),r.length>1&&(r[r.length]="</worksheet>",r[1]=r[1].replace("/>",">")),r.join("")}function mN(t,e){var i={},s=t.l+e;i.r=t.read_shift(4),t.l+=4;var r=t.read_shift(2);t.l+=1;var n=t.read_shift(1);return t.l=s,n&7&&(i.level=n&7),n&16&&(i.hidden=!0),n&32&&(i.hpt=r/20),i}function vN(t,e,i){var s=Fe(145),r=(i["!rows"]||[])[t]||{};s.write_shift(4,t),s.write_shift(4,0);var n=320;r.hpx?n=wp(r.hpx)*20:r.hpt&&(n=r.hpt*20),s.write_shift(2,n),s.write_shift(1,0);var o=0;r.level&&(o|=r.level),r.hidden&&(o|=16),(r.hpx||r.hpt)&&(o|=32),s.write_shift(1,o),s.write_shift(1,0);var a=0,l=s.l;s.l+=4;for(var h={r:t,c:0},c=0;c<16;++c)if(!(e.s.c>c+1<<10||e.e.c<c<<10)){for(var d=-1,p=-1,u=c<<10;u<c+1<<10;++u){h.c=u;var m=Array.isArray(i)?(i[h.r]||[])[h.c]:i[Gt(h)];m&&(d<0&&(d=u),p=u)}d<0||(++a,s.write_shift(4,d),s.write_shift(4,p))}var f=s.l;return s.l=l,s.write_shift(4,a),s.l=f,s.length>s.l?s.slice(0,s.l):s}function CN(t,e,i,s){var r=vN(s,i,e);(r.length>17||(e["!rows"]||[])[s])&&Ne(t,0,r)}var yN=ea,wN=Dl;function xN(){}function SN(t,e){var i={},s=t[t.l];return++t.l,i.above=!(s&64),i.left=!(s&128),t.l+=18,i.name=MI(t,e-19),i}function EN(t,e,i){i==null&&(i=Fe(84+4*t.length));var s=192;e&&(e.above&&(s&=-65),e.left&&(s&=-129)),i.write_shift(1,s);for(var r=1;r<3;++r)i.write_shift(1,0);return mp({auto:1},i),i.write_shift(-4,-1),i.write_shift(-4,-1),yb(t,i),i.slice(0,i.l)}function bN(t){var e=sr(t);return[e]}function _N(t,e,i){return i==null&&(i=Fe(8)),Zo(e,i)}function TN(t){var e=Qo(t);return[e]}function AN(t,e,i){return i==null&&(i=Fe(4)),Jo(e,i)}function RN(t){var e=sr(t),i=t.read_shift(1);return[e,i,"b"]}function DN(t,e,i){return i==null&&(i=Fe(9)),Zo(e,i),i.write_shift(1,t.v?1:0),i}function FN(t){var e=Qo(t),i=t.read_shift(1);return[e,i,"b"]}function PN(t,e,i){return i==null&&(i=Fe(5)),Jo(e,i),i.write_shift(1,t.v?1:0),i}function MN(t){var e=sr(t),i=t.read_shift(1);return[e,i,"e"]}function IN(t,e,i){return i==null&&(i=Fe(9)),Zo(e,i),i.write_shift(1,t.v),i}function ON(t){var e=Qo(t),i=t.read_shift(1);return[e,i,"e"]}function LN(t,e,i){return i==null&&(i=Fe(8)),Jo(e,i),i.write_shift(1,t.v),i.write_shift(2,0),i.write_shift(1,0),i}function kN(t){var e=sr(t),i=t.read_shift(4);return[e,i,"s"]}function NN(t,e,i){return i==null&&(i=Fe(12)),Zo(e,i),i.write_shift(4,e.v),i}function GN(t){var e=Qo(t),i=t.read_shift(4);return[e,i,"s"]}function VN(t,e,i){return i==null&&(i=Fe(8)),Jo(e,i),i.write_shift(4,e.v),i}function BN(t){var e=sr(t),i=Fl(t);return[e,i,"n"]}function HN(t,e,i){return i==null&&(i=Fe(16)),Zo(e,i),Xo(t.v,i),i}function WN(t){var e=Qo(t),i=Fl(t);return[e,i,"n"]}function UN(t,e,i){return i==null&&(i=Fe(12)),Jo(e,i),Xo(t.v,i),i}function zN(t){var e=sr(t),i=wb(t);return[e,i,"n"]}function jN(t,e,i){return i==null&&(i=Fe(12)),Zo(e,i),xb(t.v,i),i}function $N(t){var e=Qo(t),i=wb(t);return[e,i,"n"]}function KN(t,e,i){return i==null&&(i=Fe(8)),Jo(e,i),xb(t.v,i),i}function XN(t){var e=sr(t),i=sv(t);return[e,i,"is"]}function YN(t){var e=sr(t),i=Ki(t);return[e,i,"str"]}function qN(t,e,i){return i==null&&(i=Fe(12+4*t.v.length)),Zo(e,i),Pi(t.v,i),i.length>i.l?i.slice(0,i.l):i}function ZN(t){var e=Qo(t),i=Ki(t);return[e,i,"str"]}function QN(t,e,i){return i==null&&(i=Fe(8+4*t.v.length)),Jo(e,i),Pi(t.v,i),i.length>i.l?i.slice(0,i.l):i}function JN(t,e,i){var s=t.l+e,r=sr(t);r.r=i["!row"];var n=t.read_shift(1),o=[r,n,"b"];if(i.cellFormula){t.l+=2;var a=Fp(t,s-t.l,i);o[3]=_l(a,null,r,i.supbooks,i)}else t.l=s;return o}function e2(t,e,i){var s=t.l+e,r=sr(t);r.r=i["!row"];var n=t.read_shift(1),o=[r,n,"e"];if(i.cellFormula){t.l+=2;var a=Fp(t,s-t.l,i);o[3]=_l(a,null,r,i.supbooks,i)}else t.l=s;return o}function t2(t,e,i){var s=t.l+e,r=sr(t);r.r=i["!row"];var n=Fl(t),o=[r,n,"n"];if(i.cellFormula){t.l+=2;var a=Fp(t,s-t.l,i);o[3]=_l(a,null,r,i.supbooks,i)}else t.l=s;return o}function i2(t,e,i){var s=t.l+e,r=sr(t);r.r=i["!row"];var n=Ki(t),o=[r,n,"str"];if(i.cellFormula){t.l+=2;var a=Fp(t,s-t.l,i);o[3]=_l(a,null,r,i.supbooks,i)}else t.l=s;return o}var s2=ea,r2=Dl;function n2(t,e){return e==null&&(e=Fe(4)),e.write_shift(4,t),e}function o2(t,e){var i=t.l+e,s=ea(t,16),r=rv(t),n=Ki(t),o=Ki(t),a=Ki(t);t.l=i;var l={rfx:s,relId:r,loc:n,display:a};return o&&(l.Tooltip=o),l}function a2(t,e){var i=Fe(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Dl({s:Fi(t[0]),e:Fi(t[0])},i),nv("rId"+e,i);var s=t[1].Target.indexOf("#"),r=s==-1?"":t[1].Target.slice(s+1);return Pi(r||"",i),Pi(t[1].Tooltip||"",i),Pi("",i),i.slice(0,i.l)}function l2(){}function h2(t,e,i){var s=t.l+e,r=Sb(t,16),n=t.read_shift(1),o=[r];if(o[2]=n,i.cellFormula){var a=Zk(t,s-t.l,i);o[1]=a}else t.l=s;return o}function c2(t,e,i){var s=t.l+e,r=ea(t,16),n=[r];if(i.cellFormula){var o=Jk(t,s-t.l,i);n[1]=o,t.l=s}else t.l=s;return n}function d2(t,e,i){i==null&&(i=Fe(18));var s=Pp(t,e);i.write_shift(-4,t),i.write_shift(-4,t),i.write_shift(4,(s.width||10)*256),i.write_shift(4,0);var r=0;return e.hidden&&(r|=1),typeof s.width=="number"&&(r|=2),e.level&&(r|=e.level<<8),i.write_shift(2,r),i}var n_=["left","right","top","bottom","header","footer"];function u2(t){var e={};return n_.forEach(function(i){e[i]=Fl(t,8)}),e}function p2(t,e){return e==null&&(e=Fe(6*8)),s_(t),n_.forEach(function(i){Xo(t[i],e)}),e}function f2(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function g2(t,e,i){i==null&&(i=Fe(30));var s=924;return(((e||{}).Views||[])[0]||{}).RTL&&(s|=32),i.write_shift(2,s),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(1,0),i.write_shift(1,0),i.write_shift(2,0),i.write_shift(2,100),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i}function m2(t){var e=Fe(24);return e.write_shift(4,4),e.write_shift(4,1),Dl(t,e),e}function v2(t,e){return e==null&&(e=Fe(16*4+2)),e.write_shift(2,t.password?Bb(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(i){i[1]?e.write_shift(4,t[i[0]]!=null&&!t[i[0]]?1:0):e.write_shift(4,t[i[0]]!=null&&t[i[0]]?0:1)}),e}function C2(){}function y2(){}function w2(t,e,i,s,r,n,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=Ts(e),e.z=e.z||si[14],e.v=_s(as(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var l={r:i,c:s};switch(l.s=Wn(r.cellXfs,e,r),e.l&&n["!links"].push([Gt(l),e.l]),e.c&&n["!comments"].push([Gt(l),e.c]),e.t){case"s":case"str":return r.bookSST?(a=dv(r.Strings,e.v,r.revStrings),l.t="s",l.v=a,o?Ne(t,18,VN(e,l)):Ne(t,7,NN(e,l))):(l.t="str",o?Ne(t,17,QN(e,l)):Ne(t,6,qN(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?Ne(t,13,KN(e,l)):Ne(t,2,jN(e,l)):o?Ne(t,16,UN(e,l)):Ne(t,5,HN(e,l)),!0;case"b":return l.t="b",o?Ne(t,15,PN(e,l)):Ne(t,4,DN(e,l)),!0;case"e":return l.t="e",o?Ne(t,14,LN(e,l)):Ne(t,3,IN(e,l)),!0}return o?Ne(t,12,AN(e,l)):Ne(t,1,_N(e,l)),!0}function x2(t,e,i,s){var r=Xt(e["!ref"]||"A1"),n,o="",a=[];Ne(t,145);var l=Array.isArray(e),h=r.e.r;e["!rows"]&&(h=Math.max(r.e.r,e["!rows"].length-1));for(var c=r.s.r;c<=h;++c){o=Bi(c),CN(t,e,r,c);var d=!1;if(c<=r.e.r)for(var p=r.s.c;p<=r.e.c;++p){c===r.s.r&&(a[p]=$i(p)),n=a[p]+o;var u=l?(e[c]||[])[p]:e[n];if(!u){d=!1;continue}d=w2(t,u,c,p,s,e,d)}}Ne(t,146)}function S2(t,e){!e||!e["!merges"]||(Ne(t,177,n2(e["!merges"].length)),e["!merges"].forEach(function(i){Ne(t,176,r2(i))}),Ne(t,178))}function E2(t,e){!e||!e["!cols"]||(Ne(t,390),e["!cols"].forEach(function(i,s){i&&Ne(t,60,d2(s,i))}),Ne(t,391))}function b2(t,e){!e||!e["!ref"]||(Ne(t,648),Ne(t,649,m2(Xt(e["!ref"]))),Ne(t,650))}function _2(t,e,i){e["!links"].forEach(function(s){if(s[1].Target){var r=kt(i,-1,s[1].Target.replace(/#.*$/,""),Tt.HLINK);Ne(t,494,a2(s,r))}}),delete e["!links"]}function T2(t,e,i,s){if(e["!comments"].length>0){var r=kt(s,-1,"../drawings/vmlDrawing"+(i+1)+".vml",Tt.VML);Ne(t,551,nv("rId"+r)),e["!legacy"]=r}}function A2(t,e,i,s){if(e["!autofilter"]){var r=e["!autofilter"],n=typeof r.ref=="string"?r.ref:fi(r.ref);i.Workbook||(i.Workbook={Sheets:[]}),i.Workbook.Names||(i.Workbook.Names=[]);var o=i.Workbook.Names,a=Ws(n);a.s.r==a.e.r&&(a.e.r=Ws(e["!ref"]).e.r,n=fi(a));for(var l=0;l<o.length;++l){var h=o[l];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==s){h.Ref="'"+i.SheetNames[s]+"'!"+n;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+i.SheetNames[s]+"'!"+n}),Ne(t,161,Dl(Xt(n))),Ne(t,162)}}function R2(t,e,i){Ne(t,133),Ne(t,137,g2(e,i)),Ne(t,138),Ne(t,134)}function D2(t,e){e["!protect"]&&Ne(t,535,v2(e["!protect"]))}function F2(t,e,i,s){var r=bs(),n=i.SheetNames[t],o=i.Sheets[n]||{},a=n;try{i&&i.Workbook&&(a=i.Workbook.Sheets[t].CodeName||a)}catch{}var l=Xt(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ne(r,129),(i.vbaraw||o["!outline"])&&Ne(r,147,EN(a,o["!outline"])),Ne(r,148,wN(l)),R2(r,o,i.Workbook),E2(r,o,t,e,i),x2(r,o,t,e,i),D2(r,o),A2(r,o,i,t),S2(r,o),_2(r,o,s),o["!margins"]&&Ne(r,476,p2(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&b2(r,o),T2(r,o,t,s),Ne(r,130),r.end()}function P2(t,e){t.l+=10;var i=Ki(t,e-10);return{name:i}}var M2=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function I2(t){return!t.Workbook||!t.Workbook.WBProps?"false":hI(t.Workbook.WBProps.date1904)?"true":"false"}var O2="][*?/\\".split("");function o_(t,e){if(t.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var i=!0;return O2.forEach(function(s){if(t.indexOf(s)!=-1){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");i=!1}}),i}function L2(t,e,i){t.forEach(function(s,r){o_(s);for(var n=0;n<r;++n)if(s==t[n])throw new Error("Duplicate Sheet Name: "+s);if(i){var o=e&&e[r]&&e[r].CodeName||s;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function k2(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];L2(t.SheetNames,e,!!t.vbaraw);for(var i=0;i<t.SheetNames.length;++i)rN(t.Sheets[t.SheetNames[i]],t.SheetNames[i],i)}function a_(t){var e=[gi];e[e.length]=Ue("workbook",null,{xmlns:Tl[0],"xmlns:r":Di.r});var i=t.Workbook&&(t.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(M2.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(s[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(s.codeName=t.Workbook.WBProps.CodeName,delete s.CodeName)),e[e.length]=Ue("workbookPr",null,s);var r=t.Workbook&&t.Workbook.Sheets||[],n=0;if(r&&r[0]&&r[0].Hidden){for(e[e.length]="<bookViews>",n=0;n!=t.SheetNames.length&&!(!r[n]||!r[n].Hidden);++n);n==t.SheetNames.length&&(n=0),e[e.length]='<workbookView firstSheet="'+n+'" activeTab="'+n+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",n=0;n!=t.SheetNames.length;++n){var o={name:Nt(t.SheetNames[n].slice(0,31))};if(o.sheetId=""+(n+1),o["r:id"]="rId"+(n+1),r[n])switch(r[n].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Ue("sheet",null,o)}return e[e.length]="</sheets>",i&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=Ue("definedName",Nt(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function N2(t,e){var i={};return i.Hidden=t.read_shift(4),i.iTabID=t.read_shift(4),i.strRelID=H0(t,e-8),i.name=Ki(t),i}function G2(t,e){return e||(e=Fe(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),nv(t.strRelID,e),Pi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function V2(t,e){var i={},s=t.read_shift(4);i.defaultThemeVersion=t.read_shift(4);var r=e>8?Ki(t):"";return r.length>0&&(i.CodeName=r),i.autoCompressPictures=!!(s&65536),i.backupFile=!!(s&64),i.checkCompatibility=!!(s&4096),i.date1904=!!(s&1),i.filterPrivacy=!!(s&8),i.hidePivotFieldList=!!(s&1024),i.promptedSolutions=!!(s&16),i.publishItems=!!(s&2048),i.refreshAllConnections=!!(s&262144),i.saveExternalLinkValues=!!(s&128),i.showBorderUnselectedTables=!!(s&4),i.showInkAnnotation=!!(s&32),i.showObjects=["all","placeholders","none"][s>>13&3],i.showPivotChartFilter=!!(s&32768),i.updateLinks=["userSet","never","always"][s>>8&3],i}function B2(t,e){e||(e=Fe(72));var i=0;return t&&t.filterPrivacy&&(i|=8),e.write_shift(4,i),e.write_shift(4,0),yb(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function H2(t,e,i){var s=t.l+e;t.l+=4,t.l+=1;var r=t.read_shift(4),n=II(t),o=Qk(t,0,i),a=rv(t);t.l=s;var l={Name:n,Ptg:o};return r<268435455&&(l.Sheet=r),a&&(l.Comment=a),l}function W2(t,e){Ne(t,143);for(var i=0;i!=e.SheetNames.length;++i){var s=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[i]&&e.Workbook.Sheets[i].Hidden||0,r={Hidden:s,iTabID:i+1,strRelID:"rId"+(i+1),name:e.SheetNames[i]};Ne(t,156,G2(r))}Ne(t,144)}function U2(t,e){e||(e=Fe(127));for(var i=0;i!=4;++i)e.write_shift(4,0);return Pi("SheetJS",e),Pi(Rc.version,e),Pi(Rc.version,e),Pi("7262",e),e.length>e.l?e.slice(0,e.l):e}function z2(t,e){e||(e=Fe(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var i=120;return e.write_shift(1,i),e.length>e.l?e.slice(0,e.l):e}function j2(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var i=e.Workbook.Sheets,s=0,r=-1,n=-1;s<i.length;++s)!i[s]||!i[s].Hidden&&r==-1?r=s:i[s].Hidden==1&&n==-1&&(n=s);n>r||(Ne(t,135),Ne(t,158,z2(r)),Ne(t,136))}}function $2(t,e){var i=bs();return Ne(i,131),Ne(i,128,U2()),Ne(i,153,B2(t.Workbook&&t.Workbook.WBProps||null)),j2(i,t,e),W2(i,t,e),Ne(i,132),i.end()}function K2(t,e,i){return(e.slice(-4)===".bin"?$2:a_)(t,i)}function X2(t,e,i,s,r){return(e.slice(-4)===".bin"?F2:r_)(t,i,s,r)}function Y2(t,e,i){return(e.slice(-4)===".bin"?pL:Ub)(t,i)}function q2(t,e,i){return(e.slice(-4)===".bin"?BO:Vb)(t,i)}function Z2(t,e,i){return(e.slice(-4)===".bin"?DL:Xb)(t,i)}function Q2(t){return(t.slice(-4)===".bin"?xL:$b)()}function J2(t,e){var i=[];return t.Props&&i.push(YI(t.Props,e)),t.Custprops&&i.push(qI(t.Props,t.Custprops,e)),i.join("")}function eG(){return""}function tG(t,e){var i=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(s,r){var n=[];n.push(Ue("NumberFormat",null,{"ss:Format":Nt(si[s.numFmtId])}));var o={"ss:ID":"s"+(21+r)};i.push(Ue("Style",n.join(""),o))}),Ue("Styles",i.join(""))}function l_(t){return Ue("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+hv(t.Ref,{r:0,c:0})})}function iG(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,i=[],s=0;s<e.length;++s){var r=e[s];r.Sheet==null&&(r.Name.match(/^_xlfn\./)||i.push(l_(r)))}return Ue("Names",i.join(""))}function sG(t,e,i,s){if(!t||!((s||{}).Workbook||{}).Names)return"";for(var r=s.Workbook.Names,n=[],o=0;o<r.length;++o){var a=r[o];a.Sheet==i&&(a.Name.match(/^_xlfn\./)||n.push(l_(a)))}return n.join("")}function rG(t,e,i,s){if(!t)return"";var r=[];if(t["!margins"]&&(r.push("<PageSetup>"),t["!margins"].header&&r.push(Ue("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&r.push(Ue("Footer",null,{"x:Margin":t["!margins"].footer})),r.push(Ue("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),r.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[i])if(s.Workbook.Sheets[i].Hidden)r.push(Ue("Visible",s.Workbook.Sheets[i].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var n=0;n<i&&!(s.Workbook.Sheets[n]&&!s.Workbook.Sheets[n].Hidden);++n);n==i&&r.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&r.push("<DisplayRightToLeft/>"),t["!protect"]&&(r.push(Vi("ProtectContents","True")),t["!protect"].objects&&r.push(Vi("ProtectObjects","True")),t["!protect"].scenarios&&r.push(Vi("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?r.push(Vi("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&r.push(Vi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&r.push("<"+o[1]+"/>")})),r.length==0?"":Ue("WorksheetOptions",r.join(""),{xmlns:Hs.x})}function nG(t){return t.map(function(e){var i=lI(e.t||""),s=Ue("ss:Data",i,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ue("Comment",s,{"ss:Author":e.a})}).join("")}function oG(t,e,i,s,r,n,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+Nt(hv(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=Fi(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=Nt(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=Nt(t.l.Tooltip))),i["!merges"])for(var h=i["!merges"],c=0;c!=h.length;++c)h[c].s.c!=o.c||h[c].s.r!=o.r||(h[c].e.c>h[c].s.c&&(a["ss:MergeAcross"]=h[c].e.c-h[c].s.c),h[c].e.r>h[c].s.r&&(a["ss:MergeDown"]=h[c].e.r-h[c].s.r));var d="",p="";switch(t.t){case"z":if(!s.sheetStubs)return"";break;case"n":d="Number",p=String(t.v);break;case"b":d="Boolean",p=t.v?"1":"0";break;case"e":d="Error",p=Nc[t.v];break;case"d":d="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||si[14]);break;case"s":d="String",p=aI(t.v||"");break}var u=Wn(s.cellXfs,t,s);a["ss:StyleID"]="s"+(21+u),a["ss:Index"]=o.c+1;var m=t.v!=null?p:"",f=t.t=="z"?"":'<Data ss:Type="'+d+'">'+m+"</Data>";return(t.c||[]).length>0&&(f+=nG(t.c)),Ue("Cell",f,a)}function aG(t,e){var i='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Wb(e.hpt)),e.hpx&&(i+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(i+=' ss:Hidden="1"')),i+">"}function lG(t,e,i,s){if(!t["!ref"])return"";var r=Xt(t["!ref"]),n=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(g,y){av(g);var x=!!g.width,T=Pp(y,g),A={"ss:Index":y+1};x&&(A["ss:Width"]=Cp(T.width)),g.hidden&&(A["ss:Hidden"]="1"),a.push(Ue("Column",null,A))});for(var l=Array.isArray(t),h=r.s.r;h<=r.e.r;++h){for(var c=[aG(h,(t["!rows"]||[])[h])],d=r.s.c;d<=r.e.c;++d){var p=!1;for(o=0;o!=n.length;++o)if(!(n[o].s.c>d)&&!(n[o].s.r>h)&&!(n[o].e.c<d)&&!(n[o].e.r<h)){(n[o].s.c!=d||n[o].s.r!=h)&&(p=!0);break}if(!p){var u={r:h,c:d},m=Gt(u),f=l?(t[h]||[])[d]:t[m];c.push(oG(f,m,t,e,i,s,u))}}c.push("</Row>"),c.length>2&&a.push(c.join(""))}return a.join("")}function hG(t,e,i){var s=[],r=i.SheetNames[t],n=i.Sheets[r],o=n?sG(n,e,t,i):"";return o.length>0&&s.push("<Names>"+o+"</Names>"),o=n?lG(n,e,t,i):"",o.length>0&&s.push("<Table>"+o+"</Table>"),s.push(rG(n,e,t,i)),s.join("")}function cG(t,e){e||(e={}),t.SSF||(t.SSF=Ts(si)),t.SSF&&(_p(),bp(t.SSF),e.revssf=Tp(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Wn(e.cellXfs,{},{revssf:{General:0}}));var i=[];i.push(J2(t,e)),i.push(eG(t,e)),i.push(""),i.push("");for(var s=0;s<t.SheetNames.length;++s)i.push(Ue("Worksheet",hG(s,e,t),{"ss:Name":Nt(t.SheetNames[s])}));return i[2]=tG(t,e),i[3]=iG(t,e),gi+Ue("Workbook",i.join(""),{xmlns:Hs.ss,"xmlns:o":Hs.o,"xmlns:x":Hs.x,"xmlns:ss":Hs.ss,"xmlns:dt":Hs.dt,"xmlns:html":Hs.html})}var k0={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function dG(t,e){var i=[],s=[],r=[],n=0,o,a=fE(AE,"n"),l=fE(RE,"n");if(t.Props)for(o=Hi(t.Props),n=0;n<o.length;++n)(Object.prototype.hasOwnProperty.call(a,o[n])?i:Object.prototype.hasOwnProperty.call(l,o[n])?s:r).push([o[n],t.Props[o[n]]]);if(t.Custprops)for(o=Hi(t.Custprops),n=0;n<o.length;++n)Object.prototype.hasOwnProperty.call(t.Props||{},o[n])||(Object.prototype.hasOwnProperty.call(a,o[n])?i:Object.prototype.hasOwnProperty.call(l,o[n])?s:r).push([o[n],t.Custprops[o[n]]]);var h=[];for(n=0;n<r.length;++n)Mb.indexOf(r[n][0])>-1||Db.indexOf(r[n][0])>-1||r[n][1]!=null&&h.push(r[n]);s.length&&Wt.utils.cfb_add(e,"/SummaryInformation",IE(s,k0.SI,l,RE)),(i.length||h.length)&&Wt.utils.cfb_add(e,"/DocumentSummaryInformation",IE(i,k0.DSI,a,AE,h.length?h:null,k0.UDI))}function uG(t,e){var i=e||{},s=Wt.utils.cfb_new({root:"R"}),r="/Workbook";switch(i.bookType||"xls"){case"xls":i.bookType="biff8";case"xla":i.bookType||(i.bookType="xla");case"biff8":r="/Workbook",i.biff=8;break;case"biff5":r="/Book",i.biff=5;break;default:throw new Error("invalid type "+i.bookType+" for XLS CFB")}return Wt.utils.cfb_add(s,r,h_(t,i)),i.biff==8&&(t.Props||t.Custprops)&&dG(t,s),i.biff==8&&t.vbaraw&&FL(s,Wt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),s}var pG={0:{f:mN},1:{f:bN},2:{f:zN},3:{f:MN},4:{f:RN},5:{f:BN},6:{f:YN},7:{f:kN},8:{f:i2},9:{f:t2},10:{f:JN},11:{f:e2},12:{f:TN},13:{f:$N},14:{f:ON},15:{f:FN},16:{f:WN},17:{f:ZN},18:{f:GN},19:{f:sv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:H2},40:{},42:{},43:{f:YO},44:{f:KO},45:{f:QO},46:{f:eL},47:{f:JO},48:{},49:{f:TI},50:{},51:{f:mL},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:AO},62:{f:XN},63:{f:SL},64:{f:C2},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Vr,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:f2},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:SN},148:{f:yN,p:16},151:{f:l2},152:{},153:{f:V2},154:{},155:{},156:{f:N2},157:{},158:{},159:{T:1,f:NO},160:{T:-1},161:{T:1,f:ea},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:s2},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:fL},336:{T:-1},337:{f:yL,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:H0},357:{},358:{},359:{},360:{T:1},361:{},362:{f:xO},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:h2},427:{f:c2},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:u2},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:xN},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:o2},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:H0},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:AL},633:{T:1},634:{T:-1},635:{T:1,f:_L},636:{T:-1},637:{f:FI},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:P2},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:y2},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function je(t,e,i,s){var r=e;if(!isNaN(r)){var n=s||(i||[]).length||0,o=t.next(4);o.write_shift(2,r),o.write_shift(2,n),n>0&&ev(i)&&t.push(i)}}function fG(t,e,i,s){var r=s||(i||[]).length||0;if(r<=8224)return je(t,e,i,r);var n=e;if(!isNaN(n)){for(var o=i.parts||[],a=0,l=0,h=0;h+(o[a]||8224)<=8224;)h+=o[a]||8224,a++;var c=t.next(4);for(c.write_shift(2,n),c.write_shift(2,h),t.push(i.slice(l,l+h)),l+=h;l<r;){for(c=t.next(4),c.write_shift(2,60),h=0;h+(o[a]||8224)<=8224;)h+=o[a]||8224,a++;c.write_shift(2,h),t.push(i.slice(l,l+h)),l+=h}}}function Vc(t,e,i){return t||(t=Fe(7)),t.write_shift(2,e),t.write_shift(2,i),t.write_shift(2,0),t.write_shift(1,0),t}function gG(t,e,i,s){var r=Fe(9);return Vc(r,t,e),Ob(i,s||"b",r),r}function mG(t,e,i){var s=Fe(8+2*i.length);return Vc(s,t,e),s.write_shift(1,i.length),s.write_shift(i.length,i,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function vG(t,e,i,s){if(e.v!=null)switch(e.t){case"d":case"n":var r=e.t=="d"?_s(as(e.v)):e.v;r==(r|0)&&r>=0&&r<65536?je(t,2,PO(i,s,r)):je(t,3,FO(i,s,r));return;case"b":case"e":je(t,5,gG(i,s,e.v,e.t));return;case"s":case"str":je(t,4,mG(i,s,(e.v||"").slice(0,255)));return}je(t,1,Vc(null,i,s))}function CG(t,e,i,s){var r=Array.isArray(e),n=Xt(e["!ref"]||"A1"),o,a="",l=[];if(n.e.c>255||n.e.r>16383){if(s.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");n.e.c=Math.min(n.e.c,255),n.e.r=Math.min(n.e.c,16383),o=fi(n)}for(var h=n.s.r;h<=n.e.r;++h){a=Bi(h);for(var c=n.s.c;c<=n.e.c;++c){h===n.s.r&&(l[c]=$i(c)),o=l[c]+a;var d=r?(e[h]||[])[c]:e[o];d&&vG(t,d,h,c,s)}}}function yG(t,e){var i=e||{};Gr!=null&&i.dense==null&&(i.dense=Gr);for(var s=bs(),r=0,n=0;n<t.SheetNames.length;++n)t.SheetNames[n]==i.sheet&&(r=n);if(r==0&&i.sheet&&t.SheetNames[0]!=i.sheet)throw new Error("Sheet not found: "+i.sheet);return je(s,i.biff==4?1033:i.biff==3?521:9,ov(t,16,i)),CG(s,t.Sheets[t.SheetNames[r]],r,i,t),je(s,10),s.end()}function wG(t,e,i){je(t,49,pO({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},i))}function xG(t,e,i){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var r=s[0];r<=s[1];++r)e[r]!=null&&je(t,1054,mO(r,e[r],i))})}function SG(t,e){var i=Fe(19);i.write_shift(4,2151),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,3),i.write_shift(1,1),i.write_shift(4,0),je(t,2151,i),i=Fe(39),i.write_shift(4,2152),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,3),i.write_shift(1,0),i.write_shift(4,0),i.write_shift(2,1),i.write_shift(4,4),i.write_shift(2,0),Nb(Xt(e["!ref"]||"A1"),i),i.write_shift(4,4),je(t,2152,i)}function EG(t,e){for(var i=0;i<16;++i)je(t,224,LE({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(s){je(t,224,LE(s,0,e))})}function bG(t,e){for(var i=0;i<e["!links"].length;++i){var s=e["!links"][i];je(t,440,bO(s)),s[1].Tooltip&&je(t,2048,_O(s))}delete e["!links"]}function _G(t,e){if(e){var i=0;e.forEach(function(s,r){++i<=256&&s&&je(t,125,RO(Pp(r,s),r))})}}function TG(t,e,i,s,r){var n=16+Wn(r.cellXfs,e,r);if(e.v==null&&!e.bf){je(t,513,Yo(i,s,n));return}if(e.bf)je(t,6,qk(e,i,s,r,n));else switch(e.t){case"d":case"n":var o=e.t=="d"?_s(as(e.v)):e.v;je(t,515,wO(i,s,o,n,r));break;case"b":case"e":je(t,517,yO(i,s,e.v,n,r,e.t));break;case"s":case"str":if(r.bookSST){var a=dv(r.Strings,e.v,r.revStrings);je(t,253,fO(i,s,a,n,r))}else je(t,516,gO(i,s,(e.v||"").slice(0,255),n,r));break;default:je(t,513,Yo(i,s,n))}}function AG(t,e,i){var s=bs(),r=i.SheetNames[t],n=i.Sheets[r]||{},o=(i||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=Array.isArray(n),h=e.biff==8,c,d="",p=[],u=Xt(n["!ref"]||"A1"),m=h?65536:16384;if(u.e.c>255||u.e.r>=m){if(e.WTF)throw new Error("Range "+(n["!ref"]||"A1")+" exceeds format limit A1:IV16384");u.e.c=Math.min(u.e.c,255),u.e.r=Math.min(u.e.c,m-1)}je(s,2057,ov(i,16,e)),je(s,13,ir(1)),je(s,12,ir(100)),je(s,15,os(!0)),je(s,17,os(!1)),je(s,16,Xo(.001)),je(s,95,os(!0)),je(s,42,os(!1)),je(s,43,os(!1)),je(s,130,ir(1)),je(s,128,CO([0,0])),je(s,131,os(!1)),je(s,132,os(!1)),h&&_G(s,n["!cols"]),je(s,512,vO(u,e)),h&&(n["!links"]=[]);for(var f=u.s.r;f<=u.e.r;++f){d=Bi(f);for(var g=u.s.c;g<=u.e.c;++g){f===u.s.r&&(p[g]=$i(g)),c=p[g]+d;var y=l?(n[f]||[])[g]:n[c];y&&(TG(s,y,f,g,e),h&&y.l&&n["!links"].push([c,y.l]))}}var x=a.CodeName||a.name||r;return h&&je(s,574,uO((o.Views||[])[0])),h&&(n["!merges"]||[]).length&&je(s,229,EO(n["!merges"])),h&&bG(s,n),je(s,442,kb(x,e)),h&&SG(s,n),je(s,10),s.end()}function RG(t,e,i){var s=bs(),r=(t||{}).Workbook||{},n=r.Sheets||[],o=r.WBProps||{},a=i.biff==8,l=i.biff==5;if(je(s,2057,ov(t,5,i)),i.bookType=="xla"&&je(s,135),je(s,225,a?ir(1200):null),je(s,193,JI(2)),l&&je(s,191),l&&je(s,192),je(s,226),je(s,92,lO("SheetJS",i)),je(s,66,ir(a?1200:1252)),a&&je(s,353,ir(0)),a&&je(s,448),je(s,317,DO(t.SheetNames.length)),a&&t.vbaraw&&je(s,211),a&&t.vbaraw){var h=o.CodeName||"ThisWorkbook";je(s,442,kb(h,i))}je(s,156,ir(17)),je(s,25,os(!1)),je(s,18,os(!1)),je(s,19,ir(0)),a&&je(s,431,os(!1)),a&&je(s,444,ir(0)),je(s,61,dO(i)),je(s,64,os(!1)),je(s,141,ir(0)),je(s,34,os(I2(t)=="true")),je(s,14,os(!0)),a&&je(s,439,os(!1)),je(s,218,ir(0)),wG(s,t,i),xG(s,t.SSF,i),EG(s,i),a&&je(s,352,os(!1));var c=s.end(),d=bs();a&&je(d,140,TO()),a&&i.Strings&&fG(d,252,cO(i.Strings,i)),je(d,10);var p=d.end(),u=bs(),m=0,f=0;for(f=0;f<t.SheetNames.length;++f)m+=(a?12:11)+(a?2:1)*t.SheetNames[f].length;var g=c.length+m+p.length;for(f=0;f<t.SheetNames.length;++f){var y=n[f]||{};je(u,133,hO({pos:g,hs:y.Hidden||0,dt:0,name:t.SheetNames[f]},i)),g+=e[f].length}var x=u.end();if(m!=x.length)throw new Error("BS8 "+m+" != "+x.length);var T=[];return c.length&&T.push(c),x.length&&T.push(x),p.length&&T.push(p),Gi(T)}function DG(t,e){var i=e||{},s=[];t&&!t.SSF&&(t.SSF=Ts(si)),t&&t.SSF&&(_p(),bp(t.SSF),i.revssf=Tp(t.SSF),i.revssf[t.SSF[65535]]=0,i.ssf=t.SSF),i.Strings=[],i.Strings.Count=0,i.Strings.Unique=0,uv(i),i.cellXfs=[],Wn(i.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var r=0;r<t.SheetNames.length;++r)s[s.length]=AG(r,i,t);return s.unshift(RG(t,s,i)),Gi(s)}function h_(t,e){for(var i=0;i<=t.SheetNames.length;++i){var s=t.Sheets[t.SheetNames[i]];if(!(!s||!s["!ref"])){var r=Ws(s["!ref"]);r.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[i]+"' extends beyond column IV (255).  Data may be lost.")}}var n=e||{};switch(n.biff||2){case 8:case 5:return DG(t,e);case 4:case 3:case 2:return yG(t,e)}throw new Error("invalid type "+n.bookType+" for BIFF")}function FG(t,e,i,s){for(var r=t["!merges"]||[],n=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,l=0,h=0;h<r.length;++h)if(!(r[h].s.r>i||r[h].s.c>o)&&!(r[h].e.r<i||r[h].e.c<o)){if(r[h].s.r<i||r[h].s.c<o){a=-1;break}a=r[h].e.r-r[h].s.r+1,l=r[h].e.c-r[h].s.c+1;break}if(!(a<0)){var c=Gt({r:i,c:o}),d=s.dense?(t[i]||[])[o]:t[c],p=d&&d.v!=null&&(d.h||oI(d.w||(ln(d),d.w)||""))||"",u={};a>1&&(u.rowspan=a),l>1&&(u.colspan=l),s.editable?p='<span contenteditable="true">'+p+"</span>":d&&(u["data-t"]=d&&d.t||"z",d.v!=null&&(u["data-v"]=d.v),d.z!=null&&(u["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+d.l.Target+'">'+p+"</a>")),u.id=(s.id||"sjs")+"-"+c,n.push(Ue("td",p,u))}}var m="<tr>";return m+n.join("")+"</tr>"}var PG='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',MG="</body></html>";function IG(t,e,i){var s=[];return s.join("")+"<table"+(i&&i.id?' id="'+i.id+'"':"")+">"}function c_(t,e){var i=e||{},s=i.header!=null?i.header:PG,r=i.footer!=null?i.footer:MG,n=[s],o=Ws(t["!ref"]);i.dense=Array.isArray(t),n.push(IG(t,o,i));for(var a=o.s.r;a<=o.e.r;++a)n.push(FG(t,o,a,i));return n.push("</table>"+r),n.join("")}function d_(t,e,i){var s=i||{};Gr!=null&&(s.dense=Gr);var r=0,n=0;if(s.origin!=null)if(typeof s.origin=="number")r=s.origin;else{var o=typeof s.origin=="string"?Fi(s.origin):s.origin;r=o.r,n=o.c}var a=e.getElementsByTagName("tr"),l=Math.min(s.sheetRows||1e7,a.length),h={s:{r:0,c:0},e:{r,c:n}};if(t["!ref"]){var c=Ws(t["!ref"]);h.s.r=Math.min(h.s.r,c.s.r),h.s.c=Math.min(h.s.c,c.s.c),h.e.r=Math.max(h.e.r,c.e.r),h.e.c=Math.max(h.e.c,c.e.c),r==-1&&(h.e.r=r=c.e.r+1)}var d=[],p=0,u=t["!rows"]||(t["!rows"]=[]),m=0,f=0,g=0,y=0,x=0,T=0;for(t["!cols"]||(t["!cols"]=[]);m<a.length&&f<l;++m){var A=a[m];if(WE(A)){if(s.display)continue;u[f]={hidden:!0}}var S=A.children;for(g=y=0;g<S.length;++g){var M=S[g];if(!(s.display&&WE(M))){var B=M.hasAttribute("data-v")?M.getAttribute("data-v"):M.hasAttribute("v")?M.getAttribute("v"):cI(M.innerHTML),j=M.getAttribute("data-z")||M.getAttribute("z");for(p=0;p<d.length;++p){var O=d[p];O.s.c==y+n&&O.s.r<f+r&&f+r<=O.e.r&&(y=O.e.c+1-n,p=-1)}T=+M.getAttribute("colspan")||1,((x=+M.getAttribute("rowspan")||1)>1||T>1)&&d.push({s:{r:f+r,c:y+n},e:{r:f+r+(x||1)-1,c:y+n+(T||1)-1}});var _={t:"s",v:B},P=M.getAttribute("data-t")||M.getAttribute("t")||"";B!=null&&(B.length==0?_.t=P||"z":s.raw||B.trim().length==0||P=="s"||(B==="TRUE"?_={t:"b",v:!0}:B==="FALSE"?_={t:"b",v:!1}:isNaN(nn(B))?isNaN(Pc(B).getDate())||(_={t:"d",v:as(B)},s.cellDates||(_={t:"n",v:_s(_.v)}),_.z=s.dateNF||si[14]):_={t:"n",v:nn(B)})),_.z===void 0&&j!=null&&(_.z=j);var R="",v=M.getElementsByTagName("A");if(v&&v.length)for(var C=0;C<v.length&&!(v[C].hasAttribute("href")&&(R=v[C].getAttribute("href"),R.charAt(0)!="#"));++C);R&&R.charAt(0)!="#"&&(_.l={Target:R}),s.dense?(t[f+r]||(t[f+r]=[]),t[f+r][y+n]=_):t[Gt({c:y+n,r:f+r})]=_,h.e.c<y+n&&(h.e.c=y+n),y+=T}}++f}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),h.e.r=Math.max(h.e.r,f-1+r),t["!ref"]=fi(h),f>=l&&(t["!fullref"]=fi((h.e.r=a.length-m+f-1+r,h))),t}function u_(t,e){var i=e||{},s=i.dense?[]:{};return d_(s,t,e)}function OG(t,e){return qo(u_(t,e),e)}function WE(t){var e="",i=LG(t);return i&&(e=i(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function LG(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var kG=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Mc({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return gi+e}}(),UE=function(){var t=function(n){return Nt(n).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,i=`          <table:covered-table-cell/>
`,s=function(n,o,a){var l=[];l.push('      <table:table table:name="'+Nt(o.SheetNames[a])+`" table:style-name="ta1">
`);var h=0,c=0,d=Ws(n["!ref"]||"A1"),p=n["!merges"]||[],u=0,m=Array.isArray(n);if(n["!cols"])for(c=0;c<=d.e.c;++c)l.push("        <table:table-column"+(n["!cols"][c]?' table:style-name="co'+n["!cols"][c].ods+'"':"")+`></table:table-column>
`);var f="",g=n["!rows"]||[];for(h=0;h<d.s.r;++h)f=g[h]?' table:style-name="ro'+g[h].ods+'"':"",l.push("        <table:table-row"+f+`></table:table-row>
`);for(;h<=d.e.r;++h){for(f=g[h]?' table:style-name="ro'+g[h].ods+'"':"",l.push("        <table:table-row"+f+`>
`),c=0;c<d.s.c;++c)l.push(e);for(;c<=d.e.c;++c){var y=!1,x={},T="";for(u=0;u!=p.length;++u)if(!(p[u].s.c>c)&&!(p[u].s.r>h)&&!(p[u].e.c<c)&&!(p[u].e.r<h)){(p[u].s.c!=c||p[u].s.r!=h)&&(y=!0),x["table:number-columns-spanned"]=p[u].e.c-p[u].s.c+1,x["table:number-rows-spanned"]=p[u].e.r-p[u].s.r+1;break}if(y){l.push(i);continue}var A=Gt({r:h,c}),S=m?(n[h]||[])[c]:n[A];if(S&&S.f&&(x["table:formula"]=Nt(iN(S.f)),S.F&&S.F.slice(0,A.length)==A)){var M=Ws(S.F);x["table:number-matrix-columns-spanned"]=M.e.c-M.s.c+1,x["table:number-matrix-rows-spanned"]=M.e.r-M.s.r+1}if(!S){l.push(e);continue}switch(S.t){case"b":T=S.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=S.v?"true":"false";break;case"n":T=S.w||String(S.v||0),x["office:value-type"]="float",x["office:value"]=S.v||0;break;case"s":case"str":T=S.v==null?"":S.v,x["office:value-type"]="string";break;case"d":T=S.w||as(S.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=as(S.v).toISOString(),x["table:style-name"]="ce1";break;default:l.push(e);continue}var B=t(T);if(S.l&&S.l.Target){var j=S.l.Target;j=j.charAt(0)=="#"?"#"+sN(j.slice(1)):j,j.charAt(0)!="#"&&!j.match(/^\w+:/)&&(j="../"+j),B=Ue("text:a",B,{"xlink:href":j.replace(/&/g,"&amp;")})}l.push("          "+Ue("table:table-cell",Ue("text:p",B,{}),x)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},r=function(n,o){n.push(` <office:automatic-styles>
`),n.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),n.push(`   <number:month number:style="long"/>
`),n.push(`   <number:text>/</number:text>
`),n.push(`   <number:day number:style="long"/>
`),n.push(`   <number:text>/</number:text>
`),n.push(`   <number:year/>
`),n.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var c=0;c<h["!cols"].length;++c)if(h["!cols"][c]){var d=h["!cols"][c];if(d.width==null&&d.wpx==null&&d.wch==null)continue;av(d),d.ods=a;var p=h["!cols"][c].wpx+"px";n.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),n.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),n.push(`  </style:style>
`),++a}}});var l=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var c=0;c<h["!rows"].length;++c)if(h["!rows"][c]){h["!rows"][c].ods=l;var d=h["!rows"][c].hpx+"px";n.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),n.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),n.push(`  </style:style>
`),++l}}}),n.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),n.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),n.push(`  </style:style>
`),n.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),n.push(` </office:automatic-styles>
`)};return function(o,a){var l=[gi],h=Mc({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),c=Mc({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(l.push("<office:document"+h+c+`>
`),l.push(Ab().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+h+`>
`),r(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=o.SheetNames.length;++d)l.push(s(o.Sheets[o.SheetNames[d]],o,d,a));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),a.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function p_(t,e){if(e.bookType=="fods")return UE(t,e);var i=$0(),s="",r=[],n=[];return s="mimetype",mt(i,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",mt(i,s,UE(t,e)),r.push([s,"text/xml"]),n.push([s,"ContentFile"]),s="styles.xml",mt(i,s,kG(t,e)),r.push([s,"text/xml"]),n.push([s,"StylesFile"]),s="meta.xml",mt(i,s,gi+Ab()),r.push([s,"text/xml"]),n.push([s,"MetadataFile"]),s="manifest.rdf",mt(i,s,XI(n)),r.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",mt(i,s,$I(r)),i}function xp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function NG(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):vr(sn(t))}function GG(t,e){e:for(var i=0;i<=t.length-e.length;++i){for(var s=0;s<e.length;++s)if(t[i+s]!=e[s])continue e;return!0}return!1}function Hn(t){var e=t.reduce(function(r,n){return r+n.length},0),i=new Uint8Array(e),s=0;return t.forEach(function(r){i.set(r,s),s+=r.length}),i}function VG(t,e,i){var s=Math.floor(i==0?0:Math.LOG10E*Math.log(Math.abs(i)))+6176-20,r=i/Math.pow(10,s-6176);t[e+15]|=s>>7,t[e+14]|=(s&127)<<1;for(var n=0;r>=1;++n,r/=256)t[e+n]=r&255;t[e+15]|=i>=0?0:128}function Ic(t,e){var i=e?e[0]:0,s=t[i]&127;e:if(t[i++]>=128&&(s|=(t[i]&127)<<7,t[i++]<128||(s|=(t[i]&127)<<14,t[i++]<128)||(s|=(t[i]&127)<<21,t[i++]<128)||(s+=(t[i]&127)*Math.pow(2,28),++i,t[i++]<128)||(s+=(t[i]&127)*Math.pow(2,35),++i,t[i++]<128)||(s+=(t[i]&127)*Math.pow(2,42),++i,t[i++]<128)))break e;return e&&(e[0]=i),s}function Lt(t){var e=new Uint8Array(7);e[0]=t&127;var i=1;e:if(t>127){if(e[i-1]|=128,e[i]=t>>7&127,++i,t<=16383||(e[i-1]|=128,e[i]=t>>14&127,++i,t<=2097151)||(e[i-1]|=128,e[i]=t>>21&127,++i,t<=268435455)||(e[i-1]|=128,e[i]=t/256>>>21&127,++i,t<=34359738367)||(e[i-1]|=128,e[i]=t/65536>>>21&127,++i,t<=4398046511103))break e;e[i-1]|=128,e[i]=t/16777216>>>21&127,++i}return e.slice(0,i)}function El(t){var e=0,i=t[e]&127;e:if(t[e++]>=128){if(i|=(t[e]&127)<<7,t[e++]<128||(i|=(t[e]&127)<<14,t[e++]<128)||(i|=(t[e]&127)<<21,t[e++]<128))break e;i|=(t[e]&127)<<28}return i}function wi(t){for(var e=[],i=[0];i[0]<t.length;){var s=i[0],r=Ic(t,i),n=r&7;r=Math.floor(r/8);var o=0,a;if(r==0)break;switch(n){case 0:{for(var l=i[0];t[i[0]++]>=128;);a=t.slice(l,i[0])}break;case 5:o=4,a=t.slice(i[0],i[0]+o),i[0]+=o;break;case 1:o=8,a=t.slice(i[0],i[0]+o),i[0]+=o;break;case 2:o=Ic(t,i),a=t.slice(i[0],i[0]+o),i[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(n," for Field ").concat(r," at offset ").concat(s))}var h={data:a,type:n};e[r]==null?e[r]=[h]:e[r].push(h)}return e}function ki(t){var e=[];return t.forEach(function(i,s){i.forEach(function(r){r.data&&(e.push(Lt(s*8+r.type)),r.type==2&&e.push(Lt(r.data.length)),e.push(r.data))})}),Hn(e)}function gr(t){for(var e,i=[],s=[0];s[0]<t.length;){var r=Ic(t,s),n=wi(t.slice(s[0],s[0]+r));s[0]+=r;var o={id:El(n[1][0].data),messages:[]};n[2].forEach(function(a){var l=wi(a.data),h=El(l[3][0].data);o.messages.push({meta:l,data:t.slice(s[0],s[0]+h)}),s[0]+=h}),(e=n[3])!=null&&e[0]&&(o.merge=El(n[3][0].data)>>>0>0),i.push(o)}return i}function gl(t){var e=[];return t.forEach(function(i){var s=[];s[1]=[{data:Lt(i.id),type:0}],s[2]=[],i.merge!=null&&(s[3]=[{data:Lt(+!!i.merge),type:0}]);var r=[];i.messages.forEach(function(o){r.push(o.data),o.meta[3]=[{type:0,data:Lt(o.data.length)}],s[2].push({data:ki(o.meta),type:2})});var n=ki(s);e.push(Lt(n.length)),e.push(n),r.forEach(function(o){return e.push(o)})}),Hn(e)}function BG(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var i=[0],s=Ic(e,i),r=[];i[0]<e.length;){var n=e[i[0]]&3;if(n==0){var o=e[i[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[i[0]],a>1&&(o|=e[i[0]+1]<<8),a>2&&(o|=e[i[0]+2]<<16),a>3&&(o|=e[i[0]+3]<<24),o>>>=0,o++,i[0]+=a}r.push(e.slice(i[0],i[0]+o)),i[0]+=o;continue}else{var l=0,h=0;if(n==1?(h=(e[i[0]]>>2&7)+4,l=(e[i[0]++]&224)<<3,l|=e[i[0]++]):(h=(e[i[0]++]>>2)+1,n==2?(l=e[i[0]]|e[i[0]+1]<<8,i[0]+=2):(l=(e[i[0]]|e[i[0]+1]<<8|e[i[0]+2]<<16|e[i[0]+3]<<24)>>>0,i[0]+=4)),r=[Hn(r)],l==0)throw new Error("Invalid offset 0");if(l>r[0].length)throw new Error("Invalid offset beyond length");if(h>=l)for(r.push(r[0].slice(-l)),h-=l;h>=r[r.length-1].length;)r.push(r[r.length-1]),h-=r[r.length-1].length;r.push(r[0].slice(-l,-l+h))}}var c=Hn(r);if(c.length!=s)throw new Error("Unexpected length: ".concat(c.length," != ").concat(s));return c}function mr(t){for(var e=[],i=0;i<t.length;){var s=t[i++],r=t[i]|t[i+1]<<8|t[i+2]<<16;i+=3,e.push(BG(s,t.slice(i,i+r))),i+=r}if(i!==t.length)throw new Error("data is not a valid framed stream!");return Hn(e)}function ml(t){for(var e=[],i=0;i<t.length;){var s=Math.min(t.length-i,268435455),r=new Uint8Array(4);e.push(r);var n=Lt(s),o=n.length;e.push(n),s<=60?(o++,e.push(new Uint8Array([s-1<<2]))):s<=256?(o+=2,e.push(new Uint8Array([240,s-1&255]))):s<=65536?(o+=3,e.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(o+=4,e.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(o+=5,e.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),e.push(t.slice(i,i+s)),o+=s,r[0]=0,r[1]=o&255,r[2]=o>>8&255,r[3]=o>>16&255,i+=s}return Hn(e)}function N0(t,e){var i=new Uint8Array(32),s=xp(i),r=12,n=0;switch(i[0]=5,t.t){case"n":i[1]=2,VG(i,r,t.v),n|=1,r+=16;break;case"b":i[1]=6,s.setFloat64(r,t.v?1:0,!0),n|=2,r+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));i[1]=3,s.setUint32(r,e.indexOf(t.v),!0),n|=8,r+=4;break;default:throw"unsupported cell type "+t.t}return s.setUint32(8,n,!0),i.slice(0,r)}function G0(t,e){var i=new Uint8Array(32),s=xp(i),r=12,n=0;switch(i[0]=3,t.t){case"n":i[2]=2,s.setFloat64(r,t.v,!0),n|=32,r+=8;break;case"b":i[2]=6,s.setFloat64(r,t.v?1:0,!0),n|=32,r+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));i[2]=3,s.setUint32(r,e.indexOf(t.v),!0),n|=16,r+=4;break;default:throw"unsupported cell type "+t.t}return s.setUint32(4,n,!0),i.slice(0,r)}function kn(t){var e=wi(t);return Ic(e[1][0].data)}function HG(t,e,i){var s,r,n,o;if(!((s=t[6])!=null&&s[0])||!((r=t[7])!=null&&r[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(n=t[8])==null?void 0:n[0])==null?void 0:o.data)&&El(t[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var l=0,h=xp(t[7][0].data),c=0,d=[],p=xp(t[4][0].data),u=0,m=[],f=0;f<e.length;++f){if(e[f]==null){h.setUint16(f*2,65535,!0),p.setUint16(f*2,65535);continue}h.setUint16(f*2,c,!0),p.setUint16(f*2,u,!0);var g,y;switch(typeof e[f]){case"string":g=N0({t:"s",v:e[f]},i),y=G0({t:"s",v:e[f]},i);break;case"number":g=N0({t:"n",v:e[f]},i),y=G0({t:"n",v:e[f]},i);break;case"boolean":g=N0({t:"b",v:e[f]},i),y=G0({t:"b",v:e[f]},i);break;default:throw new Error("Unsupported value "+e[f])}d.push(g),c+=g.length,m.push(y),u+=y.length,++l}for(t[2][0].data=Lt(l);f<t[7][0].data.length/2;++f)h.setUint16(f*2,65535,!0),p.setUint16(f*2,65535,!0);return t[6][0].data=Hn(d),t[3][0].data=Hn(m),l}function WG(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var i=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=Ws(i["!ref"]);s.s.r=s.s.c=0;var r=!1;s.e.c>9&&(r=!0,s.e.c=9),s.e.r>49&&(r=!0,s.e.r=49),r&&console.error("The Numbers writer is currently limited to ".concat(fi(s)));var n=Sp(i,{range:s,header:1}),o=["~Sh33tJ5~"];n.forEach(function(z){return z.forEach(function(W){typeof W=="string"&&o.push(W)})});var a={},l=[],h=Wt.read(e.numbers,{type:"base64"});h.FileIndex.map(function(z,W){return[z,h.FullPaths[W]]}).forEach(function(z){var W=z[0],re=z[1];if(W.type==2&&W.name.match(/\.iwa/)){var I=W.content,k=mr(I),N=gr(k);N.forEach(function(q){l.push(q.id),a[q.id]={deps:[],location:re,type:El(q.messages[0].meta[1][0].data)}})}}),l.sort(function(z,W){return z-W});var c=l.filter(function(z){return z>1}).map(function(z){return[z,Lt(z)]});h.FileIndex.map(function(z,W){return[z,h.FullPaths[W]]}).forEach(function(z){var W=z[0],re=z[1];if(W.name.match(/\.iwa/)){var I=gr(mr(W.content));I.forEach(function(k){k.messages.forEach(function(N){c.forEach(function(q){k.messages.some(function(F){return El(F.meta[1][0].data)!=11006&&GG(F.data,q[1])})&&a[q[0]].deps.push(k.id)})})})}});function d(){for(var z=927262;z<2e6;++z)if(!a[z])return z;throw new Error("Too many messages")}for(var p=Wt.find(h,a[1].location),u=gr(mr(p.content)),m,f=0;f<u.length;++f){var g=u[f];g.id==1&&(m=g)}var y=kn(wi(m.messages[0].data)[1][0].data);for(p=Wt.find(h,a[y].location),u=gr(mr(p.content)),f=0;f<u.length;++f)g=u[f],g.id==y&&(m=g);for(y=kn(wi(m.messages[0].data)[2][0].data),p=Wt.find(h,a[y].location),u=gr(mr(p.content)),f=0;f<u.length;++f)g=u[f],g.id==y&&(m=g);for(y=kn(wi(m.messages[0].data)[2][0].data),p=Wt.find(h,a[y].location),u=gr(mr(p.content)),f=0;f<u.length;++f)g=u[f],g.id==y&&(m=g);var x=wi(m.messages[0].data);{x[6][0].data=Lt(s.e.r+1),x[7][0].data=Lt(s.e.c+1);var T=kn(x[46][0].data),A=Wt.find(h,a[T].location),S=gr(mr(A.content));{for(var M=0;M<S.length&&S[M].id!=T;++M);if(S[M].id!=T)throw"Bad ColumnRowUIDMapArchive";var B=wi(S[M].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var j=0;j<=s.e.c;++j){var O=[];O[1]=O[2]=[{type:0,data:Lt(j+420690)}],B[1].push({type:2,data:ki(O)}),B[2].push({type:0,data:Lt(j)}),B[3].push({type:0,data:Lt(j)})}B[4]=[],B[5]=[],B[6]=[];for(var _=0;_<=s.e.r;++_)O=[],O[1]=O[2]=[{type:0,data:Lt(_+726270)}],B[4].push({type:2,data:ki(O)}),B[5].push({type:0,data:Lt(_)}),B[6].push({type:0,data:Lt(_)});S[M].messages[0].data=ki(B)}A.content=ml(gl(S)),A.size=A.content.length,delete x[46];var P=wi(x[4][0].data);{P[7][0].data=Lt(s.e.r+1);var R=wi(P[1][0].data),v=kn(R[2][0].data);A=Wt.find(h,a[v].location),S=gr(mr(A.content));{if(S[0].id!=v)throw"Bad HeaderStorageBucket";var C=wi(S[0].messages[0].data);for(_=0;_<n.length;++_){var D=wi(C[2][0].data);D[1][0].data=Lt(_),D[4][0].data=Lt(n[_].length),C[2][_]={type:C[2][0].type,data:ki(D)}}S[0].messages[0].data=ki(C)}A.content=ml(gl(S)),A.size=A.content.length;var E=kn(P[2][0].data);A=Wt.find(h,a[E].location),S=gr(mr(A.content));{if(S[0].id!=E)throw"Bad HeaderStorageBucket";for(C=wi(S[0].messages[0].data),j=0;j<=s.e.c;++j)D=wi(C[2][0].data),D[1][0].data=Lt(j),D[4][0].data=Lt(s.e.r+1),C[2][j]={type:C[2][0].type,data:ki(D)};S[0].messages[0].data=ki(C)}A.content=ml(gl(S)),A.size=A.content.length;var L=kn(P[4][0].data);(function(){for(var z=Wt.find(h,a[L].location),W=gr(mr(z.content)),re,I=0;I<W.length;++I){var k=W[I];k.id==L&&(re=k)}var N=wi(re.messages[0].data);{N[3]=[];var q=[];o.forEach(function(U,X){q[1]=[{type:0,data:Lt(X)}],q[2]=[{type:0,data:Lt(1)}],q[3]=[{type:2,data:NG(U)}],N[3].push({type:2,data:ki(q)})})}re.messages[0].data=ki(N);var F=gl(W),H=ml(F);z.content=H,z.size=z.content.length})();var G=wi(P[3][0].data);{var Y=G[1][0];delete G[2];var J=wi(Y.data);{var de=kn(J[2][0].data);(function(){for(var z=Wt.find(h,a[de].location),W=gr(mr(z.content)),re,I=0;I<W.length;++I){var k=W[I];k.id==de&&(re=k)}var N=wi(re.messages[0].data);{delete N[6],delete G[7];var q=new Uint8Array(N[5][0].data);N[5]=[];for(var F=0,H=0;H<=s.e.r;++H){var U=wi(q);F+=HG(U,n[H],o),U[1][0].data=Lt(H),N[5].push({data:ki(U),type:2})}N[1]=[{type:0,data:Lt(s.e.c+1)}],N[2]=[{type:0,data:Lt(s.e.r+1)}],N[3]=[{type:0,data:Lt(F)}],N[4]=[{type:0,data:Lt(s.e.r+1)}]}re.messages[0].data=ki(N);var X=gl(W),Z=ml(X);z.content=Z,z.size=z.content.length})()}Y.data=ki(J)}P[3][0].data=ki(G)}x[4][0].data=ki(P)}m.messages[0].data=ki(x);var b=gl(u),K=ml(b);return p.content=K,p.size=p.content.length,h}function UG(t){return function(i){for(var s=0;s!=t.length;++s){var r=t[s];i[r[0]]===void 0&&(i[r[0]]=r[1]),r[2]==="n"&&(i[r[0]]=Number(i[r[0]]))}}}function uv(t){UG([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function zG(t,e){return e.bookType=="ods"?p_(t,e):e.bookType=="numbers"?WG(t,e):e.bookType=="xlsb"?jG(t,e):$G(t,e)}function jG(t,e){Cl=1024,t&&!t.SSF&&(t.SSF=Ts(si)),t&&t.SSF&&(_p(),bp(t.SSF),e.revssf=Tp(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Ac?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var i=e.bookType=="xlsb"?"bin":"xml",s=Yb.indexOf(e.bookType)>-1,r=bb();uv(e=e||{});var n=$0(),o="",a=0;if(e.cellXfs=[],Wn(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",mt(n,o,Rb(t.Props,e)),r.coreprops.push(o),kt(e.rels,2,o,Tt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&l.push(t.SheetNames[h]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,mt(n,o,Fb(t.Props,e)),r.extprops.push(o),kt(e.rels,3,o,Tt.EXT_PROPS),t.Custprops!==t.Props&&Hi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",mt(n,o,Pb(t.Custprops,e)),r.custprops.push(o),kt(e.rels,4,o,Tt.CUST_PROPS)),a=1;a<=t.SheetNames.length;++a){var c={"!id":{}},d=t.Sheets[t.SheetNames[a-1]],p=(d||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+a+"."+i,mt(n,o,X2(a-1,o,e,t,c)),r.sheets.push(o),kt(e.wbrels,-1,"worksheets/sheet"+a+"."+i,Tt.WS[0])}if(d){var u=d["!comments"],m=!1,f="";u&&u.length>0&&(f="xl/comments"+a+"."+i,mt(n,f,Z2(u,f,e)),r.comments.push(f),kt(c,-1,"../comments"+a+"."+i,Tt.CMNT),m=!0),d["!legacy"]&&m&&mt(n,"xl/drawings/vmlDrawing"+a+".vml",Kb(a,d["!comments"])),delete d["!comments"],delete d["!legacy"]}c["!id"].rId1&&mt(n,Tb(o),xl(c))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+i,mt(n,o,q2(e.Strings,o,e)),r.strs.push(o),kt(e.wbrels,-1,"sharedStrings."+i,Tt.SST)),o="xl/workbook."+i,mt(n,o,K2(t,o,e)),r.workbooks.push(o),kt(e.rels,1,o,Tt.WB),o="xl/theme/theme1.xml",mt(n,o,jb(t.Themes,e)),r.themes.push(o),kt(e.wbrels,-1,"theme/theme1.xml",Tt.THEME),o="xl/styles."+i,mt(n,o,Y2(t,o,e)),r.styles.push(o),kt(e.wbrels,-1,"styles."+i,Tt.STY),t.vbaraw&&s&&(o="xl/vbaProject.bin",mt(n,o,t.vbaraw),r.vba.push(o),kt(e.wbrels,-1,"vbaProject.bin",Tt.VBA)),o="xl/metadata."+i,mt(n,o,Q2(o)),r.metadata.push(o),kt(e.wbrels,-1,"metadata."+i,Tt.XLMETA),mt(n,"[Content_Types].xml",_b(r,e)),mt(n,"_rels/.rels",xl(e.rels)),mt(n,"xl/_rels/workbook."+i+".rels",xl(e.wbrels)),delete e.revssf,delete e.ssf,n}function $G(t,e){Cl=1024,t&&!t.SSF&&(t.SSF=Ts(si)),t&&t.SSF&&(_p(),bp(t.SSF),e.revssf=Tp(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Ac?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var i="xml",s=Yb.indexOf(e.bookType)>-1,r=bb();uv(e=e||{});var n=$0(),o="",a=0;if(e.cellXfs=[],Wn(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",mt(n,o,Rb(t.Props,e)),r.coreprops.push(o),kt(e.rels,2,o,Tt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&l.push(t.SheetNames[h]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,mt(n,o,Fb(t.Props,e)),r.extprops.push(o),kt(e.rels,3,o,Tt.EXT_PROPS),t.Custprops!==t.Props&&Hi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",mt(n,o,Pb(t.Custprops,e)),r.custprops.push(o),kt(e.rels,4,o,Tt.CUST_PROPS));var c=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var d={"!id":{}},p=t.Sheets[t.SheetNames[a-1]],u=(p||{})["!type"]||"sheet";switch(u){case"chart":default:o="xl/worksheets/sheet"+a+"."+i,mt(n,o,r_(a-1,e,t,d)),r.sheets.push(o),kt(e.wbrels,-1,"worksheets/sheet"+a+"."+i,Tt.WS[0])}if(p){var m=p["!comments"],f=!1,g="";if(m&&m.length>0){var y=!1;m.forEach(function(x){x[1].forEach(function(T){T.T==!0&&(y=!0)})}),y&&(g="xl/threadedComments/threadedComment"+a+"."+i,mt(n,g,EL(m,c,e)),r.threadedcomments.push(g),kt(d,-1,"../threadedComments/threadedComment"+a+"."+i,Tt.TCMNT)),g="xl/comments"+a+"."+i,mt(n,g,Xb(m,e)),r.comments.push(g),kt(d,-1,"../comments"+a+"."+i,Tt.CMNT),f=!0}p["!legacy"]&&f&&mt(n,"xl/drawings/vmlDrawing"+a+".vml",Kb(a,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&mt(n,Tb(o),xl(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+i,mt(n,o,Vb(e.Strings,e)),r.strs.push(o),kt(e.wbrels,-1,"sharedStrings."+i,Tt.SST)),o="xl/workbook."+i,mt(n,o,a_(t,e)),r.workbooks.push(o),kt(e.rels,1,o,Tt.WB),o="xl/theme/theme1.xml",mt(n,o,jb(t.Themes,e)),r.themes.push(o),kt(e.wbrels,-1,"theme/theme1.xml",Tt.THEME),o="xl/styles."+i,mt(n,o,Ub(t,e)),r.styles.push(o),kt(e.wbrels,-1,"styles."+i,Tt.STY),t.vbaraw&&s&&(o="xl/vbaProject.bin",mt(n,o,t.vbaraw),r.vba.push(o),kt(e.wbrels,-1,"vbaProject.bin",Tt.VBA)),o="xl/metadata."+i,mt(n,o,$b()),r.metadata.push(o),kt(e.wbrels,-1,"metadata."+i,Tt.XLMETA),c.length>1&&(o="xl/persons/person.xml",mt(n,o,bL(c,e)),r.people.push(o),kt(e.wbrels,-1,"persons/person.xml",Tt.PEOPLE)),mt(n,"[Content_Types].xml",_b(r,e)),mt(n,"_rels/.rels",xl(e.rels)),mt(n,"xl/_rels/workbook."+i+".rels",xl(e.wbrels)),delete e.revssf,delete e.ssf,n}function KG(t,e){var i="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":i=an(t.slice(0,12));break;case"binary":i=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3),i.charCodeAt(4),i.charCodeAt(5),i.charCodeAt(6),i.charCodeAt(7)]}function f_(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return kc(e.file,Wt.write(t,{type:Rt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Wt.write(t,e)}function XG(t,e){var i=Ts(e||{}),s=zG(t,i);return YG(s,i)}function YG(t,e){var i={},s=Rt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(i.compression="DEFLATE"),e.password)i.type=s;else switch(e.type){case"base64":i.type="base64";break;case"binary":i.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":i.type=s;break;default:throw new Error("Unrecognized type "+e.type)}var r=t.FullPaths?Wt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[i.type]||i.type,compression:!!e.compression}):t.generate(i);if(typeof Deno<"u"&&typeof r=="string"){if(e.type=="binary"||e.type=="base64")return r;r=new Uint8Array(Ep(r))}return e.password&&typeof encrypt_agile<"u"?f_(encrypt_agile(r,e.password),e):e.type==="file"?kc(e.file,r):e.type=="string"?Ec(r):r}function qG(t,e){var i=e||{},s=uG(t,i);return f_(s,i)}function Nr(t,e,i){i||(i="");var s=i+t;switch(e.type){case"base64":return Fc(sn(s));case"binary":return sn(s);case"string":return t;case"file":return kc(e.file,s,"utf8");case"buffer":return Rt?hn(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):Nr(s,{type:"binary"}).split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function ZG(t,e){switch(e.type){case"base64":return Fc(t);case"binary":return t;case"string":return t;case"file":return kc(e.file,t,"binary");case"buffer":return Rt?hn(t,"binary"):t.split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function hp(t,e){switch(e.type){case"string":case"base64":case"binary":for(var i="",s=0;s<t.length;++s)i+=String.fromCharCode(t[s]);return e.type=="base64"?Fc(i):e.type=="string"?Ec(i):i;case"file":return kc(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function g_(t,e){EM(),k2(t);var i=Ts(e||{});if(i.cellStyles&&(i.cellNF=!0,i.sheetStubs=!0),i.type=="array"){i.type="binary";var s=g_(t,i);return i.type="array",Ep(s)}var r=0;if(i.sheet&&(typeof i.sheet=="number"?r=i.sheet:r=t.SheetNames.indexOf(i.sheet),!t.SheetNames[r]))throw new Error("Sheet not found: "+i.sheet+" : "+typeof i.sheet);switch(i.bookType||"xlsb"){case"xml":case"xlml":return Nr(cG(t,i),i);case"slk":case"sylk":return Nr(IO.from_sheet(t.Sheets[t.SheetNames[r]],i),i);case"htm":case"html":return Nr(c_(t.Sheets[t.SheetNames[r]],i),i);case"txt":return ZG(v_(t.Sheets[t.SheetNames[r]],i),i);case"csv":return Nr(pv(t.Sheets[t.SheetNames[r]],i),i,"\uFEFF");case"dif":return Nr(OO.from_sheet(t.Sheets[t.SheetNames[r]],i),i);case"dbf":return hp(MO.from_sheet(t.Sheets[t.SheetNames[r]],i),i);case"prn":return Nr(LO.from_sheet(t.Sheets[t.SheetNames[r]],i),i);case"rtf":return Nr(WO.from_sheet(t.Sheets[t.SheetNames[r]],i),i);case"eth":return Nr(Gb.from_sheet(t.Sheets[t.SheetNames[r]],i),i);case"fods":return Nr(p_(t,i),i);case"wk1":return hp(kE.sheet_to_wk1(t.Sheets[t.SheetNames[r]],i),i);case"wk3":return hp(kE.book_to_wk3(t,i),i);case"biff2":i.biff||(i.biff=2);case"biff3":i.biff||(i.biff=3);case"biff4":return i.biff||(i.biff=4),hp(h_(t,i),i);case"biff5":i.biff||(i.biff=5);case"biff8":case"xla":case"xls":return i.biff||(i.biff=8),qG(t,i);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return XG(t,i);default:throw new Error("Unrecognized bookType |"+i.bookType+"|")}}function QG(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},i=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();i.match(/^\.[a-z]+$/)&&(t.bookType=i.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function m_(t,e,i){var s=i||{};return s.type="file",s.file=e,QG(s),g_(t,s)}function JG(t,e,i,s,r,n,o,a){var l=Bi(i),h=a.defval,c=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),d=!0,p=r===1?[]:{};if(r!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:i,enumerable:!1})}catch{p.__rowNum__=i}else p.__rowNum__=i;if(!o||t[i])for(var u=e.s.c;u<=e.e.c;++u){var m=o?t[i][u]:t[s[u]+l];if(m===void 0||m.t===void 0){if(h===void 0)continue;n[u]!=null&&(p[n[u]]=h);continue}var f=m.v;switch(m.t){case"z":if(f==null)break;continue;case"e":f=f==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(n[u]!=null){if(f==null)if(m.t=="e"&&f===null)p[n[u]]=null;else if(h!==void 0)p[n[u]]=h;else if(c&&f===null)p[n[u]]=null;else continue;else p[n[u]]=c&&(m.t!=="n"||m.t==="n"&&a.rawNumbers!==!1)?f:ln(m,f,a);f!=null&&(d=!1)}}return{row:p,isempty:d}}function Sp(t,e){if(t==null||t["!ref"]==null)return[];var i={t:"n",v:0},s=0,r=1,n=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},h=e||{},c=h.range!=null?h.range:t["!ref"];switch(h.header===1?s=1:h.header==="A"?s=2:Array.isArray(h.header)?s=3:h.header==null&&(s=0),typeof c){case"string":l=Xt(c);break;case"number":l=Xt(t["!ref"]),l.s.r=c;break;default:l=c}s>0&&(r=0);var d=Bi(l.s.r),p=[],u=[],m=0,f=0,g=Array.isArray(t),y=l.s.r,x=0,T={};g&&!t[y]&&(t[y]=[]);var A=h.skipHidden&&t["!cols"]||[],S=h.skipHidden&&t["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(A[x]||{}).hidden)switch(p[x]=$i(x),i=g?t[y][x]:t[p[x]+d],s){case 1:n[x]=x-l.s.c;break;case 2:n[x]=p[x];break;case 3:n[x]=h.header[x-l.s.c];break;default:if(i==null&&(i={w:"__EMPTY",t:"s"}),a=o=ln(i,null,h),f=T[o]||0,!f)T[o]=1;else{do a=o+"_"+f++;while(T[a]);T[o]=f,T[a]=1}n[x]=a}for(y=l.s.r+r;y<=l.e.r;++y)if(!(S[y]||{}).hidden){var M=JG(t,l,y,p,s,n,g,h);(M.isempty===!1||(s===1?h.blankrows!==!1:h.blankrows))&&(u[m++]=M.row)}return u.length=m,u}var zE=/"/g;function eV(t,e,i,s,r,n,o,a){for(var l=!0,h=[],c="",d=Bi(i),p=e.s.c;p<=e.e.c;++p)if(s[p]){var u=a.dense?(t[i]||[])[p]:t[s[p]+d];if(u==null)c="";else if(u.v!=null){l=!1,c=""+(a.rawNumbers&&u.t=="n"?u.v:ln(u,null,a));for(var m=0,f=0;m!==c.length;++m)if((f=c.charCodeAt(m))===r||f===n||f===34||a.forceQuotes){c='"'+c.replace(zE,'""')+'"';break}c=="ID"&&(c='"ID"')}else u.f!=null&&!u.F?(l=!1,c="="+u.f,c.indexOf(",")>=0&&(c='"'+c.replace(zE,'""')+'"')):c="";h.push(c)}return a.blankrows===!1&&l?null:h.join(o)}function pv(t,e){var i=[],s=e??{};if(t==null||t["!ref"]==null)return"";var r=Xt(t["!ref"]),n=s.FS!==void 0?s.FS:",",o=n.charCodeAt(0),a=s.RS!==void 0?s.RS:`
`,l=a.charCodeAt(0),h=new RegExp((n=="|"?"\\|":n)+"+$"),c="",d=[];s.dense=Array.isArray(t);for(var p=s.skipHidden&&t["!cols"]||[],u=s.skipHidden&&t["!rows"]||[],m=r.s.c;m<=r.e.c;++m)(p[m]||{}).hidden||(d[m]=$i(m));for(var f=0,g=r.s.r;g<=r.e.r;++g)(u[g]||{}).hidden||(c=eV(t,r,g,d,o,l,n,s),c!=null&&(s.strip&&(c=c.replace(h,"")),(c||s.blankrows!==!1)&&i.push((f++?a:"")+c)));return delete s.dense,i.join("")}function v_(t,e){e||(e={}),e.FS="	",e.RS=`
`;var i=pv(t,e);if(typeof Ut>"u"||e.type=="string")return i;var s=Ut.utils.encode(1200,i,"str");return"\xFF\xFE"+s}function tV(t){var e="",i,s="";if(t==null||t["!ref"]==null)return[];var r=Xt(t["!ref"]),n="",o=[],a,l=[],h=Array.isArray(t);for(a=r.s.c;a<=r.e.c;++a)o[a]=$i(a);for(var c=r.s.r;c<=r.e.r;++c)for(n=Bi(c),a=r.s.c;a<=r.e.c;++a)if(e=o[a]+n,i=h?(t[c]||[])[a]:t[e],s="",i!==void 0){if(i.F!=null){if(e=i.F,!i.f)continue;s=i.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(i.f!=null)s=i.f;else{if(i.t=="z")continue;if(i.t=="n"&&i.v!=null)s=""+i.v;else if(i.t=="b")s=i.v?"TRUE":"FALSE";else if(i.w!==void 0)s="'"+i.w;else{if(i.v===void 0)continue;i.t=="s"?s="'"+i.v:s=""+i.v}}l[l.length]=e+"="+s}return l}function C_(t,e,i){var s=i||{},r=+!s.skipHeader,n=t||{},o=0,a=0;if(n&&s.origin!=null)if(typeof s.origin=="number")o=s.origin;else{var l=typeof s.origin=="string"?Fi(s.origin):s.origin;o=l.r,a=l.c}var h,c={s:{c:0,r:0},e:{c:a,r:o+e.length-1+r}};if(n["!ref"]){var d=Xt(n["!ref"]);c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),o==-1&&(o=d.e.r+1,c.e.r=o+e.length-1+r)}else o==-1&&(o=0,c.e.r=e.length-1+r);var p=s.header||[],u=0;e.forEach(function(f,g){Hi(f).forEach(function(y){(u=p.indexOf(y))==-1&&(p[u=p.length]=y);var x=f[y],T="z",A="",S=Gt({c:a+u,r:o+g+r});h=Oc(n,S),x&&typeof x=="object"&&!(x instanceof Date)?n[S]=x:(typeof x=="number"?T="n":typeof x=="boolean"?T="b":typeof x=="string"?T="s":x instanceof Date?(T="d",s.cellDates||(T="n",x=_s(x)),A=s.dateNF||si[14]):x===null&&s.nullError&&(T="e",x=0),h?(h.t=T,h.v=x,delete h.w,delete h.R,A&&(h.z=A)):n[S]=h={t:T,v:x},A&&(h.z=A))})}),c.e.c=Math.max(c.e.c,a+p.length-1);var m=Bi(o);if(r)for(u=0;u<p.length;++u)n[$i(u+a)+m]={t:"s",v:p[u]};return n["!ref"]=fi(c),n}function iV(t,e){return C_(null,t,e)}function Oc(t,e,i){if(typeof e=="string"){if(Array.isArray(t)){var s=Fi(e);return t[s.r]||(t[s.r]=[]),t[s.r][s.c]||(t[s.r][s.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Oc(t,Gt(e)):Oc(t,Gt({r:e,c:i||0}))}function sV(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var i=t.SheetNames.indexOf(e);if(i>-1)return i;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function rV(){return{SheetNames:[],Sheets:{}}}function nV(t,e,i,s){var r=1;if(!i)for(;r<=65535&&t.SheetNames.indexOf(i="Sheet"+r)!=-1;++r,i=void 0);if(!i||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&t.SheetNames.indexOf(i)>=0){var n=i.match(/(^.*?)(\d+)$/);r=n&&+n[2]||0;var o=n&&n[1]||i;for(++r;r<=65535&&t.SheetNames.indexOf(i=o+r)!=-1;++r);}if(o_(i),t.SheetNames.indexOf(i)>=0)throw new Error("Worksheet with name |"+i+"| already exists!");return t.SheetNames.push(i),t.Sheets[i]=e,i}function oV(t,e,i){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var s=sV(t,e);switch(t.Workbook.Sheets[s]||(t.Workbook.Sheets[s]={}),i){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+i)}t.Workbook.Sheets[s].Hidden=i}function aV(t,e){return t.z=e,t}function y_(t,e,i){return e?(t.l={Target:e},i&&(t.l.Tooltip=i)):delete t.l,t}function lV(t,e,i){return y_(t,"#"+e,i)}function hV(t,e,i){t.c||(t.c=[]),t.c.push({t:e,a:i||"SheetJS"})}function cV(t,e,i,s){for(var r=typeof e!="string"?e:Xt(e),n=typeof e=="string"?e:fi(e),o=r.s.r;o<=r.e.r;++o)for(var a=r.s.c;a<=r.e.c;++a){var l=Oc(t,o,a);l.t="n",l.F=n,delete l.v,o==r.s.r&&a==r.s.c&&(l.f=i,s&&(l.D=!0))}return t}var Mp={encode_col:$i,encode_row:Bi,encode_cell:Gt,encode_range:fi,decode_col:iv,decode_row:tv,split_cell:_I,decode_cell:Fi,decode_range:Ws,format_cell:ln,sheet_add_aoa:Cb,sheet_add_json:C_,sheet_add_dom:d_,aoa_to_sheet:Rl,json_to_sheet:iV,table_to_sheet:u_,table_to_book:OG,sheet_to_csv:pv,sheet_to_txt:v_,sheet_to_json:Sp,sheet_to_html:c_,sheet_to_formulae:tV,sheet_to_row_object_array:Sp,sheet_get_cell:Oc,book_new:rV,book_append_sheet:nV,book_set_sheet_visibility:oV,cell_set_number_format:aV,cell_set_hyperlink:y_,cell_set_internal_link:lV,cell_add_comment:hV,sheet_set_array_formula:cV,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};var zz=Rc.version;var uV=["agGrid"];function pV(t,e){if(t&1&&(Jt(0,"div",17),Fs(1,"highcharts-chart",18),ei()),t&2){let i=na();qi(),us("Highcharts",i.Highcharts)("options",i.chartOptions1)}}function fV(t,e){if(t&1&&(Jt(0,"div",17),Fs(1,"highcharts-chart",18),ei()),t&2){let i=na();qi(),us("Highcharts",i.Highcharts)("options",i.chartOptions2)}}function gV(t,e){if(t&1&&(Jt(0,"div",17),Fs(1,"highcharts-chart",18),ei()),t&2){let i=na();qi(),us("Highcharts",i.Highcharts)("options",i.chartOptions3)}}var x_=(()=>{let e=class e{constructor(s,r){this.alphaVantageService=s,this.dialog=r,this.Highcharts=w_.default,this.chartOptions1=null,this.chartOptions2=null,this.chartOptions3=null,this.gridOptions={columnDefs:[{headerName:"Date",field:"date",flex:1,filter:"agDateColumnFilter",filterParams:{comparator:(n,o)=>{let a=new Date(o),l=new Date(n);return a.getTime()<l.getTime()?-1:a.getTime()>l.getTime()?1:0},suppressAndOrCondition:!0,browserDatePicker:!0,minValidYear:1900,inRangeInclusive:!0},valueFormatter:n=>tS(n.value),headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0},{headerName:"AAPL",field:"AAPL",flex:1,filter:"agNumberColumnFilter",filterParams:{suppressAndOrCondition:!0}},{headerName:"MSFT",field:"MSFT",flex:1,filter:"agNumberColumnFilter",filterParams:{suppressAndOrCondition:!0}},{headerName:"GOOGL",field:"GOOGL",flex:1,filter:"agNumberColumnFilter",filterParams:{suppressAndOrCondition:!0}}],defaultColDef:{flex:1,minWidth:100},rowSelection:"multiple",suppressRowClickSelection:!0},this.rowData=[]}ngOnInit(){let s=["AAPL","MSFT","GOOGL"];this.alphaVantageService.getMultipleTimeSeries(s).subscribe(r=>{let n=[];Object.keys(r[0]).slice(0,10).forEach(a=>{let l={date:`${new Date(a).toISOString().split("T")[0]} 00:00:00`};s.forEach((h,c)=>{l[h]=parseFloat(r[c][a]["4. close"])}),n.push(l)}),this.rowData=n,this.agGrid.api.setRowData(this.rowData),this.updateChartOptions(r)})}get isAnyRowSelected(){return!!this.agGrid?.api.getSelectedRows().length}updateChartOptions(s){let r=["AAPL","MSFT","GOOGL"];s.forEach((n,o)=>{let l={series:[{type:"line",data:Nu(n),name:r[o],events:{click:h=>this.onPointClick(h)}}],title:{text:`${r[o]} Stock Price`},xAxis:{type:"datetime"},yAxis:{title:{text:"Price"}}};o===0?this.chartOptions1=l:o===1?this.chartOptions2=l:o===2&&(this.chartOptions3=l)})}onPointClick(s){let r=new Date(s.point.x).toISOString().split("T")[0];this.agGrid.api.setFilterModel({date:{type:"equals",dateFrom:r}}),this.agGrid.api.onFilterChanged()}openModal(){this.dialog.open(rE,{width:"600px",data:{}})}exportSelectedRowsToExcel(){let r=this.agGrid.api.getSelectedNodes().map(a=>a.data),n=Mp.json_to_sheet(r),o=Mp.book_new();Mp.book_append_sheet(o,n,"SelectedRows"),m_(o,"selected_rows.xlsx")}};e.\u0275fac=function(r){return new(r||e)(st(In),st(E0))},e.\u0275cmp=Yi({type:e,selectors:[["app-root"]],viewQuery:function(r,n){if(r&1&&Gl(uV,5),r&2){let o;oa(o=aa())&&(n.agGrid=o.first)}},standalone:!0,features:[Ps([In]),Ms],decls:28,vars:6,consts:[["agGrid",""],[1,"container","pt-4"],[1,"text-center","d-flex","justify-content-center","align-items-center","gap-3"],[1,"border-end","border-2","p-3"],["src","https://wsiz.edu.pl/wp-content/uploads/2020/10/logo_wsiiz-2.svg","alt","Wy\u017Csza Szko\u0142a Informatyki i Zarz\u0105dzania"],[1,"text-white"],[1,"container"],[1,"container","my-4"],[1,"row"],[1,"col","d-flex","flex-row","justify-content-between","align-items-center"],[1,"btn","btn-secondary","me-2",3,"click","disabled"],[1,"btn","btn-primary",3,"click"],[1,"row","my-4"],[1,"col"],["class","bg-light border rounded text-center py-5",4,"ngIf"],[1,"col","ag-theme-alpine"],[1,"ag-theme-alpine",2,"width","100%","height","100%",3,"rowData","gridOptions"],[1,"bg-light","border","rounded","text-center","py-5"],[2,"width","100%","height","200px","display","block",3,"Highcharts","options"]],template:function(r,n){if(r&1){let o=Fv();Jt(0,"div",1)(1,"div",2)(2,"div",3),Fs(3,"img",4),ei(),Jt(4,"div",5),Ur(5,"w66952 | Pawe\u0142 Pyra | 6IIZ/2021 TIM-SP02"),ei()()(),Fs(6,"div",6),Jt(7,"div",7)(8,"div",8)(9,"div",9)(10,"h1",5),Ur(11,"Panel Gie\u0142dowy"),ei(),Jt(12,"div")(13,"button",10),Sr("click",function(){return jp(o),$p(n.exportSelectedRowsToExcel())}),Ur(14," Export Selected Rows to Excel "),ei(),Jt(15,"button",11),Sr("click",function(){return jp(o),$p(n.openModal())}),Ur(16,"Open Stock Finder"),ei()()()(),Jt(17,"div",12)(18,"div",13),xr(19,pV,2,2,"div",14),ei(),Jt(20,"div",13),xr(21,fV,2,2,"div",14),ei(),Jt(22,"div",13),xr(23,gV,2,2,"div",14),ei()(),Jt(24,"div",8)(25,"div",15),Fs(26,"ag-grid-angular",16,0),ei()()()}r&2&&(qi(13),us("disabled",!n.isAnyRowSelected),qi(6),us("ngIf",n.chartOptions1),qi(2),us("ngIf",n.chartOptions2),qi(2),us("ngIf",n.chartOptions3),qi(3),us("rowData",n.rowData)("gridOptions",n.gridOptions))},dependencies:[ef,ed,Zx,$v,Lu,Ou],styles:[".highcharts-figure[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:360px;max-width:800px;margin:1em auto}.highcharts-data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Verdana,sans-serif;border-collapse:collapse;border:1px solid #ebebeb;margin:10px auto;text-align:center;width:100%;max-width:500px}.highcharts-data-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{padding:1em 0;font-size:1.2em;color:#555}.highcharts-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;padding:.5em}.highcharts-data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{padding:.5em}.highcharts-data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f8f8}.highcharts-data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f1f7ff}.ag-theme-alpine[_ngcontent-%COMP%]{height:220px;width:100%}.ag-theme-alpine[_ngcontent-%COMP%]   .ag-center-cols-container[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:auto}"]});let t=e;return t})();eC(x_,VC).catch(t=>console.error(t));
